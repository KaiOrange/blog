<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>åŸºäºElectronçš„touchbarå¼€å‘</title>
      <link href="/2019/09/21/%E5%9F%BA%E4%BA%8EElectron%E7%9A%84touchbar%E5%BC%80%E5%8F%91/"/>
      <url>/2019/09/21/%E5%9F%BA%E4%BA%8EElectron%E7%9A%84touchbar%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p><a href="https://electronjs.org/" target="_blank" rel="noopener">Electron</a>æ˜¯<code>ä½¿ç”¨ JavaScript, HTML å’Œ CSS æ„å»ºè·¨å¹³å°çš„æ¡Œé¢åº”ç”¨</code>çš„ä¸€ä¸ªæ¡†æ¶ï¼Œæœ¬äººä¹‹å‰å†™çš„ä¸€ä¸ªæ”¾çƒŸèŠ±çš„ç¨‹åº<a href="https://github.com/KaiOrange/fireworks-cool" target="_blank" rel="noopener">fireworks-cool</a>å°±æ˜¯åŸºäºè¿™å¥—æ¡†æ¶æ¥åšçš„ã€‚electronåœ¨è·¨å¹³å°åº”ç”¨æ–¹é¢åšçš„è¿˜æ˜¯æŒºå¥½çš„ï¼Œè‘—åçš„ç¼–è¾‘å™¨<code>VS Code</code>ä¸<code>Atom</code>éƒ½æ˜¯ä½¿ç”¨<code>Electron</code>æ¥å¼€å‘çš„ã€‚æœ‰äº†<code>Node</code>ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå¯ä»¥ç›´æ¥å¹²åç«¯çš„äº‹äº†ï¼›æœ‰äº†<code>Electron</code>ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå¯ä»¥ç›´æ¥å¹²æ¡Œé¢åº”ç”¨å·¥ç¨‹å¸ˆçš„äº‹äº†ã€‚æ˜¨å¤©ç ”ç©¶è¿™ä¸ª<code>touchbar</code>ï¼ŒçœŸå¿ƒæ„Ÿè§‰åˆ°äº†<code>JavaScript</code>çš„æ— æ‰€ä¸èƒ½å±æ€§ï¼Œæ˜å¤©æˆ‘ä»¬å¼€å‘ä¸€ä¸ªæ“ä½œç³»ç»ŸğŸ˜Šã€‚<br>å¹äº†è¿™ä¹ˆå¤š<code>Electron</code>ï¼Œæˆ‘ä»¬å†è¯´è¯´<code>touchbar</code>å§ã€‚æˆ‘è§‰å¾—<code>touchbar</code>æ˜¯<code>Mac</code>ä¸Šä¸€ä¸ªé¸¡è‚‹çš„åŠŸèƒ½ï¼Œæˆ‘åœ¨ä½¿ç”¨<code>Mac</code>çš„æ—¶å€™å¾ˆå°‘å»å…³æ³¨<code>touchbar</code>ã€‚æ˜¨å¤©å¿½ç„¶æƒ³åˆ°<code>Electron</code>å¯ä»¥å¼€å‘æ¡Œé¢åº”ç”¨ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥åš<code>touchbar</code>ç›¸å…³çš„åŠŸèƒ½å‘¢ï¼Ÿäºæ˜¯çœ‹äº†ä¸‹å®ƒçš„å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°ç¡®å®æ˜¯å¯ä»¥å¼€å‘<code>touchbar</code>ç›¸å…³çš„åŠŸèƒ½ï¼Œä¸è¿‡ç›®å‰<code>Electron</code>çš„<code>touchbar</code>è¿˜æ˜¯<strong>å®éªŒæ€§çš„API</strong>ï¼Œåç»­æœ‰å¯èƒ½æ›´æ”¹ä¹Ÿæœ‰å¯èƒ½å»æ‰ï¼Œä¸è¿‡å¹¶ä¸å½±å“æˆ‘ä»¬å…ˆç©ç©å®ƒã€‚ç©ç©å®ƒåï¼Œä½ ä¼šå‘ç°é¸¡è‚‹çš„<code>touchbar</code>è¿˜æ˜¯æœ‰ç‚¹æ„æ€çš„ã€‚å½“ç„¶<code>touchbar</code>æ˜¯<code>Mac</code>ç‰¹æœ‰çš„ç¡¬ä»¶ï¼Œå¦‚æœä¸æ˜¯<code>Mac</code>çš„å°ä¼™ä¼´å°±ä½“éªŒä¸äº†æœ¬ç« çš„å†…å®¹äº†ã€‚</p><hr><h3 id="è¿è¡Œå®˜æ–¹çš„ä¾‹å­"><a href="#è¿è¡Œå®˜æ–¹çš„ä¾‹å­" class="headerlink" title="è¿è¡Œå®˜æ–¹çš„ä¾‹å­"></a>è¿è¡Œå®˜æ–¹çš„ä¾‹å­</h3><p>å®˜æ–¹ç»™äº†ä¸€ä¸ªè€è™æœºçš„ä¸€ä¸ªä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç›´æ¥<a href="https://electronjs.org/docs/api/touch-bar#touchbarescapeitem" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a>æŸ¥çœ‹ã€‚å¦‚æœè¿æ¥æ‰“ä¸å¼€ï¼Œå¯ä»¥ç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘å·²ç»å¸®ä½ æ‹·è´å¥½äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, BrowserWindow, TouchBar &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; TouchBarLabel, TouchBarButton, TouchBarSpacer &#125; = TouchBar</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> spinning = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Reel labels</span></span><br><span class="line"><span class="keyword">const</span> reel1 = <span class="keyword">new</span> TouchBarLabel()</span><br><span class="line"><span class="keyword">const</span> reel2 = <span class="keyword">new</span> TouchBarLabel()</span><br><span class="line"><span class="keyword">const</span> reel3 = <span class="keyword">new</span> TouchBarLabel()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Spin result label</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">new</span> TouchBarLabel()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Spin button</span></span><br><span class="line"><span class="keyword">const</span> spin = <span class="keyword">new</span> TouchBarButton(&#123;</span><br><span class="line">  label: <span class="string">'ğŸ° Spin'</span>,</span><br><span class="line">  backgroundColor: <span class="string">'#7851A9'</span>,</span><br><span class="line">  click: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Ignore clicks if already spinning</span></span><br><span class="line">    <span class="keyword">if</span> (spinning) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    spinning = <span class="literal">true</span></span><br><span class="line">    result.label = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> timeout = <span class="number">10</span></span><br><span class="line">    <span class="keyword">const</span> spinLength = <span class="number">4</span> * <span class="number">1000</span> <span class="comment">// 4 seconds</span></span><br><span class="line">    <span class="keyword">const</span> startTime = <span class="built_in">Date</span>.now()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> spinReels = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      updateReels()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> ((<span class="built_in">Date</span>.now() - startTime) &gt;= spinLength) &#123;</span><br><span class="line">        finishSpin()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Slow down a bit on each spin</span></span><br><span class="line">        timeout *= <span class="number">1.1</span></span><br><span class="line">        setTimeout(spinReels, timeout)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    spinReels()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getRandomValue = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> values = [<span class="string">'ğŸ’'</span>, <span class="string">'ğŸ’'</span>, <span class="string">'7ï¸âƒ£'</span>, <span class="string">'ğŸŠ'</span>, <span class="string">'ğŸ””'</span>, <span class="string">'â­'</span>, <span class="string">'ğŸ‡'</span>, <span class="string">'ğŸ€'</span>]</span><br><span class="line">  <span class="keyword">return</span> values[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * values.length)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> updateReels = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  reel1.label = getRandomValue()</span><br><span class="line">  reel2.label = getRandomValue()</span><br><span class="line">  reel3.label = getRandomValue()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> finishSpin = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> uniqueValues = <span class="keyword">new</span> <span class="built_in">Set</span>([reel1.label, reel2.label, reel3.label]).size</span><br><span class="line">  <span class="keyword">if</span> (uniqueValues === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// All 3 values are the same</span></span><br><span class="line">    result.label = <span class="string">'ğŸ’° Jackpot!'</span></span><br><span class="line">    result.textColor = <span class="string">'#FDFF00'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (uniqueValues === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">// 2 values are the same</span></span><br><span class="line">    result.label = <span class="string">'ğŸ˜ Winner!'</span></span><br><span class="line">    result.textColor = <span class="string">'#FDFF00'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// No values are the same</span></span><br><span class="line">    result.label = <span class="string">'ğŸ™ Spin Again'</span></span><br><span class="line">    result.textColor = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  spinning = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> touchBar = <span class="keyword">new</span> TouchBar(&#123;</span><br><span class="line">  items: [</span><br><span class="line">    spin,</span><br><span class="line">    <span class="keyword">new</span> TouchBarSpacer(&#123; <span class="attr">size</span>: <span class="string">'large'</span> &#125;),</span><br><span class="line">    reel1,</span><br><span class="line">    <span class="keyword">new</span> TouchBarSpacer(&#123; <span class="attr">size</span>: <span class="string">'small'</span> &#125;),</span><br><span class="line">    reel2,</span><br><span class="line">    <span class="keyword">new</span> TouchBarSpacer(&#123; <span class="attr">size</span>: <span class="string">'small'</span> &#125;),</span><br><span class="line">    reel3,</span><br><span class="line">    <span class="keyword">new</span> TouchBarSpacer(&#123; <span class="attr">size</span>: <span class="string">'large'</span> &#125;),</span><br><span class="line">    result</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="built_in">window</span></span><br><span class="line"></span><br><span class="line">app.once(<span class="string">'ready'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">window</span> = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    frame: <span class="literal">false</span>,</span><br><span class="line">    titleBarStyle: <span class="string">'hiddenInset'</span>,</span><br><span class="line">    width: <span class="number">200</span>,</span><br><span class="line">    height: <span class="number">200</span>,</span><br><span class="line">    backgroundColor: <span class="string">'#000'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">window</span>.loadURL(<span class="string">'about:blank'</span>)</span><br><span class="line">  <span class="built_in">window</span>.setTouchBar(touchBar)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸Šé¢çš„ä»£ç ï¼š</p><ol><li>å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚<code>touchbar-demo</code>ï¼Œå†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶<code>touchbar.js</code>ï¼Œå°†ä¸Šé¢çš„ä»£ç æ‹·è´è¿›å»ã€‚</li><li><p>å½“å‰ç›®å½•ä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸‹é¢çš„å†…å®¹æ¥å®‰è£…<code>Electron</code>ã€‚</p><blockquote><p>ELECTRON_MIRROR=<a href="http://npm.taobao.org/mirrors/electron/" target="_blank" rel="noopener">http://npm.taobao.org/mirrors/electron/</a> npm install electron</p></blockquote></li><li><p>å‘½ä»¤è¡Œæ‰§è¡Œä¸‹é¢å†…å®¹ä»¥å¯åŠ¨ï¼š</p><blockquote><p>./node_modules/.bin/electron touchbar.js</p></blockquote></li></ol><p>ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å®‰è£…<code>Electron</code>çš„æ—¶å€™åŠ äº†ä¸€ä¸ª<code>ELECTRON_MIRROR</code>çš„å‚æ•°ï¼Œä¸ºä»€ä¹ˆè¦å¸¦è¿™ä¸ªå‚æ•°å‘¢ï¼Ÿå…¶å®åœ¨<code>npm install electron</code>çš„æ—¶å€™ä¼šä¸‹è½½<code>electron</code>ä¾èµ–ï¼Œè¿™ä¸ªä¾èµ–æœ‰ä¸€ä¸ª<code>postinstall</code>çš„è„šæœ¬ï¼Œè¯¥è„šæœ¬ä¼šç»§ç»­ä»<code>github</code>ä¸‹è½½å½“å‰å¹³å°çš„<code>Electron</code>åº”ç”¨ç¨‹åºï¼Œç”±äºå›½å†…å¯¹å›½å¤–ç½‘ç«™çš„é™åˆ¶ï¼Œè™½ç„¶<code>github</code>æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œä½†æ˜¯ç½‘é€Ÿä¸å’‹æ ·ã€‚æ‰€ä»¥ç›´æ¥è®¿é—®çš„è¯å¾€å¾€ä¼šæœ‰ä¸‹è½½å¤±è´¥çš„é—®é¢˜ï¼ˆå³ä½¿npmçš„æºåˆ‡æ¢åˆ°taobaoä¹Ÿç»å¸¸å‡ºç°é—®é¢˜ï¼Œå› ä¸ºä¸‹è½½<code>Electron</code>åº”ç”¨ç¨‹åºæ˜¯èµ°<code>github</code>çš„ä¸‹è½½åœ°å€çš„ï¼Œä¸‹è½½åœ°å€å…·ä½“è¯·çœ‹<a href="https://github.com/electron/electron/releases" target="_blank" rel="noopener">è¿™é‡Œ</a>ï¼‰ã€‚</p><p>é€šè¿‡ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤ï¼Œå®ä¾‹ä»£ç åŸºæœ¬ä¸Šå¯ä»¥è·‘é€šäº†ï¼Œå¤§æ¦‚æ•ˆæœå¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯å¾ˆæœ‰æ„æ€å‘¢ï¼Ÿ</p><p><img src="/2019/09/21/åŸºäºElectronçš„touchbarå¼€å‘/1.gif" alt="è¿è¡Œå®˜æ–¹ç¤ºä¾‹"></p><h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><p>é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡<code>new TouchBar()</code>åˆ›å»ºäº†ä¸€ä¸ªTouchBarçš„å®ä¾‹ï¼Œç„¶åè°ƒç”¨<code>BrowserWindow</code>å¯¹è±¡çš„<code>setTouchBar()</code>æ–¹æ³•å°±å¯ä»¥äº†ï¼Œ<code>TouchBar</code>çš„æ„é€ æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯é€‰å­—æ®µæœ‰2ä¸ªï¼Œä¸€ä¸ªæ˜¯<code>items</code>ï¼Œå¦ä¸€ä¸ªæ˜¯<code>escapeItem</code>ã€‚<code>items</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥æ·»åŠ <code>touchbar</code>ä¸­é—´éƒ¨åˆ†çš„ç»„ä»¶ã€‚<code>escapeItem</code>æ˜¯å•ä¸ªçš„ä¸€ä¸ªç»„ä»¶ï¼Œç”¨æ¥æ›¿æ¢<code>touchbar</code>å·¦ä¾§çš„<code>esc</code>æŒ‰é’®ã€‚<br>ç°åœ¨æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>index.js</code>ï¼Œè¿è¡Œä¸‹é¢ä»£ç ï¼ˆå‘½ä»¤è¡Œè¾“å…¥<code>./node_modules/.bin/electron index.js</code>ï¼‰ï¼Œçœ‹çœ‹æ•ˆæœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, BrowserWindow, TouchBar &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; TouchBarLabel, TouchBarButton &#125; = TouchBar</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> touchBar = <span class="keyword">new</span> TouchBar(&#123;</span><br><span class="line">  items: [</span><br><span class="line">    <span class="keyword">new</span> TouchBarButton(&#123;</span><br><span class="line">      label: <span class="string">'ğŸ˜‡'</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarButton(&#123;</span><br><span class="line">      label: <span class="string">'ğŸ˜'</span>,</span><br><span class="line">      backgroundColor: <span class="string">'#ff0000'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarButton(&#123;</span><br><span class="line">      label: <span class="string">'ğŸ¤£'</span>,</span><br><span class="line">      backgroundColor: <span class="string">'#00ff00'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarButton(&#123;</span><br><span class="line">      label: <span class="string">'ğŸ˜‚'</span>,</span><br><span class="line">      backgroundColor: <span class="string">'#0000ff'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarLabel(&#123;</span><br><span class="line">      label: <span class="string">'TouchBarLabelå°±æ˜¯æ–‡å­—'</span>,</span><br><span class="line">      textColor: <span class="string">'#AACCEE'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  escapeItem: <span class="keyword">new</span> TouchBarButton(&#123;</span><br><span class="line">    label: <span class="string">'è¿™é‡ŒåŸæœ¬æ˜¯é€€å‡ºé”®'</span>,</span><br><span class="line">    icon: <span class="string">'./img.jpeg'</span>,</span><br><span class="line">    iconPosition: <span class="string">'left'</span>,</span><br><span class="line">    click:<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'ç‚¹äº†ä¹Ÿä¸ä¼šé€€å‡ºçš„ï¼å› ä¸ºæˆ‘å°±æ²¡å†™é€€å‡ºçš„äº‹ä»¶'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="built_in">window</span></span><br><span class="line"></span><br><span class="line">app.once(<span class="string">'ready'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">window</span> = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    frame: <span class="literal">false</span>,</span><br><span class="line">    titleBarStyle: <span class="string">'hiddenInset'</span>,</span><br><span class="line">    width: <span class="number">200</span>,</span><br><span class="line">    height: <span class="number">200</span>,</span><br><span class="line">    backgroundColor: <span class="string">'#000'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">window</span>.loadURL(<span class="string">'about:blank'</span>)</span><br><span class="line">  <span class="built_in">window</span>.setTouchBar(touchBar)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/09/21/åŸºäºElectronçš„touchbarå¼€å‘/2.png" alt="itemsä¸escapeItem"></p><p>ä»£ç ä¸­ç¬¬29è¡Œçš„å›¾æ ‡ç‚¹å‡»<a href="img.jpeg">è¿™é‡Œä¸‹è½½</a>ã€‚</p><p>ä¸Šé¢ä½¿ç”¨äº†2ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯<code>TouchBarButton</code>ï¼Œä»£è¡¨çš„æ˜¯ä¸€ä¸ªæŒ‰é’®ï¼Œå¦ä¸€ä¸ªæ˜¯<code>TouchBarLabel</code>ï¼Œä»£è¡¨çš„æ˜¯ä¸€ä¸ªç®€å•çš„æ ‡ç­¾ã€‚éœ€è¦æ³¨æ„çš„æ˜¯<code>TouchBarLabel</code>åªæ˜¯å•çº¯çš„æ–‡å­—ï¼Œä¸æ”¯æŒç‚¹å‡»äº‹ä»¶ï¼ˆå½“ç„¶ä½ ä½¿ç”¨çš„æ—¶å€™æœ‰å¯èƒ½APIå·²ç»æ”¯æŒäº†ï¼‰ï¼Œå®ƒçš„å‚æ•°ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„é‚£2ä¸ªï¼Œ<code>TouchBarButton</code>æ˜¯æ”¯æŒç‚¹å‡»äº‹ä»¶çš„ï¼Œå¦‚ä¸Šé¢<code>escapeItem</code>ä¸­çš„clickæ–¹æ³•ã€‚</p><p><code>Electron</code>æ‰€æ”¯æŒçš„æ‰€æœ‰ç»„ä»¶ï¼ˆå†™æœ¬ç« çš„æ—¶å€™ï¼‰æœ‰ï¼š</p><ol><li><a href="https://electronjs.org/docs/api/touch-bar-button" target="_blank" rel="noopener">TouchBarButton</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-label" target="_blank" rel="noopener">TouchBarLabel</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-color-picker" target="_blank" rel="noopener">TouchBarColorPicker</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-group" target="_blank" rel="noopener">TouchBarGroup</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-popover" target="_blank" rel="noopener">TouchBarPopover</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-scrubber" target="_blank" rel="noopener">TouchBarScrubber</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-segmented-control" target="_blank" rel="noopener">TouchBarSegmentedControl</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-slider" target="_blank" rel="noopener">TouchBarSlider</a></li><li><a href="https://electronjs.org/docs/api/touch-bar-spacer" target="_blank" rel="noopener">TouchBarSpacer</a></li></ol><p>è¿™é‡Œç»™ä¸€ä¸ªç®€å•çš„ä¾‹å­å±•ç¤ºä¸€ä¸‹å…¶ä¸­çš„å‡ ä¸ªç»„ä»¶ï¼Œå‰©ä¸‹çš„ä½ å¯ä»¥è‡ªå·±å»å°è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, BrowserWindow, TouchBar &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; TouchBarColorPicker, TouchBarSpacer, TouchBarScrubber, TouchBarSegmentedControl, TouchBarSlider &#125; = TouchBar</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> touchBar = <span class="keyword">new</span> TouchBar(&#123;</span><br><span class="line">  items: [</span><br><span class="line">    <span class="keyword">new</span> TouchBarColorPicker(),</span><br><span class="line">    <span class="keyword">new</span> TouchBarSpacer(&#123;</span><br><span class="line">      size: <span class="string">'small'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarScrubber(&#123;</span><br><span class="line">      items: [&#123;<span class="attr">label</span>:<span class="string">'ç¬¬ä¸€ä¸ª'</span>&#125;,&#123;<span class="attr">label</span>:<span class="string">'ç¬¬äºŒä¸ª'</span>&#125;],</span><br><span class="line">      selectedStyle: <span class="string">'outline'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarSpacer(&#123;</span><br><span class="line">      size: <span class="string">'large'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarSegmentedControl(&#123;</span><br><span class="line">      segments:[&#123;<span class="attr">label</span>:<span class="string">'ç¬¬ä¸€ä¸ª'</span>&#125;,&#123;<span class="attr">label</span>:<span class="string">'ç¬¬äºŒä¸ª'</span>&#125;],</span><br><span class="line">      mode: <span class="string">'buttons'</span><span class="comment">// single multiple buttons</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarSpacer(&#123;</span><br><span class="line">      size: <span class="string">'flexible'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> TouchBarSlider(&#123;</span><br><span class="line">      label: <span class="string">'æ»‘åŠ¨ç»„ä»¶'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="built_in">window</span></span><br><span class="line"></span><br><span class="line">app.once(<span class="string">'ready'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">window</span> = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    frame: <span class="literal">false</span>,</span><br><span class="line">    titleBarStyle: <span class="string">'hiddenInset'</span>,</span><br><span class="line">    width: <span class="number">200</span>,</span><br><span class="line">    height: <span class="number">200</span>,</span><br><span class="line">    backgroundColor: <span class="string">'#000'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">window</span>.loadURL(<span class="string">'about:blank'</span>)</span><br><span class="line">  <span class="built_in">window</span>.setTouchBar(touchBar)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="/2019/09/21/åŸºäºElectronçš„touchbarå¼€å‘/3.gif" alt="ç»„ä»¶å±•ç¤º"></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Electron </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸‹ï¼‰</title>
      <link href="/2019/09/07/10%E5%88%86%E9%92%9F%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAnpm%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96%E5%8C%85%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
      <url>/2019/09/07/10%E5%88%86%E9%92%9F%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAnpm%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96%E5%8C%85%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>åœ¨<a href="https://kai666666.top/2019/09/06/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸Šï¼‰/#more" target="_blank" rel="noopener">ä¸Šä¸€ç¯‡</a>ä¸­æˆ‘ä»¬ç”¨äº†10åˆ†é’Ÿå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„å¤è¯—è¯å‘½ä»¤è¡Œå·¥å…·ï¼Œæœ¬ç« ä¸­æˆ‘ä»¬ä¸»è¦ç®€ç»2ä¸ªå‘½ä»¤è¡Œå·¥å…·å¼€å‘ä¸­å¸¸ç”¨çš„åº“ï¼Œæ•´ä¸ªä»£ç å¤§æ¦‚ç”¨æ—¶20åˆ†é’Ÿã€‚</p><hr><h2 id="ä¿®æ”¹å‘½ä»¤è¡Œé¢œè‰²"><a href="#ä¿®æ”¹å‘½ä»¤è¡Œé¢œè‰²" class="headerlink" title="ä¿®æ”¹å‘½ä»¤è¡Œé¢œè‰²"></a>ä¿®æ”¹å‘½ä»¤è¡Œé¢œè‰²</h2><p>ç¬¬ä¸€ä¸ªç®€ç»çš„åº“å°±æ˜¯<a href="https://github.com/jaywcjlove/colors-cli" target="_blank" rel="noopener">â€˜colors-cliâ€™</a>ï¼Œä»–æ”¯æŒä¿®æ”¹æ‰“å°å‡ºæ¥çš„æ–‡å­—çš„æ ·å¼ã€‚<br>é¦–å…ˆå®‰è£…ä¸€ä¸‹è¿™ä¸ªä¾èµ–<code>npm install colors-cli</code>ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶<code>test-color.js</code>ï¼Œæµ‹è¯•ä¸€ä¸‹å®ƒçš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color = <span class="built_in">require</span>(<span class="string">'colors-cli/safe'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(color.red.bold(<span class="string">'Error!'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(color.yellow.magenta_b(<span class="string">'Warning'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(color.blue.underline(<span class="string">'Notice'</span>));</span><br></pre></td></tr></table></figure><p>å¼•å…¥<code>color</code>åº“çš„æ—¶å€™å¯ä»¥ä½¿ç”¨<code>var color = require(&#39;colors-cli/safe&#39;)</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>var color = require(&#39;colors-cli&#39;)</code>ï¼Œæ¨èä½¿ç”¨å‰è€…ï¼Œå› ä¸ºå‰è€…å¯ä»¥æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿ã€‚ä¸Šé¢è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/09/07/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸‹ï¼‰/1.png" alt="ä¿®æ”¹é¢œè‰²"></p><p>ä»–æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå…¶å®æ˜¯æŠŠæ–‡å­—ç”¨ç‰¹æ®Šç¬¦å·åŒ…äº†ä¸€å±‚ï¼Œå‘½ä»¤è¡Œå¯¹è¿™ç§ç‰¹æ®Šç¬¦å·ä¼šå¤„ç†æˆæ ·å¼ï¼Œå°±æ¯”å¦‚<code>color.red.bold(&#39;Error!&#39;)</code>å…¶å®æœ€åä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²<code>&#39;[1m[31m[31mError![0m[0m[0m&#39;</code>ï¼Œæ‰€ä»¥ä¸Šé¢ä¸‰è¡Œlogä»£ç å’Œä¸‹é¢çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½ å¯ä»¥ç›´æ¥ç”¨nodeè¿è¡Œä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'[1m[31m[31mError![0m[0m[0m'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'[45m[33m[33mWarning[0m[0m[0m'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'[4m[34m[34mNotice[0m[0m[0m'</span>);</span><br></pre></td></tr></table></figure><h2 id="å¤„ç†ç”¨æˆ·è¾“å…¥"><a href="#å¤„ç†ç”¨æˆ·è¾“å…¥" class="headerlink" title="å¤„ç†ç”¨æˆ·è¾“å…¥"></a>å¤„ç†ç”¨æˆ·è¾“å…¥</h2><p>åœ¨ä½¿ç”¨å‘½ä»¤è¡Œçš„æ—¶å€™å¾€å¾€éœ€è¦æ ¹æ®ç”¨æˆ·çš„å‚æ•°ç»™å‡ºå‹å¥½çš„æç¤ºï¼Œ<a href="https://github.com/yargs/yargs" target="_blank" rel="noopener">yargs</a>å°±æ˜¯å¤„ç†è¿™ç§æƒ…å†µçš„ä¸€ä¸ªä¼˜è´¨çš„åº“ã€‚<br>æœ‰å…³<code>yargs</code>çš„å…·ä½“ä½¿ç”¨å¯ä»¥ç›´æ¥çœ‹å®˜æ–¹çš„æ–‡æ¡£ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´äº†ã€‚ç°åœ¨æˆ‘ä»¬åšä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯æ ¹æ®ç”¨æˆ·ä¼ å…¥çš„å€¼ï¼Œæ¥æ”¹å˜è¯—è¯ã€ä½œè€…ã€æ¥æºçš„é¢œè‰²ã€‚ä»£ç å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"><span class="keyword">const</span> color = <span class="built_in">require</span>(<span class="string">'colors-cli/safe'</span>);</span><br><span class="line"><span class="keyword">let</span> argv = <span class="built_in">require</span>(<span class="string">'yargs'</span>)</span><br><span class="line">  .option(<span class="string">'ps'</span>, &#123;</span><br><span class="line">    alias: <span class="string">'poem-style'</span>,</span><br><span class="line">    demand: <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="string">'blue_bt'</span>,</span><br><span class="line">    describe: <span class="string">'è¯—è¯æ ·å¼ï¼Œå¦‚--ps=blue_bt'</span>,</span><br><span class="line">    type: <span class="string">'string'</span></span><br><span class="line">  &#125;).option(<span class="string">'as'</span>, &#123;</span><br><span class="line">    alias: <span class="string">'author-style'</span>,</span><br><span class="line">    demand: <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="string">'green_bt'</span>,</span><br><span class="line">    describe: <span class="string">'ä½œè€…æ ·å¼ï¼Œå¦‚--as=green_bt'</span>,</span><br><span class="line">    type: <span class="string">'string'</span></span><br><span class="line">  &#125;).option(<span class="string">'os'</span>, &#123;</span><br><span class="line">    alias: <span class="string">'origin-style'</span>,</span><br><span class="line">    demand: <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="string">'cyan'</span>,</span><br><span class="line">    describe: <span class="string">'æ¥æºé¢œè‰²ï¼Œå¦‚--os=cyan'</span>,</span><br><span class="line">    type: <span class="string">'string'</span></span><br><span class="line">  &#125;).option(<span class="string">'h'</span>, &#123;</span><br><span class="line">    alias: <span class="string">'help'</span>,</span><br><span class="line">    demand: <span class="literal">false</span>,</span><br><span class="line">    boolean: <span class="literal">true</span>,</span><br><span class="line">    describe: <span class="string">'å¸®åŠ©'</span>,</span><br><span class="line">  &#125;).option(<span class="string">'v'</span>, &#123;</span><br><span class="line">    alias: <span class="string">'version'</span>,</span><br><span class="line">    demand: <span class="literal">false</span>,</span><br><span class="line">    boolean: <span class="literal">true</span>,</span><br><span class="line">    describe: <span class="string">'ç‰ˆæœ¬å·'</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .argv;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getColorMethod</span>(<span class="params">commandStr = <span class="string">''</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> command = commandStr.replace(<span class="regexp">/\,/g</span>,<span class="string">'.'</span>).split(<span class="string">"."</span>);</span><br><span class="line">  <span class="keyword">let</span> colorMethod = color</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; command.length; i++) &#123;</span><br><span class="line">    colorMethod = colorMethod[command[i]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> colorMethod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.get(<span class="string">'https://api.gushi.ci/all.json'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> data = response.data || &#123;&#125;;</span><br><span class="line">    <span class="keyword">let</span> signature = data.author + <span class="string">'ã€Š'</span> + data.origin + <span class="string">'ã€‹'</span>;</span><br><span class="line">    <span class="keyword">let</span> prefix =  <span class="string">'â€”â€”â€”â€” '</span>;</span><br><span class="line">    <span class="keyword">let</span> paddingSpacing = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">let</span> spacingLength = data.content.length * <span class="number">2</span> - signature.length * <span class="number">2</span> - prefix.length;</span><br><span class="line">    <span class="keyword">if</span> (spacingLength &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data.origin.indexOf(<span class="string">'Â·'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">        spacingLength++;</span><br><span class="line">      &#125;</span><br><span class="line">      paddingSpacing = <span class="keyword">new</span> <span class="built_in">Array</span>(spacingLength).fill(<span class="string">' '</span>).join(<span class="string">''</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    signature = getColorMethod(argv.as)(data.author) + <span class="string">'ã€Š'</span> + getColorMethod(argv.os)(data.origin) + <span class="string">'ã€‹'</span>;</span><br><span class="line">    signature = (paddingSpacing + prefix) + signature</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    <span class="built_in">console</span>.log(getColorMethod(argv.ps)(data.content));</span><br><span class="line">    <span class="built_in">console</span>.log(signature);</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/09/07/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸‹ï¼‰/2.png" alt="æ”¯æŒä¿®æ”¹é¢œè‰²"></p><p>ä»£ç è¿˜æ˜¯åœ¨å¯ä»¥æ§åˆ¶çš„è¡Œæ•°èŒƒå›´å†…ï¼Œä¸Šè¿°ä»£ç ä¸­4~34è¡Œï¼Œæ˜¯<code>yargs</code>çš„å¤„ç†ï¼Œä¹Ÿæ˜¯é€šç”¨çš„ä¸€ç§å†™æ³•ï¼Œè¿™é‡Œé¢æœ‰2ä¸ªå±æ€§æ¯”è¾ƒç‰¹æ®Šä¸€ä¸ªæ˜¯<code>help</code>å¦ä¸€ä¸ªæ˜¯<code>version</code>ï¼Œä»ä¸‹é¢çš„ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“è¾“å…¥è¿™ä¸¤ä¸ªçš„æ—¶å€™éƒ½ä¼šé˜»æ­¢ä»£ç çš„æ‰§è¡Œï¼Œå¹¶ç›´æ¥è¿”å›ç›¸åº”çš„ä¿¡æ¯ï¼Œå¦‚è¿è¡Œ<code>node index -h</code>ä¼šè¿”å›å¸®åŠ©ä¿¡æ¯ã€<code>node index -v</code>ä¼šè¿”å›ç‰ˆæœ¬ä¿¡æ¯ã€‚åœ¨ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>argv.ps</code>ã€<code>argv.as</code>ã€<code>argv.os</code>ç­‰ï¼ˆå…¶å®å°±æ˜¯optionå‡½æ•°çš„ç¬¬ä¸€ä¸ªå€¼ï¼‰æ¥è·å–å‚æ•°çš„å€¼ã€‚<code>getColorMethod</code>è¿è¡Œä½¿ç”¨è‹±æ–‡çš„ç‚¹æˆ–è€…é€—å·æ¥æ‹†åˆ†ä»¥æ·»åŠ å¤šä¸ªæ ·å¼ã€‚</p><h2 id="ä»£ç ä¼˜åŒ–"><a href="#ä»£ç ä¼˜åŒ–" class="headerlink" title="ä»£ç ä¼˜åŒ–"></a>ä»£ç ä¼˜åŒ–</h2><p>ä¸Šè¿°ä»£ç ä¸­<code>getColorMethod</code>æ–¹æ³•å…¶å®å¯ä»¥æŠ½å–å‡ºå»ï¼Œå¦å¤–<code>color</code>åº“å¹¶ä¸æ˜¯æ”¯æŒè¾“å…¥ä»»ä½•å‚æ•°ï¼Œæ¯”å¦‚ä½ è¾“å…¥<code>node index --as=123</code>å°±ä¼šæŠ¥é”™ï¼Œå› ä¸º123å¹¶ä¸æ˜¯<code>color</code>æ‰€æ”¯æŒçš„æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰å¿…è¦å¯¹é¢œè‰²ç›¸å…³çš„æ“ä½œæŠ½å–æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå¦å¤–æ£€æµ‹ä¸€ä¸‹<code>color</code>åº“æ˜¯å¦æ”¯æŒè¿™ä¸ªé¢œè‰²ï¼Œä¸æ”¯æŒçš„è¯ç»™å‡ºæœ‰å¥½åœ°æç¤ºï¼Œç°åœ¨æ–°å»º<code>color-util.js</code>æ–‡ä»¶ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> color = <span class="built_in">require</span>(<span class="string">'colors-cli/safe'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> COLOR_TITLE = [<span class="string">'æ ·å¼'</span>,<span class="string">'å‰æ™¯è‰²'</span>,<span class="string">'èƒŒæ™¯è‰²'</span>,<span class="string">'å‰æ™¯è‰²ï¼ˆæ˜äº®ï¼‰'</span>,<span class="string">'èƒŒæ™¯è‰²ï¼ˆæ˜äº®ï¼‰'</span>];</span><br><span class="line"><span class="keyword">const</span> COLOR_STYLE = [<span class="string">'bold'</span>, <span class="string">'faint'</span>, <span class="string">'italic'</span>, <span class="string">'underline'</span>, <span class="string">'blink'</span>, <span class="string">'overline'</span>, <span class="string">'inverse'</span>, <span class="string">'conceal'</span>, <span class="string">'strike'</span>];</span><br><span class="line"><span class="keyword">const</span> COLOR_FOREGROUND = [<span class="string">'black'</span>, <span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'yellow'</span>, <span class="string">'blue'</span>, <span class="string">'magenta'</span>, <span class="string">'cyan'</span>, <span class="string">'white'</span>];</span><br><span class="line"><span class="keyword">const</span> COLOR_BACKGROUND = [<span class="string">'black_b'</span>, <span class="string">'red_b'</span>, <span class="string">'green_b'</span>, <span class="string">'yellow_b'</span>, <span class="string">'blue_b'</span>, <span class="string">'magenta_b'</span>, <span class="string">'cyan_b'</span>, <span class="string">'white_b'</span>];</span><br><span class="line"><span class="keyword">const</span> COLOR_FOREGROUND_BRIGHT = [<span class="string">'black_bt'</span>, <span class="string">'red_bt'</span>, <span class="string">'green_bt'</span>, <span class="string">'yellow_bt'</span>, <span class="string">'blue_bt'</span>, <span class="string">'magenta_bt'</span>, <span class="string">'cyan_bt'</span>, <span class="string">'white_bt'</span>];</span><br><span class="line"><span class="keyword">const</span> COLOR_BACKGROUND_BRIGHT = [<span class="string">'black_bbt'</span>, <span class="string">'red_bbt'</span>, <span class="string">'green_bbt'</span>, <span class="string">'yellow_bbt'</span>, <span class="string">'blue_bbt'</span>, <span class="string">'magenta_bbt'</span>, <span class="string">'cyan_bbt'</span>, <span class="string">'white_bbt'</span>];</span><br><span class="line"><span class="keyword">const</span> STYLE = [ COLOR_STYLE, COLOR_FOREGROUND, COLOR_BACKGROUND, COLOR_FOREGROUND_BRIGHT, COLOR_BACKGROUND_BRIGHT];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printSupportStyle</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æ‰€æ”¯æŒçš„æ ·å¼æœ‰ï¼š\n'</span>);</span><br><span class="line">  <span class="keyword">let</span> message = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; COLOR_TITLE.length; i++) &#123;</span><br><span class="line">    message = STYLE[i].reduce(<span class="function"><span class="keyword">function</span> (<span class="params">pre,next</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> pre + color[next](next) + <span class="string">' '</span></span><br><span class="line">    &#125;, COLOR_TITLE[i] + <span class="string">"ï¼š "</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ¢è¡Œ</span></span><br><span class="line">  <span class="built_in">console</span>.log();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkStyle</span>(<span class="params">styleName</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> STYLE.join(<span class="string">','</span>).split(<span class="string">','</span>).indexOf(styleName) !== <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getColorMethod</span>(<span class="params">commandStr = <span class="string">''</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> command = commandStr.replace(<span class="regexp">/\,/g</span>,<span class="string">'.'</span>).split(<span class="string">"."</span>);</span><br><span class="line">  <span class="keyword">let</span> colorMethod = color</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; command.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (checkStyle(command[i])) &#123;</span><br><span class="line">      colorMethod = colorMethod[command[i]];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'\nä¸æ”¯æŒçš„æ ·å¼ï¼š'</span> + command[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> colorMethod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  color,</span><br><span class="line">  printSupportStyle,</span><br><span class="line">  checkStyle,</span><br><span class="line">  getColorMethod</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ±‚æ¥å£çš„åœ°æ–¹æˆ‘ä»¬ä¹Ÿå¯ä»¥å°è£…æˆä¸€ä¸ªæ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥å‡å°‘è€¦åˆï¼Œå¦å¤–ä¹Ÿå¯ä»¥æ”¯æŒæ¨¡å—ç›´æ¥å¼•å…¥ï¼ˆç›´æ¥ä½¿ç”¨requireå¼•å…¥ï¼‰ã€‚æ–°å»º<code>random-poem.js</code>æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    axios.get(<span class="string">'https://api.gushi.ci/all.json'</span>)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">      resolve(response.data || &#123;&#125;)</span><br><span class="line">    &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>)</span>&#123;</span><br><span class="line">      reject(error)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºç½‘ç»œè¯·æ±‚æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å›è°ƒæˆ–è€…<code>Promise</code>æ¥å¤„ç†ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä½¿ç”¨<code>Promise</code>å§ã€‚æ­¤æ—¶è¿˜éœ€è¦ä¿®æ”¹ä¸€ä¸‹<code>package.json</code>æ–‡ä»¶ï¼Œæ·»åŠ <code>main</code>å­—æ®µï¼Œè¯¥å­—æ®µæ˜¯ç”¨æ¥å‘Šè¯‰ç›´æ¥æ¨¡å—å¼•å…¥çš„æ—¶å€™å¼•å…¥å“ªä¸ªæ–‡ä»¶ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"poem-cli"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"å‘½ä»¤è¡Œéšæœºæ‰“å°ä¸€å¥è¯—è¯ã€‚"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"random-poem.js"</span>,</span><br><span class="line">  <span class="attr">"bin"</span>: &#123;</span><br><span class="line">    <span class="attr">"poem-cli"</span>: <span class="string">"index.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"node index"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [</span><br><span class="line">    <span class="string">"è¯—è¯"</span>,</span><br><span class="line">    <span class="string">"å‘½ä»¤è¡Œ"</span>,</span><br><span class="line">    <span class="string">"æœ‰è¶£"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">"Orange"</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"axios"</span>: <span class="string">"^0.19.0"</span>,</span><br><span class="line">    <span class="attr">"colors-cli"</span>: <span class="string">"^1.0.26"</span>,</span><br><span class="line">    <span class="attr">"yargs"</span>: <span class="string">"^14.0.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶éœ€è¦æ³¨æ„ç¬¬5è¡Œä»£ç ã€‚æœ€åä¿®æ”¹<code>index.js</code>æ–‡ä»¶ï¼Œä½¿ç”¨è¿™äº›å°è£…çš„æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="keyword">const</span> colorUtil = <span class="built_in">require</span>(<span class="string">'./color-util'</span>)</span><br><span class="line"><span class="keyword">const</span> randomPoem = <span class="built_in">require</span>(<span class="string">'./random-poem'</span>)</span><br><span class="line"><span class="keyword">let</span> argv = <span class="built_in">require</span>(<span class="string">'yargs'</span>)</span><br><span class="line">    .option(<span class="string">'s'</span>, &#123;</span><br><span class="line">      alias: <span class="string">'style'</span>,</span><br><span class="line">      demand: <span class="literal">false</span>,</span><br><span class="line">      boolean: <span class="literal">true</span>,</span><br><span class="line">      describe: <span class="string">'æ˜¾ç¤ºæ‰€æ”¯æŒçš„æ ·å¼'</span>,</span><br><span class="line">    &#125;).option(<span class="string">'ps'</span>, &#123;</span><br><span class="line">        alias: <span class="string">'poem-style'</span>,</span><br><span class="line">        demand: <span class="literal">false</span>,</span><br><span class="line">        <span class="keyword">default</span>: <span class="string">'blue_bt'</span>,</span><br><span class="line">        describe: <span class="string">'è¯—è¯æ ·å¼ï¼Œå¦‚--ps=blue_bt'</span>,</span><br><span class="line">        type: <span class="string">'string'</span></span><br><span class="line">    &#125;).option(<span class="string">'as'</span>, &#123;</span><br><span class="line">        alias: <span class="string">'author-style'</span>,</span><br><span class="line">        demand: <span class="literal">false</span>,</span><br><span class="line">        <span class="keyword">default</span>: <span class="string">'green_bt'</span>,</span><br><span class="line">        describe: <span class="string">'ä½œè€…æ ·å¼ï¼Œå¦‚--as=green_bt'</span>,</span><br><span class="line">        type: <span class="string">'string'</span></span><br><span class="line">    &#125;).option(<span class="string">'os'</span>, &#123;</span><br><span class="line">      alias: <span class="string">'origin-style'</span>,</span><br><span class="line">      demand: <span class="literal">false</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">'cyan'</span>,</span><br><span class="line">      describe: <span class="string">'æ¥æºé¢œè‰²ï¼Œå¦‚--os=cyan'</span>,</span><br><span class="line">      type: <span class="string">'string'</span></span><br><span class="line">    &#125;).option(<span class="string">'h'</span>, &#123;</span><br><span class="line">      alias: <span class="string">'help'</span>,</span><br><span class="line">      demand: <span class="literal">false</span>,</span><br><span class="line">      boolean: <span class="literal">true</span>,</span><br><span class="line">      describe: <span class="string">'å¸®åŠ©'</span>,</span><br><span class="line">    &#125;).option(<span class="string">'v'</span>, &#123;</span><br><span class="line">      alias: <span class="string">'version'</span>,</span><br><span class="line">      demand: <span class="literal">false</span>,</span><br><span class="line">      boolean: <span class="literal">true</span>,</span><br><span class="line">      describe: <span class="string">'ç‰ˆæœ¬å·'</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    .argv;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºæ‰€æ”¯æŒçš„æ ·å¼</span></span><br><span class="line"><span class="keyword">if</span> (!!argv.s) &#123;</span><br><span class="line">  colorUtil.printSupportStyle();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  randomPoem().then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> signature = data.author + <span class="string">'ã€Š'</span> + data.origin + <span class="string">'ã€‹'</span>;</span><br><span class="line">    <span class="keyword">let</span> prefix =  <span class="string">'â€”â€”â€”â€” '</span>;</span><br><span class="line">    <span class="keyword">let</span> paddingSpacing = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">let</span> spacingLength = data.content.length * <span class="number">2</span> - signature.length * <span class="number">2</span> - prefix.length;</span><br><span class="line">    <span class="keyword">if</span> (spacingLength &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data.origin.indexOf(<span class="string">'Â·'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">        spacingLength++;</span><br><span class="line">      &#125;</span><br><span class="line">      paddingSpacing = <span class="keyword">new</span> <span class="built_in">Array</span>(spacingLength).fill(<span class="string">' '</span>).join(<span class="string">''</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// æ·»åŠ é¢œè‰²</span></span><br><span class="line">      signature = colorUtil.getColorMethod(argv.as)(data.author) + <span class="string">'ã€Š'</span> + colorUtil.getColorMethod(argv.os)(data.origin) + <span class="string">'ã€‹'</span>;</span><br><span class="line">      signature = (paddingSpacing + prefix) + signature</span><br><span class="line">      <span class="built_in">console</span>.log();</span><br><span class="line">      <span class="built_in">console</span>.log(colorUtil.getColorMethod(argv.ps)(data.content));</span><br><span class="line">      <span class="built_in">console</span>.log(signature);</span><br><span class="line">      <span class="built_in">console</span>.log();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line">      <span class="built_in">console</span>.log(colorUtil.color.red(error.message));</span><br><span class="line">      colorUtil.printSupportStyle();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹è¾“å…¥ä¸æ”¯æŒçš„æƒ…å†µï¼Œä½ ä¼šå‘ç°æç¤ºçš„ä¿¡æ¯å·²ç»å¾ˆå‹å¥½äº†ï¼š</p><p><img src="/2019/09/07/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸‹ï¼‰/3.png" alt="å®Œæ•´ç‰ˆ"></p><p>æœ€åæŠŠå¤šä½™çš„<code>test-color.js</code>æ–‡ä»¶åˆ é™¤äº†å°±å¯ä»¥æäº¤äº†ã€‚</p><p>å°±è¿™æ ·æˆ‘ä»¬æŠŠä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„å¤è¯—è¯å‘½ä»¤è¡Œå·¥å…·åšå®Œäº†ï¼Œéœ€è¦æ³¨æ„ä¸€ç‚¹å†æ¬¡æäº¤çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œ<code>npm publish</code>å‰ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹<code>package.json</code>ä¸­çš„<code>version</code>å­—æ®µï¼Œè€Œä¸”å¿…é¡»å¤§äºå½“å‰çš„ç‰ˆæœ¬å·ï¼Œå»ºè®®ä½¿ç”¨<code>npm version 1.0.1</code>è¿™æ ·çš„å‘½ä»¤å»ä¿®æ”¹ï¼Œå› ä¸ºè¯¥å‘½ä»¤ä¼šé¡ºå¸¦æŠŠ<code>package-lock.json</code>æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ä¹Ÿæ”¹äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸Šï¼‰</title>
      <link href="/2019/09/06/10%E5%88%86%E9%92%9F%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAnpm%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96%E5%8C%85%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
      <url>/2019/09/06/10%E5%88%86%E9%92%9F%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAnpm%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96%E5%8C%85%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨é€›ç½‘é¡µçš„æ—¶å€™çœ‹åˆ°äº†ä¸€ä¸ª<a href="https://gushi.ci/" target="_blank" rel="noopener">å¤è¯—è¯çš„API</a>ï¼Œç„¶åçªå‘å¥‡æƒ³ï¼Œç”¨äº†10åˆ†é’Ÿçš„æ—¶é—´åšäº†ä¸€æ¬¾npmå…¨å±€ä¾èµ–åŒ…ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>npm install -g pome-cli</code>æ¥å…ˆç©ä¸€ç©ã€‚æœ‰å¥½ä¸œè¥¿å½“ç„¶è¦è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹å•¦ï¼Œç°åœ¨ä»0å¼€å§‹ç»™å¤§å®¶ç®€ç»æ‰“é€ è¿™æ¬¾å…¨å±€ä¾èµ–åŒ…ã€‚</p><hr><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚<code>poem-cli</code>ï¼ˆè¿™é‡Œä»¥<code>poem-cli</code>æ¥è®²ï¼Œåœ¨ä½ å¼€å‘çš„æ—¶å€™æ¢ä¸€ä¸ªåå­—ï¼Œå› ä¸ºè¿™ä¸ªåå­—å·²ç»è¢«æˆ‘æ³¨å†Œäº†ï¼‰ï¼Œç„¶åè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œå‘½ä»¤è¡Œè¾“å…¥<code>npm init</code>ï¼Œé‡Œé¢çš„é€‰é¡¹æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥è®¾ç½®å°±å¯ä»¥äº†ï¼Œé»˜è®¤çš„è¯å›è½¦å°±è¡Œã€‚ç­‰å‘½ä»¤è¡Œè¾“å®Œä»¥åï¼Œä¼šåœ¨è¯¥ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¤§å®¶ä¸€å®šä¸é™Œç”Ÿå§ã€‚</p><h2 id="ä»£ç ç¼–å†™"><a href="#ä»£ç ç¼–å†™" class="headerlink" title="ä»£ç ç¼–å†™"></a>ä»£ç ç¼–å†™</h2><p>ç”±äºæˆ‘ä»¬çš„æ•°æ®æ˜¯èµ°ç½‘ç»œè¯·æ±‚çš„ï¼Œ<a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a>æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒå’ŒNodeç¯å¢ƒåŒæ—¶è¿è¡Œçš„ä¸€ä¸ªHTTPæ¡†æ¶ã€‚æˆ‘ä»¬è¿™é‡Œä¹Ÿå¼•å…¥è¿™ä¸ªåº“æ¥ç®€åŒ–æˆ‘ä»¬çš„å‘é€è¯·æ±‚è¿‡ç¨‹ï¼Œå‘½ä»¤è¡Œè¾“å…¥<code>npm install axios</code>ã€‚æ–°å»ºä¸€ä¸ª<code>index.js</code>æ–‡ä»¶å†™å…¥è¯·æ±‚çš„ä»£ç ï¼Œç”±äºæˆ‘ä»¬ç›®å‰å¯¹APIçš„ç»“æ„ä¸å¤ªäº†è§£ï¼Œå°±ç›´æ¥æ‰“å°å‡ºè¿”å›çš„æ•°æ®å°±è¡Œäº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line">axios.get(<span class="string">'https://api.gushi.ci/all.json'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response.data || &#123;&#125;)</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>node index</code>æ¥è¿è¡Œä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼Œå½“ç„¶å…·ä½“çš„å†…å®¹å¯èƒ½æœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼š</p><p><img src="/2019/09/06/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸Šï¼‰/1.png" alt="é¦–æ¬¡è¿è¡Œ"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿”å›çš„æ•°æ®æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¥½å¤„ç†äº†ï¼Œåªè¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œè®©æ˜¾ç¤ºçš„æ›´å¥½çœ‹ä¸€ç‚¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line">axios.get(<span class="string">'https://api.gushi.ci/all.json'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> data = response.data || &#123;&#125;;</span><br><span class="line">    <span class="built_in">console</span>.log(data.content);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"â€”â€”â€”â€” "</span> + data.author + <span class="string">"ã€Š"</span> + data.origin + <span class="string">"ã€‹"</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/09/06/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸Šï¼‰/2.png" alt="å¤„ç†åçš„æ•ˆæœ"></p><p>å½“ç„¶æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„è¯—å¥ï¼Œç½²åå¾€å¾€æ˜¯å³å¯¹é½çš„ï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿç¨å¾®å¤„ç†ä¸€ä¸‹å¯¹äºæ²¡æœ‰è¯—å¥é•¿çš„ç½²åï¼Œè®©ç½²åå³å¯¹é½ã€‚è¦æƒ³å³å¯¹é½å…¶å®å¾ˆç®€å•å°±æ˜¯å·¦è¾¹åŠ ç©ºæ ¼å¡«å……å‘—ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line">axios.get(<span class="string">'https://api.gushi.ci/all.json'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> data = response.data || &#123;&#125;;</span><br><span class="line">    <span class="keyword">let</span> signature = data.author + <span class="string">'ã€Š'</span> + data.origin + <span class="string">'ã€‹'</span>;</span><br><span class="line">    <span class="keyword">let</span> prefix =  <span class="string">'â€”â€”â€”â€” '</span>;</span><br><span class="line">    <span class="keyword">let</span> paddingSpacing = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">let</span> spacingLength = data.content.length * <span class="number">2</span> - signature.length * <span class="number">2</span> - prefix.length;</span><br><span class="line">    <span class="keyword">if</span> (spacingLength &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data.origin.indexOf(<span class="string">'Â·'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">        spacingLength++;</span><br><span class="line">      &#125;</span><br><span class="line">      paddingSpacing = <span class="keyword">new</span> <span class="built_in">Array</span>(spacingLength).fill(<span class="string">' '</span>).join(<span class="string">''</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    signature = (paddingSpacing + prefix) + signature</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    <span class="built_in">console</span>.log(data.content);</span><br><span class="line">    <span class="built_in">console</span>.log(signature);</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä»£ç å·²ç»å¾ˆå¤šäº†ï¼Œä»£ç ç¬¬6è¡Œå’Œç¬¬7è¡Œæˆ‘ä»¬æŠŠç½²åå’Œæ¨ªçº¿æ‹†åˆ†æˆ2ä¸ªå˜é‡ï¼Œå› ä¸ºä¸€ä¸ªæ±‰å­—ç›¸å½“äº2ä¸ªç©ºæ ¼è€Œä¸€ä¸ªæ¨ªçº¿æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸Šé¢çš„<code>prefix</code>ä¸­å…¶å®æ˜¯4ä¸ªçŸ­æ¨ªçº¿å’Œä¸€ä¸ªç©ºæ ¼ç»„æˆçš„ã€‚ç„¶ååœ¨ä»£ç çš„ç¬¬9è¡Œæˆ‘ä»¬è®¡ç®—äº†ä¸€ä¸‹éœ€è¦å¡«å……çš„ç©ºæ ¼æ•°é‡ï¼Œä¹Ÿå°±æ˜¯è¯—å¥ä¹˜ä»¥2ç„¶åå‡å»ç½²åä¹˜ä»¥2å†å‡å»æ¨ªçº¿ï¼ˆè¯—å¥å’Œç½²åéƒ½æ˜¯æ±‰å­—æˆ–è€…æ±‰å­—çš„æ ‡ç‚¹ç¬¦å·å äº†2ä¸ªç©ºæ ¼ï¼‰ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µæ˜¯ï¼Œæœ‰äº›ç½²åä¸­æœ‰ç¬¦å·çš„ç‚¹ï¼ˆÂ·ï¼‰ï¼Œå¦‚<code>æå•†éšã€Šæ— é¢˜Â·æ˜¨å¤œæ˜Ÿè¾°æ˜¨å¤œé£ã€‹</code>ä¸­çš„ç‚¹ï¼Œè¿™ä¸ªç‚¹å æ®äº†ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬è¦å¯¹è¿™ä¸ªç‚¹åšç‰¹æ®Šå¤„ç†ï¼Œç‰¹æ®Šå¤„ç†è§ç¬¬11åˆ°ç¬¬13è¡Œä»£ç ï¼Œæœ€å14è¡Œä»£ç æŠŠç©ºæ ¼ä¹ŸåŠ ä¸Šã€‚åé¢æ‰“å°çš„æ—¶å€™å¤šäº†2ä¸ª<code>console.log();</code>æ˜¯ä¸ºäº†æ¢è¡Œï¼Œå½“ç„¶æ˜¯ç”¨<code>\n</code>æ¥æ¢è¡Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚éœ€è¦è¯´æ˜çš„æ˜¯æˆ‘ä»¬è¿™é‡Œä½¿ç”¨å­—ç¬¦ä¸²çš„æ‹¼æ¥æ¥åšçš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ES6çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚æœ€åçœ‹ä¸€ä¸‹ç»“æœï¼š</p><p><img src="/2019/09/06/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸Šï¼‰/3.png" alt="å¯¹é½å¤„ç†"></p><h2 id="æ·»åŠ é…ç½®"><a href="#æ·»åŠ é…ç½®" class="headerlink" title="æ·»åŠ é…ç½®"></a>æ·»åŠ é…ç½®</h2><p>ç°åœ¨æˆ‘ä»¬çš„ä»£ç åŸºæœ¬ä¸Šå†™çš„å·®ä¸å¤šäº†ï¼Œç„¶åè¯•ç€æŒ‰ç…§å…¨å±€åŒ…æ¥å¤„ç†ã€‚é¦–å…ˆä¿®æ”¹<code>package.json</code>æ–‡ä»¶ï¼Œæ·»åŠ <code>bin</code>å­—æ®µï¼Œ<code>bin</code>å­—æ®µçš„ä½œç”¨æ˜¯å‘Šè¯‰ç¯å¢ƒæ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ‰§è¡Œå“ªä¸ªæ–‡ä»¶ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"poem-cli"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"å‘½ä»¤è¡Œéšæœºæ‰“å°ä¸€å¥è¯—è¯ã€‚"</span>,</span><br><span class="line">  <span class="attr">"bin"</span>: &#123;</span><br><span class="line">    <span class="attr">"poem-cli"</span>: <span class="string">"index.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"node index"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [</span><br><span class="line">    <span class="string">"è¯—è¯"</span>,</span><br><span class="line">    <span class="string">"å‘½ä»¤è¡Œ"</span>,</span><br><span class="line">    <span class="string">"æœ‰è¶£"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">"Orange"</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"axios"</span>: <span class="string">"^0.19.0"</span>,</span><br><span class="line">    <span class="attr">"colors-cli"</span>: <span class="string">"^1.0.26"</span>,</span><br><span class="line">    <span class="attr">"yargs"</span>: <span class="string">"^14.0.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¬¬5åˆ°7è¡Œå¯æ˜¯é‡ç‚¹å“¦ï¼Œå†™äº†<code>bin</code>ä»¥ååœ¨<code>bin</code>çš„å…¥å£æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯<code>index.js</code>æ–‡ä»¶ï¼‰çš„æœ€ä¸Šæ–¹è¿˜è¦åŠ ä¸€è¡Œä»£ç ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ... å…¶ä»–ä»£ç åŒä¸Šçš„index.js</span></span><br></pre></td></tr></table></figure><p><code>#!/usr/bin/env node</code>çœ‹ç€å’Œæ³¨é‡Šå¾ˆåƒï¼Œåˆ°åº•æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå…¶å®å®ƒå£°æ˜äº†è„šæœ¬æ–‡ä»¶çš„è§£é‡Šç¨‹åºï¼Œè„šæœ¬æ–‡ä»¶æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬è¦è¿è¡Œè¿™ä¸ª<code>index.js</code>ï¼Œå°±å¾—å‘Šè¯‰ç³»ç»Ÿä½ æ˜¯è¦ç”¨ä»€ä¹ˆæ¥æ‰§è¡Œæˆ‘ä»¬çš„è„šæœ¬ï¼Œè¿™é‡Œå½“ç„¶æ˜¯ä½¿ç”¨nodeäº†ã€‚</p><p>æŠŠè¿™ä¸¤ä¸ªåœ°æ–¹ä¿®æ”¹åï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šå¯ä»¥ä½¿ç”¨äº†ï¼Œå…ˆæµ‹è¯•ä¸€ä¸‹çœ‹å¯ä»¥ç”¨ä¸ã€‚ä½¿ç”¨<code>npm link</code>å‘½ä»¤ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠå½“å‰æ–‡ä»¶å¤¹æ‹·è´åˆ°nodeå…¨å±€åŒ…çš„å®‰è£…ç¯å¢ƒä¸‹ï¼Œå½“æ‹·è´è¿‡å»ä»¥åä½ å°±å¯ä»¥æŠŠä»–å½“æˆä¸€ä¸ªå…¨å±€åŒ…ä½¿ç”¨äº†ï¼Œæ‹·è´å®Œåç›´æ¥ä½¿ç”¨<code>poem-cli</code>æ¥è¿è¡Œè„šæœ¬å°±å¯ä»¥äº†ã€‚</p><p><img src="/2019/09/06/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸Šï¼‰/4.png" alt="ä½¿ç”¨npm link"></p><h2 id="å‘å¸ƒåˆ°npmä»“åº“ä¸Š"><a href="#å‘å¸ƒåˆ°npmä»“åº“ä¸Š" class="headerlink" title="å‘å¸ƒåˆ°npmä»“åº“ä¸Š"></a>å‘å¸ƒåˆ°npmä»“åº“ä¸Š</h2><p><code>npm link</code>å‘½ä»¤æ˜¯æŠŠæœ¬åœ°çš„æ–‡ä»¶å¤¹æ”¾åœ¨å…¨å±€ç›®å½•ä¸‹ï¼Œä½†æ˜¯ä¸ºäº†æ›´å¤šçš„å°ä¼™ä¼´ä½¿ç”¨æˆ‘ä»¬çš„åŒ…ï¼Œå°±éœ€è¦æŠŠè¯¥åŒ…æ”¾åœ¨npmä»“åº“ä¸­ã€‚é¦–å…ˆéœ€è¦å»<a href="https://www.npmjs.com/" target="_blank" rel="noopener">npmå®˜ç½‘</a>æ³¨å†Œè‡ªå·±çš„è´¦å·ï¼Œå·²æœ‰è´¦å·å¿½ç•¥è¿™ä¸€æ­¥ã€‚æ­¤å¤–ç”±äºå›½å†…ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯æ·˜å®çš„é•œåƒï¼Œå¦‚æœä½ ä½¿ç”¨çš„ä¹Ÿæ˜¯æ·˜å®çš„æˆ–è€…å…¶ä»–çš„é•œåƒï¼Œè¿™é‡Œ<strong>å¿…é¡»</strong>è¦åˆ‡å›åˆ°npmçš„é•œåƒï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨nrmæ¥ç®¡ç†é•œåƒæºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…nrm</span></span><br><span class="line">npm install -g nrm</span><br><span class="line"><span class="comment"># åˆ‡å›åˆ°npmé•œåƒæº</span></span><br><span class="line">nrm use npm</span><br></pre></td></tr></table></figure><p>åœ¨æäº¤çš„æ—¶å€™ï¼Œå¾€å¾€æœ‰äº›ä¸œè¥¿æ˜¯ä¸å¸Œæœ›æäº¤çš„ï¼Œé‚£ä¹ˆå¯ä»¥æ–°å»ºä¸€ä¸ª<code>.npmignore</code>æ–‡ä»¶ï¼Œä½œç”¨ç±»ä¼¼äº<code>.gitignore</code>ï¼Œåªæ˜¯è¿™ä¸ªæ˜¯æäº¤npmä»“åº“çš„æ—¶å€™å¿½ç•¥çš„ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨è¯¥æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">node_modules/</span><br><span class="line">.idea</span><br><span class="line">.vscode</span><br><span class="line">.gitignore</span><br><span class="line">.git</span><br></pre></td></tr></table></figure><p>å½“è¿™ä¸ªæ—¶å€™ä½ åªéœ€è¦ç™»å½•npmå¹¶ä¸”å‘å¸ƒå°±å¥½äº†ï¼Œå¦‚æœå·²ç»ç™»å½•äº†å°±å¯ä»¥ç›´æ¥å‘å¸ƒäº†ï¼ˆå¯ä»¥ä½¿ç”¨å‘½ä»¤<code>npm whoami</code>æ¥æŸ¥çœ‹è‡ªå·±çš„ç™»å½•ä¿¡æ¯ï¼Œå†æ¬¡å¼ºè°ƒ<strong>ä¸€å®šè¦åˆ‡åˆ°npmé•œåƒæº</strong>ï¼‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç™»å½•npm éœ€è¦æ•°æ®ç”¨æˆ·å å¯†ç  é‚®ç®±ç­‰</span></span><br><span class="line">npm login</span><br><span class="line"><span class="comment"># å‘å¸ƒ</span></span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure><p>å‘å¸ƒçš„é€Ÿåº¦è¿˜æ˜¯æŒºå¿«çš„ï¼Œå½“ä½ å‘å¸ƒå®Œæˆä»¥åå°±å¯ä»¥ä½¿ç”¨<code>npm install -g poem-cli</code>æ¥å®‰è£…å…¨å±€åŒ…äº†ï¼Œå½“ç„¶è¿™ä¸ªåå­—å·²ç»è¢«æˆ‘æ³¨å†Œäº†ï¼Œä½ éœ€è¦æ¢ä¸€ä¸ªåå­—ã€‚æœ€åä½¿ç”¨<code>poem-cli</code>æ¥è¿è¡Œå°±å¯ä»¥äº†ï¼Œå¤§åŠŸå‘Šæˆã€‚æ­¤æ—¶ä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>nrm use taobao</code>åˆ‡æ¢åˆ°æ·˜å®é•œåƒäº†ï¼Œå¾€å¾€æ·˜å®é•œåƒä¼šåœ¨5åˆ†é’Ÿå†…ä»npmè·å–ä¸€ä¸‹æ–°çš„åŒ…ï¼Œæ‰€ä»¥ä½ åˆ‡åˆ°æ·˜å®çš„é•œåƒï¼Œ5åˆ†é’Ÿåä¹Ÿå¯ä»¥å®‰è£…ï¼ˆå…¶å®ä¸€èˆ¬æƒ…å†µä¸‹æ ¹æœ¬ä¸åˆ°5åˆ†é’Ÿï¼‰ã€‚</p><p>ååˆ†é’Ÿçš„æ—¶é—´å·®ä¸å¤šåˆ°äº†ï¼Œæˆ‘ä»¬çš„å…¨å±€ä¾èµ–åŒ…å·²ç»åšå®Œäº†ï¼Œæ˜¯ä¸æ˜¯æ”¶è·è¿˜ä¸é”™ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬å†åˆ©ç”¨20åˆ†é’Ÿï¼Œè®©æˆ‘ä»¬çš„å…¨å±€å®‰è£…åŒ…åšçš„æ›´å¥½ä¸€ç‚¹ï¼ŒåŒæ—¶ä¹Ÿç®€ç»å‘½ä»¤è¡Œå·¥å…·å¸¸ç”¨çš„2ä¸ªå·¥å…·åº“ã€‚å¯ä»¥ç‚¹å‡»<a href="https://www.kai666666.top/2019/09/07/10åˆ†é’Ÿå¼€å‘ä¸€ä¸ªnpmå…¨å±€ä¾èµ–åŒ…ï¼ˆä¸‹ï¼‰/#more">è¿™é‡Œ</a>è¿›å…¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«åº”ç”¨åˆæ¢--æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨</title>
      <link href="/2019/08/25/%E5%BF%AB%E5%BA%94%E7%94%A8%E5%88%9D%E6%8E%A2-%E6%8A%8A%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%B0%81%E8%A3%85%E6%88%90%E5%BF%AB%E5%BA%94%E7%94%A8/"/>
      <url>/2019/08/25/%E5%BF%AB%E5%BA%94%E7%94%A8%E5%88%9D%E6%8E%A2-%E6%8A%8A%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%B0%81%E8%A3%85%E6%88%90%E5%BF%AB%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å…¬å¸åœ¨åšå¿«åº”ç”¨çš„éœ€æ±‚ï¼Œç»è¿‡2å‘¨çš„åŠªåŠ›ï¼Œ<code>æ·˜ç²‰å§å¿«åº”ç”¨</code>å·²ç»ä¸Šçº¿äº†ï¼Œç°åœ¨å€Ÿæ­¤æœºä¼šè·Ÿå¤§å®¶èŠèŠå¿«åº”ç”¨ã€‚</p><hr><h3 id="æ‚è°ˆ"><a href="#æ‚è°ˆ" class="headerlink" title="æ‚è°ˆ"></a>æ‚è°ˆ</h3><p>è‡ªä»Javaè¯­è¨€åˆ›ç«‹ä»¥åï¼Œä¸€åœºè·¨å¹³å°è½¯ä»¶çš„é©å‘½æ‹‰å¼€äº†åºå¹•ï¼Œä»æ­¤ä¸€ä»½ä»£ç å¯ä»¥åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œäº†ã€‚è¿‘ä¸¤å¹´å°ç¨‹åºæ›´æ˜¯æŠŠè·¨å¹³å°çš„åº”ç”¨æ¨ä¸Šäº†ä¸€ä¸ªæ–°çš„é«˜åº¦ï¼Œ<code>ç”¨å®Œå³èµ°,ä¸åšåœç•™</code>çš„ç†å¿µæ›´æ˜¯æ·±å…¥äººå¿ƒã€‚éšç€å®½å¸¦çš„æ™®åŠï¼Œç§»åŠ¨æµé‡è´¹ç”¨çš„é™ä½ï¼Œç°åœ¨çš„åº”ç”¨è¶Šæ¥è¶Šå¿«ï¼ŒåŒæ—¶è¶Šæ¥è¶Šè½»ã€‚å°±åœ¨è¿™æ ·çš„å¤§ç¯å¢ƒä¸‹ï¼Œå›½å†…æ‰‹æœºå‚å•†ä»¬ä¸æƒ³å¾®ä¿¡ä¸€å®¶ç‹¬å¤§ï¼Œäºæ˜¯ä¹Ÿæäº†ä¸€ä¸ª<code>ç”¨å®Œå³èµ°,ä¸åšåœç•™</code>çš„è½¯ä»¶å¹³å°ï¼Œè¿™å°±æ˜¯<code>å¿«åº”ç”¨</code>ã€‚ç”±äºå¿«åº”ç”¨æ¯”å¾®ä¿¡æ›´åŠ åº•å±‚ï¼Œæ‰€ä»¥ç†è®ºä¸Šï¼Œå¿«åº”ç”¨è¦æ›´å¿«ï¼ŒåŒæ—¶ä½“éªŒè¦æ›´å¥½ï¼›å¦ä¸€æ–¹ä¾¿ï¼Œå¿«åº”ç”¨å¯ä»¥åšåƒè´Ÿä¸€å±ç­‰å°ç¨‹åºæ— æ³•åšçš„æ“ä½œã€‚æ›´å¤šå¿«åº”ç”¨ç›¸å…³çš„å†…å®¹å¯ä»¥ç›´æ¥å»å®ƒçš„<a href="https://www.quickapp.cn/" target="_blank" rel="noopener">å®˜ç½‘</a>æŸ¥çœ‹ã€‚</p><h3 id="ä½“éªŒå¿«åº”ç”¨"><a href="#ä½“éªŒå¿«åº”ç”¨" class="headerlink" title="ä½“éªŒå¿«åº”ç”¨"></a>ä½“éªŒå¿«åº”ç”¨</h3><p>ç”±äºå¿«åº”ç”¨æ˜¯å›½å†…æ‰‹æœºå‚å•†ä»¬æ¥æ”¯æŒçš„ï¼Œæ‰€ä»¥å¿«åº”ç”¨åª<strong>æ”¯æŒå®‰å“ä¸æ”¯æŒiPhone</strong>ï¼Œå½“ç„¶ä¹Ÿä¸æ˜¯æ‰€æœ‰çš„å®‰å“æœºéƒ½æ”¯æŒï¼Œè¿™é‡Œæœ‰ä¸€ä»½<a href="https://doc.quickapp.cn/changelog/ecology.html" target="_blank" rel="noopener">ç”Ÿæ€æ•°æ®</a>å¯ä»¥çœ‹çœ‹ã€‚è™½ç„¶å¹¶ä¸æ”¯æŒæ‰€æœ‰çš„æœºå‹ï¼Œä½†æ˜¯å›½äº§æ‰‹æœºçš„ç”¨æˆ·ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆåºå¤§çš„æ•°å­—ï¼Œæ‰€ä»¥æœ‰å®åŠ›çš„å…¬å¸ç ”ç©¶ä¸€ä¸‹å¿«åº”ç”¨è¿˜æ˜¯æœ‰äº›å¿…è¦çš„ã€‚<br>é‚£ä¹ˆç”¨æˆ·æ€ä¹ˆä½¿ç”¨å¿«åº”ç”¨å‘¢ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆä¾‹å­ï¼Ÿåƒæˆ‘ä½¿ç”¨çš„æ˜¯å°ç±³æ‰‹æœºï¼Œå°ç±³æ‰‹æœºæ˜¯æ”¯æŒå¿«åº”ç”¨çš„ï¼Œåœ¨åº”ç”¨å¸‚åœºæœç´¢<code>æ·˜ç¥¨ç¥¨</code>ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªç§’å¼€ï¼Œè¿™ä¸ªç§’å¼€å°±æ˜¯æ‰“å¼€æ·˜ç¥¨ç¥¨å¿«åº”ç”¨ï¼Œä½ å¯ä»¥å…ˆå»ä½“éªŒä¸€ä¸‹ã€‚</p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/1.jpeg" alt="æ·˜ç¥¨ç¥¨å¿«åº”ç”¨"></p><h3 id="å¿«åº”ç”¨ç¯å¢ƒæ­å»º"><a href="#å¿«åº”ç”¨ç¯å¢ƒæ­å»º" class="headerlink" title="å¿«åº”ç”¨ç¯å¢ƒæ­å»º"></a>å¿«åº”ç”¨ç¯å¢ƒæ­å»º</h3><p>å¥½äº†ï¼Œè¯´äº†è¿™ä¹ˆå¤šäº†ï¼Œæˆ‘ä»¬å¯ä»¥è¯•ç€å¼€å‘ä¸€ä¸ªå¿«åº”ç”¨äº†ã€‚åœ¨å¼€å‘ä¹‹å‰å…ˆæ­å»ºä¸€ä¸‹å¿«åº”ç”¨çš„ç¯å¢ƒå§ã€‚<br>å¿«åº”ç”¨çš„ç¯å¢ƒè·Ÿå¤§å¤šæ•°å‰ç«¯åº”ç”¨ä¸€æ ·ä¹Ÿæ˜¯åŸºäº<code>nodeJS</code>æ¥å¯åŠ¨çš„ï¼Œ<code>node</code>çš„å®‰è£…è¿™é‡Œå°±ä¸è¯´äº†ï¼Œè¿™é‡Œå‡è®¾ä½ å·²ç»å®‰è£…<code>node</code>äº†ã€‚<br>é¦–å…ˆéœ€è¦ä¸‹è½½3ä¸ªä¸œè¥¿ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å¿«åº”ç”¨çš„å¼€å‘å·¥å…·ï¼Œä¸‹è½½åœ°å€è¯·ç‚¹<a href="https://www.quickapp.cn/docCenter/post/95" target="_blank" rel="noopener">è¿™é‡Œ</a>ï¼Œå…¶å®è¿™ä¸ªå·¥å…·å°±æ˜¯å°è£…è‡ª<code>VSCode</code>ï¼Œå¦‚æœä½ ä¸€ç›´ç”¨çš„æ˜¯<code>VSCode</code>æ¥åšçš„å¼€å‘ï¼Œé‚£ä¹ˆè¯¥å¼€å‘å·¥å…·åº”è¯¥å¾ˆé€‚åˆä½ ã€‚æ¥ä¸‹æ¥è¦å®‰è£…çš„æ˜¯è°ƒè¯•å™¨å’Œé¢„è§ˆç‰ˆï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯ç”¨æ¥è°ƒè¯•ç”¨çš„ï¼Œéœ€è¦å®‰è£…åˆ°ä½ çš„å®‰å“æ‰‹æœºä¸Šï¼Œéœ€è¦æ³¨æ„çš„æ˜¯é¢„è§ˆç‰ˆå¯ä»¥ä¸‹è½½ä¸åŒçš„ç‰ˆæœ¬ï¼Œæœ€å¥½ä¸‹è½½ä½ æ”¯æŒçš„æœ€ä½ç‰ˆæœ¬ï¼Œæœ€åè¯·ç‚¹å‡»è¿™é‡Œ<a href="https://www.quickapp.cn/docCenter/post/69" target="_blank" rel="noopener">ä¸‹è½½</a>ã€‚</p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/2.png" alt="è°ƒè¯•å™¨å’Œé¢„è§ˆç‰ˆ"></p><p>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤åŸºæœ¬è½¯ä»¶å·²ç»å®‰è£…äº†ï¼Œç„¶åæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚é¦–å…ˆæ¥å®‰è£…å…¨å±€çš„å‘½ä»¤è¡Œå·¥å…·ï¼š</p><blockquote><p>npm install -g hap-toolkit</p></blockquote><p>è¿™ä¸ªåªéœ€è¦å®‰è£…ä¸€æ¬¡ã€‚ç„¶åæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®åæ ¹æ®è‡ªå·±å–œæ¬¢å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å«åš<code>blog-quickapp</code>ï¼Œé‚£ä¹ˆè¿è¡Œå‘½ä»¤ï¼š</p><blockquote><p>hap init blog-quickapp</p></blockquote><p>é¡¹ç›®ç”Ÿæˆå¥½äº†ä»¥åæˆ‘ä»¬ç”¨åˆšæ‰ä¸‹è½½çš„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œç‚¹å‡»<code>æ–‡ä»¶ç»“æ„-&gt;æ‰“å¼€æ–‡ä»¶å¤¹</code>ï¼Œä¹Ÿå¯ä»¥æŠŠåˆšæ‰åˆ›å»ºçš„æ–‡ä»¶å¤¹æ‹–è¿›æ¥ã€‚</p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/3.png" alt="æ‰“å¼€é¡¹ç›®"></p><p>ç„¶ååœ¨ç»ˆç«¯ä¸‹è¾“å…¥<code>npm install</code> è¿™ä¸€æ­¥å¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´ä¸€å®šä¸é™Œç”Ÿã€‚</p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/4.png" alt="å®‰è£…é¡¹ç›®"></p><p>ç¨ç­‰ç‰‡åˆ»ï¼Œå®‰è£…å®Œæˆåå†è¾“å…¥å‘½ä»¤<code>npm run server</code>ï¼ŒåŒæ—¶å†å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¾“å…¥å¦ä¸€ä¸ªå‘½ä»¤<code>npm run watch</code>ï¼Œå…¶ä¸­å‰ä¸€ä¸ªå‘½ä»¤æ˜¯å¯åŠ¨æœåŠ¡çš„ï¼Œç¬¬äºŒä¸ªå‘½ä»¤æ˜¯å¯åŠ¨å®æ—¶ç¼–è¯‘çš„ã€‚é‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯å¦‚ä¸‹ï¼š</p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/5.png" alt="å¯åŠ¨å®æ—¶ç¼–è¯‘"></p><p>ç„¶åæ‰“å¼€<code>http://ä½ çš„IP:8000</code>ï¼Œå¦‚æœçœ‹åˆ°ä¸€ä¸ªäºŒç»´ç ï¼Œè¯´æ˜é¡¹ç›®å·²ç»èµ·æ¥äº†ï¼Œç‚¹å‡»åº•éƒ¨çš„<code>æ‰“å¼€ web é¢„è§ˆ</code>å¼€å§‹æŸ¥çœ‹ç½‘é¡µé¢„è§ˆç‰ˆï¼Œä¹Ÿå¯ä»¥æ‰“å¼€æ‰‹æœºä¸Šåˆšæ‰å®‰è£…çš„<code>å¿«åº”ç”¨è°ƒè¯•å™¨</code>ï¼Œç„¶åè¿è¡Œå¹³å°é€‰æ‹©åˆšæ‰å®‰è£…çš„å¿«åº”ç”¨é¢„è§ˆç‰ˆå°±å¯ä»¥äº†ï¼Œæœ€åç‚¹å‡»<code>æ‰«ç å®‰è£…</code>ï¼Œæ‰«è¿™ä¸ªäºŒç»´ç å°±å¯ä»¥äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ‰‹æœºå’Œç”µè„‘å¿…é¡»è¦è¿äººåŒä¸€ä¸ªWIFIã€‚</p><h3 id="å¿«åº”ç”¨ä¸æ™®é€šwebåº”ç”¨çš„ä¸åŒ"><a href="#å¿«åº”ç”¨ä¸æ™®é€šwebåº”ç”¨çš„ä¸åŒ" class="headerlink" title="å¿«åº”ç”¨ä¸æ™®é€šwebåº”ç”¨çš„ä¸åŒ"></a>å¿«åº”ç”¨ä¸æ™®é€šwebåº”ç”¨çš„ä¸åŒ</h3><p>å¿«åº”ç”¨å’Œæ™®é€šçš„webåº”ç”¨è¿˜æ˜¯æœ‰å¾ˆå¤§çš„ä¸åŒçš„ï¼Œå¿«åº”ç”¨é‡‡ç”¨å‰ç«¯çš„è¿™å¥—å¼€å‘æœºåˆ¶ï¼Œä½†æ˜¯åˆåšäº†å¾ˆå¤šçš„é™åˆ¶ï¼Œæ¯”å¦‚ä»–å¼ºçƒˆå¸Œæœ›ä½ ä½¿ç”¨flexå¸ƒå±€ï¼Œä¸ºæ­¤å®ƒæŠŠæµ®åŠ¨å’Œå®šä½å…¨éƒ¨ç¦ç”¨äº†ï¼Œå¦‚æœä½ ä½¿ç”¨æµ®åŠ¨å’Œå®šä½å°±ä¼šå‡ºç°é”™è¯¯ï¼ˆè€Œä¸æ˜¯è­¦å‘Šï¼‰ã€‚æµ®åŠ¨çš„åŠŸèƒ½åŸºæœ¬ä¸Šflexå¯ä»¥ä»£æ›¿ï¼Œé‚£ä¹ˆå®šä½å‘¢ï¼Ÿä»–è‡ªå·±åˆ›å»ºäº†ä¸€ä¸ª<a href="https://doc.quickapp.cn/widgets/stack.html" target="_blank" rel="noopener">stackç»„ä»¶</a>æ¥å¤„ç†å®šä½çš„é—®é¢˜ã€‚ä»–çš„æ¡†æ¶å’Œ<code>vue</code>æˆ–å°ç¨‹åºéå¸¸ç±»ä¼¼ï¼Œæœ‰<code>vue</code>æˆ–å°ç¨‹åºå¼€å‘ç»éªŒçš„åŒå­¦å¯ä»¥å¾ˆå¿«é€‚åº”ä»–çš„å†™æ³•ï¼ˆå¯ä»¥çœ‹çœ‹<code>/src/Demo/index.ux</code>ä¸­çš„ä»£ç ï¼‰ã€‚å¿«åº”ç”¨å¯¹CSSçš„é™åˆ¶æ˜¯éå¸¸å¤§çš„ï¼Œå°±æ¯”å¦‚é¢œè‰²çš„ç»§æ‰¿å®ƒæ˜¯ä¸æ”¯æŒçš„ï¼Œéœ€è¦å†™åœ¨å…·ä½“çš„æ ‡ç­¾ä¸Šï¼›divé‡Œé¢ç›´æ¥å†™æ–‡å­—ï¼ŒæŠ±æ­‰ï¼Œä¹Ÿä¸è¡Œï¼ä½ éœ€è¦ç”¨textæˆ–spanç­‰æ ‡ç­¾åŒ…ä¸€å±‚ã€‚è¿™äº›é™åˆ¶åˆšå¼€å§‹ä½ å¯èƒ½ä¸å¤ªé€‚åº”ï¼Œæˆ–è®¸å¼€å‘çš„æ—¶å€™æ„Ÿè§‰æœ‰ç‚¹ç—›è‹¦ï¼Œæ˜æ˜ä»£ç æ˜¯å¯¹çš„ï¼Œä½†æ˜¯å´ä¸è¡Œï¼Œè¿™æ—¶ä½ å°±å¾—å¤šçœ‹çœ‹ä»–åœ¨<code>npm run watch</code>å‘½ä»¤ä¸‹è¾“å‡ºæ—¥å¿—äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ä¾‹å­ä¸­çš„ä»£ç ï¼Œåœ¨<code>/src/Demo/index.ux</code>æ–‡ä»¶ä¸­å†™äº†ä¸€ä¸ªinputæ ‡ç­¾ï¼Œä½†æ˜¯åœ¨çœŸæ­£è¿è¡Œæ—¶ï¼Œä»£ç ä¸­å¤šäº†ä¸€ä¸ª<code>style</code>ï¼Œ<code>style</code>å±æ€§çš„å†…å®¹å°±æ˜¯å¿«åº”ç”¨æ¡†æ¶æŠŠé»˜è®¤æ ·å¼å’Œè‡ªå®šä¹‰æ ·å¼å¤„ç†æ•´åˆåçš„ç»“æœã€‚</p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/6.png" alt="æ¨¡æ¿ä»£ç "></p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/7.png" alt="æ ·å¼ä»£ç "></p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/8.png" alt="æ ·å¼æ•´åˆåçš„ä»£ç "></p><p>æ‰€ä»¥å¦‚æœè¯¥æ ‡ç­¾æ²¡æœ‰å†™é¢œè‰²ç­‰ä¿¡æ¯çš„æ—¶å€™å°±ä¸ä¼šæœ‰äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé¢œè‰²ä¸èƒ½è¢«ç»§æ‰¿çš„åŸå› ã€‚å¦å¤–å¿«åº”ç”¨ä¸æ”¯æŒCSSçš„<code>ä¸”é€‰æ‹©å™¨</code>ï¼Œä¹Ÿå°±æ˜¯<code>.class.class2{...}</code>ã€‚æˆ‘ä»¬ç»å¸¸ç”¨ä¸åŒçš„ç±»é€‰æ‹©å™¨å»è¦†ç›–æ­£å¸¸çš„æ ·å¼ï¼Œå°±æ¯”å¦‚aæ ‡ç­¾æ­£å¸¸çš„æ ·å¼æ˜¯<code>a-link</code>çš„é¢œè‰²ï¼Œå‡è®¾å®ƒæ˜¯ç»¿è‰²çš„ï¼Œç„¶åå½“ç‚¹å‡»ä»¥åclasså±æ€§æ˜¯<code>a-link active</code>ï¼Œå…¶ä¸­<code>active</code>è¡¨æ˜é¢œè‰²æ˜¯çº¢è‰²çš„ï¼Œå¦‚æœ<code>active</code>æ ·å¼æ˜¯ä¸”é€‰æ‹©å™¨çš„è¯ï¼ˆ<code>.a-link.active{...}</code>ï¼‰ï¼Œåœ¨å¿«åº”ç”¨ä¸­å°±æ˜¯ä¸è¡Œçš„ï¼Œé€šå¸¸éœ€è¦å†™æˆ2ä¸ªæ ·å¼ï¼ˆ<code>.a-link{...}</code>å’Œ<code>.active{...}</code>ï¼‰ã€‚</p><h3 id="å°è£…åšå®¢æˆå¿«åº”ç”¨"><a href="#å°è£…åšå®¢æˆå¿«åº”ç”¨" class="headerlink" title="å°è£…åšå®¢æˆå¿«åº”ç”¨"></a>å°è£…åšå®¢æˆå¿«åº”ç”¨</h3><p>å¿«åº”ç”¨æœ‰è‡ªå·±çš„ç»„ä»¶å’Œè‡ªå·±çš„ä¸€äº›æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›ç»„ä»¶æ¥å†™é¡µé¢ã€‚ç”±äºå¼€å‘è€…å¾€å¾€éƒ½æœ‰è‡ªå·±çš„åšå®¢ï¼Œä¸€èˆ¬ä½¿ç”¨<code>Github Pages</code>æœåŠ¡æ¥åšçš„ï¼Œæ—¢ç„¶å·²ç»æœ‰åšå®¢äº†ï¼Œé‚£ä¹ˆåšå®¢é¡µé¢å°±æ²¡å¿…è¦å¼€å‘äº†ï¼Œç›´æ¥ä½¿ç”¨webç»„ä»¶ï¼ˆç±»ä¼¼äºå®‰å“ä¸­çš„webviewï¼‰æ¥åŠ è½½é¡µé¢å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬åœ¨srcä¸‹å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹å«<code>Webview</code>ï¼Œç„¶åå†åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª<code>index.ux</code>ï¼Œè¿™æ—¶å¼€å§‹å†™è‡ªå·±çš„ä»£ç äº†ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼Œä½ éœ€è¦æ›¿æ¢<code>protected</code>ä¸‹çš„<code>url</code>ä¸ºä½ è‡ªå·±çš„åœ°å€ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">web</span> <span class="attr">id</span>=<span class="string">"web"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">src</span>=<span class="string">"&#123;&#123;url&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">web</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@system.router'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> prompt <span class="keyword">from</span> <span class="string">'@system.prompt'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">private</span>: &#123;</span></span><br><span class="line"><span class="actionscript">    backTime: <span class="literal">null</span>,</span></span><br><span class="line"><span class="undefined">    maxBackTime: 1800</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// é¡µé¢çº§ç»„ä»¶çš„æ•°æ®æ¨¡å‹ï¼Œå½±å“ä¼ å…¥æ•°æ®çš„è¦†ç›–æœºåˆ¶ï¼šprivateå†…å®šä¹‰çš„å±æ€§ä¸å…è®¸è¢«è¦†ç›–</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">protected</span>: &#123;</span></span><br><span class="line"><span class="actionscript">    url: <span class="string">'https://www.kai666666.top'</span></span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  onMenuPress() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.$app.$def.showMenu()</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  onBackPress() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.$element(<span class="string">'web'</span>).canBack(&#123;</span></span><br><span class="line"><span class="actionscript">      callback: <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (e) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// åŠ è½½å†å²åˆ—è¡¨ä¸­çš„ä¸Šä¸€ä¸ª URL</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.$element(<span class="string">'web'</span>).back()</span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">if</span> (router.getLength() === <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> currentTime = +<span class="keyword">new</span> <span class="built_in">Date</span>()</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (!<span class="keyword">this</span>.backTime || currentTime - <span class="keyword">this</span>.backTime &gt; <span class="keyword">this</span>.maxBackTime) &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">this</span>.backTime = currentTime</span></span><br><span class="line"><span class="undefined">              prompt.showToast(&#123;</span></span><br><span class="line"><span class="actionscript">                message: <span class="string">'å†æŒ‰ä¸€æ¬¡é€€å‡ºç¨‹åº'</span></span></span><br><span class="line"><span class="undefined">              &#125;)</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">          router.back()</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="actionscript">      &#125;.bind(<span class="keyword">this</span>)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œç­‰å¾…å¼‚æ­¥æ“ä½œ</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>protected</code>ä¸‹çš„å­—æ®µæ˜¯ä»urlä¸­ä¼ å…¥çš„ï¼›<code>private</code>ä¸­çš„å­—æ®µå°±æ˜¯ç»„ä»¶å†…éƒ¨çš„å­—æ®µï¼Œç±»ä¼¼ä¸vueä¸­çš„dataã€‚<code>onBackPress</code>å‡½æ•°æ˜¯å½“è¿”å›é”®æŒ‰ä¸‹ä»¥åçš„å›è°ƒï¼Œè¿”å›trueå¯ä»¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œè¿™é‡Œçš„ä½œç”¨æ˜¯å¦‚æœé¡µé¢ä¸­å¯ä»¥è¿”å›çš„è¯ç›´æ¥ä½¿ç”¨é¡µé¢çº§åˆ«çš„è¿”å›ï¼Œå¦åˆ™ä½¿ç”¨åº”ç”¨çº§çš„è¿”å›ï¼Œå¦‚æœæ˜¯æœ€å¤–å±‚çš„é¡µé¢é‚£ä¹ˆè¿ç»­2æ¬¡è¿”å›æ‰èƒ½é€€å‡ºç¨‹åºã€‚</p><p>æœ€åæ–°å¢åŠ çš„é¡µé¢éœ€è¦åœ¨æ¸…å•æ–‡ä»¶<code>/src/manifest.json</code>ä¸­å£°æ˜ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘æŠŠå…¶ä»–çš„é¡µé¢åˆ é™¤äº†ï¼Œæ­¤æ—¶æ¸…å•æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"package"</span>: <span class="string">"top.kai666666.blog"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"æ©™å…‰ç¬”è®°"</span>,</span><br><span class="line">  <span class="attr">"versionName"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"versionCode"</span>: <span class="string">"1"</span>,</span><br><span class="line">  <span class="attr">"minPlatformVersion"</span>: <span class="string">"1020"</span>,</span><br><span class="line">  <span class="attr">"icon"</span>: <span class="string">"/Common/logo.png"</span>,</span><br><span class="line">  <span class="attr">"features"</span>: [&#123; <span class="attr">"name"</span>: <span class="string">"system.prompt"</span> &#125;, &#123; <span class="attr">"name"</span>: <span class="string">"system.router"</span> &#125;, &#123; <span class="attr">"name"</span>: <span class="string">"system.shortcut"</span> &#125;],</span><br><span class="line">  <span class="attr">"permissions"</span>: [&#123; <span class="attr">"origin"</span>: <span class="string">"*"</span> &#125;],</span><br><span class="line">  <span class="attr">"config"</span>: &#123;</span><br><span class="line">    <span class="attr">"logLevel"</span>: <span class="string">"off"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"router"</span>: &#123;</span><br><span class="line">    <span class="attr">"entry"</span>: <span class="string">"Webview"</span>,</span><br><span class="line">    <span class="attr">"pages"</span>: &#123;</span><br><span class="line">      <span class="attr">"Webview"</span>: &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"index"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"About"</span>: &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"index"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"display"</span>: &#123;</span><br><span class="line">    <span class="attr">"titleBarBackgroundColor"</span>: <span class="string">"#f2f2f2"</span>,</span><br><span class="line">    <span class="attr">"titleBarTextColor"</span>: <span class="string">"#414141"</span>,</span><br><span class="line">    <span class="attr">"menu"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"pages"</span>: &#123;</span><br><span class="line">      <span class="attr">"Webview"</span>: &#123;</span><br><span class="line">        <span class="attr">"titleBarText"</span>: <span class="string">"æ©™å…‰ç¬”è®°"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"About"</span>: &#123;</span><br><span class="line">        <span class="attr">"menu"</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åçš„æœ€åæŠŠ<code>/src/Common/logo.png</code>ä¸‹çš„å›¾ç‰‡æ¢æˆæˆ‘ä»¬çš„ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ¡Œé¢å›¾æ ‡ï¼Œæœ€åå‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼Œç®€ç›´å’ŒåŸç”ŸAPPä¸€æ¨¡ä¸€æ ·ã€‚</p><p><img src="/2019/08/25/å¿«åº”ç”¨åˆæ¢-æŠŠä¸ªäººåšå®¢å°è£…æˆå¿«åº”ç”¨/9.gif" alt="å®Œæ•´ç‰ˆ"></p><p>å¿«åº”ç”¨ç‰ˆæœ¬çš„åšå®¢å°±åšå¥½äº†ï¼Œå½“ç„¶ä½ å¯ä»¥åˆ©ç”¨å¿«åº”ç”¨çš„èƒ½åŠ›æ¥æ–°å¢æ›´å¤šçš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥åšè‡ªå·±å–œæ¬¢çš„å¿«åº”ç”¨ã€‚æœ€åæäº¤åˆ°åº”ç”¨å¸‚åœºä¸Šï¼Œè®©æ›´å¤šå°ä¼™ä¼´è®¿é—®ã€‚æäº¤åˆ°åº”ç”¨å¸‚åœºæ— éå°±2æ­¥ï¼Œä¸€æ­¥å°±æ˜¯<a href="https://www.quickapp.cn/docCenter/post/71" target="_blank" rel="noopener">æ³¨å†Œ</a>ï¼Œå¦ä¸€æ­¥å°±æ˜¯<a href="https://www.quickapp.cn/docCenter/post/72" target="_blank" rel="noopener">ä¸Šä¼ è‡ªå·±çš„å¿«åº”ç”¨</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯æŠ€æœ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·‘æ­¥æé€ŸæŒ‡å—</title>
      <link href="/2019/08/10/%E8%B7%91%E6%AD%A5%E6%8F%90%E9%80%9F%E6%8C%87%E5%8D%97/"/>
      <url>/2019/08/10/%E8%B7%91%E6%AD%A5%E6%8F%90%E9%80%9F%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨å·²ç»ç«‹ç§‹äº†ï¼Œå¤©æ°”æ¸æ¸è½¬å‡‰ï¼Œé©¬æ‹‰æ¾èµ›äº‹ä¹Ÿé€æ¸å¼€å§‹æŠ¥åäº†ã€‚éšç€å…¨æ°‘å¥èº«çš„ç†å¿µæ·±å…¥äººå¿ƒï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹è·‘æ­¥äº†ï¼Œé©¬æ‹‰æ¾èµ›äº‹ä¹Ÿè¶Šæ¥è¶Šç«äº†ã€‚æ­å·é©¬æ‹‰æ¾æŠ¥åé¦–æ—¥å°±æœ‰82221åç«¥é‹æŠ¥åäº†ï¼Œè€Œæœ¬å±Šé©¬æ‹‰æ¾å‚èµ›æ€»äººæ•°ä¸º36000åï¼Œä»…ä»…é¦–æ—¥å°±è¿œè¶…è¿™ä¸ªæ•°å­—ã€‚ä¸æ­å·é©¬æ‹‰æ¾ä¸åŒçš„æ˜¯å®æ³¢é©¬æ‹‰æ¾é‡‡å–å…ˆåˆ°å…ˆå¾—çš„èµ›åˆ¶ï¼ˆå…ˆæŠ¥åçš„å°±å¯ä»¥å‚åŠ ï¼ŒæŠ¥åæ…¢äº†å°±ä¸å¯ä»¥æŠ¥åäº†ï¼Œè¿™ç§èµ›åˆ¶ä¸éœ€è¦æŠ½ç­¾æ¥å†³å®šæ˜¯å¦å‚åŠ ï¼‰ï¼Œ8æœˆ5æ—¥ä¸Šåˆ9æ—¶å®æ³¢é©¬æ‹‰æ¾å¼€å§‹æŠ¥åï¼Œä»…ä»…ä¸€ä¸ªåŠå°æ—¶åçš„10ç‚¹35åˆ†ï¼ŒåŠç¨‹é©¬æ‹‰æ¾çš„åé¢å°±è¢«æŠ¢å®Œäº†ï¼›å…¨ç¨‹é©¬æ‹‰æ¾äº11ç‚¹30åˆ†ä¹Ÿå‘Šç½„äº†ã€‚ç”±æ­¤å¯è§é©¬æ‹‰æ¾ç°åœ¨å˜æˆä¸€ä¸ªéå¸¸ç«çˆ†çš„è¿åŠ¨ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå°†åœ¨é©¬æ‹‰æ¾çš„èµ›åœºä¸Šçªç ´è‡ªå·±ï¼Œåˆ›é€ æ–°çš„PBï¼ˆä¸ªäººæœ€ä½³ï¼‰ã€‚</p><p>æœ€è¿‘æˆ‘ä¹Ÿåœ¨çœ‹ä¸€æœ¬åå«ã€Šè·‘æ­¥åœ£ç»2â€”â€”é’ˆå¯¹é€Ÿåº¦çš„è·‘æ­¥è®­ç»ƒè®¡åˆ’ã€‹çš„è·‘æ­¥ä¹¦ç±ï¼Œåˆšå¥½å¯ä»¥æ›´å¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘æ‰€ç§¯ç´¯çš„è·‘æ­¥ç»éªŒã€‚åŒæ—¶å¸Œæœ›æˆ‘ä»¬ç¨‹åºçŒ¿å¯ä»¥åœ¨è·‘æ­¥ä¸Šçªç ´è‡ªå·±ï¼ŒåŒæ—¶æ‹¥æœ‰ä¸€ä¸ªæ›´å¥½çš„èº«ä½“ã€‚</p><p><img src="/2019/08/10/è·‘æ­¥æé€ŸæŒ‡å—/1.jpeg" alt="ã€Šè·‘æ­¥åœ£ç»2â€”â€”é’ˆå¯¹é€Ÿåº¦çš„è·‘æ­¥è®­ç»ƒè®¡åˆ’ã€‹"></p><hr><h3 id="å§¿åŠ¿ç¯‡"><a href="#å§¿åŠ¿ç¯‡" class="headerlink" title="å§¿åŠ¿ç¯‡"></a>å§¿åŠ¿ç¯‡</h3><p>æ­£ç¡®çš„è·‘æ­¥å§¿åŠ¿ï¼š</p><blockquote><p>è‡ªå·±æœ‰ç§å°†è¦æ‘”å€’çš„æ„Ÿè§‰ï¼Œä¸å¾—ä¸é€šè¿‡è…¿çš„å¿«é€Ÿç§»åŠ¨æ¥é¿å…æ‘”å€’ã€‚å¤´éƒ¨é™æ­¢ä¸åŠ¨ï¼Œå¾„ç›´å‘å‰çœ‹ã€‚æ‰‹è‡‚åº”å½“æœ‰è¢«å¾€åæ‹‰çš„æ„Ÿè§‰â€”â€”é€šè¿‡è‚©è†€å‘åæ‹‰æ‰‹è‡‚ï¼Œè‚©è†€åº”å½“æ—¶åˆ»ä¿æŒæ”¾æ¾ã€‚é€šè¿‡å¼¯æ›²è†ç›–ã€æŠ¬é«˜è„šåè·Ÿä½¿èº«ä½“å‰å€¾ï¼Œè¿™æ ·ä½ çš„è…¿å‡ ä¹èƒ½åƒè‡ªè¡Œè½¦è¿åŠ¨å‘˜ä¸€æ ·ç§»åŠ¨ã€‚åŒè„šåº”å½“è½»è½»åœ°ç€åœ°ï¼Œå¿«è€Œè½»åœ°ç§»åŠ¨ã€‚</p></blockquote><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼š</p><ol><li>è¦æœ‰å¿«è¦æ‘”å€’çš„æ„Ÿè§‰ï¼Œè¿™å°±å¿…é¡»ä½¿èº«ä½“å‘å‰å€¾ï¼Œç„¶åè®©é‡åŠ›ä½¿ä½ å‘å‰è·‘ï¼Œæ²¡é”™è®©é‡åŠ›æ¨å‘ä½ å‰è¿›ã€‚è‘—åçš„<code>å§¿åŠ¿è·‘æ­¥æ³•</code>æœ€æ ¸å¿ƒçš„ç†å¿µå°±æ˜¯è¿™ã€‚</li><li>å¤´éƒ¨è¦å‘å‰çœ‹ï¼Œä¸è¦ä½å¤´ä¸æŠ¬å¤´ï¼Œä¿æŒé¢ˆéƒ¨è‡ªç„¶ï¼Œè¿™æ ·å‘¼å¸èµ·æ¥ä¹Ÿé¡ºç•…ï¼Œä¿æŒè‰¯å¥½çš„å‘¼å¸ã€‚</li><li>æ‰‹è‡‚åº”è¯¥å‰åè¿åŠ¨ï¼Œè€Œä¸æ˜¯å·¦å³è¿åŠ¨ï¼Œå‡å°‘å·¦å³æ–¹å‘çš„èƒ½é‡æ¶ˆè€—ã€‚</li><li>è†ç›–ä¿æŒå¼¯æ›²ï¼Œä¿æŒä¸­å¿ƒå°½å¯èƒ½çš„é è¿‘è‚šè„æ‰€åœ¨å‚ç›´ä½ç½®ï¼Œä¸è¦å‘å‰è¸¢è„šã€‚</li><li>è½åœ°è¦è½»ç›ˆï¼Œè·‘æ­¥é«˜æ‰‹å¾€å¾€éƒ½æ˜¯è½»ç›ˆåœ°åœ¨è·‘æ­¥ï¼Œä¸è¦å‘å‡ºç °ç °ç °çš„å£°éŸ³ã€‚åŒæ—¶ä½ éœ€è¦è„šå‰æŒå…ˆç€åœ°ï¼Œè¿™æ ·å…·æœ‰ç¼“å†²çš„ä½œç”¨ï¼ŒåŒæ—¶å¯ä»¥è·‘å¾—æ›´å¿«ï¼Œè¿˜å¯ä»¥é™ä½è¿åŠ¨æŸä¼¤ã€‚</li><li>å¿«é€Ÿåœ°ç§»åŠ¨ï¼Œéœ€è¦æé«˜æ­¥é¢‘ï¼Œé™ä½æ­¥å¹…ï¼Œæ‰€ä»¥ä¸è¦è¿ˆå¤§æ­¥ï¼Œä¿æŒå°è€Œå¿«çš„æ­¥é¢‘ã€‚è¿ˆå¤§æ­¥ä¸€æ–¹é¢ä¼šäº§ç”Ÿåˆ¹è½¦æ•ˆåº”ï¼Œé•¿æ—¶é—´è¿ˆå¤§æ­¥å¯¹æŸä¼¤è‡ªå·±çš„èº«ä½“ï¼Œå¦ä¸€æ–¹é¢è¿ˆå¤§æ­¥ä¼šä½¿å¾—é€Ÿåº¦ä¸‹é™ã€‚</li></ol><h3 id="æŠ€å·§ç¯‡"><a href="#æŠ€å·§ç¯‡" class="headerlink" title="æŠ€å·§ç¯‡"></a>æŠ€å·§ç¯‡</h3><p>å¦‚ä½•çªç ´è‡ªå·±çš„é‡Œç¨‹ï¼Ÿ</p><blockquote><p>å¥½å¤šåŒå­¦åˆšå¼€å§‹çš„æ—¶å€™å¯èƒ½åªèƒ½è·‘2å…¬é‡Œï¼Œç”šè‡³1å…¬é‡Œã€‚é‚£ä¹ˆå¦‚æœå¯ä»¥çªç ´è‡ªå·±çš„é‡Œç¨‹å‘¢ï¼Ÿæœ€ç®€å•çš„åŠæ³•å°±æ˜¯è·‘æ…¢ä¸€ç‚¹ï¼Œæ²¡é”™åªè¦è·‘æ…¢ä¸€ç‚¹ï¼Œçªç ´5å…¬é‡Œæ˜¯æ²¡é—®é¢˜çš„ã€‚</p></blockquote><p>å¦‚ä½•è·‘çš„æ›´å¿«ï¼Ÿ</p><blockquote><p>å½“ä½ å¯ä»¥è¾¾åˆ°æŸä¸ªé‡Œç¨‹çš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥è¯•è¯•æ˜¯å¦å¯ä»¥è·‘å¾—æ›´å¿«ï¼Œè·‘çš„æ›´å¿«æ„å‘³ç€ä½ éœ€è¦çªç ´è‡ªå·±ã€‚åœ¨å¹³æ—¶çš„è®­ç»ƒä¸­éœ€è¦ä¸æ–­æé«˜æ­¥é¢‘ï¼Œå¿«é€Ÿè·‘å‘å‰å»ï¼Œæ²¡é”™å°±æ˜¯å¾ˆç´¯çš„é‚£ç§ï¼ŒåŒæ ·çš„è¦ä¿æŒå‘¼å¸çš„é¡ºç•…ï¼Œæœ€å¥½å››æ­¥ä¸€å‘¼å››æ­¥ä¸€å¸ã€‚é‚£å¦‚æœè·‘çš„å¿«äº†å‘¼å¸ä¸Šä¸æ¥æ€ä¹ˆåŠï¼Ÿä½ å¯ä»¥çŸ­æš‚çš„ä¼‘æ¯ä¸€ä¸‹ï¼ˆè¿™é‡Œè¯´çš„ä¼‘æ¯ä¸æ˜¯èººä¸‹æ¥ä¼‘æ¯ï¼Œå¾€å¾€è·‘å®Œæ­¥å¿ƒç‡ä¼šå¾ˆå¿«ï¼Œç›´æ¥ä¼‘æ¯å¯¹èº«ä½“ä¸å¥½ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯ç”¨å¿«èµ°ä»£æ›¿è·‘æ­¥ï¼‰ï¼Œ<code>æ³•ç‰¹è±å…‹è·‘æ­¥æ³•</code>æ˜¯ä¸€ç§ä¸é”™çš„é€‰æ‹©ï¼ˆä¸‹é¢ä¼šè®²ï¼‰ã€‚<strong>ä¸€å®šè¦æ˜ç™½ï¼Œåªæœ‰çªç ´è‡ªå·±ï¼Œæ‰ä¼šæœ‰æé«˜ï¼Œä¸€ä¸ªåŠ²åœ°åŒ€é€Ÿå¥”è·‘å¾ˆéš¾æœ‰æ‰€çªç ´</strong>ã€‚</p></blockquote><p>å¿«è·‘æ˜¯ä¸æ˜¯éå¸¸ç´¯ï¼Ÿ</p><blockquote><p>ä¸Šé¢è¯´åˆ°è®­ç»ƒä¸­å¿«è·‘æ˜¯éœ€è¦ä½ å°½å…¨åŠ›å»è·‘ï¼Œé‚£ä¹ˆè‡ªç„¶å¿«è·‘æ˜¯å¾ˆç´¯çš„ï¼Œä½†æ˜¯å¦‚æœä½ èº«ä½“æœºèƒ½ä¸Šå»äº†ï¼Œè¿™æ ·çš„å¿«è·‘å°±ä¸ä¼šé‚£ä¹ˆç´¯äº†ã€‚å°±åƒ1ä¸ªåŠå°æ—¶å®ŒæˆåŠé©¬çš„å’Œ3ä¸ªå°æ—¶å®ŒæˆåŠé©¬çš„é€‰æ‰‹ç›¸æ¯”ï¼Œä½ è§‰å¾—å“ªä¸ªä¼šæ›´ç´¯å‘¢ï¼Ÿ</p></blockquote><p>å¥èº«å¯¹è·‘æ­¥æœ‰å½±å“å—ï¼Ÿ</p><blockquote><p>æœ‰å¾ˆå¤§çš„å½±å“ã€‚å¥½å¤šç«¥é‹è®¤ä¸ºè·‘æ­¥åªæ˜¯è…¿çš„è¿åŠ¨ï¼Œå…¶å®ä¸æ˜¯ï¼Œè·‘æ­¥æ˜¯å…¨èº«çš„è¿åŠ¨ï¼Œå¦‚æœä½ è¦æœ‰æ›´å¥½çš„æˆç»©ï¼Œé‚£ä¹ˆå°±å¿…é¡»è¿›è¡Œå…¨èº«å¿ƒçš„å¥èº«ã€‚å¥½çš„é€‰æ‰‹ä¸ä»…ä»…ä¼šé”»ç‚¼è…¿éƒ¨åŠ›é‡è¿˜ä¼šé”»ç‚¼æ ¸å¿ƒåŠ›é‡ï¼Œç”šè‡³ä¼šé”»ç‚¼æ‰‹è‡‚åŠ›é‡ï¼Œæ•´ä¸ªèº«ä½“å˜å¼ºå£®ä½ å°†ä¼šè·‘çš„æ›´å¿«æ›´è¿œã€‚</p></blockquote><h3 id="æå‡ç¯‡"><a href="#æå‡ç¯‡" class="headerlink" title="æå‡ç¯‡"></a>æå‡ç¯‡</h3><p>ä¸Šé¢æåˆ°æ³•ç‰¹è±å…‹è·‘ï¼Œkeepå°±æœ‰æ³•ç‰¹è±å…‹è·‘ï¼Œæ³•ç‰¹è±å…‹è·‘çš„æ„æ€æ˜¯è·‘ä¸€æ®µè·ç¦»ï¼Œç„¶åå¿«èµ°æˆ–æ…¢è·‘ä¼‘æ¯ä¸€å°ä¼šï¼Œç„¶åå†å¼€å§‹è·‘ï¼Œå½“ç„¶åœ¨è®­ç»ƒä¸­è·‘çš„æ—¶å€™æœ€å¥½æ˜¯å…¨åŠ›å†²åˆºï¼Œè¿™æ ·æœ‰åŠ©äºæé«˜ä½ çš„å¿ƒè‚ºèƒ½åŠ›ï¼Œkeepä¸Šçš„æ³•ç‰¹è±å…‹è·‘æ˜¯å¿«èµ°å’Œæ…¢è·‘äº¤æ›¿è¿›è¡Œçš„ï¼Œä¸‹é¢æ˜¯æ¯æ®µçš„è·ç¦»ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å‚ç…§ç‰©æ¥è·‘ï¼Œæ¯”å¦‚è·‘åˆ°å‰é¢é‚£æ£µæ ‘é‚£è¾¹ä¼‘æ¯åœ°èµ°100ç±³ç­‰ã€‚</p><p><img src="/2019/08/10/è·‘æ­¥æé€ŸæŒ‡å—/2.png" alt="æ³•ç‰¹è±å…‹è·‘"></p><p>å½“ç„¶keepä¸Šè¿˜æœ‰æ›´åŠ è¿›é˜¶çš„æ³•ç‰¹è±å…‹è·‘å°±æ˜¯ä¸‹é¢è¿™å››èŠ‚è¯¾ç¨‹ï¼Œå®ƒæ˜¯å¿«è·‘å’Œæ…¢è·‘ç»“åˆçš„æ³•ç‰¹è±å…‹è·‘ï¼Œå¯¹å¿ƒè‚ºçš„åˆºæ¿€ä¼šæ›´å¼ºï¼Œæ‰€ä»¥è¾¾åˆ°ä¸€å®šæ°´å¹³çš„ä½ å¯ä»¥å»è¯•è¯•ï¼ˆä¸è¦ä¸€ä¸Šæ¥å°±å»è¯•å“¦ï¼‰ã€‚<br><img src="/2019/08/10/è·‘æ­¥æé€ŸæŒ‡å—/3.jpeg" alt="æŒ‘æˆ˜è·‘"></p><p>å½“ç„¶é™¤äº†æ³•ç‰¹è±å…‹è·‘è¿˜æœ‰ä¸€ç§æœ‰æ•ˆçš„è®­ç»ƒæ–¹å¼å°±æ˜¯çˆ¬å¡ä¸ä¸‹å¡è·‘ï¼Œè¿™ç§è®­ç»ƒä¹Ÿå¯ä»¥é”»ç‚¼è€åŠ›å’Œå¿ƒè‚ºèƒ½åŠ›ï¼ŒåŒæ—¶è¿˜å¯ä»¥é”»ç‚¼è„šæ­¥è‚Œè‚‰ã€‚å¾€å¾€çˆ¬å¡çš„æ—¶å€™ä½ éœ€è¦å‡å°æ­¥å¹…ï¼ŒåŠ å¿«æ­¥é¢‘ï¼ˆæ¯”æ°´å¹³è·¯é¢ä¸Šæ›´å°çš„æ­¥å¹…ï¼‰ï¼Œè¿™æ ·æœ‰åˆ©äºä¿æŒä½“åŠ›ï¼›åœ¨ä¸‹å¡æ—¶ä½ éœ€è¦ï¼Œæ”¾æ…¢æ­¥é¢‘ï¼Œç¨å¾®åŠ å¤§æ­¥å¹…ï¼Œè™½ç„¶ä¸€ç›´å†å¼ºè°ƒå‡å°æ­¥é¢‘ä½†æ­¤æ—¶æ˜¯éœ€è¦æ”¾å¤§æ­¥é¢‘çš„ï¼Œå› ä¸ºä¸‹å¡è¦è¿œæ¯”ä¸Šå¡éš¾ï¼Œå¤§ä¸€ç‚¹çš„æ­¥é¢‘ä¼šæ›´çœåŠ›ã€‚</p><h3 id="ç³»ç»Ÿç¯‡"><a href="#ç³»ç»Ÿç¯‡" class="headerlink" title="ç³»ç»Ÿç¯‡"></a>ç³»ç»Ÿç¯‡</h3><p>è·‘æ­¥å‰éœ€è¦çƒ­èº«ã€‚è·‘å‰çƒ­èº«å¾€å¾€æ˜¯åŠ¨æ€æ€§çš„è¿åŠ¨ï¼Œç›®çš„æ˜¯è®©èº«ä½“çƒ­èµ·æ¥ï¼Œå¿ƒç‡æå‡èµ·æ¥ï¼ŒåŒæ—¶ä½¿å¾—éŸ§å¸¦ç­‰ç¨å¾®æ‹‰ä¼¸ä¸€ä¸‹ã€‚æœ‰åŒå­¦è®¤ä¸ºè·‘æ­¥æœ¬æ¥å°±æ˜¯ä¸€ç§çƒ­èº«çš„è¿åŠ¨ï¼Œä¸éœ€è¦å†çƒ­èº«äº†ï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼Œå¾€å¾€æˆ‘ä»¬è·‘æ­¥æ¥çƒ­èº«éƒ½æ˜¯çŸ­è·ç¦»æ…¢è·‘ï¼Œè€Œä¸“é—¨å‡ºæ¥è·‘æ­¥çš„æ—¶å€™ï¼Œè¿™ä¸ªè·ç¦»å¯¹ä½ æ¥è¯´è¿˜æ˜¯ç¨å¾®æœ‰ç‚¹æŒ‘æˆ˜æ€§çš„ï¼Œæ‰€ä»¥æå‰å°±å¾—è®©èº«ä½“çƒ­èµ·æ¥ï¼Œæœ€é‡è¦çš„æ˜¯è®©å¿ƒç‡æå‡ä¸Šæ¥ï¼Œç›´æ¥å¼€è·‘çš„è¯å¿ƒç‡ä¼šç¬é—´æå‡ï¼Œè¿™æ ·å¾ˆå®¹æ˜“äº§ç”Ÿå²”æ°”ç­‰èº«ä½“é—®é¢˜ã€‚</p><p>è·‘æ­¥åè¦æ‹‰ä¼¸ã€‚æ‹‰ä¼¸å¾€å¾€æ˜¯é™æ€æ€§çš„ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†æå‡è‡ªå·±èº«ä½“çš„æŸ”éŸ§æ€§ï¼ˆè¿™é‡Œçš„æŸ”éŸ§ä¸æ˜¯èº«ä½“å˜è½¯ï¼Œè€Œæ˜¯æ¢å¤é€Ÿåº¦å˜å¿«å¹¶ä¸”è‚Œè‚‰æœ‰æ›´å¥½çš„ä¼¸ç¼©æ€§ï¼‰ã€‚æ‹‰ä¼¸çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥é™ä½è¿åŠ¨æŸä¼¤çš„é£é™©ï¼Œè¿åŠ¨æŸä¼¤å¾€å¾€æ˜¯æŒç»­æ€§å¯¹èº«ä½“çš„æŸä¸ªéƒ¨ä½äº§ç”Ÿå‹åŠ›è€Œé€ æˆçš„ï¼Œæ‹‰ä¼¸å¯ä»¥ä½¿å¾—è¿™äº›éƒ¨ä½å¾—åˆ°æ”¾æ¾ã€‚æ‰€ä»¥ï¼Œ<strong>å†æ€ä¹ˆå¼ºè°ƒæ‹‰ä¼¸éƒ½ä¸ä¸ºè¿‡</strong>ã€‚</p><p>å¦‚æœä¸çŸ¥é“æ€ä¹ˆçƒ­èº«å’Œæ‹‰ä¼¸çš„è¯ï¼Œå¯ä»¥å»keepä¸Šè¯•è¯•<code>è·‘å‰çƒ­èº«</code>å’Œ<code>è·‘åæ‹‰ä¼¸</code>è¯¾ç¨‹ã€‚</p><h3 id="è·‘é©¬ç¯‡"><a href="#è·‘é©¬ç¯‡" class="headerlink" title="è·‘é©¬ç¯‡"></a>è·‘é©¬ç¯‡</h3><p>å¥½å¤šåŒå­¦è·‘æ­¥æ˜¯ä¸ºäº†åœ¨é©¬æ‹‰æ¾ä¸ŠPBï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€äº›è·‘é©¬çš„æŠ€å·§ã€‚</p><p>è·‘å‰ä¸€å‘¨è¦å‡å°‘è®­ç»ƒé‡ï¼Œä¿æŒä¸€ä¸ªæ›´å¥½çš„çŠ¶æ€ã€‚</p><p>è·‘é©¬å‰è£…å¤‡ä¸€å®šè¦å¸¦å¥½ï¼Œä»€ä¹ˆé˜²æ™’çš„ï¼Œä»€ä¹ˆé˜²æŠ¤çš„ï¼Œæœ€é‡è¦çš„æ˜¯ä¸€åŒå¥½çš„è·‘é‹ï¼Œæ›¾å‡ ä½•æ—¶æˆ‘å°±å› ä¸ºè·‘é‹ä¸ç»™åŠ›è€Œä¸PBå¤±ä¹‹äº¤è‡‚ï¼Œç”šè‡³æ˜¨å¤©æ‰“çƒå› ä¸ºé‹å­ä¸è¡Œï¼Œè„šéƒ½ç£¨ç ´äº†ï¼Œæ‰€ä»¥è·‘é‹çœŸçš„å¾ˆé‡è¦ã€‚å¤šèŠ±ç‚¹é’±ä¹°ä¸€ä¸ªå¥½é‹ç»å¯¹æ˜¯å€¼çš„çš„ã€‚</p><p>å»è·‘é©¬æ‹‰æ¾çš„æ—¶å€™ä¸€å®šè¦å¸¦ä¸€ä¸ªå¤§ä¹¦åŒ…ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå¦‚æœèµåŠ©å•†ç»™åŠ›çš„æ—¶å€™ä¼šç»™ä½ ä¸€å †ç¾Šæ¯›ï¼Œå°ä¹¦åŒ…æ ¹æœ¬è£…ä¸ä¸‹ï¼Œæ‰€ä»¥ä¹¦åŒ…æœ€å¥½æ‹¿å¤§ä¸€ç‚¹çš„ï¼Œå½“ç„¶æœ‰è½¦çš„å¯ä»¥å¿½ç•¥ã€‚</p><p>é©¬æ‹‰æ¾å¼€è·‘é‚£å¤©æ—©ä¸Šçš„æ—©é¤ä¸€å®šè¦åƒåˆ°4åˆ°7æˆé¥±ï¼Œè¿‡å¤šäº†ä¼šå½±å“è·‘æ­¥ï¼Œè¿‡å°‘äº†ä¼šè·‘ä¸ä¸‹æ¥ï¼Œæ¯•ç«Ÿé©¬æ‹‰æ¾æ˜¯ä¸€ä¸ªé«˜æ¶ˆè€—çš„è¿åŠ¨ã€‚</p><p>å¼€å§‹è·‘é©¬å‰ä¸€å®šè¦åœ¨å®¾é¦†æˆ–è€…å®¶é‡Œä¸Šä¸ªå•æ‰€ï¼Œåˆ°è·‘é©¬é›†åˆåœ°çš„æ—¶å€™å•æ‰€åŸºæœ¬ä¸Šéƒ½æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå³ä½¿å¤Ÿç”¨ä¹Ÿè¦ç­‰åŠå¤©ã€‚å¼€è·‘åçš„èµ›é“ä¸Šä¹Ÿæ˜¯æœ‰å•æ‰€çš„ï¼Œå¾€å¾€å»èµ›é“ä¸Šçš„ä¸´æ—¶å•æ‰€æ˜¯ä¼šå½±å“PBï¼Œæ‰€ä»¥ä¸Šå•æ‰€ä¸€å®šè¦æå‰ã€‚</p><p>è·‘é©¬å‰ä¸€å®šè¦è‡³å°‘æå‰åŠä¸ªå°æ—¶åˆ°èµ›åœºï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†ç†Ÿæ‚‰é›†ç»“åœ°çš„ç¯å¢ƒï¼Œè¿˜å¯ä»¥åšä¸€ç»„è·‘å‰çƒ­èº«è¿åŠ¨ã€‚</p><p>è·‘é©¬æ—¶ä¸€å®šè¦è®°å¾—<strong>æ¬²é€Ÿåˆ™æ…¢</strong>ï¼Œä¹Ÿå°±æ˜¯è·‘æ­¥å¼€å§‹çš„æ—¶å€™ä¸€å®šè¦æ…¢ä¸€ç‚¹ï¼Œè®©å¿ƒç‡å¹³æ»‘çš„å‡èµ·æ¥ï¼ŒåŒæ—¶ä¿æŒæ›´å¥½çš„å‘¼å¸ï¼Œå¾€å¾€å‘¼å¸åœ¨è·‘é©¬æ—¶èµ·äº†å¾ˆå¤§çš„ä½œç”¨ã€‚æƒ³æƒ³å¦‚æœä½ ä¸Šæ°”ä¸æ¥ä¸‹æ°”äº†ï¼Œä½ è¿˜ä¼šæœ‰åŠ›æ°”å†²åˆºå—ï¼Ÿæ‰€ä»¥å¼€å§‹å‡ å…¬é‡Œä¸€å®šè¦æ…¢ï¼Œæœ‰çš„èµ›é“åˆšå¼€å§‹æ¯”è¾ƒçª„ï¼Œå¼€è·‘åæ¯”è¾ƒæ…¢ï¼Œè¿™ç§èµ›é“å¾€å¾€æ›´å®¹æ˜“PBï¼Œå°±æ¯”å¦‚æ— é”¡é©¬æ‹‰æ¾çš„èµ›é“ï¼ŒPBçš„äººéå¸¸å¤šã€‚</p><p>è·‘é©¬æ—¶çœ‹åˆ°è¡¥ç»™æ—¶ä¸è¦å…ˆå»ï¼Œé™¤éè¡¥ç»™å¤„æ²¡æœ‰å…¶ä»–é€‰æ‰‹ï¼Œå¾€å¾€é€‰æ‰‹çœ‹åˆ°è¡¥ç»™åéƒ½å…´å†²å†²åœ°è·‘ä¸Šå»äº†ï¼Œè¿™æ ·é€‰æ‰‹å°±ä¼šå †ç§¯åˆ°è¡¥ç»™æœ€å‰é¢ï¼Œè€Œå¾€å¾€åé¢çš„è¡¥ç»™éƒ½æ˜¯æ— äººé—®æ´¥çš„ã€‚</p><p>é©¬æ‹‰æ¾å5å…¬é‡Œæ˜¯çœŸæ­£è·Ÿè‡ªå·±å†³ä¸€é«˜ä¸‹çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥é€‚å½“åŠ é€Ÿäº†ï¼Œå½“ç„¶åŠ é€Ÿä¸æ˜¯å…¨åŠ›è·‘ä¸‹å»ï¼Œè€Œæ˜¯ä¿æŒä¸€ä¸ªå¯ä»¥è·‘å¾—æ¯”è¾ƒä¹…ä½†è¿˜æ˜¯å¯ä»¥åšæŒä¸‹å»çš„é€Ÿåº¦ã€‚å¦å¤–å¦‚æœè§‰å¾—èº«ä½“æ”¯æ’‘ä¸ä½äº†ï¼Œåƒä¸‡ä¸è¦åšæŒï¼Œ<strong>èº«ä½“æ¯”PBè·Ÿé‡è¦</strong>ã€‚</p><p>è·‘å®Œåä¸è¦ç«‹åˆ»åœä¸‹æ¥ä¼‘æ¯ï¼Œå…ˆèµ°èµ°ï¼Œè®©å¿ƒç‡é€æ¸å¹³æ»‘çš„é™ä¸‹æ¥ï¼Œç­‰å¿ƒç‡é™ä¸‹æ¥åå¯ä»¥å¥½å¥½æ‹‰ä¼¸ä¸€ä¸‹ï¼Œå†å¼ºè°ƒä¸€éæ‹‰ä¼¸éå¸¸é‡è¦ã€‚</p><p>æœ€åï¼Œåœ¨è·‘å®ŒåçŸ­ä¿¡ä¸Šä¼šæ”¶åˆ°ä½ çš„æˆç»©ï¼Œä¸€ä¸¤ä¸ªæ˜ŸæœŸå†…å°±å¯ä»¥åœ¨ä½ å‚åŠ çš„é©¬æ‹‰æ¾å®˜ç½‘ä¸Šä¸‹è½½è‡ªå·±çš„è¯ä¹¦äº†ï¼Œä¸€ä¸¤ä¸ªæœˆå†…å¯ä»¥åœ¨<a href="http://www.runchina.org.cn/" target="_blank" rel="noopener">ä¸­å›½é©¬æ‹‰æ¾å®˜ç½‘</a>ä¸ŠæŸ¥çœ‹ä½ çš„é©¬æ‹‰æ¾æˆç»©ï¼Œå¹¶ä¸”ä½ çš„æˆç»©å°†æ°¸ä¹…æ”¶å½•åœ¨å›½å®¶çš„æ•°æ®åº“ä¸­ï¼Œæ˜¯ä¸æ˜¯å¾ˆå…´å¥‹ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> è¿åŠ¨ä¸å¥èº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è·‘æ­¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Nodeåœ¨æµè§ˆå™¨æ‰“å¼€æŸä¸ªç½‘é¡µ</title>
      <link href="/2019/07/29/%E4%BD%BF%E7%94%A8Node%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9F%90%E4%B8%AA%E7%BD%91%E9%A1%B5/"/>
      <url>/2019/07/29/%E4%BD%BF%E7%94%A8Node%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9F%90%E4%B8%AA%E7%BD%91%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨Nodeåœ¨æµè§ˆå™¨æ‰“å¼€æŸä¸ªç½‘é¡µï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨å­è¿›ç¨‹æ¥ç”¨å‘½ä»¤è¡Œæ‰“å¼€ç½‘é¡µé“¾æ¥å°±å¯ä»¥äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯<code>Mac</code>ç³»ç»Ÿä½¿ç”¨çš„æ˜¯<code>open</code>å‘½ä»¤ï¼Œ<code>Windows</code>ç³»ç»Ÿä½¿ç”¨çš„æ˜¯<code>start</code>å‘½ä»¤ï¼ŒLinuxç­‰ç³»ç»Ÿä½¿ç”¨<code>xdg-open</code>å‘½ä»¤ã€‚é’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿä½¿ç”¨ä¸åŒçš„å‘½ä»¤ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>index.js</code>æ–‡ä»¶ï¼Œç„¶åå†™æˆ‘ä»¬çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> child_process = <span class="built_in">require</span>(<span class="string">'child_process'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> openURL = <span class="function"><span class="keyword">function</span> (<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­å¹³å°</span></span><br><span class="line">  <span class="keyword">switch</span> (process.platform) &#123;</span><br><span class="line">    <span class="comment">// Mac ä½¿ç”¨open</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"darwin"</span>:</span><br><span class="line">      child_process.spawn(<span class="string">'open'</span>, [url]);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// Windowsä½¿ç”¨start</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"win32"</span>:</span><br><span class="line">      child_process.spawn(<span class="string">'start'</span>, [url]);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// Linuxç­‰ä½¿ç”¨xdg-open</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      child_process.spawn(<span class="string">'xdg-open'</span>, [url]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">openURL(<span class="string">"https://www.kai666666.top/"</span>);</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>åœ¨å½“å‰å‘½ä»¤è¡Œè¿è¡Œä¸‹é¢å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æµè§ˆå™¨å·²ç»æ‰“å¼€æˆ‘ä»¬çš„ç½‘é¡µäº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node index.js</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><p>å¾€å¾€åœ¨ä»£ç ä¸­ç›´æ¥å†™æ­»åœ°å€æ˜¯ä¸å¥½çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼ è¿‡æ¥çš„å‚æ•°è§†ä¸ºæ‰“å¼€çš„URLï¼Œä¿®æ”¹<code>index.js</code>æ–‡ä»¶æœ€å1è¡Œä»£ç ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- openURL("https://www.kai666666.top/");</span></span><br><span class="line"><span class="addition">+ let url = process.argv[2];</span></span><br><span class="line"><span class="addition">+ if (url) &#123;</span></span><br><span class="line"><span class="addition">+   openURL(url);</span></span><br><span class="line"><span class="addition">+ &#125; else &#123;</span></span><br><span class="line"><span class="addition">+   console.log("è¯·è¾“å…¥URL");</span></span><br><span class="line"><span class="addition">+ &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢<code>process.argv</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­0ä¸‹æ ‡çš„æ•°æ®æ˜¯nodeçš„è·¯å¾„ï¼Œ1ä¸‹æ ‡çš„æ•°æ®æ˜¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿå°±æ˜¯è¿™é‡Œçš„<code>index.js</code>æ–‡ä»¶çš„è·¯å¾„ï¼Œ2åˆ°å¤šä¸‹æ ‡ä¸­çš„æ•°æ®æ˜¯åé¢ä¼ å…¥çš„æ•°æ®ï¼Œä¸Šé¢æˆ‘ä»¬åªæ£€æŸ¥2ä¸‹æ ‡çš„æ•°æ®ã€‚</p><p>æœ€åä½¿ç”¨ä¸‹é¢å‘½ä»¤å¯åŠ¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node index.js https://www.kai666666.top/</span><br></pre></td></tr></table></figure><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><p>çœ‹åˆ°ä¸Šé¢è¿™ä½ ä¼šä¸ä¼šæƒ³åˆ°ï¼Œè‡ªå·±å°è£…ä¸€ä¸‹æ‰“å¼€ç½‘é¡µçš„æ–¹æ³•å‘¢ï¼Ÿå…¶å®å·²ç»æœ‰äººè¿™ä¹ˆåšäº†ï¼Œä½ å¯ä»¥çœ‹çœ‹<a href="https://github.com/sindresorhus/open" target="_blank" rel="noopener">openåº“</a>ï¼Œå®ƒå°±æ˜¯ä½¿ç”¨ä»£ç æ¥æ‰“å¼€ç½‘é¡µçš„ï¼ˆå…¶å®ä¸ä»…ä»…æ˜¯ç½‘é¡µï¼‰ï¼Œè‘—åçš„webpackæ’ä»¶<a href="https://github.com/baldore/open-browser-webpack-plugin" target="_blank" rel="noopener">open-browser-webpack-plugin</a>å°±æ˜¯ä½¿ç”¨å®ƒåœ¨å¯åŠ¨çš„æ—¶å€™æ‰“å¼€ä¸€ä¸ªé¡µé¢ã€‚å½“ç„¶å®ƒæ˜¯éœ€è¦ç”¨ä»£ç æ¥å¯åŠ¨çš„ï¼Œä½ å¯èƒ½å¸Œæœ›ç›´æ¥åœ¨å‘½ä»¤è¡Œæ¥å¯åŠ¨ï¼Œå°±åƒæˆ‘ä»¬ä¸Šé¢é‚£æ ·ï¼Œé‚£ä½ å¯ä»¥çœ‹çœ‹openåº“ä½œè€…çš„å¦ä¸€ä¸ªåº“ï¼š<a href="https://github.com/sindresorhus/open-cli" target="_blank" rel="noopener">open-cli</a>ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä½¿ç”¨<code>open</code>åº“æ¥å¯åŠ¨çš„ï¼Œåªæ˜¯å°è£…äº†ä¸€å±‚å‘½ä»¤è¡Œä¼ URLçš„è¿‡ç¨‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ç‰‡ç”±å½©è‰²æ¸å˜åˆ°é»‘ç™½åŠ¨ç”»</title>
      <link href="/2019/07/23/%E5%9B%BE%E7%89%87%E7%94%B1%E5%BD%A9%E8%89%B2%E6%B8%90%E5%8F%98%E5%88%B0%E9%BB%91%E7%99%BD%E5%8A%A8%E7%94%BB/"/>
      <url>/2019/07/23/%E5%9B%BE%E7%89%87%E7%94%B1%E5%BD%A9%E8%89%B2%E6%B8%90%E5%8F%98%E5%88%B0%E9%BB%91%E7%99%BD%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<p>æŠŠå›¾ç‰‡å˜æˆé»‘ç™½çš„æ•ˆæœä½¿ç”¨Canvaså°±å¯ä»¥å®ç°ï¼Œé‚£å¦‚ä½•ä½¿å›¾ç‰‡æ¸å˜æˆé»‘ç™½è‰²å‘¢ï¼Ÿå…¶å®Canvaså®Œå…¨å¯ä»¥èƒœä»»ï¼Œä½†æ˜¯æœ‰æ›´ç®€å•çš„åŠæ³•å°±æ˜¯CSSçš„æ»¤é•œã€‚</p><p>é¦–å…ˆä¸Šä¸€ä¸‹HTMLçš„ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">"https://www.kai666666.top/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/lufei.jpeg"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"pic"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/07/23/å›¾ç‰‡ç”±å½©è‰²æ¸å˜åˆ°é»‘ç™½åŠ¨ç”»/1.png" alt="åŸå§‹æ•ˆæœ"></p><p>CSSä»£ç ä¹Ÿå¾ˆç®€å•ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pic</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: filter .<span class="number">8s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.pic</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">grayscale</span>(100%) ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/07/23/å›¾ç‰‡ç”±å½©è‰²æ¸å˜åˆ°é»‘ç™½åŠ¨ç”»/2.gif" alt="æ·»åŠ æ»¤é•œçš„æ•ˆæœ"></p><p>å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¤šä¸ªæ»¤é•œï¼Œæ•ˆæœä¼šæ›´å¥½ï¼Œå°±æ¯”å¦‚å†æ·»åŠ ä¸€ä¸ªé€æ˜åº¦å˜åŒ–çš„æ•ˆæœï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pic</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: filter .<span class="number">8s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.pic</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">grayscale</span>(100%) <span class="built_in">opacity</span>(66%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/07/23/å›¾ç‰‡ç”±å½©è‰²æ¸å˜åˆ°é»‘ç™½åŠ¨ç”»/3.gif" alt="æ·»åŠ é€æ˜åº¦åçš„æ•ˆæœ"></p><p>æ›´å¤šæ»¤é•œæ•ˆæœè¯·çœ‹<a href="https://www.runoob.com/cssref/css3-pr-filter.html" target="_blank" rel="noopener">è¿™é‡Œ</a>ï¼Œæœ¬ç¤ºä¾‹ä»£ç è¯·ç‚¹å‡»<a href="https://codepen.io/kaiorange/pen/NQxPyV" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSSæ•ˆæœ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„é€ æ–¹æ³•æˆ–newè¿”å›è¯¥å¯¹è±¡</title>
      <link href="/2019/07/18/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E6%88%96new%E8%BF%94%E5%9B%9E%E8%AF%A5%E5%AF%B9%E8%B1%A1/"/>
      <url>/2019/07/18/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E6%88%96new%E8%BF%94%E5%9B%9E%E8%AF%A5%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªå°æŠ€å·§ï¼Œè°ƒç”¨æ„é€ æ–¹æ³•æˆ–éƒ½newè¿”å›è¯¥å¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸æ˜¯newçš„æ—¶å€™thisæŒ‡å‘çš„æ˜¯è°ƒç”¨è€… é»˜è®¤æ˜¯window</span></span><br><span class="line">  <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Person)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Person();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Hello World!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lufei = Person();</span><br><span class="line">lufei.sayHello();</span><br><span class="line"><span class="keyword">var</span> nami = <span class="keyword">new</span> Person();</span><br><span class="line">nami.sayHello();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°æŠ€å·§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCodeæ”¯æŒVueè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–çš„é…ç½®</title>
      <link href="/2019/07/18/VSCode%E6%94%AF%E6%8C%81Vue%E8%87%AA%E5%8A%A8%E4%BF%9D%E5%AD%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
      <url>/2019/07/18/VSCode%E6%94%AF%E6%8C%81Vue%E8%87%AA%E5%8A%A8%E4%BF%9D%E5%AD%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h2><p>å®‰è£…ä¸‰ä¸ªæ’ä»¶ï¼š<code>Prettier - Code formatter</code>ã€<code>ESLint</code>ã€<code>Vetur</code>ã€‚å¯¹åº”çš„æ’ä»¶å›¾ç‰‡å¦‚ä¸‹ï¼š<br><img src="/2019/07/18/VSCodeæ”¯æŒVueè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–çš„é…ç½®/1.jpeg" alt="Prettier - Code formatter"><br><img src="/2019/07/18/VSCodeæ”¯æŒVueè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–çš„é…ç½®/2.jpeg" alt="ESLint"><br><img src="/2019/07/18/VSCodeæ”¯æŒVueè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–çš„é…ç½®/3.jpeg" alt="Vetur"></p><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>MacOSä½¿ç”¨<code>Command + Sheft + P</code>ï¼Œwindowsä½¿ç”¨<code>Ctrl + Sheft + P</code>æœç´¢<code>é¦–é€‰é¡¹:æ‰“å¼€è®¾ç½®(json)</code>,ç„¶åæŠŠä¸‹é¢é…ç½®ç²˜è´´è¿›å»ï¼š</p><p><img src="/2019/07/18/VSCodeæ”¯æŒVueè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–çš„é…ç½®/4.jpeg" alt="é¦–é€‰é¡¹:æ‰“å¼€è®¾ç½®(json)"></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // åˆ†å·</span><br><span class="line">  "prettier.semi": false,</span><br><span class="line">  "prettier.eslintIntegration": true,</span><br><span class="line">  // å•å¼•å·åŒ…è£¹å­—ç¬¦ä¸²</span><br><span class="line">  // å°½å¯èƒ½æ§åˆ¶å°¾éšé€—å·çš„æ‰“å°</span><br><span class="line">  "prettier.trailingComma": "all",</span><br><span class="line">  "prettier.singleQuote": true,</span><br><span class="line">  "prettier.tabWidth": 2,</span><br><span class="line">  // å…³é—­è‡ªå¸¦çš„æ ¼å¼åŒ–</span><br><span class="line">  "javascript.format.enable": false,</span><br><span class="line">  // è®©å‡½æ•°(å)å’Œåé¢çš„æ‹¬å·ä¹‹é—´åŠ ä¸ªç©ºæ ¼</span><br><span class="line">  "javascript.format.insertSpaceBeforeFunctionParenthesis": true,</span><br><span class="line">  // å¯ç”¨eslint</span><br><span class="line">  "eslint.enable": true,</span><br><span class="line">  "eslint.validate": [</span><br><span class="line">    "javascript",</span><br><span class="line">    "javascriptreact",</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"language"</span>: <span class="string">"vue"</span>,</span><br><span class="line">      <span class="attr">"autoFix"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  // æ ¼å¼åŒ–.vueä¸­html</span><br><span class="line">  "vetur.format.defaultFormatter.html": "js-beautify-html",</span><br><span class="line">  // è®©vueä¸­çš„jsæŒ‰ç¼–è¾‘å™¨è‡ªå¸¦çš„tsæ ¼å¼è¿›è¡Œæ ¼å¼åŒ–</span><br><span class="line">  "vetur.format.defaultFormatter.js": "vscode-typescript",</span><br><span class="line">  "vetur.format.defaultFormatterOptions": &#123;</span><br><span class="line">    "js-beautify-html": &#123;</span><br><span class="line">      "wrap_attributes": "force-aligned" // å±æ€§å¼ºåˆ¶æŠ˜è¡Œå¯¹é½</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  "vetur.format.enable": true,</span><br><span class="line">  "eslint.options": &#123;</span><br><span class="line">    "extensions": [".js", ".vue"]</span><br><span class="line">  &#125;,</span><br><span class="line">  "eslint.autoFixOnSave": true,</span><br><span class="line">  "editor.tabSize": 2,</span><br><span class="line">  // å¼€å¯è¡Œæ•°æç¤º</span><br><span class="line">  "editor.lineNumbers": "on",</span><br><span class="line">  // å»æ‰ vscode è‡ªå¸¦çš„è‡ªåŠ¨ä¿å­˜ ï¼Œvscode é»˜è®¤ä¹Ÿæ˜¯ false</span><br><span class="line">  "editor.formatOnSave": false,</span><br><span class="line">  // vscodeé»˜è®¤å¯ç”¨äº†æ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨è®¾ç½®tabsizeçš„é€‰é¡¹</span><br><span class="line">  "editor.detectIndentation": false,</span><br><span class="line">  "editor.quickSuggestions": &#123;</span><br><span class="line">    //å¼€å¯è‡ªåŠ¨æ˜¾ç¤ºå»ºè®®</span><br><span class="line">    "other": true,</span><br><span class="line">    "comments": true,</span><br><span class="line">    "strings": true</span><br><span class="line">  &#125;,</span><br><span class="line">  "extensions.ignoreRecommendations": false,</span><br><span class="line">  "window.zoomLevel": 1,</span><br><span class="line">  "files.autoGuessEncoding": false,</span><br><span class="line">  "workbench.sideBar.location": "left"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¡®ä¿å’Œé¡¹ç›®é…ç½®ä¸å†²çª"><a href="#ç¡®ä¿å’Œé¡¹ç›®é…ç½®ä¸å†²çª" class="headerlink" title="ç¡®ä¿å’Œé¡¹ç›®é…ç½®ä¸å†²çª"></a>ç¡®ä¿å’Œé¡¹ç›®é…ç½®ä¸å†²çª</h2><p>å¦‚æœé¡¹ç›®é…ç½®å’ŒVSCodeé»˜è®¤çš„é…ç½®æœ‰å†²çªå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œè¯·ç¡®ä¿æ ¹ç›®å½•ä¸‹çš„<code>.vscode/settings.json</code>æ–‡ä»¶å’Œä¸Šé¢çš„æ–‡ä»¶å¹¶ä¸å†²çªï¼Œå¯ä»¥æŠŠ<code>.vscode/settings.json</code>è®¾ç½®ä¸ºä¸€ä¸ªç©ºJSONã€‚</p><p><img src="/2019/07/18/VSCodeæ”¯æŒVueè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–çš„é…ç½®/5.jpeg" alt=".vscode/settings.json"></p>]]></content>
      
      
      <categories>
          
          <category> VSCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ13ï¼‰ï¼šå®æˆ˜--æ˜Ÿç©ºè¿çº¿å›¾</title>
      <link href="/2019/07/17/Canvas%E7%B3%BB%E5%88%97%EF%BC%8813%EF%BC%89%EF%BC%9A%E5%AE%9E%E6%88%98-%E6%98%9F%E7%A9%BA%E8%BF%9E%E7%BA%BF%E5%9B%BE/"/>
      <url>/2019/07/17/Canvas%E7%B3%BB%E5%88%97%EF%BC%8813%EF%BC%89%EF%BC%9A%E5%AE%9E%E6%88%98-%E6%98%9F%E7%A9%BA%E8%BF%9E%E7%BA%BF%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>Canvasèƒ½åšå¥½å¤šä¸œè¥¿ï¼Œæœ¬ç« å°±æ¥ä¸€èŠ‚å®æˆ˜æ€§çš„ä¸œè¥¿å§ã€‚å¥½å¤šäººæ¥åˆ°è¿™ä¸ªåšå®¢çš„æ—¶å€™æ€»æ˜¯è§‰å¾—åé¢è¿™ç§ç‚¹å’Œçº¿çš„èƒŒæ™¯å¾ˆæœ‰æ„æ€ï¼Œè¿™ç§æ•ˆæœæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Œå½“ç„¶æ˜¯ä½¿ç”¨Canvasäº†ï¼Œæˆ‘ä»¬è¿™ç« å°±æ¥å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„è¿™ç§æ˜Ÿç©ºè¿çº¿å›¾ã€‚</p><hr><h2 id="å°è£…ç”»ç‚¹æ“ä½œ"><a href="#å°è£…ç”»ç‚¹æ“ä½œ" class="headerlink" title="å°è£…ç”»ç‚¹æ“ä½œ"></a>å°è£…ç”»ç‚¹æ“ä½œ</h2><p>å¯¹äºCanvasç”»å›¾ï¼Œå¥½å¤šå¤§ç¥éƒ½æ˜¯ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥åšçš„ï¼Œåœ¨æ¸¸æˆç¼–ç¨‹ä¸­ï¼Œå¾€å¾€æŠŠæ‹¥æœ‰ç‰¹å®šåŠŸèƒ½çš„å¯¹è±¡ç§°ä¸ºç²¾çµã€‚æˆ‘ä»¬è¿™é‡Œå…ˆç®€å•çš„å¯¹ç‚¹è¿™ä¸ªå¯¹è±¡åšä¸€å®šçš„å°è£…ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">canvas,options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.canvas = canvas;</span><br><span class="line">  <span class="keyword">this</span>.context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">  options = options || &#123;&#125;;</span><br><span class="line">  <span class="keyword">this</span>.x = options.x || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.y = options.y || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.radius = options.radius || <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// xè½´çš„é€Ÿåº¦</span></span><br><span class="line">  <span class="keyword">this</span>.vx = options.vx || <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// yè½´çš„é€Ÿåº¦</span></span><br><span class="line">  <span class="keyword">this</span>.vy = options.vy || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.color = options.color || <span class="string">'#000000'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.context.beginPath();</span><br><span class="line">    <span class="keyword">this</span>.context.arc(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y, <span class="keyword">this</span>.radius, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">    <span class="keyword">this</span>.context.fillStyle=<span class="keyword">this</span>.color;</span><br><span class="line">    <span class="keyword">this</span>.context.fill();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// åŒ€é€Ÿè¿åŠ¨</span></span><br><span class="line">    <span class="keyword">this</span>.x += <span class="keyword">this</span>.vx;</span><br><span class="line">    <span class="keyword">this</span>.y += <span class="keyword">this</span>.vy;</span><br><span class="line">    <span class="comment">// è¶…å‡ºè¾¹ç•Œåå¼¹</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.x &lt; <span class="number">0</span> || <span class="keyword">this</span>.x &gt; canvas.width) &#123;</span><br><span class="line">      <span class="keyword">this</span>.vx = -<span class="keyword">this</span>.vx;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.y &lt; <span class="number">0</span> || <span class="keyword">this</span>.y &gt; canvas.height) &#123;</span><br><span class="line">      <span class="keyword">this</span>.vy = -<span class="keyword">this</span>.vy;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æˆ‘ä»¬ç”»ç‚¹å…¶å®ç”»çš„æ˜¯ä¸€ä¸ªåŠå¾„å¾ˆå°çš„åœ†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”»é•¿å®½éƒ½å¾ˆå°çš„æ­£æ–¹å½¢ï¼Œå¾€å¾€æ­£æ–¹å½¢åªè¦<code>fillRect</code>ä¸€ä¸ªAPIå°±å¯ä»¥äº†ï¼Œè€Œåœ†å½¢å¾€å¾€éœ€è¦å¥½å‡ ä¸ªä¸ªAPIï¼Œæ‰€ä»¥æ•ˆç‡ä¸Šç”»æ­£æ–¹å½¢è¦æ¯”ç”»åœ†æ›´å¥½ï¼Œè¿™é‡Œä¸ºäº†åé¢æ˜¾ç¤ºçš„æ›´æ¸…æ¥šå°±ç›´æ¥ç”»åœ†äº†ã€‚</p><h2 id="åˆå§‹åŒ–Canvas"><a href="#åˆå§‹åŒ–Canvas" class="headerlink" title="åˆå§‹åŒ–Canvas"></a>åˆå§‹åŒ–Canvas</h2><p>æˆ‘ä»¬ç°åœ¨é€šè¿‡DOMæ“ä½œæ¥åˆå§‹åŒ–ä¸€ä¸ªcanvasï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯æœ‰åˆ©äºæŠŠæ˜Ÿç©ºè¿çº¿å›¾å°è£…æˆä¸€ä¸ªç»„ä»¶ï¼Œå½“ç„¶æˆ‘ä»¬è¿™é‡Œå¹¶ä¸è®²è§£å¦‚ä½•å°è£…æˆä¸€ä¸ªå¯å¤ç”¨çš„DOMç»„ä»¶ï¼Œåªè®²è§£æ€ä¹ˆå®ç°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå·±åˆ›å»ºcanvas å¹¶é€šè¿‡DOMæ“ä½œæ·»åŠ åˆ°bodyä¸­</span></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>)</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(canvas);</span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®æ ·å¼å±æ€§</span></span><br><span class="line">canvas.style.position = <span class="string">"fixed"</span>;</span><br><span class="line">canvas.style.top = <span class="number">0</span>;</span><br><span class="line">canvas.style.left = <span class="number">0</span>;</span><br><span class="line">canvas.width = <span class="built_in">window</span>.innerWidth;</span><br><span class="line">canvas.height = <span class="built_in">window</span>.innerHeight;</span><br><span class="line">canvas.style.zIndex = <span class="string">"-1"</span>;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ‰‹å·¥åˆ›å»ºä¸€ä¸ªCanvaså¹¶æ·»åŠ è¿›æ¥ï¼Œæœ€åè®¾ç½®å®½é«˜å’Œæ ·å¼ï¼Œæ³¨æ„å®½é«˜ä½¿ç”¨<code>canvas.width</code>è®¾ç½®è€Œä¸æ˜¯<code>canvas.style.width</code>è®¾ç½®ï¼Œè¿™æ ·ä¸ä¼šç¼©æ”¾ã€‚</p><h2 id="ç”»ä¸€ä¸ªç‚¹"><a href="#ç”»ä¸€ä¸ªç‚¹" class="headerlink" title="ç”»ä¸€ä¸ªç‚¹"></a>ç”»ä¸€ä¸ªç‚¹</h2><p>å¾ˆç®€å•äº†ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(canvas,&#123;</span><br><span class="line">    x: <span class="number">20</span>,</span><br><span class="line">    y: <span class="number">20</span>,</span><br><span class="line">    radius:<span class="number">10</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">p.draw();</span><br></pre></td></tr></table></figure><p>ç›´æ¥çœ‹æ•ˆæœï¼š</p><p><img src="/2019/07/17/Canvasç³»åˆ—ï¼ˆ13ï¼‰ï¼šå®æˆ˜-æ˜Ÿç©ºè¿çº¿å›¾/1.jpeg" alt="ç”»ä¸€ä¸ªç‚¹"></p><h2 id="ç”»20ä¸ªç‚¹"><a href="#ç”»20ä¸ªç‚¹" class="headerlink" title="ç”»20ä¸ªç‚¹"></a>ç”»20ä¸ªç‚¹</h2><p>ç°åœ¨æˆ‘ä»¬ç”»20ä¸ªç‚¹å§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cWidth = canvas.width;</span><br><span class="line"><span class="keyword">var</span> cHeight = canvas.height;</span><br><span class="line"><span class="keyword">var</span> points = [];</span><br><span class="line"><span class="keyword">var</span> pointsLength = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; pointsLength; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">new</span> Point(canvas,&#123;</span><br><span class="line">    x: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * cWidth),</span><br><span class="line">    y: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * cHeight),</span><br><span class="line">    radius:<span class="number">10</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  points.push(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; points.length; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = points[i];</span><br><span class="line">  p.draw();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥çœ‹æ•ˆæœï¼Œå½“ç„¶ç‚¹çš„ä½ç½®å¯èƒ½ä¼šä¸ä¸€æ ·ï¼Œæ¯•ç«Ÿæ˜¯éšæœºçš„ï¼š</p><p><img src="/2019/07/17/Canvasç³»åˆ—ï¼ˆ13ï¼‰ï¼šå®æˆ˜-æ˜Ÿç©ºè¿çº¿å›¾/2.jpeg" alt="ç”»20ä¸ªç‚¹"></p><h2 id="è®©ç‚¹åŠ¨èµ·æ¥"><a href="#è®©ç‚¹åŠ¨èµ·æ¥" class="headerlink" title="è®©ç‚¹åŠ¨èµ·æ¥"></a>è®©ç‚¹åŠ¨èµ·æ¥</h2><p>æœ‰äº†ä¸Šå‡ ç« çŸ¥è¯†çš„é“ºå«è®©ç‚¹åŠ¨èµ·æ¥å¾ˆç®€å•ï¼Œå½“ç„¶æˆ‘ä»¬ç°åœ¨ä¸ç”¨é‚£ä¹ˆå¤§çš„ç‚¹äº†ï¼Œå°±æ˜¯ç”¨é»˜è®¤çš„å°±å¯ä»¥äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cWidth = canvas.width;</span><br><span class="line"><span class="keyword">var</span> cHeight = canvas.height;</span><br><span class="line"><span class="keyword">var</span> points = [];</span><br><span class="line"><span class="keyword">var</span> pointsLength = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; pointsLength; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">new</span> Point(canvas,&#123;</span><br><span class="line">    x: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * cWidth),</span><br><span class="line">    y: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * cHeight),</span><br><span class="line">    vx: <span class="built_in">Math</span>.random() * <span class="number">4</span> - <span class="number">2</span>,</span><br><span class="line">    vy: <span class="built_in">Math</span>.random() * <span class="number">4</span> - <span class="number">2</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  points.push(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// æ¸…å±</span></span><br><span class="line">  context.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; points.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> p1 = points[i];</span><br><span class="line">    p1.update();</span><br><span class="line">    p1.draw();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€’å½’è°ƒç”¨</span></span><br><span class="line">  requestAnimationFrame(animate);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨åŠ¨ç”»</span></span><br><span class="line">requestAnimationFrame(animate);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ•ˆæœå¦‚ä¸‹ï¼Œå›¾ç‰‡æœ‰ç‚¹æ”¾å¤§ï¼š</p><p><img src="/2019/07/17/Canvasç³»åˆ—ï¼ˆ13ï¼‰ï¼šå®æˆ˜-æ˜Ÿç©ºè¿çº¿å›¾/3.gif" alt="å¯¹åŠ¨çš„ç‚¹"></p><h2 id="æ·»åŠ è¿çº¿"><a href="#æ·»åŠ è¿çº¿" class="headerlink" title="æ·»åŠ è¿çº¿"></a>æ·»åŠ è¿çº¿</h2><p>æ·»åŠ è¿çº¿ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥çœ‹å®Œæ•´ä»£ç å§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå·±åˆ›å»ºcanvas å¹¶é€šè¿‡DOMæ“ä½œæ·»åŠ åˆ°bodyä¸­</span></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>)</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(canvas);</span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®æ ·å¼å±æ€§</span></span><br><span class="line">canvas.style.position = <span class="string">"fixed"</span>;</span><br><span class="line">canvas.style.top = <span class="number">0</span>;</span><br><span class="line">canvas.style.left = <span class="number">0</span>;</span><br><span class="line">canvas.width = <span class="built_in">window</span>.innerWidth;</span><br><span class="line">canvas.height = <span class="built_in">window</span>.innerHeight;</span><br><span class="line">canvas.style.zIndex = <span class="string">"-1"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cWidth = canvas.width;</span><br><span class="line"><span class="keyword">var</span> cHeight = canvas.height;</span><br><span class="line"><span class="keyword">var</span> points = [];</span><br><span class="line"><span class="keyword">var</span> pointsLength = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> lineMaxLen = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; pointsLength; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">new</span> Point(canvas,&#123;</span><br><span class="line">    x: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * cWidth),</span><br><span class="line">    y: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * cHeight),</span><br><span class="line">    vx: <span class="built_in">Math</span>.random() * <span class="number">4</span> - <span class="number">2</span>,</span><br><span class="line">    vy: <span class="built_in">Math</span>.random() * <span class="number">4</span> - <span class="number">2</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  points.push(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// æ¸…å±</span></span><br><span class="line">  context.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; points.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> p1 = points[i];</span><br><span class="line">    p1.update();</span><br><span class="line">    p1.draw();</span><br><span class="line">    <span class="comment">// åˆ’çº¿</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; points.length; j++) &#123;</span><br><span class="line">      <span class="keyword">var</span> p2 = points[j];</span><br><span class="line">      <span class="comment">// å‹¾è‚¡å®šç†</span></span><br><span class="line">      <span class="keyword">var</span> l = <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(p2.x - p1.x,<span class="number">2</span>) + <span class="built_in">Math</span>.pow(p2.y - p1.y,<span class="number">2</span>));</span><br><span class="line">      <span class="keyword">if</span> (l &lt; lineMaxLen) &#123;</span><br><span class="line">        context.beginPath();</span><br><span class="line">        context.moveTo(p1.x, p1.y);</span><br><span class="line">        context.lineTo(p2.x, p2.y);</span><br><span class="line">        <span class="comment">// è¶Šè¿œé¢œè‰²è¶Šæ·¡</span></span><br><span class="line">        context.strokeStyle=<span class="string">'rgba(0,0,0,'</span> + ((lineMaxLen - l) / lineMaxLen) + <span class="string">')'</span>;</span><br><span class="line">        context.stroke();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€’å½’è°ƒç”¨</span></span><br><span class="line">  requestAnimationFrame(animate);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨åŠ¨ç”»</span></span><br><span class="line">requestAnimationFrame(animate);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/07/17/Canvasç³»åˆ—ï¼ˆ13ï¼‰ï¼šå®æˆ˜-æ˜Ÿç©ºè¿çº¿å›¾/4.gif" alt="å®Œæ•´æ•ˆæœ"></p><p>æºç è¯·ç‚¹å‡»<a href="https://github.com/KaiOrange/canvas-demo/tree/master/13" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><p>æˆ‘ä»¬å·²ç»å¤§è‡´å®ç°äº†æˆ‘ä»¬çš„æ•ˆæœï¼Œå½“ç„¶è¿˜éœ€è¦åšçš„æ˜¯ç›‘å¬<code>window.resize</code>äº‹ä»¶ï¼Œä»¥åŠ¨æ€è®¾ç½®Canvasçš„å®½é«˜ï¼›ä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ äº‹ä»¶ï¼Œè®©é¼ æ ‡é¡¶ç‚¹çš„ä½ç½®ä¹ŸåŠ ä¸€ä¸ªç‚¹ï¼›ç”šè‡³å¯ä»¥æ”¹å˜é€Ÿåº¦ï¼Œå½“ä¸¤ä¸ªç‚¹é è¿‘çš„æ—¶å€™é€Ÿåº¦åŠ å¤§ï¼Œè¿œç¦»çš„æ—¶å€™é€Ÿåº¦å‡å°ï¼›å½“ç„¶å¯ä»¥æŠŠè¿™ä¸ªæ•ˆæœå°è£…æˆä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ç»„ä»¶ï¼Œæ”¾åœ¨ä½ çš„é¡¹ç›®ä¸­ã€‚è¿™äº›åç»­äº‹æƒ…å°±äº¤ç»™ä½ äº†ï¼Œç›¸ä¿¡ä½ å¯ä»¥çš„ã€‚</p><p>æˆ‘ä»¬åšå®¢èƒŒæ™¯ä¸­ä½¿ç”¨çš„æ˜¯<a href="https://github.com/hustcc/canvas-nest.js" target="_blank" rel="noopener">canvas-nest.js</a>ï¼Œä½ ä¹Ÿå¯ä»¥è§‚æ‘©ä¸€ä¸‹å®ƒæºç ï¼Œå®ç°æ–¹å¼å’Œæˆ‘ä»¬çš„å¤§åŒå°å¼‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ12ï¼‰ï¼šåŠ¨ç”»é«˜çº§</title>
      <link href="/2019/06/30/Canvas%E7%B3%BB%E5%88%97%EF%BC%8812%EF%BC%89%EF%BC%9A%E5%8A%A8%E7%94%BB%E9%AB%98%E7%BA%A7/"/>
      <url>/2019/06/30/Canvas%E7%B3%BB%E5%88%97%EF%BC%8812%EF%BC%89%EF%BC%9A%E5%8A%A8%E7%94%BB%E9%AB%98%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡å‰é¢ç« èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†ç›´çº¿å’Œéƒ¨åˆ†æ›²çº¿è¿åŠ¨ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå­¦ä¼šäº†åŠ é€Ÿã€å‡é€Ÿã€æ‘©æ“¦åŠ›ç­‰æ“ä½œã€‚é‚£ä¹ˆåŠ¨ç”»è¿˜æœ‰ä»€ä¹ˆéœ€è¦æ·±å…¥ç ”ç©¶ä¸‹å»çš„å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œé‚£å°±æ˜¯è®©åŠ¨ç”»æ›´åŠ å¹³æ»‘ï¼Œæ›´ç»†æ»‘ã€‚</p><hr><h2 id="ç¼“åŠ¨åŠ¨ç”»"><a href="#ç¼“åŠ¨åŠ¨ç”»" class="headerlink" title="ç¼“åŠ¨åŠ¨ç”»"></a>ç¼“åŠ¨åŠ¨ç”»</h2><p>åœ¨ä½¿ç”¨CSS3åšå˜åŒ–çš„æ—¶å€™æˆ‘ä»¬ç»å¸¸ä½¿ç”¨<code>transition-timing-function</code>ï¼Œå…¶ä¸­æœ€æœ‰åçš„ä¸¤ä¸ªå€¼å°±æ˜¯<code>ease-in</code>å’Œ<code>ease-out</code>ï¼Œé‚£canvasç§æ€ä¹ˆå®ç°è¿™ä¸­å¦‚ä¸èˆ¬ç»†æ»‘çš„ç¼“åŠ¨åŠ¨ç”»å‘¢ï¼Ÿçœ‹å®Œæœ¬ç« ä½ å°±çŸ¥é“äº†ã€‚ç¼“åŠ¨çš„å…¬å¼å¦‚ä¸‹ï¼š</p><blockquote><p>å½“å‰é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * ç¼“åŠ¨ç³»æ•°ã€‚<br>æ–°çš„ä½ç½® = å½“å‰ä½ç½® + å½“å‰é€Ÿåº¦ã€‚</p></blockquote><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®xçš„å€¼æ”¾åœ¨æœ€å·¦è¾¹</span></span><br><span class="line"><span class="keyword">var</span> ballX = ballRadius;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">// xçš„é€Ÿåº¦ å…·ä½“æ˜¯å¤šå°‘åœ¨updateçš„æ—¶å€™è®¡ç®—</span></span><br><span class="line"><span class="keyword">var</span> vx;</span><br><span class="line"><span class="comment">//Â ç¼“åŠ¨ç³»æ•°</span></span><br><span class="line"><span class="keyword">var</span> easing = <span class="number">0.03</span>;</span><br><span class="line"><span class="comment">// æœ€ç»ˆä½ç½® åœ¨æœ€å³è¾¹</span></span><br><span class="line"><span class="keyword">var</span> targetX = canvas.width - ballRadius;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// å½“å‰é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * ç¼“åŠ¨ç³»æ•°</span></span><br><span class="line">  vx = (targetX - ballX) * easing;</span><br><span class="line">  <span class="comment">// æ–°çš„ä½ç½® = å½“å‰ä½ç½® + å½“å‰é€Ÿåº¦</span></span><br><span class="line">  ballX += vx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ12ï¼‰ï¼šåŠ¨ç”»é«˜çº§/1.gif" alt="ç¼“åŠ¨åŠ¨ç”»"></p><p>ç”±ä¸Šé¢å…¬å¼ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œç¼“åŠ¨ç³»æ•°è¶Šå¤§è¿åŠ¨çš„è¶Šå¿«ã€‚</p><h2 id="å¸¦æœ‰è§’åº¦çš„ç¼“åŠ¨åŠ¨ç”»"><a href="#å¸¦æœ‰è§’åº¦çš„ç¼“åŠ¨åŠ¨ç”»" class="headerlink" title="å¸¦æœ‰è§’åº¦çš„ç¼“åŠ¨åŠ¨ç”»"></a>å¸¦æœ‰è§’åº¦çš„ç¼“åŠ¨åŠ¨ç”»</h2><p>å¸¦æœ‰è§’åº¦çš„ç¼“åŠ¨åŠ¨ç”»ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªè¦æŠŠyè½´ä¸Šçš„åˆ†é‡ä¹Ÿè®¡ç®—è¿›å»å°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®èµ·å§‹ä½ç½®åœ¨å·¦ä¸Šè§’</span></span><br><span class="line"><span class="keyword">var</span> ballX = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> ballY = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// é€Ÿåº¦ å…·ä½“æ˜¯å¤šå°‘åœ¨updateçš„æ—¶å€™è®¡ç®—</span></span><br><span class="line"><span class="keyword">var</span> vx,vy;</span><br><span class="line"><span class="comment">//Â ç¼“åŠ¨ç³»æ•°</span></span><br><span class="line"><span class="keyword">var</span> easing = <span class="number">0.03</span>;</span><br><span class="line"><span class="comment">// æœ€ç»ˆä½ç½® åœ¨å³ä¸‹è§’</span></span><br><span class="line"><span class="keyword">var</span> targetX = canvas.width - ballRadius;</span><br><span class="line"><span class="keyword">var</span> targetY = canvas.height - ballRadius;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// å½“å‰é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * ç¼“åŠ¨ç³»æ•°</span></span><br><span class="line">  vx = (targetX - ballX) * easing;</span><br><span class="line">  vy = (targetY - ballY) * easing;</span><br><span class="line">  <span class="comment">// æ–°çš„ä½ç½® = å½“å‰ä½ç½® + å½“å‰é€Ÿåº¦</span></span><br><span class="line">  ballX += vx;</span><br><span class="line">  ballY += vy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ12ï¼‰ï¼šåŠ¨ç”»é«˜çº§/2.gif" alt="å¸¦æœ‰è§’åº¦çš„ç¼“åŠ¨åŠ¨ç”»"></p><p>ç”±ä¸Šå¯ä»¥ï¼Œç¼“åŠ¨åŠ¨ç”»åªéœ€è¦æ ¹æ®ç»™å®šç»“æŸçš„ä½ç½®å°±å¯ä»¥äº†ï¼Œæ— éœ€æ ¹æ®è§’åº¦å†è¿›è¡Œè®¡ç®—ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚é€šå¸¸ç”±äºç¼“åŠ¨åŠ¨ç”»æ¯”æ‘©æ“¦åŠ›æ›´ç»†æ»‘ï¼Œæ‰€ä»¥å‡é€Ÿååœæ¥ä¸‹çš„åŠ¨ç”»ï¼ŒåŸºæœ¬ä¸Šéƒ½ç”¨ç¼“åŠ¨åŠ¨ç”»ã€‚</p><h2 id="ç¼“åŠ¨åŠ¨ç”»çš„å…¶ä»–ä½¿ç”¨åœºæ™¯"><a href="#ç¼“åŠ¨åŠ¨ç”»çš„å…¶ä»–ä½¿ç”¨åœºæ™¯" class="headerlink" title="ç¼“åŠ¨åŠ¨ç”»çš„å…¶ä»–ä½¿ç”¨åœºæ™¯"></a>ç¼“åŠ¨åŠ¨ç”»çš„å…¶ä»–ä½¿ç”¨åœºæ™¯</h2><p>ç¼“åŠ¨åŠ¨ç”»è®¡ç®—çš„è¿‡ç¨‹å…¶å®ä¸€ä¸ªç®€å•æ•°å­¦æ¨åˆ°ï¼Œæœ¬èº«å¹¶ä¸æ˜¯ä»€ä¹ˆé«˜æ·±çš„ä¸œè¥¿ï¼ˆå½“ç„¶åšå‡ºæ¥çš„æ•ˆæœç¡®å®å¾ˆå¥½ï¼‰ã€‚æˆ‘ä»¬çš„æ€ç»´ä¸èƒ½å®šåŠ¿åˆ°åªèƒ½åšç‰©ä½“ç§»åŠ¨çš„åŠ¨ç”»ï¼Œåªè¦æœ‰ä»çŠ¶æ€Aå¹³æ»‘å˜åŒ–åˆ°çŠ¶æ€Bçš„åœºæ™¯éƒ½å¯ä»¥ä½¿ç”¨ç¼“åŠ¨åŠ¨ç”»ï¼Œå°±æ¯”å¦‚å®½é«˜çš„å˜åŒ–ï¼Œé¢œè‰²çš„å˜åŒ–ï¼Œé€æ˜åº¦çš„å˜åŒ–ç­‰ç­‰ã€‚æˆ‘ä»¬è¿™é‡Œç»™ä¸€ä¸ªå°çƒåŠå¾„å˜åŒ–çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°çƒç”»åœ¨ä¸­é—´ä½ç½®</span></span><br><span class="line"><span class="keyword">var</span> ballX = centerX;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">//Â ç¼“åŠ¨ç³»æ•°</span></span><br><span class="line"><span class="keyword">var</span> easing = <span class="number">0.03</span>;</span><br><span class="line"><span class="comment">// æœ€ç»ˆä½ç½® åœ¨å³ä¸‹è§’</span></span><br><span class="line"><span class="keyword">var</span> targetBallRadius = <span class="number">70</span>;</span><br><span class="line"><span class="comment">// åŠå¾„å˜åŒ–é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> vRadius;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// å½“å‰é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * ç¼“åŠ¨ç³»æ•°</span></span><br><span class="line">  vRadius = (targetBallRadius - ballRadius) * easing;</span><br><span class="line">  <span class="comment">// æ–°çš„ä½ç½® = å½“å‰ä½ç½® + å½“å‰é€Ÿåº¦</span></span><br><span class="line">  ballRadius += vRadius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ12ï¼‰ï¼šåŠ¨ç”»é«˜çº§/3.gif" alt="ç¼“åŠ¨åŠ¨ç”»çš„å…¶ä»–ä½¿ç”¨åœºæ™¯"></p><h2 id="å¼¹æ€§åŠ¨ç”»"><a href="#å¼¹æ€§åŠ¨ç”»" class="headerlink" title="å¼¹æ€§åŠ¨ç”»"></a>å¼¹æ€§åŠ¨ç”»</h2><p>ç¼“åŠ¨åŠ¨ç”»ï¼Œå½“ç‰©ä½“è¿åŠ¨åˆ°ç»ˆç‚¹çš„ä½ç½®å°±ä¼šåœä¸‹æ¥ï¼›å¼¹æ€§åŠ¨ç”»ï¼Œå½“ç‰©ä½“è¿åŠ¨åˆ°ç»ˆç‚¹ä½ç½®ï¼Œä¼šç»§ç»­å¾€å‰è¿åŠ¨ä¸€ä¸‹ï¼Œç„¶ååå¼¹è¿‡æ¥ã€‚é‚£ä¹ˆæ€ä¹ˆå®ç°å¼¹æ€§åŠ¨ç”»å‘¢ï¼Ÿè¯´å‡ºæ¥ä½ å¯èƒ½ä¼šä¸ç›¸ä¿¡ï¼Œç¼“åŠ¨åŠ¨ç”»æ˜¯é€Ÿåº¦ä½¿ç”¨ç¼“åŠ¨æ–¹ç¨‹ï¼Œè€Œå¼¹æ€§åŠ¨ç”»æ˜¯åŠ é€Ÿåº¦ä½¿ç”¨ç¼“åŠ¨æ–¹ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š</p><blockquote><p>å½“å‰åŠ é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * å¼¹æ€§ç³»æ•°ã€‚<br>æ–°çš„é€Ÿåº¦ = å½“å‰é€Ÿåº¦ + å½“å‰åŠ é€Ÿåº¦ã€‚<br>æ–°çš„ä½ç½® = å½“å‰çš„ä½ç½® + æ–°çš„é€Ÿåº¦ã€‚</p></blockquote><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®èµ·å§‹ä½ç½®åœ¨å·¦è¾¹</span></span><br><span class="line"><span class="keyword">var</span> ballX = ballRadius;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">// åˆå§‹é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> vy = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// åŠ é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> ax;</span><br><span class="line"><span class="comment">//Â å¼¹æ€§åŠ¨ç”»ç³»æ•°</span></span><br><span class="line"><span class="keyword">var</span> spring = <span class="number">0.01</span>;</span><br><span class="line"><span class="comment">// æœ€ç»ˆä½ç½® åœ¨æœ€å³è¾¹</span></span><br><span class="line"><span class="keyword">var</span> targetX = centerX;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// å½“å‰åŠ é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * å¼¹æ€§ç³»æ•°</span></span><br><span class="line">  ax = (targetX - ballX) * spring;</span><br><span class="line">  <span class="comment">// æ–°çš„é€Ÿåº¦ = å½“å‰é€Ÿåº¦ + å½“å‰åŠ é€Ÿåº¦</span></span><br><span class="line">  vx += ax;</span><br><span class="line">  <span class="comment">// æ–°çš„ä½ç½® = å½“å‰çš„ä½ç½® + æ–°çš„é€Ÿåº¦</span></span><br><span class="line">  ballX += vx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ12ï¼‰ï¼šåŠ¨ç”»é«˜çº§/4.gif" alt="å¼¹æ€§åŠ¨ç”»"></p><p>å°çƒä»å·¦è¾¹ï¼Œèµ°åˆ°äº†ä¸­é—´ï¼Œåˆ°ä¸­é—´çš„æ—¶å€™åŠ é€Ÿåº¦æ˜¯0ï¼Œå†å¾€å³ä¸€ç‚¹ï¼ŒåŠ é€Ÿåº¦æ˜¯è´Ÿæ•°ä¹Ÿå°±æ˜¯å‡é€Ÿï¼Œç­‰å‡é€Ÿåˆ°æœ€å³è¾¹çš„æ—¶å€™é€Ÿåº¦ä¸º0ï¼Œç„¶åå‘å·¦è¾¹åŠ é€Ÿã€‚é€šè¿‡ä¸Šé¢å…¬å¼æˆ‘ä»¬å‘ç°ç¬¬ä¸€ä¸ªå…¬å¼è·Ÿç¼“åŠ¨å…¬å¼æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç»“æœä¸€ä¸ªæ˜¯åŠ é€Ÿåº¦ä¸€ä¸ªæ˜¯é€Ÿåº¦ï¼Œè‡³äºç³»æ•°è™½ç„¶è¿™é‡Œå«çš„ä¸ä¸€æ ·ï¼Œå…¶å®ä»£è¡¨çš„å«ä¹‰å·®ä¸å¤šã€‚</p><h2 id="å¸¦æœ‰æ‘©æ“¦åŠ›çš„å¼¹æ€§åŠ¨ç”»"><a href="#å¸¦æœ‰æ‘©æ“¦åŠ›çš„å¼¹æ€§åŠ¨ç”»" class="headerlink" title="å¸¦æœ‰æ‘©æ“¦åŠ›çš„å¼¹æ€§åŠ¨ç”»"></a>å¸¦æœ‰æ‘©æ“¦åŠ›çš„å¼¹æ€§åŠ¨ç”»</h2><p>ä¸Šé¢çš„å¼¹æ€§åŠ¨ç”»æ˜¯ç†æƒ³çŠ¶æ€ä¸‹çš„ï¼Œå°±æ˜¯ç‰©ç†ä¸Šæ‰€è¯´çš„ç»å¯¹å…‰æ»‘çš„æƒ…å†µä¸‹æ‰ä¼šå‘ç”Ÿï¼Œè€Œç°å®ä¸­å¾€å¾€æ˜¯å…·æœ‰æ‘©æ“¦åŠ›çš„ã€‚æ‘©æ“¦åŠ›æˆ‘ä»¬ä¹‹å‰å­¦è¿‡ï¼Œå¼¹æ€§åŠ¨ç”»æˆ‘ä»¬ä¹Ÿå­¦è¿‡ï¼Œå¦‚æœæŠŠä¸¤è€…ç»“åˆèµ·æ¥å°±æ˜¯å¸¦æœ‰æ‘©æ“¦åŠ›çš„å¼¹æ€§åŠ¨ç”»ï¼Œå…¬å¼å¦‚ä¸‹ï¼š</p><blockquote><p>å½“å‰åŠ é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * å¼¹æ€§ç³»æ•°ã€‚<br>æ²¡æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦ = å½“å‰é€Ÿåº¦ + å½“å‰åŠ é€Ÿåº¦ã€‚<br>å¸¦æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦ = æ²¡æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦ * æ‘©æ“¦ç³»æ•°ã€‚<br>æ–°çš„ä½ç½® = å½“å‰çš„ä½ç½® + å¸¦æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®èµ·å§‹ä½ç½®åœ¨å·¦è¾¹</span></span><br><span class="line"><span class="keyword">var</span> ballX = ballRadius;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">// åˆå§‹é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> vy = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// åŠ é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> ax;</span><br><span class="line"><span class="comment">//Â å¼¹æ€§åŠ¨ç”»ç³»æ•°</span></span><br><span class="line"><span class="keyword">var</span> spring = <span class="number">0.01</span>;</span><br><span class="line"><span class="comment">//Â æ‘©æ“¦åŠ›ç³»æ•°</span></span><br><span class="line"><span class="keyword">var</span> friction = <span class="number">0.98</span>;</span><br><span class="line"><span class="comment">// æœ€ç»ˆä½ç½® åœ¨æœ€å³è¾¹</span></span><br><span class="line"><span class="keyword">var</span> targetX = centerX;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// å½“å‰åŠ é€Ÿåº¦ = (æœ€ç»ˆä½ç½® - å½“å‰ä½ç½®) * å¼¹æ€§ç³»æ•°</span></span><br><span class="line">  ax = (targetX - ballX) * spring;</span><br><span class="line">  <span class="comment">// æ²¡æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦ = å½“å‰é€Ÿåº¦ + å½“å‰åŠ é€Ÿåº¦</span></span><br><span class="line">  vx += ax;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¸¦æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦ = æ²¡æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦ * æ‘©æ“¦ç³»æ•°</span></span><br><span class="line">  vx *= friction;</span><br><span class="line">  <span class="comment">// æ–°çš„ä½ç½® = å½“å‰çš„ä½ç½® + å¸¦æœ‰æ‘©æ“¦åŠ›çš„æ–°çš„é€Ÿåº¦</span></span><br><span class="line">  ballX += vx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ12ï¼‰ï¼šåŠ¨ç”»é«˜çº§/5.gif" alt="å¸¦æœ‰æ‘©æ“¦åŠ›çš„å¼¹æ€§åŠ¨ç”»"></p><p>å»ºè®®ä½ è‡ªå·±å†™ä¸€å†™ä»£ç ï¼Œæˆ–è€…è‡ªå·±æŠŠä»£ç ä¸‹è½½ä¸‹æ¥è¿è¡Œä¸€ä¸‹ï¼Œä»£ç åœ°å€ï¼š<a href="https://github.com/KaiOrange/canvas-demo" target="_blank" rel="noopener">https://github.com/KaiOrange/canvas-demo</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ11ï¼‰ï¼šåŠ¨ç”»ä¸­çº§</title>
      <link href="/2019/06/30/Canvas%E7%B3%BB%E5%88%97%EF%BC%8811%EF%BC%89%EF%BC%9A%E5%8A%A8%E7%94%BB%E4%B8%AD%E7%BA%A7/"/>
      <url>/2019/06/30/Canvas%E7%B3%BB%E5%88%97%EF%BC%8811%EF%BC%89%EF%BC%9A%E5%8A%A8%E7%94%BB%E4%B8%AD%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€ç« æˆ‘ä»¬è®²äº†ç®€å•çš„åŠ¨ç”»æ˜¯å¦‚ä½•ç»˜åˆ¶çš„ï¼Œå¦‚æœæ²¡æœ‰çœ‹ä¸Šä¸€ç« çš„ç«¥é‹ï¼Œè¯·ç‚¹<a href="/2019/06/30/Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§/#more">è¿™é‡Œ</a>ï¼Œæœ¬ç« çš„å†…å®¹ä¹Ÿæ˜¯æ¥ç€ä¸Šä¸€ç« çš„å†…å®¹ï¼Œä»£ç ä¹Ÿåªä¿®æ”¹å…¶ä¸­éƒ¨åˆ†ã€‚</p><hr><h2 id="åŠ é€Ÿè¿åŠ¨"><a href="#åŠ é€Ÿè¿åŠ¨" class="headerlink" title="åŠ é€Ÿè¿åŠ¨"></a>åŠ é€Ÿè¿åŠ¨</h2><p>æˆ‘ä¸Šç« ä¸­ï¼Œæ¶‰åŠç›´çº¿çš„è¿åŠ¨ï¼Œå…¶é€Ÿåº¦éƒ½æ˜¯æ’å®šçš„ï¼Œç°åœ¨æˆ‘ä»¬åšä¸€ä¸‹åŠ é€Ÿçš„è¿è¡Œï¼ŒåŒæ ·çš„æˆ‘ä»¬åªç»™å‡ºæ ¸å¿ƒçš„ä»£ç ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®xçš„å€¼æ”¾åœ¨æœ€å·¦è¾¹</span></span><br><span class="line"><span class="keyword">var</span> ballX = ballRadius;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">// xçš„é€Ÿåº¦ åˆå§‹å€¼æ˜¯0 ç„¶åé€æ¸åŠ é€Ÿ</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//Â åŠ é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> ax = <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += vx;</span><br><span class="line">  <span class="comment">// æ”¹å˜é€Ÿåº¦</span></span><br><span class="line">  vx += ax;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ11ï¼‰ï¼šåŠ¨ç”»ä¸­çº§/1.gif" alt="åŠ é€Ÿè¿åŠ¨"></p><p>é‚£ä¹ˆå‡é€Ÿè¿åŠ¨æ€ä¹ˆåšå‘¢ï¼Ÿæ²¡é”™åªè¦æŠŠåŠ é€Ÿåº¦æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œå½“ç„¶æˆ‘ä»¬è‚¯å®šè¦ç»™ä¸€ä¸ªåˆå§‹é€Ÿåº¦ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®xçš„å€¼æ”¾åœ¨æœ€å·¦è¾¹</span></span><br><span class="line"><span class="keyword">var</span> ballX = ballRadius;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">// xçš„é€Ÿåº¦ åˆå§‹å€¼æ˜¯0 ç„¶åé€æ¸åŠ é€Ÿ</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">7</span>;</span><br><span class="line"><span class="comment">//Â åŠ é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> ax = <span class="number">-0.1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += vx;</span><br><span class="line">  <span class="comment">// æ”¹å˜é€Ÿåº¦</span></span><br><span class="line">  vx += ax;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ11ï¼‰ï¼šåŠ¨ç”»ä¸­çº§/2.gif" alt="å‡é€Ÿè¿åŠ¨"></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå°çƒå…ˆå‘å³å‡é€Ÿï¼Œå½“é€Ÿåº¦å‡åˆ°0çš„æ—¶å€™ï¼Œç„¶ååˆåƒå·¦åŠ é€Ÿäº†ï¼Œå’Œç‰©ç†è¯¾ä¸Šè®²çš„æ˜¯ä¸€æ ·çš„ã€‚</p><h2 id="å¸¦è§’åº¦çš„åŠ é€Ÿè¿åŠ¨"><a href="#å¸¦è§’åº¦çš„åŠ é€Ÿè¿åŠ¨" class="headerlink" title="å¸¦è§’åº¦çš„åŠ é€Ÿè¿åŠ¨"></a>å¸¦è§’åº¦çš„åŠ é€Ÿè¿åŠ¨</h2><p>å¸¦è§’åº¦çš„åŠ é€Ÿè¿åŠ¨ï¼Œå’Œä¹‹å‰çš„ä¸€æ ·ï¼Œç”±äºåŠ é€Ÿåº¦ä¸å˜ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åŠ é€Ÿåº¦åˆ†è§£ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®çƒçš„èµ·å§‹ä½ç½®åœ¨å·¦ä¸Šè§’</span></span><br><span class="line"><span class="keyword">var</span> ballX = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> ballY = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// åˆå§‹é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> vy = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// è§’åº¦</span></span><br><span class="line"><span class="keyword">var</span> angle = <span class="number">45</span>;</span><br><span class="line"><span class="comment">//Â åŠ é€Ÿåº¦æ˜¯0,1</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">0.1</span>;</span><br><span class="line"><span class="comment">// è®¡ç®—åŠ é€Ÿåº¦åˆ†é‡</span></span><br><span class="line"><span class="keyword">var</span> ax = a * <span class="built_in">Math</span>.cos(angle * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</span><br><span class="line"><span class="keyword">var</span> ay = a * <span class="built_in">Math</span>.sin(angle * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += vx;</span><br><span class="line">  ballY += vy;</span><br><span class="line">  <span class="comment">// æ”¹å˜é€Ÿåº¦</span></span><br><span class="line">  vx += ax;</span><br><span class="line">  vy += ay;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ11ï¼‰ï¼šåŠ¨ç”»ä¸­çº§/3.gif" alt="å¸¦è§’åº¦çš„è¿åŠ¨"></p><h2 id="æŠ›ç‰©çº¿è¿åŠ¨"><a href="#æŠ›ç‰©çº¿è¿åŠ¨" class="headerlink" title="æŠ›ç‰©çº¿è¿åŠ¨"></a>æŠ›ç‰©çº¿è¿åŠ¨</h2><p>çœ‹åˆ°åˆšæ‰çš„åŠ é€Ÿè¿åŠ¨ï¼Œæˆ‘æƒ³é—®ä½ è‡ªç”±è½ä½“è¿åŠ¨æ€ä¹ˆåšï¼Ÿè‡ªç”±è½ä½“è¿åŠ¨å°±æ˜¯åˆé€Ÿåº¦ä¸º0ï¼Œç„¶åyæ–¹å‘ä¸Šæœ‰ä¸€ä¸ªåŠ é€Ÿåº¦ï¼Œæˆ‘ä»¬ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯xæ–¹å‘ä¸Šçš„åŠ é€Ÿåº¦ï¼Œç›¸ä¿¡ä»¥ä½ ç°åœ¨çš„å®åŠ›ï¼Œåšå‡ºæ¥æ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ã€‚ç°åœ¨æˆ‘ä»¬çœ‹ä¸€ä¸‹æŠ›ç‰©çº¿è¿åŠ¨ï¼ŒæŠ›ç‰©çº¿è¿åŠ¨æ˜¯æ°´å¹³æ–¹å‘ä¸Šçš„åŒ€é€Ÿç›´çº¿è¿åŠ¨ï¼Œå°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®çƒçš„èµ·å§‹ä½ç½®åœ¨å·¦ä¸‹è§’</span></span><br><span class="line"><span class="keyword">var</span> ballX = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> ballY = canvas.height;</span><br><span class="line"><span class="comment">// åˆå§‹é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// yæ–¹å‘åˆå§‹é€Ÿåº¦å‘ä¸Š</span></span><br><span class="line"><span class="keyword">var</span> vy = <span class="number">-5</span>;</span><br><span class="line"><span class="comment">//Â yæ–¹å‘ä¸Šçš„åŠ é€Ÿåº¦æ˜¯0.1ï¼ˆ9.8å¤ªå¤§äº†ï¼Œæ‰€ä»¥å°±ç”¨äº†ä¸€ä¸ªå°çš„åŠ é€Ÿåº¦ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> ay = <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += vx;</span><br><span class="line">  ballY += vy;</span><br><span class="line">  <span class="comment">// æ”¹å˜yæ–¹å‘ä¸Šçš„é€Ÿåº¦</span></span><br><span class="line">  vy += ay;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ11ï¼‰ï¼šåŠ¨ç”»ä¸­çº§/4.gif" alt="æŠ›ç‰©çº¿è¿åŠ¨"></p><h2 id="å¸¦åå¼¹çš„æŠ›ç‰©çº¿è¿åŠ¨"><a href="#å¸¦åå¼¹çš„æŠ›ç‰©çº¿è¿åŠ¨" class="headerlink" title="å¸¦åå¼¹çš„æŠ›ç‰©çº¿è¿åŠ¨"></a>å¸¦åå¼¹çš„æŠ›ç‰©çº¿è¿åŠ¨</h2><p>å¢åŠ ä¸€ç‚¹éš¾åº¦ï¼Œå°çƒè§¦ç¢°åˆ°æœ€ä¸‹é¢é‚£ä¹ˆå°†åå¼¹ï¼Œé€šå¸¸åå¼¹ä¼šæŸå¤±ä¸€ç‚¹èƒ½é‡ï¼Œæˆ‘ä»¬å°±è®¾ç½®æ¯æ¬¡åå¼¹åçš„é€Ÿåº¦æ˜¯åŸæ¥çš„80%ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®çƒçš„èµ·å§‹ä½ç½®åœ¨å·¦ä¸‹è§’</span></span><br><span class="line"><span class="keyword">var</span> ballX = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// yå…ˆæŠ¬é«˜ä¸€ç‚¹</span></span><br><span class="line"><span class="keyword">var</span> ballY = canvas.height - ballRadius;</span><br><span class="line"><span class="comment">// åˆå§‹é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// yæ–¹å‘åˆå§‹é€Ÿåº¦å‘ä¸Š</span></span><br><span class="line"><span class="keyword">var</span> vy = <span class="number">-4</span>;</span><br><span class="line"><span class="comment">//Â yæ–¹å‘ä¸Šçš„åŠ é€Ÿåº¦æ˜¯0.1ï¼ˆ9.8å¤ªå¤§äº†ï¼Œæ‰€ä»¥å°±ç”¨äº†ä¸€ä¸ªå°çš„åŠ é€Ÿåº¦ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> ay = <span class="number">0.1</span>;</span><br><span class="line"><span class="comment">// ç¬¦å·è¡¨ç¤ºæ–¹å‘ åå¼¹åé€Ÿåº¦å‡å°</span></span><br><span class="line"><span class="keyword">var</span> bounce = <span class="number">-0.8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += vx;</span><br><span class="line">  ballY += vy;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœå°çƒçš„é«˜åº¦ åˆ°æœ€ä¸‹é¢äº† é‚£ä¹ˆå°±è®¾ç½®æœ€ä¸‹é¢ä½ çš„å€¼ å¹¶ä¸”å°±åå¼¹</span></span><br><span class="line">  <span class="keyword">if</span> (ballY &gt; canvas.height - ballRadius) &#123;</span><br><span class="line">    ballY = canvas.height - ballRadius;</span><br><span class="line">    vy = vy * bounce;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ”¹å˜yæ–¹å‘ä¸Šçš„é€Ÿåº¦</span></span><br><span class="line">  vy += ay;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ11ï¼‰ï¼šåŠ¨ç”»ä¸­çº§/5.gif" alt="å¸¦åå¼¹çš„æŠ›ç‰©çº¿è¿åŠ¨"></p><h2 id="æ‘©æ“¦åŠ›"><a href="#æ‘©æ“¦åŠ›" class="headerlink" title="æ‘©æ“¦åŠ›"></a>æ‘©æ“¦åŠ›</h2><p>å¸¦æœ‰æ‘©æ“¦åŠ›çš„è¿åŠ¨å¾€å¾€é€Ÿåº¦ä¼šé€æ¸å˜å°ç›´åˆ°ä¸º0ï¼ˆæˆ‘ä»¬è¿™é‡Œä¸è€ƒè™‘å…¶ä»–å¤–åŠ›çš„ä½œç”¨ï¼‰ï¼Œè¿™å’Œä¸Šé¢å¸¦æœ‰åæ–¹å‘åŠ é€Ÿåº¦çš„å‡é€Ÿè¿åŠ¨å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å‡é€Ÿè¿åŠ¨é€Ÿåº¦ä¸º0çš„æ—¶å€™ä¼šåæ–¹å‘åŠ é€Ÿï¼Œå¸¦æœ‰æ‘©æ“¦åŠ›çš„è¿åŠ¨ä¸ä¼šåå‘åŠ é€Ÿã€‚æˆ‘ä»¬å°±æ”¹ä¸€æ”¹ä¸Šé¢çš„é‚£ä¸ªå‡é€Ÿçš„è¿åŠ¨ï¼Œç›´æ¥æŠŠåŠ é€Ÿåº¦æ”¹æˆæ‘©æ“¦åŠ›ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®xçš„å€¼æ”¾åœ¨æœ€å·¦è¾¹</span></span><br><span class="line"><span class="keyword">var</span> ballX = ballRadius;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">// xçš„é€Ÿåº¦ åˆå§‹å€¼æ˜¯0 ç„¶åé€æ¸åŠ é€Ÿ</span></span><br><span class="line"><span class="keyword">var</span> vx = <span class="number">7</span>;</span><br><span class="line"><span class="comment">//Â æ‘©æ“¦åŠ›ç³»æ•°</span></span><br><span class="line"><span class="keyword">var</span> friction = <span class="number">0.97</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += vx;</span><br><span class="line">  <span class="comment">// é€Ÿåº¦å‡å°</span></span><br><span class="line">  vx *= friction;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ11ï¼‰ï¼šåŠ¨ç”»ä¸­çº§/6.gif" alt="æ‘©æ“¦åŠ›"></p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§</title>
      <link href="/2019/06/30/Canvas%E7%B3%BB%E5%88%97%EF%BC%8810%EF%BC%89%EF%BC%9A%E5%8A%A8%E7%94%BB%E5%88%9D%E7%BA%A7/"/>
      <url>/2019/06/30/Canvas%E7%B3%BB%E5%88%97%EF%BC%8810%EF%BC%89%EF%BC%9A%E5%8A%A8%E7%94%BB%E5%88%9D%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å¼€å§‹å°±è¦è®²ä¸€äº›è¿›é˜¶çš„ä¸œè¥¿äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆå…´å¥‹å‘¢ï¼Ÿ</p><hr><h2 id="requestAnimationFrame"><a href="#requestAnimationFrame" class="headerlink" title="requestAnimationFrame"></a>requestAnimationFrame</h2><p>æ‰€è°“åŠ¨ç”»å…¶å®å°±æ˜¯å¿«è¯»ç»˜åˆ¶å›¾ç‰‡ï¼Œç”±äºäººçš„çœ¼ç›æ›´ä¸ä¸Šå±å¹•ç»˜åˆ¶çš„é€Ÿç‡ï¼Œæ‰€ä»¥çœ‹åˆ°çš„å°±å¥½åƒè¿ç€çš„ä¸€æ ·ï¼Œä¹Ÿå°±å½¢æˆäº†åŠ¨ç”»ï¼ŒåŠ¨ç”»ç‰‡å°±æ˜¯è¿™ä¸ªåŸç†ï¼Œcanvasä¸­çš„åŠ¨ç”»ä¹Ÿæ˜¯è¿™ä¸ªåŸç†ã€‚æåˆ°åŠ¨ç”»å°±ä¸å¾—ä¸è¯´ä¸€ä¸ªå‡½æ•°äº†ï¼Œé‚£å°±æ˜¯<code>requestAnimationFrame</code>ã€‚è¿™æ˜¯ä¸€ä¸ªå®šæ—¶æ‰§è¡Œçš„å‡½æ•°ï¼Œç±»ä¼¼äº<code>setTimeout</code>ï¼Œåªæ˜¯é—´éš”æ—¶é—´ä¸å†æœ‰æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å»è®¾å®šï¼Œè€Œæ˜¯ç”±è®¡ç®—æœºè‡ªå·±å»è®¡ç®—ï¼Œè¿™æ ·æ¯”æˆ‘ä»¬ç›´æ¥è®¾å®šçš„è¯¯å·®æ›´å°ï¼ˆé€šå¸¸æˆ‘ä»¬æ˜¯å®š1000/60ï¼Œçº¦ç­‰äº16.7æ¯«ç§’ï¼Œå› ä¸ºCPUçš„é¢‘ç‡ä¸€èˆ¬æ˜¯60Hzï¼Œä¹Ÿå°±æ˜¯1ç§’æœ€å¤šå¯ä»¥åˆ·æ–°60æ¬¡ç•Œé¢ï¼‰ã€‚ä½†æ˜¯å¾€å¾€æµè§ˆå™¨å¯¹<code>requestAnimationFrame</code>çš„æ”¯æŒä¸å¤Ÿå‹å¥½ï¼Œé‚£è¿™å°±éœ€è¦polyfillï¼Œé€šå¸¸ä¸€ç§ç®€å•çš„polyfillå¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">Date</span>.now)</span><br><span class="line">    <span class="built_in">Date</span>.now = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getTime(); &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.requestAnimationFrame = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> lastTime = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span>  <span class="built_in">window</span>.requestAnimationFrame       ||</span><br><span class="line">          <span class="built_in">window</span>.webkitRequestAnimationFrame ||</span><br><span class="line">          <span class="built_in">window</span>.mozRequestAnimationFrame    ||</span><br><span class="line">          <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> now = <span class="built_in">Date</span>.now();</span><br><span class="line">            <span class="keyword">var</span> nextTime = <span class="built_in">Math</span>.max(lastTime + <span class="number">16</span>, now);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              callback(lastTime = nextTime);</span><br><span class="line">            &#125;,nextTime - now);</span><br><span class="line">          &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ä¹‹å¯¹åº”çš„æ¸…ç©ºå®šæ—¶å™¨çš„polyfill</span></span><br><span class="line"><span class="built_in">window</span>.cancelAnimationFrame = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="built_in">window</span>.cancelAnimationFrame       ||</span><br><span class="line">          <span class="built_in">window</span>.webkitCancelAnimationFrame ||</span><br><span class="line">          <span class="built_in">window</span>.mozCancelAnimationFrame    ||</span><br><span class="line">          <span class="built_in">window</span>.clearTimeout</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä»–çš„åšæ³•æ˜¯å¦‚æœæ²¡æœ‰<code>requestAnimationFrame</code>é‚£ä¹ˆä½¿ç”¨<code>setTimeout</code>æ¥åšå›é€€å¤„ç†ã€‚é€šè¿‡ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>callback</code>æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ—¶é—´ï¼Œé€šå¸¸å¯¹äºæ¸¸æˆç­‰ç²¾åº¦è¦æ±‚æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ—¶é—´å’Œé€Ÿåº¦æ¥è®¡ç®—å½“å‰å¸§çš„ä½ç½®ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆé¿å…ï¼Œç¡¬ä»¶é…ç½®æ‰€å¸¦æ¥çš„ä¼˜åŠ¿ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘é…ç½®é«˜å¯èƒ½æ¯”é…ç½®ä½çš„å¤šç”»äº†å‡ å¸§ï¼Œé‚£ä¹ˆåŒæ ·çš„é€Ÿåº¦æˆ‘å°±æ¯”åˆ«äººèµ°çš„å¿«ï¼Œè€ŒåŸºäºè¿™ä¸ªæ—¶é—´æ¥è®¡ç®—çš„è¯å°±ä¸ä¼šæœ‰é—®é¢˜äº†ï¼Œå¦‚æœé…ç½®ä½çš„å°‘ç»˜åˆ¶å‡ å¸§ï¼Œé‚£ä¹ˆæ—¶é—´é—´éš”ä¼šå˜å¤§ç›¸åŒçš„é€Ÿåº¦ï¼Œè·ç¦»ä¹Ÿä¼šè¾¹è¿œã€‚è¿™å°±ç›¸å½“äºç›´æ¥è·³è¿‡äº†ä¸­é—´å‡ å¸§ã€‚å½“ç„¶å¯¹äºè¿™ä¸ªæ—¶é—´çš„å€¼ä¸åŒæµè§ˆå™¨å®ç°çš„æ–¹å¼å¯èƒ½ä¸ä¸€æ ·ï¼Œå°±æ¯”å¦‚è°·æ­Œçš„æ˜¯ä»0æ¯«ç§’å¼€å§‹é€æ¸é€’å¢çš„ï¼Œæœ‰çš„æµè§ˆå™¨æ˜¯å½“å‰çš„æ¯«ç§’æ•°é€æ¸é€’å¢çš„ï¼Œå¯¹äºç»˜åˆ¶å›¾åƒçš„æ—¶å€™æˆ‘ä»¬æ›´å¤šçš„æ˜¯å…³æ³¨æ—¶é—´å·®ï¼Œæ‰€ä»¥å½±å“ä¸æ˜¯å¾ˆå¤§ï¼Œå°±æ¯”å¦‚è°·æ­Œçš„ç¬¬ä¸€å¸§ä¼ çš„æ—¶é—´å¯èƒ½æ˜¯0ï¼Œç¬¬äºŒå¸§å¯èƒ½ä¼ çš„æ˜¯17ï¼Œè€ŒæŸäº›æµè§ˆå™¨å¯èƒ½ç¬¬ä¸€å¸§ä¼ çš„æ˜¯1561859029000ï¼Œç¬¬äºŒå¸§ä¼ çš„æ˜¯1561859029017ï¼Œæˆ‘ä»¬è®¡ç®—çš„æ—¶å€™å¾€å¾€æ˜¯æ ¹æ®ä¸¤è€…çš„å·®17æ¥è®¡ç®—ä¸‹ä¸€å¸§çš„ä½ç½®ã€‚å½“ç„¶ï¼Œå¯¹äºä¸€äº›ç®€å•ä¸æ—¶é—´æ— å…³çš„åŠ¨ç”»ç‰¹æ•ˆï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å…³æ³¨è¿™ä¸ªæ—¶é—´ï¼Œç›´æ¥æ ¹æ®æ¯æ¬¡ç»˜åˆ¶æ—¶å¢åŠ çš„é€Ÿåº¦å»è®¡ç®—å°±å¥½äº†ï¼Œæˆ‘ä»¬è¿™é‡Œä¸ºäº†ç®€å•èµ·è§å°±ä¸å»åŠ¨è¿™ä¸ªäº‹ä»¶äº†ã€‚åŒæ—¶ä¸ºäº†å‡å°‘ä»£ç çš„é•¿åº¦æˆ‘ä»¬å°±ä¸ä½¿ç”¨polyfilläº†ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸Šçº¿çš„é¡¹ç›®æœ€å¥½ä½¿ç”¨ä¸Šã€‚</p><h2 id="åŒ€é€Ÿç›´çº¿è¿åŠ¨"><a href="#åŒ€é€Ÿç›´çº¿è¿åŠ¨" class="headerlink" title="åŒ€é€Ÿç›´çº¿è¿åŠ¨"></a>åŒ€é€Ÿç›´çº¿è¿åŠ¨</h2><p>åŒ€é€Ÿç›´çº¿è¿åŠ¨æ˜¯æœ€ç®€å•çš„åŠ¨ç”»ï¼Œç”±äºæˆ‘ä»¬ç°åœ¨éœ€è¦ä¸æ–­åœ°æª«é™¤ç„¶åé‡æ–°ç»˜åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡æ–°ç»™å‡ºæˆ‘ä»¬æ­¤æ—¶çš„JavaScriptä»£ç ï¼Œå¦‚ä¸‹ï¼Œä¹Ÿå¯ä»¥åœ¨<a href="https://github.com/KaiOrange/canvas-demo" target="_blank" rel="noopener">è¿™é‡Œ</a>æŸ¥çœ‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"><span class="keyword">var</span> sW = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> lW = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">var</span> spacing = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶åæ ‡ç³»</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawCoordinate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.beginPath();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; canvas.width; x+=spacing) &#123;</span><br><span class="line">    context.moveTo(x, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(x % (spacing * <span class="number">5</span>) === <span class="number">0</span>)&#123;</span><br><span class="line">      context.lineTo(x, lW);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      context.lineTo(x, sW);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> y = <span class="number">0</span>; y &lt; canvas.height; y+=spacing) &#123;</span><br><span class="line">    context.moveTo(<span class="number">0</span>, y);</span><br><span class="line">    <span class="keyword">if</span>(y % (spacing * <span class="number">5</span>) === <span class="number">0</span>)&#123;</span><br><span class="line">      context.lineTo(lW, y);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      context.lineTo(sW, y);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  context.strokeStyle=<span class="string">'black'</span>;</span><br><span class="line">  context.stroke();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶ä»–ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­å¿ƒåæ ‡(centerX,centerY)</span></span><br><span class="line"><span class="keyword">var</span> centerX = canvas.width / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> centerY = canvas.height / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°çƒåœ†å¿ƒçš„åæ ‡</span></span><br><span class="line"><span class="keyword">var</span> ballX = centerX;</span><br><span class="line"><span class="keyword">var</span> ballY = centerY;</span><br><span class="line"><span class="comment">// å°çƒçš„åŠå¾„</span></span><br><span class="line"><span class="keyword">var</span> ballRadius = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// å¦‚æœè¶…å‡ºå» é‚£ä¹ˆå›åˆ°åˆå§‹ä½ç½®</span></span><br><span class="line">  <span class="keyword">if</span> (ballX &gt; <span class="number">300</span> + ballRadius) &#123;</span><br><span class="line">    ballX = -ballRadius;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.beginPath();</span><br><span class="line">  context.arc(ballX, ballY, ballRadius, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">  context.closePath();</span><br><span class="line">  context.fillStyle=<span class="string">'orange'</span>;</span><br><span class="line">  context.fill();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶æ²¡æœ‰è½¨è¿¹çš„ç»˜åˆ¶ æ‰€ä»¥å°±æ˜¯ä¸€ä¸ªç©ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawLocus</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// æ¸…å±</span></span><br><span class="line">  context.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»˜åˆ¶åæ ‡ç³»</span></span><br><span class="line">  drawCoordinate();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç»˜åˆ¶è½¨è¿¹ æœ‰å¯èƒ½ä¼šç”¨åˆ° å½“å‰æ˜¯ç©º</span></span><br><span class="line">  drawLocus();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°å°çƒä½ç½®</span></span><br><span class="line">  updateBall();</span><br><span class="line">  <span class="comment">// ç»˜åˆ¶çƒ</span></span><br><span class="line">  drawBall();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€’å½’è°ƒç”¨</span></span><br><span class="line">  requestAnimationFrame(animate);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨åŠ¨ç”»</span></span><br><span class="line">requestAnimationFrame(animate);</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°<code>animate</code>è¿˜æ˜¯äº†å—ï¼Œæ­¤å‡½æ•°æ˜¯canvasåŠ¨ç”»çš„â€œå¥—è·¯â€ï¼Œä¸€å®šè¦ç†Ÿæ‚‰å®ƒï¼Œå‡ ä¹æ‰€æœ‰åŠ¨ç”»ç›¸å…³çš„ä»£ç éƒ½æœ‰è¯¥å‡½æ•°çš„èº«å½±ã€‚æ­¤æ—¶çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§/1.gif" alt="åŒ€é€Ÿç›´çº¿è¿åŠ¨"></p><h2 id="åŒ€é€Ÿåœ†å‘¨è¿åŠ¨"><a href="#åŒ€é€Ÿåœ†å‘¨è¿åŠ¨" class="headerlink" title="åŒ€é€Ÿåœ†å‘¨è¿åŠ¨"></a>åŒ€é€Ÿåœ†å‘¨è¿åŠ¨</h2><p>åŒ€é€Ÿåœ†å‘¨è¿åŠ¨å’ŒåŒ€é€Ÿç›´çº¿è¿åŠ¨ä»£ç å·®ä¸å¤šï¼Œå”¯ä¸€ä¸åŒçš„åœ°æ–¹å°±æ˜¯<code>drawBall</code>å’Œ<code>updateBall</code>è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå½“ç„¶æ¶‰åŠåˆ°ä¸€ç‚¹å°å°çš„æ•°å­¦è®¡ç®—ï¼Œè¿™é‡Œç›´æ¥ç»™å‡ºå˜åŠ¨çš„éƒ¨åˆ†ï¼Œå˜åŠ¨çš„ä»£ç å¤§å¤šæ•°ä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œä½ åªè¦æŠŠæ³¨æ„åŠ›æ”¾åœ¨<code>updateBall</code>ä¸­å°±å¥½äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ†å‘¨è¿åŠ¨åŠå¾„</span></span><br><span class="line"><span class="keyword">var</span> radius = <span class="number">50</span>;</span><br><span class="line"><span class="comment">// å°çƒçš„è§’åº¦</span></span><br><span class="line"><span class="keyword">var</span> angle = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX = centerX + <span class="built_in">Math</span>.cos(angle) * radius;</span><br><span class="line">  ballY = centerY + <span class="built_in">Math</span>.sin(angle) * radius;</span><br><span class="line">  <span class="comment">// éœ€è¦æ³¨æ„çš„æ˜¯Math.coså’ŒMath.sinä¸­çš„å‚æ•°æ˜¯å¼§åº¦è€Œä¸æ˜¯è§’åº¦</span></span><br><span class="line">  <span class="comment">// ä¹Ÿå°±æ˜¯è¯´2*Math.PIæ˜¯ä¸€å‘¨çº¦ç­‰äº6.28 è¿™é‡Œæ¯æ¬¡åŠ 0.08å¼§åº¦</span></span><br><span class="line">  angle += <span class="number">0.08</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶è½¨è¿¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawLocus</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.beginPath();</span><br><span class="line">  context.arc(centerX, centerY, radius, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">  context.closePath();</span><br><span class="line">  context.strokeStyle=<span class="string">'red'</span>;</span><br><span class="line">  context.stroke();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§/2.gif" alt="åŒ€é€Ÿåœ†å‘¨è¿åŠ¨"></p><h2 id="æ¤­åœ†è¿åŠ¨"><a href="#æ¤­åœ†è¿åŠ¨" class="headerlink" title="æ¤­åœ†è¿åŠ¨"></a>æ¤­åœ†è¿åŠ¨</h2><p>åœ†å‘¨è¿åŠ¨å’Œæ¤­åœ†è¿åŠ¨å¾ˆç›¸ä¼¼ï¼Œç›´æ¥ç»™ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¤­åœ†è¿åŠ¨åŠå¾„</span></span><br><span class="line"><span class="keyword">var</span> radiusX = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> radiusY = <span class="number">50</span>;</span><br><span class="line"><span class="comment">// å°çƒçš„è§’åº¦</span></span><br><span class="line"><span class="keyword">var</span> angle = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX = centerX + <span class="built_in">Math</span>.cos(angle) * radiusX;</span><br><span class="line">  ballY = centerY + <span class="built_in">Math</span>.sin(angle) * radiusY;</span><br><span class="line">  angle += <span class="number">0.08</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¨è¿¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawLocus</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ç»˜åˆ¶æ¤­åœ†</span></span><br><span class="line">  context.save();</span><br><span class="line">  context.beginPath();</span><br><span class="line">  <span class="comment">// å°†åæ ‡ç³»å¹³ç§»åˆ°åœ†å¿ƒä½ç½®</span></span><br><span class="line">  context.translate(centerX, centerY );</span><br><span class="line">  <span class="comment">// æŠŠåœ†ç¼©æ”¾åä½¿ä¹‹å½¢æˆæ¤­åœ†</span></span><br><span class="line">  context.scale(<span class="number">1</span>, radiusY / radiusX);</span><br><span class="line">  <span class="comment">// æ­¤æ—¶(0,0)æ˜¯å¹³ç§»åçš„ä½ç½® ä¹Ÿå°±æ˜¯åŸåæ ‡ç³»çš„(centerX, centerY)</span></span><br><span class="line">  context.arc(<span class="number">0</span>, <span class="number">0</span>, radiusX, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">  context.strokeStyle=<span class="string">'red'</span>;</span><br><span class="line">  context.stroke();</span><br><span class="line">  context.restore();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§/3.gif" alt="æ¤­åœ†è¿åŠ¨"></p><h2 id="å·¦å³æ¥å›è¿åŠ¨"><a href="#å·¦å³æ¥å›è¿åŠ¨" class="headerlink" title="å·¦å³æ¥å›è¿åŠ¨"></a>å·¦å³æ¥å›è¿åŠ¨</h2><p>é€šè¿‡è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ¤­åœ†è¿åŠ¨å’Œåœ†å‘¨è¿åŠ¨çš„åŒºåˆ«å°±æ˜¯æ¤­åœ†è¿åŠ¨çš„æŸä¸€ä¸ªè½´çš„åŠå¾„å’Œå¦ä¸€ä¸ªè½´çš„åŠå¾„æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆå¦‚æœæŸä¸€ä¸ªå‘¨çš„åŠå¾„æ˜¯0ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ã€‚è¿™å°±æ˜¯å·¦å³æ¥å›çš„è¿åŠ¨ã€‚æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œå¹¶ä¸”æŠŠç»˜åˆ¶è½¨è¿¹çš„å‡½æ•°<code>drawCoordinate</code>å»æ‰å§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å°çƒçš„è§’åº¦</span></span><br><span class="line"><span class="keyword">var</span> angle = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> radiusX = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX = centerX + <span class="built_in">Math</span>.sin(angle) * radiusX;</span><br><span class="line">  angle += <span class="number">0.08</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§/4.gif" alt="å·¦å³æ¥å›è¿åŠ¨"></p><h2 id="æ­£å¼¦è¿åŠ¨"><a href="#æ­£å¼¦è¿åŠ¨" class="headerlink" title="æ­£å¼¦è¿åŠ¨"></a>æ­£å¼¦è¿åŠ¨</h2><p>ä¸Šé¢æ˜¯yä¸å˜ï¼Œxåˆ©ç”¨ä¸‰è§’å‡½æ•°è®¡ç®—çš„å€¼ï¼Œç°åœ¨æˆ‘ä»¬xæ¯æ¬¡å¢åŠ ä¸€ç‚¹ï¼Œç„¶åyè½´ä½¿ç”¨ä¸‰è§’å‡½æ•°ï¼Œé‚£å°±æ˜¯æ­£å¼¦è¿åŠ¨äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°çƒçš„è§’åº¦</span></span><br><span class="line"><span class="keyword">var</span> angle = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> radiusX = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> radiusY = <span class="number">50</span>;</span><br><span class="line"><span class="keyword">var</span> ballRadius = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ballX += <span class="number">2</span>;</span><br><span class="line">  ballY = centerY + <span class="built_in">Math</span>.sin(angle) * radiusY;</span><br><span class="line">  angle += <span class="number">0.08</span>;</span><br><span class="line">  <span class="comment">// è¶…å‡ºå»ä»¥åå·¦è¾¹æ˜¾ç¤º</span></span><br><span class="line">  <span class="keyword">if</span> (ballX &gt; <span class="number">300</span> + ballRadius) &#123;</span><br><span class="line">    ballX = -ballRadius;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§/5.gif" alt="æ­£å¼¦è¿åŠ¨"></p><h2 id="å¸¦è§’åº¦çš„åŒ€é€Ÿè¿åŠ¨"><a href="#å¸¦è§’åº¦çš„åŒ€é€Ÿè¿åŠ¨" class="headerlink" title="å¸¦è§’åº¦çš„åŒ€é€Ÿè¿åŠ¨"></a>å¸¦è§’åº¦çš„åŒ€é€Ÿè¿åŠ¨</h2><p>æ›´å¤šçš„æ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ°å¸¦æœ‰ä¸€å®šè§’åº¦çš„åŒ€é€Ÿè¿åŠ¨ï¼Œæ¯”å¦‚é€Ÿåº¦æ˜¯æ¯æ¬¡æ›´æ–°2ä¸ªåƒç´ ï¼Œé‚£ä¹ˆå®é™…ä¸Šxå’Œyéƒ½æ˜¯ä»–çš„ä¸€ä¸ªåˆ†é‡ï¼Œç°åœ¨çœ‹ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°çƒåœ†å¿ƒçš„åæ ‡</span></span><br><span class="line"><span class="keyword">var</span> ballX = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> ballY = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// å°çƒçš„åŠå¾„</span></span><br><span class="line"><span class="keyword">var</span> ballRadius = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œå†™è§’åº¦çœ‹èµ·æ¥æ¯”è¾ƒç›´è§‚</span></span><br><span class="line"><span class="keyword">var</span> angle = <span class="number">45</span>;</span><br><span class="line"><span class="keyword">var</span> spend = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å°çƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ç»˜åˆ¶çš„æ—¶å€™éœ€è¦æŠŠè§’åº¦è½¬æ¢ä¸ºå¼§åº¦</span></span><br><span class="line">  <span class="keyword">var</span> vx = <span class="built_in">Math</span>.cos(angle * <span class="built_in">Math</span>.PI / <span class="number">180</span>) * spend;</span><br><span class="line">  <span class="keyword">var</span> vy = <span class="built_in">Math</span>.sin(angle * <span class="built_in">Math</span>.PI / <span class="number">180</span>) * spend;</span><br><span class="line">  ballX += vx;</span><br><span class="line">  ballY += vy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/30/Canvasç³»åˆ—ï¼ˆ10ï¼‰ï¼šåŠ¨ç”»åˆçº§/6.gif" alt="åŒ€é€Ÿç›´çº¿è¿åŠ¨"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å°çƒåœ¨äºŒç»´åæ ‡ç³»ä¸­çš„è¿åŠ¨å’Œé€Ÿåº¦çš„åˆ†è§£ä¸åˆæˆæœ‰å¾ˆå¤§çš„å…³ç³»ã€‚è‰¯å¥½çš„æ•°å­¦å’Œç‰©ç†çŸ¥è¯†å°†å¸®åŠ©æˆ‘ä»¬åœ¨è¿™æ¡è·¯ä¸Šèµ°çš„æ›´è¿œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ9ï¼‰ï¼šå…¶ä»–API</title>
      <link href="/2019/06/29/Canvas%E7%B3%BB%E5%88%97%EF%BC%889%EF%BC%89%EF%BC%9A%E5%85%B6%E4%BB%96API/"/>
      <url>/2019/06/29/Canvas%E7%B3%BB%E5%88%97%EF%BC%889%EF%BC%89%EF%BC%9A%E5%85%B6%E4%BB%96API/</url>
      
        <content type="html"><![CDATA[<p>å‰é¢çš„å†…å®¹è®²äº†ä¸å°‘Canvaçš„APIï¼Œè¿™ç« æŠŠå‰©ä¸‹çš„APIä¸€è®²å§ã€‚è¿™ä¸ªç³»åˆ—ä¸­ä»¥ååŸºæœ¬ä¸ç³Šæ¶‰åŠæ–°çš„APIäº†ï¼Œå› ä¸ºï¼Œè¿™ç« å®Œäº†æˆ‘ä»¬å°±çœŸçš„å­¦å®Œäº†ï¼</p><hr><h2 id="é˜´å½±"><a href="#é˜´å½±" class="headerlink" title="é˜´å½±"></a>é˜´å½±</h2><p>Canvasä¸­çš„é˜´å½±å’ŒCSS3ä¸­çš„é˜´å½±å¾ˆåƒï¼Œé€šè¿‡æœ¬ç³»åˆ—è¯¾ç¨‹çš„å­¦ä¹ ï¼Œä¼°è®¡ä½ å·²ç»å‘ç°äº†ï¼ŒCSS3çš„å¥½å¤šçŸ¥è¯†å’ŒCanvasæ˜¯ç›¸é€šçš„ã€‚æˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜´å½±Xåç§»é‡ é»˜è®¤0</span></span><br><span class="line">context.shadowOffsetX=<span class="number">5</span>;</span><br><span class="line"><span class="comment">// é˜´å½±Yåç§»é‡ é»˜è®¤0</span></span><br><span class="line">context.shadowOffsetY=<span class="number">5</span>;</span><br><span class="line"><span class="comment">// é˜´å½±é¢œè‰² é»˜è®¤é€æ˜</span></span><br><span class="line">context.shadowColor=<span class="string">'orange'</span>;</span><br><span class="line"><span class="comment">// é˜´å½±æ¨¡ç³Šå€¼ é»˜è®¤0</span></span><br><span class="line">context.shadowBlur=<span class="number">5</span>;</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜´å½±ä¸æ¨¡ç³Š</span></span><br><span class="line">context.shadowBlur=<span class="number">0</span>;</span><br><span class="line">context.fillRect(<span class="number">80</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">context.shadowBlur=<span class="number">5</span>;</span><br><span class="line"><span class="comment">// ä½¿ç”¨åœ¨æè¾¹ä¸Š</span></span><br><span class="line">context.strokeRect(<span class="number">150</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">context.font=<span class="string">'bold 30px å¾®è½¯é›…é»‘'</span>;</span><br><span class="line">context.shadowBlur=<span class="number">3</span>;</span><br><span class="line"><span class="comment">// ä½¿ç”¨åœ¨æ–‡å­—ä¸Š</span></span><br><span class="line">context.fillText(<span class="string">"æ–‡å­—æ¨¡ç³Š"</span>, <span class="number">10</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ9ï¼‰ï¼šå…¶ä»–API/1.jpeg" alt="æ¨¡ç³Š"></p><p>ç”±æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé˜´å½±å…¶å®å°±æ˜¯å½“å‰åŒºåŸŸå¾€å·¦è¾¹åç§»äº†ä¸€ç‚¹ï¼Œå†å¾€å³è¾¹åç§»äº†ä¸€ç‚¹ï¼Œç„¶åç»™ä¸ªé¢œè‰²ï¼Œç»™ä¸ªæ¨¡ç³Šå°±å¯ä»¥äº†ã€‚å½“ç„¶åç§»é‡å¯ä»¥æ˜¯è´Ÿå€¼ï¼Œè¡¨ç¤ºæ–¹å‘ï¼Œè¿™ä¸ªå°±ä¸è¯´äº†ã€‚åŒæ ·ç”±ä¸Šæˆ‘ä»¬å¯ä»¥çŸ¥é“é˜´å½±å¯ä»¥ç”¨åœ¨å›¾å½¢ä¸Šä¹Ÿå¯ä»¥ç”¨åœ¨æ–‡å­—ä¸Šï¼Œé‚£ä¹ˆå¯ä»¥ç”¨åœ¨å›¾ç‰‡ä¸Šå—ï¼Ÿå…¶å®æ˜¯ä¸å¯ä»¥çš„ï¼Œä½†æ˜¯æœ‰æ–¹æ³•å¯ä»¥ï¼Œå°±æ˜¯å…·æœ‰é˜´å½±åœ°æè¾¹ä¸€ä¸ªä¸å›¾ç‰‡å¤§å°ä½ç½®å…¨ç›¸åŒçš„çŸ©å½¢å°±å¯ä»¥äº†ã€‚</p><h2 id="globalAlpha"><a href="#globalAlpha" class="headerlink" title="globalAlpha"></a>globalAlpha</h2><p><code>globalAlpha</code>æ˜¯è®¾ç½®å…¨å±€çš„é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´æ˜¯<code>0~1</code>ï¼Œ0è¡¨ç¤ºé€æ˜ï¼Œ1è¡¨ç¤ºä¸é€æ˜ã€‚æˆ‘ä»¬ä¹‹å‰æ²¡æœ‰è®¾ç½®æ‰€ç»˜åˆ¶çš„å›¾å½¢çš„é€æ˜åº¦ï¼Œä½†æ˜¯éƒ½æ˜¯ä¸é€æ˜çš„ï¼Œæ‰€ä»¥çŒœéƒ½èƒ½çŒœå‡ºæ¥é»˜è®¤å€¼æ˜¯1ã€‚å®ƒçš„å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ•°å€¼ç±»å‹ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ä¸Šé¢ä»£ç ä¸­ç¬¬åè¡Œä¸­åŠ å…¥ä»£ç <code>context.globalAlpha=0.5;</code>çœ‹åˆ°çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ9ï¼‰ï¼šå…¶ä»–API/2.jpeg" alt="globalAlpha"></p><p>å¯ä»¥çœ‹åˆ°<code>globalAlpha</code>å¯¹å®ƒå’Œå®ƒåé¢æ‰€ç»˜åˆ¶çš„å›¾å½¢æ˜¯ç”Ÿæ•ˆçš„ï¼Œé‚£ä¹ˆå¦‚ä½•ç»˜åˆ¶å®Œåæ¢å¤çŠ¶æ€å‘¢ï¼Œè¿˜è®°å¾—å‰é¢çš„å†…å®¹å—ï¼Ÿ</p><h2 id="globalCompositeOperation"><a href="#globalCompositeOperation" class="headerlink" title="globalCompositeOperation"></a>globalCompositeOperation</h2><p><code>globalCompositeOperation</code>æè¿°äº†2ä¸ªå›¾å½¢äº¤å‰çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ ·å­ï¼Œå®ƒçš„å€¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ç›—ä¸€å¼ å¾ˆç»å…¸çš„å›¾ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ9ï¼‰ï¼šå…¶ä»–API/3.jpeg" alt="globalCompositeOperationå–å€¼"></p><p>æˆ‘ä»¬è¿™é‡Œå°±ç»™ä¸€ä¸ªå€¼ä¸º<code>xorï¼ˆå¼‚æˆ–ï¼‰</code>çš„ä¾‹å­å§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">context.globalCompositeOperation=<span class="string">'xor'</span>;</span><br><span class="line"></span><br><span class="line">context.fillStyle=<span class="string">'orange'</span>;</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">context.fillStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.fillRect(<span class="number">35</span>,<span class="number">35</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ9ï¼‰ï¼šå…¶ä»–API/4.jpeg" alt="xor"></p><h2 id="clearRect"><a href="#clearRect" class="headerlink" title="clearRect"></a>clearRect</h2><p>åœ¨<a href="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/#more">è·¯å¾„ä¸çŠ¶æ€é‚£ä¸€ç« </a>æˆ‘ä»¬ä½¿ç”¨clipæ¥è£å‰ªåŒºåŸŸï¼Œä¸è£å‰ªç›¸ä¼¼çš„è¿˜æœ‰ä¸€ä¸ªclearRectç”¨æ¥æ¸…ç©ºåŒºåŸŸï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">context.fillStyle=<span class="string">'orange'</span>;</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">context.fillStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.fillRect(<span class="number">35</span>,<span class="number">35</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…ç©ºä¸€ä¸ªå°åŒºåŸŸ</span></span><br><span class="line">context.clearRect(<span class="number">60</span>, <span class="number">60</span>, <span class="number">25</span>, <span class="number">25</span>);</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ9ï¼‰ï¼šå…¶ä»–API/5.jpeg" alt="æ¸…ç©ºåŒºåŸŸ"></p><p><code>clearRect</code>ç”¨çš„æŒºå¤šçš„ï¼Œé€šå¸¸åšåŠ¨ç”»çš„æ—¶å€™ä½¿ç”¨å®ƒæ¥æ¸…ç©ºæ•´ä¸ªå±å¹•ï¼Œç„¶åå†é‡æ–°ç»˜åˆ¶å›¾æ¡ˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¸…ç©ºæ•´ä¸ªcanvas</span></span><br><span class="line">context.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br></pre></td></tr></table></figure><h2 id="toDataURL"><a href="#toDataURL" class="headerlink" title="toDataURL"></a>toDataURL</h2><p>ä¸ä¸Šé¢ä¸åŒçš„æ˜¯<code>toDataURL</code>å¹¶ä¸æ˜¯contextä¸Šçš„æ–¹æ³•ï¼Œè€Œæ˜¯canvaså¯¹è±¡çš„æ–¹æ³•ï¼Œæ¥çœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">context.fillStyle=<span class="string">'orange'</span>;</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">context.fillStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.fillRect(<span class="number">35</span>,<span class="number">35</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> src = canvas.toDataURL(<span class="string">"image/png"</span>);</span><br><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = src;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(image)</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ9ï¼‰ï¼šå…¶ä»–API/6.jpeg" alt="toDataURL"></p><p><code>canvas.toDataURL</code>ä¼šè½¬æ¢ä¸ºBase64æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œç„¶åå›¾ç‰‡å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒï¼Œä»¥æ˜¾ç¤ºå‡ºæ¥ã€‚ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°èƒŒæ™¯æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› ä¸ºå·¦ä¾§çš„èƒŒæ™¯æ˜¯æˆ‘ä»¬é€šè¿‡CSSæ¥è®¾ç½®çš„ï¼Œè€Œä¸æ˜¯Canvasæ¥ç»˜åˆ¶å‡ºæ¥çš„ã€‚</p><hr><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å­¦å®Œäº†Canvaså‡ ä¹å…¨éƒ¨çš„APIï¼Œæ­å–œä½ å•Šã€‚æ­¤æ—¶ï¼Œä½ åˆä»€ä¹ˆæ„Ÿæƒ³å‘¢ï¼Ÿæ˜¯æˆå°±æ»¡æ»¡ï¼Ÿè¿˜æ˜¯æ„Ÿè§‰å¹¶æ²¡æœ‰å­¦åˆ°äº›ä»€ä¹ˆï¼Ÿå¦‚æœä½ æ„Ÿè§‰æˆå°±æ»¡æ»¡ï¼Œè¯´æ˜ä½ æ˜¯çœŸçš„æ˜¯å­¦åˆ°äº†ä¸œè¥¿ï¼Œå¦‚æœè¿˜æ„Ÿè§‰æ²¡å­¦åˆ°ä»€ä¹ˆï¼Œä¹Ÿä¸è¦ç°å¿ƒï¼Œå› ä¸ºCanvasçš„å­¦ä¹ å¹¶ä¸ä»…ä»…æ˜¯APIï¼Œæ›´å¤šçš„æ˜¯ç¼–ç¨‹çš„ä¸€äº›æŠ€å·§ã€‚å¥½å¤šæ—¶å€™æˆ‘ä»¬å­¦ä¹ ç¼–ç¨‹å…¶å®å­¦çš„åªæ˜¯ä¸€äº›è¯­æ³•å’ŒAPIè€Œæ›´å¤šçš„ç»éªŒè¿˜éœ€è¦ä¸æ–­åœ°åœ¨å®è·µä¸­å»å†ç»ƒï¼Œå¾€å¾€ä¸€äº›ç¼–ç¨‹æŠ€å·§æ¯”è¯­æ³•å’ŒAPIè¦æ›´é‡è¦ï¼Œç°åœ¨ä½ å­¦ä¹ çš„æ˜¯HTML5ä¸­çš„Canvasï¼Œå…¶å®å®‰å“ã€Javaä¸­çš„Swingã€C++ä¸­çš„MFCï¼ˆéƒ½æ˜¯è€æŠ€æœ¯äº†ï¼Œæ–°æŠ€æœ¯çœŸå¿ƒå¿«å­¦ä¸æ‡‚äº†ï¼‰ç­‰ç­‰ç»˜åˆ¶å›¾ç‰‡çš„æŠ€èƒ½éƒ½ç›¸å·®æ— å‡ ã€‚æˆ‘ä»¬åé¢çš„è¯¾ç¨‹å°±ä¼šæ·±å…¥è¿™äº›æŠ€èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ</title>
      <link href="/2019/06/29/Canvas%E7%B3%BB%E5%88%97%EF%BC%888%EF%BC%89%EF%BC%9A%E5%83%8F%E7%B4%A0%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/06/29/Canvas%E7%B3%BB%E5%88%97%EF%BC%888%EF%BC%89%EF%BC%9A%E5%83%8F%E7%B4%A0%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>ç»å¸¸æ‹ç…§çš„åŒå­¦ä¼šä½¿ç”¨å›¾ç‰‡å¤„ç†è½¯ä»¶ï¼Œç»™è‡ªå·±çš„ç…§ç‰‡åŠ ä¸Šå„ç§æ•ˆæœã€‚å›¾ç‰‡å¤„ç†è½¯ä»¶ä¹Ÿæ˜¯è½¯ä»¶ï¼ŒåŒæ ·ä¹Ÿæ˜¯ç”±ä»£ç å†™çš„ï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å›¾ç‰‡å¤„ç†å‘¢ï¼Œè¿™ç« æˆ‘ä»¬å°±æ¢è®¨ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p><hr><p>canvasä¸­åƒç´ å¤„ç†æ¶‰åŠåˆ°3ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹APIå§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. è·å–ImageDate å‚æ•°æ˜¯å·¦ä¸Šè§’çš„å·¦è¾¹(sx, sy)ä»¥åŠè·å–åƒç´ çš„å®½åº¦sw å’Œ é«˜åº¦sh</span></span><br><span class="line"><span class="comment">// ä»–è¿”å›ä¸€ä¸ªImageDataå¯¹è±¡</span></span><br><span class="line">context.getImageData(sx, sy, sw, sh);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å°†å¤„ç†åçš„ImageDataè®¾ç½®åˆ°canvasä¸­ ç”±äºæ˜¯è¦†ç›–äº†canvaså…¶ä¸­éƒ¨åˆ†åŒºåŸŸ</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ç”¨çš„æ˜¯putè€Œä¸æ˜¯setï¼ˆå¹¶æ²¡æœ‰setImageDataï¼Œputå…¨éƒ¨è¦†ç›–å°±å¯ä»¥ç›¸å½“äºsetï¼‰</span></span><br><span class="line">context.putImageData(imagedata, dx, dy);</span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è¿˜æœ‰å¯é€‰å‚æ•°</span></span><br><span class="line">context.putImageData(imagedata, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åˆ›å»ºä¸€ä¸ªå®½width é«˜heightçš„ImageDataå¯¹è±¡</span></span><br><span class="line">context.createImageData(width, height);</span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥æ ¹æ®å·²æœ‰çš„ImageDataå¯¹è±¡æ¥åˆ›å»º</span></span><br><span class="line">context.createImageData(imagedata);</span><br></pre></td></tr></table></figure><p>è¿™å‡ ä¸ªAPIä¸­ï¼Œè¿‡æ¥è¿‡å»ç»•ä¸è¿‡ä¸€ä¸ªå¯¹è±¡å°±æ˜¯<code>ImageData</code>ï¼Œ<code>ImageData</code>å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»–æ˜¯ä¸€ä¸ªæè¿°äº†å›¾ç‰‡ä¿¡æ¯çš„å¯¹è±¡ï¼Œæ‹¥æœ‰ä¸‰ä¸ªå±æ€§ï¼š<code>width</code>ã€<code>height</code>ã€<code>data</code>ã€‚å…¶ä¸­<code>width</code>ã€<code>height</code>å°±ä¸ç”¨è¯´äº†ï¼Œåˆ†åˆ«æ˜¯å›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦ï¼Œé‡ç‚¹æ˜¯è¿™ä¸ª<code>data</code>å±æ€§ï¼Œä»–æ˜¯ä¸€ä¸ª<code>Uint8ClampedArray</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ²¡å¬è¿‡ï¼Ÿå®Œå…¨æ²¡é—®é¢˜ï¼Œä½ å°±æŠŠä»–å½“åšæ•°ç»„æ¥å¤„ç†ï¼Œå°±å¯ä»¥äº†ã€‚è¿™ä¸ªâ€œæ•°ç»„â€æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„ä¸€ç»´æ•°ç»„ï¼Œå†…å®¹å¤§æ¦‚æ˜¯<code>[r0,g0,b0,a0,r1,g1,b1,a1...]</code>è¿™ç§å½¢å¼çš„ï¼Œå…¶ä¸­<code>r0,g0,b0,a0</code>åˆ†åˆ«æ˜¯å›¾ç‰‡å·¦ä¸Šè§’ç¬¬ä¸€ä¸ªåƒç´ çš„çº¢ç»¿è“å’Œé€æ˜åº¦çš„å€¼ï¼Œåé¢åˆ†åˆ«æ˜¯ç¬¬äºŒä¸ªåƒç´ ï¼Œç¬¬ä¸‰ä¸ªåƒç´ ç­‰ç­‰çš„å€¼ã€‚å…¶ä¸­rgbbå–å€¼éƒ½æ˜¯<code>0~255</code>ï¼Œaå¦‚æœæ˜¯255è¡¨ç¤ºä¸é€æ˜ï¼Œä¹‹æ‰€ä»¥ä¸æŒ‰100æ¥ç®—æ˜¯ä¸ºäº†å¤„ç†èµ·æ¥æ–¹ä¾¿ã€‚</p><h2 id="åº•ç‰‡æ•ˆæœ"><a href="#åº•ç‰‡æ•ˆæœ" class="headerlink" title="åº•ç‰‡æ•ˆæœ"></a>åº•ç‰‡æ•ˆæœ</h2><p>åœ¨å†™åº•ç‰‡æ•ˆæœä»£ç ä¹‹å‰æˆ‘ä»¬å…ˆç»˜åˆ¶ä¸€å¼ å›¾ç‰‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,image.width / <span class="number">2</span>, image.height / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬çš„å›¾ç‰‡æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬å°±ç¼©å°ä¸€åŠæ¥å±•ç¤ºï¼ˆè™½ç„¶æ­¤æ—¶å›¾ç‰‡ä»ç„¶æœªæ˜¾ç¤ºå®Œï¼Œä¸è¿‡ä¸å½±å“ï¼‰ï¼Œæ­¤æ—¶çš„æ•ˆæœæ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/1.jpeg" alt="åˆå§‹å€¼"></p><p>ç°åœ¨åšåº•ç‰‡å¤„ç†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,image.width / <span class="number">2</span>, image.height / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">  <span class="comment">// è·å–åƒç´ æ•°æ®</span></span><br><span class="line">  <span class="keyword">var</span> data = imageData.data;</span><br><span class="line">  <span class="comment">// å¾ªç¯æ¯æ¬¡åŠ 4è¡¨ç¤ºä¸€ä¸ªä¸€ä¸ªåƒç´ çš„å¤„ç†ï¼Œè¿™ä¸ªæ˜¯å¸¸ç”¨å¥—è·¯</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i+=<span class="number">4</span>) &#123;</span><br><span class="line">    data[i + <span class="number">0</span>] = <span class="number">255</span> - data[i + <span class="number">0</span>];</span><br><span class="line">    data[i + <span class="number">1</span>] = <span class="number">255</span> - data[i + <span class="number">1</span>];</span><br><span class="line">    data[i + <span class="number">2</span>] = <span class="number">255</span> - data[i + <span class="number">2</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è®¾ç½®åƒç´ æ•°æ®</span></span><br><span class="line">  context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/2.jpeg" alt="åº•ç‰‡æ•ˆæœ"></p><p>ä½ æˆ–è®¸ä¼šé—®ä¸ºä»€ä¹ˆ<code>putImageData</code>æ²¡æœ‰ä¼ å…¥å›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦å‘¢ï¼Œå…¶å®<code>ImageData</code>å¯¹è±¡ä¸­æœ¬æ¥å°±æœ‰é«˜åº¦å’Œå®½åº¦ï¼Œæ‰€ä»¥å°±æ— éœ€ä¼ å…¥äº†ã€‚å¦å¤–è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ åœ¨<code>getImageData</code>çš„æ—¶å€™æ§åˆ¶å°æŠ¥è¿™æ ·çš„é”™è¯¯è¯´æ˜ä½ è·¨åŸŸäº†ï¼š</p><blockquote><p>Uncaught DOMException: Failed to execute â€˜getImageDataâ€™ on â€˜CanvasRenderingContext2Dâ€™: The canvas has been tainted by cross-origin data.</p></blockquote><p><code>getImageData</code>ä¸å…è®¸è®¿é—®éæœ¬åŸŸçš„å›¾ç‰‡ï¼Œè§£å†³åŠæ³•æ˜¯è‡ªå·±å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚æ˜¯ç”¨<code>anywhere</code>ï¼Œä½¿ç”¨æ–¹æ³•å°±æ˜¯åœ¨ä½ çš„<code>index.html</code>æ‰€åœ¨çš„ç›®å½•ä¸‹çš„ï¼Œä½¿ç”¨ç»ˆç«¯è¾“å…¥ä¸‹é¢ä¸¤è¡Œå‘½ä»¤ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨æœåŠ¡æ‰“å¼€äº†ï¼Œè®°å¾—æŠŠå›¾ç‰‡æ”¾åœ¨åŒä¸€çº§ç›®å½•ä¸‹ï¼Œå›¾ç‰‡åœ¨<a href="lufei.jpeg">è¿™é‡Œ</a>ï¼Œç‚¹å³é”®å¦å­˜ä¸ºåŒçº§ç›®å½•ä¸‹å°±å¯ä»¥äº†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g anywhere</span><br><span class="line">anywhere</span><br></pre></td></tr></table></figure><h2 id="é»‘ç™½æ•ˆæœ"><a href="#é»‘ç™½æ•ˆæœ" class="headerlink" title="é»‘ç™½æ•ˆæœ"></a>é»‘ç™½æ•ˆæœ</h2><p>ç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,image.width / <span class="number">2</span>, image.height / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">  <span class="comment">// è·å–åƒç´ æ•°æ®</span></span><br><span class="line">  <span class="keyword">var</span> data = imageData.data;</span><br><span class="line">  <span class="comment">// å¾ªç¯æ¯æ¬¡åŠ 4è¡¨ç¤ºä¸€ä¸ªä¸€ä¸ªåƒç´ çš„è¿‡ï¼Œè¿™ä¸ªæ˜¯å¸¸ç”¨å¥—è·¯</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i+=<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> average = ( data[i + <span class="number">0</span>] + data[i + <span class="number">1</span>] + data[i + <span class="number">2</span>] ) / <span class="number">3</span>;</span><br><span class="line">    data[i + <span class="number">0</span>] = average;</span><br><span class="line">    data[i + <span class="number">1</span>] = average;</span><br><span class="line">    data[i + <span class="number">2</span>] = average;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è®¾ç½®åƒç´ æ•°æ®</span></span><br><span class="line">  context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œåƒç´ å¤„ç†éƒ½æ˜¯ä¸€ä¸ªæ¨¡å¼ï¼Œåªæ˜¯æŠŠä¸­é—´å¤„ç†åƒç´ çš„ç®—æ³•æ¢äº†ä¸€ä¸‹ï¼Œæ­¤æ—¶çš„æ•ˆæœå¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿ</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/3.jpeg" alt="é»‘ç™½æ•ˆæœ"></p><p>å½“ç„¶é»‘ç™½æ•ˆæœè¿˜å¯ä»¥ä½¿ç”¨åŠ æƒå¹³å‡æ•°æ¥å¤„ç†ï¼Œè¿™ç§ç½‘ä¸Šæ¨å´‡çš„æ¯”è¾ƒå¤šï¼Œæ¯•ç«Ÿä¸Šé¢è¿™ç§æ¯”è¾ƒæ³›ç™½ï¼Œå¤„ç†èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠè®¡ç®—<code>average</code>çš„ä»£ç æ¢ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> average = data[i + <span class="number">0</span>] * <span class="number">0.3</span> + data[i + <span class="number">1</span>] * <span class="number">0.6</span> + data[i + <span class="number">2</span>] * <span class="number">0.1</span>;</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/4.jpeg" alt="åŠ æƒåçš„é»‘ç™½æ•ˆæœ"></p><h2 id="å˜äº®ä¸å˜æš—"><a href="#å˜äº®ä¸å˜æš—" class="headerlink" title="å˜äº®ä¸å˜æš—"></a>å˜äº®ä¸å˜æš—</h2><p>å˜é‡å°±æ˜¯æ¯ä¸ªåƒç´ çš„é¢œè‰²åŠ ä¸Šä¸€ä¸ªå€¼ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,image.width / <span class="number">2</span>, image.height / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">  <span class="keyword">var</span> data = imageData.data;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i+=<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> brightness = <span class="number">50</span>;</span><br><span class="line">    data[i + <span class="number">0</span>] += brightness;</span><br><span class="line">    data[i + <span class="number">1</span>] += brightness;</span><br><span class="line">    data[i + <span class="number">2</span>] += brightness;</span><br><span class="line">  &#125;</span><br><span class="line">  context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/5.jpeg" alt="å˜äº®"></p><p>ä½ çŒœçŒœå˜æš—æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿæ²¡é”™å°±æ˜¯å‡å»ä¸€ä¸ªå€¼ï¼Œä½ æŒºèªæ˜çš„ï¼ï¼ï¼ç›´æ¥ä¿®æ”¹<code>var brightness = -50;</code>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/6.jpeg" alt="å˜æš—"></p><h2 id="å¤å¤æ•ˆæœ"><a href="#å¤å¤æ•ˆæœ" class="headerlink" title="å¤å¤æ•ˆæœ"></a>å¤å¤æ•ˆæœ</h2><p>å¤å¤æ•ˆæœç®—æ³•æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦æ¯ä¸€ä¸ªé¢œè‰²åšåŠ æƒå¤„ç†ï¼Œå…¶ç®—æ³•æ˜¯åˆ«äººç ”ç©¶å¥½ä¹…å¾—å‡ºçš„ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,image.width / <span class="number">2</span>, image.height / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">  <span class="keyword">var</span> data = imageData.data;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i+=<span class="number">4</span>) &#123;</span><br><span class="line">    data[i + <span class="number">0</span>] = <span class="number">0.39</span> * data[i + <span class="number">0</span>] + <span class="number">0.76</span> * data[i + <span class="number">1</span>] + <span class="number">0.18</span> * data[i + <span class="number">2</span>];</span><br><span class="line">    data[i + <span class="number">1</span>] = <span class="number">0.35</span> * data[i + <span class="number">0</span>] + <span class="number">0.68</span> * data[i + <span class="number">1</span>] + <span class="number">0.16</span> * data[i + <span class="number">2</span>];;</span><br><span class="line">    data[i + <span class="number">2</span>] = <span class="number">0.27</span> * data[i + <span class="number">0</span>] + <span class="number">0.53</span> * data[i + <span class="number">1</span>] + <span class="number">0.13</span> * data[i + <span class="number">2</span>];;</span><br><span class="line">  &#125;</span><br><span class="line">  context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/7.jpeg" alt="å¤å¤æ•ˆæœ"></p><h2 id="è’™å±‚"><a href="#è’™å±‚" class="headerlink" title="è’™å±‚"></a>è’™å±‚</h2><p>è’™å±‚å°±æ˜¯æŸä¸€ä¸ªè‰²é“å–å¹³å‡å€¼ï¼Œå¦å¤–2ä¸ªè‰²é“ä¸º0å°±å¯ä»¥äº†ï¼Œä»¥çº¢è‰²è’™å±‚ä¸ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,image.width / <span class="number">2</span>, image.height / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">  <span class="keyword">var</span> data = imageData.data;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i+=<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> average = ( data[i + <span class="number">0</span>] + data[i + <span class="number">1</span>] + data[i + <span class="number">2</span>] ) / <span class="number">3</span>;</span><br><span class="line">    data[i + <span class="number">0</span>] = average;</span><br><span class="line">    data[i + <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    data[i + <span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/8.jpeg" alt="çº¢è‰²è’™å±‚"></p><p>ç»¿è‰²è’™å±‚å’Œè“è‰²è’™å±‚æˆ‘ç›¸ä¿¡ä½ ä¹Ÿä¼šäº†ï¼Œè¿™é‡Œå°±ä¸å†ç»™ä»£ç äº†ã€‚</p><h2 id="é€æ˜æ•ˆæœ"><a href="#é€æ˜æ•ˆæœ" class="headerlink" title="é€æ˜æ•ˆæœ"></a>é€æ˜æ•ˆæœ</h2><p>æˆ‘ä»¬è¯´äº†è¿™ä¹ˆå¤šï¼Œéƒ½æ˜¯ä»¥è‰²é“ä¸ºä¾‹çš„ï¼Œä»æ¥æ²¡æœ‰æ¶‰åŠåˆ°é€æ˜åº¦ï¼Œç°åœ¨å°±ç»™ä¸€ä¸ªé€æ˜åº¦çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,image.width / <span class="number">2</span>, image.height / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">  <span class="keyword">var</span> data = imageData.data;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i+=<span class="number">4</span>) &#123;</span><br><span class="line">    data[i + <span class="number">3</span>] = <span class="number">0.5</span> * data[i + <span class="number">3</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/9.jpeg" alt="é€æ˜æ•ˆæœ"></p><p>æˆ‘ä»¬è¿™é‡Œç»™çš„é€æ˜åº¦ç»†æ•°æ˜¯0.5ï¼Œæ‰€ä»¥é€æ˜åº¦å˜ä¸ºåŸæ¥çš„50%ï¼Œä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºè‡ªå·±å–œæ¬¢çš„æ•°å€¼ã€‚</p><h2 id="åˆ›å»ºImageData"><a href="#åˆ›å»ºImageData" class="headerlink" title="åˆ›å»ºImageData"></a>åˆ›å»ºImageData</h2><p>ä¸Šé¢æˆ‘ä»¬ä¸€ç›´åœ¨ç©<code>getImageData</code>å’Œ<code>putImageData</code>ï¼Œè‡³äº<code>createImageData</code>éƒ½æ²¡æœ‰è¯´è¿‡ï¼Œå…¶å®è¿™ä¸ªç”¨çš„ä¹Ÿå¹¶ä¸å¤šï¼Œè¿™é‡Œç»™ä¸€ä¸ªä¾‹å­ç»“æŸæœ¬ç« å§ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> imageData = context.createImageData(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">var</span> data = imageData.data;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i+=<span class="number">4</span>) &#123;</span><br><span class="line">  data[i + <span class="number">0</span>] = <span class="number">255</span>;</span><br><span class="line">  <span class="comment">// ä¸‹é¢è¿™è¡Œå¾ˆé‡è¦ï¼Œé»˜è®¤åˆ›å»ºårgbaçš„å€¼éƒ½æ˜¯0ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯é€æ˜çš„</span></span><br><span class="line">  data[i + <span class="number">3</span>] = <span class="number">255</span>;</span><br><span class="line">&#125;</span><br><span class="line">context.putImageData(imageData, <span class="number">10</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯åˆå­¦ä¼šäº†ä¸€ç§ç”»æ­£æ–¹å½¢çš„æ–¹æ³•äº†ï¼Ÿ</p><p><img src="/2019/06/29/Canvasç³»åˆ—ï¼ˆ8ï¼‰ï¼šåƒç´ æ“ä½œ/10.jpeg" alt="createImageData"></p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯æ˜0.999999999...ç­‰äº1</title>
      <link href="/2019/06/29/%E8%AF%81%E6%98%8E0-999999999-%E7%AD%89%E4%BA%8E1/"/>
      <url>/2019/06/29/%E8%AF%81%E6%98%8E0-999999999-%E7%AD%89%E4%BA%8E1/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘çœ‹äº†ä¸€æœ¬ä¹¦å«ã€Šæç®€ç®—æ³•å²ã€‹ï¼Œéå¸¸è–„çš„ä¸€æœ¬ä¹¦ï¼Œé‡Œé¢çš„å†…å®¹ä¹Ÿæ˜¯æŒºæœ‰æ„æ€çš„ï¼Œç°åœ¨åˆ†äº«ä¸€é“è¯æ˜é¢˜<strong>å¦‚ä½•è¯æ˜æ— é™å¾ªç¯å°æ•°0.999999999â€¦ç­‰äº1</strong>ï¼Œæ²¡é”™æ˜¯ç­‰äº1ï¼Œé«˜æ•°ä¸Šå°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚</p><p><img src="/2019/06/29/è¯æ˜0-999999999-ç­‰äº1/1.jpg" alt="ã€Šæç®€ç®—æ³•å²ã€‹"></p><hr><p>è®¾<code>x = 0.999999999...</code>ï¼Œé‚£ä¹ˆ<code>10x = 9.999999999...</code>ã€‚å¦‚æœæˆ‘ä»¬ä»10xå‡å»xï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><blockquote><p>10x - x = 9x = 9.999999999â€¦ - 0.999999999â€¦ = 9.000000000â€¦</p></blockquote><p>ä¹Ÿå°±æ˜¯<code>9x = 9.000000000...</code>å› æ­¤<code>x = 1</code>ï¼Œè¯æ˜å®Œæ¯•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ7ï¼‰ï¼šå½¢å˜</title>
      <link href="/2019/06/22/Canvas%E7%B3%BB%E5%88%97%EF%BC%887%EF%BC%89%EF%BC%9A%E5%BD%A2%E5%8F%98/"/>
      <url>/2019/06/22/Canvas%E7%B3%BB%E5%88%97%EF%BC%887%EF%BC%89%EF%BC%9A%E5%BD%A2%E5%8F%98/</url>
      
        <content type="html"><![CDATA[<p>CSS3ä¸­æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹ï¼Œå°±æ˜¯å½¢å˜ã€‚ä»–åˆ†ä¸ºç§»åŠ¨ï¼Œç¼©æ”¾ã€æ—‹è½¬å’Œå€¾æ–œã€‚åœ¨Canvasä¸­ï¼Œå½¢å˜éƒ½æ˜¯åŸºäºåæ ‡åšçš„ï¼Œæ‰€ä»¥ï¼Œå¹¶æ²¡æœ‰ç›´æ¥çš„APIæ”¯æŒå€¾æ–œï¼Œå…¶å®ƒå‡ ç§éƒ½æ˜¯æœ‰ç‹¬ç«‹çš„APIæ¥æ”¯æŒï¼Œå‘½åå’ŒCSSæ˜¯ä¸€æ ·çš„ã€‚ä»Šå¤©æˆ‘ä»¬å°±çœ‹ä¸€ä¸‹è¿™å‡ ç§å§ã€‚</p><hr><h2 id="å¹³ç§»"><a href="#å¹³ç§»" class="headerlink" title="å¹³ç§»"></a>å¹³ç§»</h2><p>å¹³ç§»æ˜¯æœ€ç®€å•çš„ä¸€ç§å½¢å˜ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸€ä¸ªä¾‹å­å§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// xå¹³ç§»20px yå¹³ç§»20px</span></span><br><span class="line">context.translate(<span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">context.translate(<span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/22/Canvasç³»åˆ—ï¼ˆ7ï¼‰ï¼šå½¢å˜/1.jpeg" alt="å¹³ç§»å½¢å˜"></p><p>é€šè¿‡ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<strong>å¹³ç§»ï¼ˆå½¢å˜ï¼‰ç§»åŠ¨çš„æ˜¯åæ ‡ç³»ï¼Œç§»åŠ¨ä»¥åä¼šä»¥æ–°çš„åæ ‡ç³»è¿›è¡Œç»˜å›¾ï¼Œå½“å¤šæ¬¡å¹³ç§»ï¼ˆå½¢å˜ï¼‰ä»¥åæ¯æ¬¡éƒ½ä¼šä»¥ä¸Šä¸€æ¬¡çš„åæ ‡ç³»ä¸ºå‡†ã€‚</strong>æ­¤æ—¶ä½ å¯èƒ½ä¼šé—®ï¼Œé‚£å½¢å˜ä¸æ˜¯å¾ˆå±é™©å—ï¼Œæ¯æ¬¡ä½¿ç”¨äº†å½¢å˜å°±ä¼šä½¿ç”¨æ–°çš„åæ ‡ç³»ï¼Œä»¥åæ‰€æœ‰ç»˜åˆ¶çš„å›¾ç‰‡éƒ½ä¼šå—åˆ°å½±å“ï¼Ÿæ²¡é”™æ˜¯è¿™æ ·çš„ï¼Œé‚£æ”¹æ€ä¹ˆè§£å†³å‘¢ï¼Ÿè¿˜è®°å¾—ä¹‹å‰çš„<a href="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/#more">çŠ¶æ€</a>å—ï¼Ÿç°åœ¨ç»™ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½¢å˜å‰å¾€å¾€éœ€è¦ä¿å­˜çŠ¶æ€</span></span><br><span class="line">context.save();</span><br><span class="line"></span><br><span class="line">context.translate(<span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½¢å˜ç»“æŸï¼Œæ¢å¤ä¹‹å‰çš„çŠ¶æ€</span></span><br><span class="line">context.restore();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶ä»¥ä¹‹å‰çš„åæ ‡ç³»ç»˜åˆ¶</span></span><br><span class="line">context.beginPath();</span><br><span class="line">context.fillStyle=<span class="string">'red'</span>;</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/22/Canvasç³»åˆ—ï¼ˆ7ï¼‰ï¼šå½¢å˜/2.jpeg" alt="ä½¿ç”¨ä¿å­˜çŠ¶æ€"></p><h2 id="ç¼©æ”¾"><a href="#ç¼©æ”¾" class="headerlink" title="ç¼©æ”¾"></a>ç¼©æ”¾</h2><p>ç¼©æ”¾ä¹Ÿæ˜¯ç›¸å¯¹äºåæ ‡ç³»æ¥è¯´çš„ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">context.strokeStyle=<span class="string">'red'</span>;</span><br><span class="line">context.lineWidth=<span class="number">10</span>;</span><br><span class="line">context.strokeRect(<span class="number">20</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line"><span class="comment">// xæ˜¯åŸæ¥çš„1.5å€ yæ˜¯åŸæ¥çš„1.5å€</span></span><br><span class="line">context.save();</span><br><span class="line">context.scale(<span class="number">1.5</span>, <span class="number">1.5</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.strokeRect(<span class="number">20</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">context.restore();</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/22/Canvasç³»åˆ—ï¼ˆ7ï¼‰ï¼šå½¢å˜/3.jpeg" alt="ç¼©æ”¾"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç¼©æ”¾æ”¹å˜çš„ä¹Ÿæ˜¯åæ ‡ç³»ï¼Œåœ¨æ–°çš„åæ ‡ç³»ç³»ä¸­ï¼Œå®½åº¦ä¹Ÿæ”¾å¤§äº†ï¼Œä¸€ä¸ªåƒç´ å·²ç»ä¸å†æ˜¯çœŸæ­£çš„ä¸€ä¸ªåƒç´ äº†ï¼Œè€Œæ˜¯æ”¾å¤§ä»¥åçš„å¤§å°ã€‚æ‰€ä»¥å¯ä»¥çœ‹åˆ°éƒ½æ˜¯10ä¸ªåƒç´ çš„è¾¹æ¡†ï¼Œå®½åº¦ä¹Ÿä¸ä¸€æ ·äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ç¼©æ”¾çš„å€¼å¤§äº1çš„æ—¶å€™æ˜¯æ”¾å¤§ï¼Œ0~1ä¹‹é—´æ˜¯ç¼©å°ï¼Œ1å’ŒåŸæ¥æ˜¯ä¸€æ ·å¤§çš„ã€‚</p><h2 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h2><p>ç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">context.strokeStyle=<span class="string">'red'</span>;</span><br><span class="line">context.lineWidth=<span class="number">10</span>;</span><br><span class="line">context.strokeRect(<span class="number">80</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line"><span class="comment">// xæ˜¯åŸæ¥çš„1.5å€ yæ˜¯åŸæ¥çš„1.5å€</span></span><br><span class="line">context.save();</span><br><span class="line">context.rotate(<span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">45</span>);</span><br><span class="line"></span><br><span class="line">context.strokeStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.strokeRect(<span class="number">80</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">context.restore();</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/22/Canvasç³»åˆ—ï¼ˆ7ï¼‰ï¼šå½¢å˜/4.jpeg" alt="æ—‹è½¬"></p><p>å¯ä»¥çœ‹åˆ°æ—‹è½¬æ˜¯åŸºäº<strong>åæ ‡çš„åŸç‚¹çš„</strong>ï¼Œå¦‚æœä¸å¸Œæœ›æŒ‰ç…§åŸç‚¹æ—‹è½¬çš„è¯ï¼Œå¯ä»¥å…ˆå¹³ç§»å†æ—‹è½¬ã€‚å¦å¤–æ—‹è½¬ä¹Ÿæ˜¯æ ¹æ®å¼§åº¦æ¥æ—‹è½¬çš„è€Œä¸æ˜¯è§’åº¦ã€‚</p><h2 id="çŸ©é˜µå˜æ¢"><a href="#çŸ©é˜µå˜æ¢" class="headerlink" title="çŸ©é˜µå˜æ¢"></a>çŸ©é˜µå˜æ¢</h2><p>çŸ©é˜µå˜æ¢ä½¿ç”¨çš„APIæ˜¯<code>context.transform(a, b, c, d, e, f);</code>ï¼Œæ‰€å¯¹åº”çš„çŸ©é˜µçš„ä½ç½®æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><p>$$\left[<br>\begin{matrix}<br>a &amp; c &amp; e \\<br>b &amp; d &amp; f \\<br>0 &amp; 0 &amp; 1<br>\end{matrix}<br>\right] $$</p><p>ä»€ä¹ˆï¼Œçœ‹ä¸æ‡‚ï¼Ÿå‰æ–¹é«˜èƒ½ï¼ï¼ï¼å¤šå¹´å‰æ¬ ä¸‹çš„çº¿æ€§ä»£æ•°å€ºï¼Œç°åœ¨è¦è¿˜äº†ã€‚</p><p>å¯¹äºå½¢å˜ï¼Œå‡è®¾å¼€å§‹çš„åæ ‡æ˜¯($x_0$,$y_0$)ï¼Œç»“æŸçš„åæ ‡æ˜¯($x_1$,$y_1$)ï¼Œé‚£ä¹ˆå‡å¦‚($x_1$,$y_1$)æ˜¯$x_0$å¹³ç§»äº†eä¸ªå•ä½ï¼Œ$y_0$å¹³ç§»äº†fä¸ªå•ä½åå¾—åˆ°çš„ç»“æœï¼Œé‚£ä¹ˆ$x_1$å’Œ$y_1$å°±ç­‰äºå¦‚ä¸‹ï¼š<br>$$<br>  x_1 = x_0 + e \\<br>  y_1 = y_0 + f<br>$$</p><p>ä½¿ç”¨çŸ©é˜µçš„ç¬›å¡å°”ç§¯ï¼ˆå·¦è¾¹å€¼çš„ç¬¬å‡ è¡Œç¬¬å‡ åˆ—ä¸­çš„å€¼ï¼Œå°±æ˜¯å³è¾¹ç¬¬ä¸€ä¸ªçŸ©é˜µçš„ç¬¬å‡ è¡Œä¸ç¬¬äºŒä¸ªçŸ©é˜µçš„ç¬¬å‡ åˆ—çš„ä¹˜ç§¯ä¹‹å’Œå°±æ˜¯ï¼‰çš„æ ·å­å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><p>$$\left[<br>\begin{matrix}<br>x_1 \\<br>y_1 \\<br>1 \\<br>\end{matrix}<br>\right] =<br>\left[<br>\begin{matrix}<br>1 &amp; 0 &amp; e \\<br>0 &amp; 1 &amp; f \\<br>0 &amp; 0 &amp; 1<br>\end{matrix}<br>\right]<br>\left[<br>\begin{matrix}<br>x_0 \\<br>y_0 \\<br>1 \\<br>\end{matrix}<br>\right] $$</p><p>ä¸Šé¢çŸ©é˜µæ˜¯å¹³ç§»æ—¶å€™çš„çŸ©é˜µï¼Œå°†ä¸­é—´çš„çŸ©é˜µå¸¦å…¥çŸ©é˜µçš„APIæœ‰ï¼š<code>context.transform(1, 0, 0, 1, e, f);</code>ã€‚ä¹Ÿå°±æ˜¯è¯´<code>context.translate(e, f);</code>ç­‰ä»·äº<code>context.transform(1, 0, 0, 1, e, f);</code>ã€‚</p><p>å¯¹äºç¼©æ”¾ï¼ŒåŒæ ·å‡è®¾å¼€å§‹çš„åæ ‡æ˜¯($x_0$,$y_0$)ï¼Œç»“æŸçš„åæ ‡æ˜¯($x_1$,$y_1$)ï¼Œé‚£ä¹ˆå‡å¦‚$x_0$ç¼©æ”¾äº†aä¸ªå•ä½ï¼Œ$y_0$ç¼©æ”¾dä¸ªå•ä½ï¼Œé‚£ä¹ˆ$x_1$å’Œ$y_1$å°±ç­‰äºå¦‚ä¸‹ï¼š<br>$$<br>  x_1 = a * x_0 \\<br>  y_1 = d * y_0<br>$$</p><p>ä½¿ç”¨çŸ©é˜µçš„ç¬›å¡å°”ç§¯å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><p>$$\left[<br>\begin{matrix}<br>x_1 \\<br>y_1 \\<br>1 \\<br>\end{matrix}<br>\right] =<br>\left[<br>\begin{matrix}<br>a &amp; 0 &amp; 0 \\<br>0 &amp; d &amp; 0 \\<br>0 &amp; 0 &amp; 1<br>\end{matrix}<br>\right]<br>\left[<br>\begin{matrix}<br>x_0 \\<br>y_0 \\<br>1 \\<br>\end{matrix}<br>\right] $$</p><p>ä¹Ÿå°±æ˜¯è¯´<code>context.scale(a, d);</code>ç­‰ä»·äº<code>context.transform(a, 0, 0, d, 0, 0);</code>ã€‚</p><p>æ—‹è½¬æœ‰ç‚¹å¤æ‚ï¼Œåæ ‡($x_0$,$y_0$)å’Œ($x_1$,$y_1$)çš„æ„ä¹‰å’Œä¸Šé¢ä¸€ä¸‹ï¼Œæ—‹è½¬æœ‰å¦‚ä¸‹å…¬å¼ï¼ˆå¯ä»¥è‡ªè¡Œæ¨åˆ°ï¼Œå¹¶ä¸éš¾ï¼‰ï¼š</p><p>$$<br>  x_1 = x_0 * cos\theta - y_0 * sin\theta \\<br>  y_1 = x_0 * sin\theta + y_0 * cos\theta<br>$$</p><p>ä½¿ç”¨çŸ©é˜µçš„ç¬›å¡å°”ç§¯å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><p>$$\left[<br>\begin{matrix}<br>x_1 \\<br>y_1 \\<br>1 \\<br>\end{matrix}<br>\right] =<br>\left[<br>\begin{matrix}<br>cos\theta &amp; -sin\theta &amp; 0 \\<br>sin\theta &amp; cos\theta &amp; 0 \\<br>0 &amp; 0 &amp; 1<br>\end{matrix}<br>\right]<br>\left[<br>\begin{matrix}<br>x_0 \\<br>y_0 \\<br>1 \\<br>\end{matrix}<br>\right] $$</p><p>ä¹Ÿå°±æ˜¯è¯´<code>context.rotate(angle);</code>ç­‰ä»·äº<code>context.transform(cos(angle), sin(angle), -sin(angle), cos(angle), 0, 0);</code>ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬ä¸Šé¢çš„å‡ ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åšä¸‹é¢çš„ç­‰ä»·æ›¿æ¢ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">context.translate(<span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line">context.transform(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">context.scale(<span class="number">1.5</span>, <span class="number">1.5</span>);</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line">context.transform(<span class="number">1.5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">context.rotate(<span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">45</span>);</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">var</span> theta = <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">45</span>;</span><br><span class="line">context.transform(<span class="built_in">Math</span>.cos(theta), <span class="built_in">Math</span>.sin(theta), - <span class="built_in">Math</span>.sin(theta), <span class="built_in">Math</span>.cos(theta), <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>é™¤äº†<code>transform</code>å¤–è¿˜æœ‰ä¸€ä¸ªçŸ©é˜µå˜æ¢çš„æ–¹æ³•å«<code>setTransform</code>ï¼Œå‚æ•°æ˜¯ä¸€æ¨¡ä¸€æ ·çš„<code>context.setTransform(a, b, c, d, e, f);</code>ã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯åè€…å§‹ç»ˆä»¥æœ€åˆçš„åæ ‡åšä¸ºå‚ç…§ï¼Œè€Œ<code>transform</code>ä»¥ä¸Šæ¬¡å˜æ¢åçš„åæ ‡åšä¸ºå‚ç…§ï¼ˆç±»ä¼¼äºå‰é¢çš„ä¸‰ä¸ªAPIï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡</title>
      <link href="/2019/06/19/Canvas%E7%B3%BB%E5%88%97%EF%BC%886%EF%BC%89%EF%BC%9A%E7%BB%98%E5%88%B6%E5%9B%BE%E7%89%87/"/>
      <url>/2019/06/19/Canvas%E7%B3%BB%E5%88%97%EF%BC%886%EF%BC%89%EF%BC%9A%E7%BB%98%E5%88%B6%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ç°åœ¨å·²ç»å¯ä»¥ç»˜åˆ¶å¥½å¤šä¸œè¥¿äº†ï¼Œä¸è¿‡åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»˜åˆ¶æœ€å¤šçš„å½“ç„¶æ˜¯å›¾ç‰‡äº†ï¼Œè¿™ç« æˆ‘ä»¬å°±è®²è®²å›¾ç‰‡çš„ç»˜åˆ¶ã€‚</p><hr><h2 id="ç»˜åˆ¶å›¾ç‰‡"><a href="#ç»˜åˆ¶å›¾ç‰‡" class="headerlink" title="ç»˜åˆ¶å›¾ç‰‡"></a>ç»˜åˆ¶å›¾ç‰‡</h2><p>ç»˜åˆ¶å›¾ç‰‡çš„APIæ˜¯<code>drawImage</code>ï¼Œå®ƒçš„å‚æ•°æœ‰ä¸‰ç§æƒ…å†µï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†å›¾ç‰‡ç»˜åˆ¶åœ¨canvasçš„(dX, dY)åæ ‡å¤„</span></span><br><span class="line">context.drawImage(Image, dX, dY);</span><br><span class="line"><span class="comment">// å°†å›¾ç‰‡ç»˜åˆ¶åœ¨canvasçš„(dX, dY)åæ ‡å¤„ å›¾ç‰‡å¤§å°ç¼©æ”¾è‡³dWidth * dHeight</span></span><br><span class="line">context.drawImage(Image, dX, dY, dWidth, dHeight);</span><br><span class="line"><span class="comment">// åŸå›¾ç‰‡å°†ä¼šæŒ‰ç…§ å·¦ä¸Šè§’åæ ‡ä¸º(sX, sY) å¤§å°ä¸ºsWidth * sHeightè£å‰ª</span></span><br><span class="line"><span class="comment">// ç„¶åå†å°†å›¾ç‰‡ç»˜åˆ¶åœ¨canvasçš„(dX, dY)åæ ‡å¤„ å›¾ç‰‡å¤§å°ç¼©æ”¾è‡³dWidth * dHeight</span></span><br><span class="line"><span class="comment">// æ³¨æ„å‚æ•°çš„ä½ç½®ï¼ï¼</span></span><br><span class="line">context.drawImage(Image, sX, sY, sWidth, sHeight, dX, dY, dWidth, dHeight);</span><br></pre></td></tr></table></figure><p>æ¥ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"https://www.kai666666.top/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(image, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ•ˆæœï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/1.jpeg" alt="ç»˜åˆ¶å›¾ç‰‡"></p><p>ç”±ä¸Šé¢å¯çŸ¥ï¼Œå›¾ç‰‡å¿…é¡»åŠ è½½å®Œæˆä»¥åæ‰å¯ä»¥ç»˜åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¾åœ¨<code>onload</code>é‡Œé¢äº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨<code>imgæ ‡ç­¾</code>ï¼Œå¦‚æœæˆ‘ä»¬çš„ä»£ç æ˜¯åœ¨å›¾ç‰‡åŠ è½½å®ŒååŠ è½½çš„å°±ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ç°åœ¨æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ç»˜åˆ¶çš„å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.drawImage(image, <span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/2.jpeg" alt="ç»˜åˆ¶å›¾ç‰‡5ä¸ªå‚æ•°"></p><p>æˆ‘ä»¬è¯•ä¸€ä¸‹å‚æ•°æœ€å¤šçš„è¿™ä¸ªï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, <span class="number">120</span>, <span class="number">120</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/3.jpeg" alt="ç»˜åˆ¶å›¾ç‰‡9ä¸ªå‚æ•°"></p><p>å½“ç„¶<code>drawImage</code>é™¤äº†å¯ä»¥ç»˜åˆ¶å›¾ç‰‡ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç»˜åˆ¶canvasï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas2 = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>)</span><br><span class="line"><span class="keyword">var</span> context2 = canvas2.getContext(<span class="string">"2d"</span>);</span><br><span class="line">context2.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">30</span>,<span class="number">30</span>);</span><br><span class="line"><span class="comment">// è¿™é‡Œç»˜åˆ¶çš„æ˜¯canvaså…ƒç´ </span></span><br><span class="line">context.drawImage(canvas2, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/4.jpeg" alt="ç»˜åˆ¶canvas"></p><p>å½“ç„¶é™¤äº†å¯ä»¥ç»˜åˆ¶canvasä»¥å¤–è¿˜å¯ä»¥ç»˜åˆ¶videoä¸è¿‡æ¯æ¬¡åªèƒ½ç»˜åˆ¶ä¸€å±ï¼Œå¦‚æœå¸Œæœ›ç»˜åˆ¶çš„å›¾å½¢ä¹Ÿå¯ä»¥æ’­æ”¾çš„è¯ï¼Œé‚£ä¹ˆå°±è¦å¾ªç¯å¤šæ¬¡è°ƒç”¨ç»˜å›¾äº†ã€‚åŒæ ·çš„å¦‚æœå›¾ç‰‡æ˜¯GIFçš„ä¹Ÿä¸ä¼šåŠ¨æ€æ’­æ”¾å‡ºæ¥ï¼Œè€Œæ˜¯ä¼šæ˜¾ç¤ºç¬¬ä¸€å¼ ã€‚è¿™ä¸¤ç§æƒ…å†µå¾ˆå°‘ç”¨åˆ°ï¼Œå°±ä¸åœ¨é‡å¤äº†ã€‚</p><blockquote><p>åŒç¼“å†²æŠ€æœ¯ï¼šä½¿ç”¨è€çš„æŠ€æœ¯æ¥ç»˜å›¾å¯èƒ½ä¼šæœ‰é—ªå±çš„ç°è±¡ï¼Œè¿™å¾€å¾€æ˜¯æ¯ç»˜åˆ¶ä¸€å±çš„æ—¶å€™ï¼Œç„¶åç”¨ä¸€ä¸ªç©ºç™½çš„å±å¹•æ¥æ¸…ç†å…¨å±ï¼Œè¿™å°±å¯¼è‡´å±å¹•æœ‰çš„æ—¶å€™ä¼šä¸€é—ªä¸€é—ªçš„ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯åŒç¼“å†²æŠ€æœ¯ã€‚åŒç¼“å†²æŠ€æœ¯è¯´çš„æ˜¯æŠŠç”»å¸ƒå…ˆç”»åœ¨ä¸€ä¸ªç¦»çº¿çš„canvasï¼ˆæˆ–è€…å›¾ç‰‡ï¼‰ä¸Šï¼Œç„¶åå†æŠŠè¿™ä¸ªcanvasç»˜åˆ¶åˆ°ç”¨æˆ·çœ‹åˆ°çš„canvasä¸Šï¼Œå› ä¸ºæ¯æ¬¡çœ‹åˆ°çš„éƒ½æ˜¯æ–°canvasçš„è¦†ç›–ï¼Œå¹¶ä¸éœ€è¦æ¸²æŸ“ç©ºç™½å±ï¼Œæ‰€ä»¥å°±ä¸ä¼šæœ‰é—ªå±ç°è±¡äº†ï¼ŒH5ä¸­çš„canvasæ˜¯é»˜è®¤æ‹¥æœ‰åŒç¼“å†²çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å†å¤„ç†äº†ã€‚åŒç¼“å†²æŠ€æœ¯æ›´å¤šçš„ä¿¡æ¯å¯ä»¥çœ‹<a href="https://blog.csdn.net/jxw167/article/details/72157154" target="_blank" rel="noopener">è¿™ç¯‡</a>ã€‚</p></blockquote><h2 id="çº¿æ€§æ¸å˜"><a href="#çº¿æ€§æ¸å˜" class="headerlink" title="çº¿æ€§æ¸å˜"></a>çº¿æ€§æ¸å˜</h2><p>æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨è¿‡ä¸€ä¸ªå±æ€§å«<code>fillStyle</code>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡ ä¹æˆ‘ä»¬éƒ½ç»™çš„æ˜¯æŸä¸ªé¢œè‰²ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸ç›´æ¥å«<code>fillColor</code>å‘¢ï¼Œå› ä¸ºä»–é™¤äº†é¢œè‰²è¿˜å¯ä»¥è®¾ç½®å…¶ä»–çš„å€¼ï¼Œå°±æ¯”å¦‚çº¿æ€§æ¸å˜ã€‚å®šä¹‰ä¸€ä¸ªçº¿æ€§æ¸å˜ï¼Œå¤§è‡´æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªçº¿æ€§æ¸å˜å¯¹è±¡ ï¼ˆx1, y1ï¼‰æ˜¯èµ·å§‹åæ ‡ ï¼ˆx2, y2ï¼‰æ˜¯ç»“æŸåæ ‡</span></span><br><span class="line"><span class="keyword">var</span> gradient = context.createLinearGradient(x1, y1, x2, y2);</span><br><span class="line"><span class="comment">// åœ¨0~1çš„èŒƒå›´å†… æ·»åŠ é¢œè‰² 0æ˜¯å¼€å§‹ä½ç½® 1æ˜¯ç»“æŸä½ç½®</span></span><br><span class="line">gradient.addColorStop(number, <span class="string">'color1'</span>);</span><br><span class="line">gradient.addColorStop(number, <span class="string">'color2'</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®çº¿æ€§æ¸å˜</span></span><br><span class="line">context.fillStyle = gradient;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gradient = context.createLinearGradient(<span class="number">0</span>,<span class="number">0</span>,<span class="number">300</span>,<span class="number">150</span>);</span><br><span class="line">gradient.addColorStop(<span class="number">0</span>,<span class="string">"black"</span>);</span><br><span class="line">gradient.addColorStop(<span class="number">0.5</span>,<span class="string">"white"</span>);</span><br><span class="line">gradient.addColorStop(<span class="number">1</span>,<span class="string">"red"</span>);</span><br><span class="line">context.fillStyle = gradient;</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">280</span>,<span class="number">130</span>);</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/5.jpeg" alt="çº¿æ€§æ¸å˜"></p><h2 id="å¾„å‘æ¸å˜"><a href="#å¾„å‘æ¸å˜" class="headerlink" title="å¾„å‘æ¸å˜"></a>å¾„å‘æ¸å˜</h2><p>å¾„å‘æ¸å˜å’Œçº¿æ€§æ¸å˜å¾ˆåƒï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¾„å‘æ¸å˜å˜å¯¹è±¡ ï¼ˆx1, y1ï¼‰æ˜¯å…¶å®åæ ‡ r1æ˜¯èµ·å§‹åŠå¾„ ï¼ˆx2, y2ï¼‰æ˜¯ç»“æŸåæ ‡ r2æ˜¯ç»“æŸåŠå¾„</span></span><br><span class="line"><span class="keyword">var</span> gradient = context.createRadialGradient(x1, y1, r1, x2, y2, r2);</span><br><span class="line"><span class="comment">// åœ¨0~1çš„èŒƒå›´å†… æ·»åŠ é¢œè‰² 0æ˜¯å¼€å§‹ä½ç½® 1æ˜¯ç»“æŸä½ç½® å’Œçº¿æ€§æ¸å˜æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">gradient.addColorStop(number, <span class="string">'color1'</span>);</span><br><span class="line">gradient.addColorStop(number, <span class="string">'color2'</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®å¾„å‘æ¸å˜</span></span><br><span class="line">context.fillStyle = gradient;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gradient =  context.createRadialGradient(<span class="number">150</span>, <span class="number">75</span>, <span class="number">10</span>, <span class="number">150</span>, <span class="number">75</span>, <span class="number">100</span>);</span><br><span class="line">gradient.addColorStop(<span class="number">0</span>,<span class="string">"black"</span>);</span><br><span class="line">gradient.addColorStop(<span class="number">0.5</span>,<span class="string">"white"</span>);</span><br><span class="line">gradient.addColorStop(<span class="number">1</span>,<span class="string">"red"</span>);</span><br><span class="line">context.fillStyle = gradient;</span><br><span class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">280</span>,<span class="number">130</span>);</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/6.jpeg" alt="å¾„å‘æ¸å˜"></p><p>ç”±ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<strong>æ¸å˜å¼€å§‹å¾€å‰ä¼šä½¿ç”¨æ¸å˜çš„ç¬¬ä¸€ä¸ªé¢œè‰²ï¼Œæ¸å˜ç»“æŸå¾€åä¼šä½¿ç”¨æ¸å˜çš„æœ€åä¸€ä¸ªé¢œè‰²</strong>ã€‚</p><h2 id="å›¾ç‰‡èƒŒæ™¯"><a href="#å›¾ç‰‡èƒŒæ™¯" class="headerlink" title="å›¾ç‰‡èƒŒæ™¯"></a>å›¾ç‰‡èƒŒæ™¯</h2><p>styleä¸ä»…ä»…å¯ä»¥æ˜¯é¢œè‰²å’Œæ¸å˜ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯å›¾ç‰‡äº†ï¼Œè¯­æ³•å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå›¾ç‰‡èƒŒæ™¯ Imageå°±æ˜¯ä¸€ä¸ªå›¾åƒ repetitionæ˜¯é‡å¤çš„å…³é”®å­—</span></span><br><span class="line"><span class="comment">// repetitionå¯é€‰å€¼æœ‰ï¼š"repeat|repeat-x|repeat-y|no-repeat" æ„æ€éå¸¸æ˜æ˜¾</span></span><br><span class="line"><span class="keyword">var</span> pattern = context.createPattern(Image, repetition);</span><br><span class="line"><span class="comment">// è®¾ç½®å›¾ç‰‡èƒŒæ™¯</span></span><br><span class="line">context.fillStyle = pattern;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨åšä¸€ä¸ªæ–‡å­—å¸¦æœ‰èƒŒæ™¯çš„ä¾‹å­ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/7.jpeg" alt="ç»˜åˆ¶canvas"></p><p>å…·ä½“ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">"https://www.kai666666.top/2019/06/19/Canvasç³»åˆ—ï¼ˆ6ï¼‰ï¼šç»˜åˆ¶å›¾ç‰‡/lufei.jpeg"</span>;</span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> pattern = context.createPattern(image, <span class="string">"repeat"</span>);</span><br><span class="line">  context.font=<span class="string">'30px å¾®è½¯é›…é»‘'</span>;</span><br><span class="line">  context.fillStyle = pattern;</span><br><span class="line">  context.fillText(<span class="string">"å¸¦æœ‰ç‚«é…·èƒŒæ™¯çš„æ–‡å­—"</span>, <span class="number">10</span>, <span class="number">85</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ5ï¼‰ï¼šç»˜åˆ¶æ–‡å­—</title>
      <link href="/2019/06/19/Canvas%E7%B3%BB%E5%88%97%EF%BC%885%EF%BC%89%EF%BC%9A%E7%BB%98%E5%88%B6%E6%96%87%E5%AD%97/"/>
      <url>/2019/06/19/Canvas%E7%B3%BB%E5%88%97%EF%BC%885%EF%BC%89%EF%BC%9A%E7%BB%98%E5%88%B6%E6%96%87%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ç»˜åˆ¶ç®€å•çš„å›¾å½¢äº†ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦è®²çš„æ˜¯ï¼Œcanvasç»˜åˆ¶æ–‡å­—ï¼Œé‚£æˆ‘ä»¬å¼€å§‹å§ã€‚</p><hr><h2 id="ç»˜åˆ¶æ–‡å­—"><a href="#ç»˜åˆ¶æ–‡å­—" class="headerlink" title="ç»˜åˆ¶æ–‡å­—"></a>ç»˜åˆ¶æ–‡å­—</h2><p>ç»˜åˆ¶æ–‡å­—çš„APIå’Œä¹‹å‰çš„å·®ä¸å¤šï¼Œä¹Ÿæ˜¯åˆ†ä¸º<code>stroke</code>å’Œ<code>fill</code>ï¼Œä¸€ä¸ªæ˜¯æè¾¹æ–‡å­—ï¼Œä¸€ä¸ªæ˜¯å¡«å……æ–‡å­—ï¼Œå…·ä½“APIå¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯å’Œ<code>strokeRect</code>å’Œ<code>fillRect</code>æŒºç±»ä¼¼çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æè¾¹æ–‡å­—ï¼Œå…¶å®å°±æ˜¯é•‚ç©ºå­—ä½“å–½</span></span><br><span class="line"><span class="comment">// å‚æ•°ä¸­ textæ˜¯å†™ä»€ä¹ˆæ–‡å­— (x, y)å†³å®šäº†å†™çš„ä½ç½®</span></span><br><span class="line"><span class="comment">// maxWidthç»™äº†ä¸€ä¸ªæœ€å¤§çš„å®½åº¦ æ˜¯éå¿…å¡«çš„ å¦‚æœå¡«äº†å¹¶ä¸”è¶…å‡ºäº†åˆ™ä¼šç¼©æ”¾å®½åº¦ï¼ˆæ³¨æ„ä¸æ˜¯æ¢è¡Œï¼‰</span></span><br><span class="line">context.strokeText(text, x, y, maxWidth);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¡«å……æ–‡å­—ï¼Œå…¶å®å°±ç›¸å½“äºå†™æ–‡å­—å–½</span></span><br><span class="line">context.fillText(text, x, y, maxWidth);</span><br></pre></td></tr></table></figure><p>éšä¾¿ç»™ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®å­—ä½“å¤§å°ï¼Œä¸ºäº†çœ‹çš„æ›´æ¸…æ¥š</span></span><br><span class="line">context.font=<span class="string">'30px å¾®è½¯é›…é»‘'</span>;</span><br><span class="line"><span class="comment">// æè¾¹</span></span><br><span class="line">context.strokeText(<span class="string">"è¿™é‡Œæ˜¯strokeText"</span>, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line"><span class="comment">// å¡«å……</span></span><br><span class="line">context.fillText(<span class="string">"è¿™é‡Œæ˜¯fillText"</span>, <span class="number">20</span>, <span class="number">80</span>);</span><br><span class="line"><span class="comment">// å¸¦æœ‰æœ€å¤§å®½åº¦çš„å¡«å……</span></span><br><span class="line">context.fillText(<span class="string">"è¿™é‡Œæ˜¯fillText"</span>, <span class="number">20</span>, <span class="number">120</span>,<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ5ï¼‰ï¼šç»˜åˆ¶æ–‡å­—/1.jpeg" alt="ç»˜åˆ¶æ–‡å­—"></p><p>CSSæ˜¯å¦‚ä½•å®ç°é•‚ç©ºå­—çš„å‘¢ï¼Ÿè¯·çœ‹<a href="/2019/03/19/CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—/#more">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h2 id="measureText"><a href="#measureText" class="headerlink" title="measureText"></a>measureText</h2><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦è®©æ–‡å­—æ°´å¹³å±…ä¸­ï¼Œè€Œä¸Šé¢ä½ ä¹Ÿçœ‹åˆ°äº†ï¼Œç»˜åˆ¶æ–‡å­—ä¼ é€’çš„å‚æ•°xå’Œyæ˜¯åŸºäºå·¦ä¸Šè§’çš„åæ ‡æ¥ç»˜åˆ¶çš„ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ï¼Œè¿™å°±éœ€è¦è®¡ç®—ä¸€ä¸‹æ–‡å­—çš„å®½åº¦ï¼Œ<code>measureText</code>å°±æ˜¯ç”¨æ¥å¹²è¿™äº‹çš„ã€‚ä»–è¿”å›ä¸€ä¸ª<code>TextMetrics</code>å¯¹è±¡ï¼Œä»€ä¹ˆï¼Œæ²¡å¬è¿‡è¿™ä¸ªå¯¹è±¡ï¼Ÿå®Œå…¨æ²¡å…³ç³»ï¼Œè¿™ä¸ªå¯¹è±¡å¾ˆç®€å•ï¼Œåå­—ä½ å¯ä»¥ä¸ç”¨è®°ï¼Œä½†ä½ è¦è®°å¾—è¯¥å¯¹è±¡çš„ä¸€ä¸ªç‰¹å¾å°±å¥½äº†ï¼Œé‚£å°±æ˜¯è¿™ä¸ªå¯¹è±¡åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œè¿æ–¹æ³•éƒ½æ²¡æœ‰ï¼Œè¿™ä¸ªå±æ€§å°±æ˜¯<code>width</code>ã€‚APIå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ å…¥æ–‡æœ¬è¿”å›ä¸€ä¸ªå¸¦æœ‰widthçš„å¯¹è±¡ï¼Œwidthè¡¨ç¤ºæ–‡æœ¬çš„å®½åº¦</span></span><br><span class="line">context.measureText(text);</span><br></pre></td></tr></table></figure><p>ç»™ä¸€ä¸ªæ–‡æœ¬å±…ä¸­çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context.font=<span class="string">'30px å¾®è½¯é›…é»‘'</span>;</span><br><span class="line"><span class="keyword">var</span> text = <span class="string">"æ–‡æœ¬æ°´å¹³å±…ä¸­"</span>;</span><br><span class="line"><span class="comment">// å±…ä¸­çš„xåæ ‡æ˜¯ï¼š( canvas.width - context.measureText(text).width ) / 2</span></span><br><span class="line">context.fillText(text, ( canvas.width - context.measureText(text).width ) / <span class="number">2</span>, <span class="number">80</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢<code>canvas</code>å°±æ˜¯canvasæ ‡ç­¾çš„domå…ƒç´ ï¼Œç„¶åæ°´å¹³çš„xéœ€è¦è®¡ç®—ä¸€ä¸‹ï¼Œyè¿™é‡Œå°±éšä¾¿ç»™äº†ä¸€ä¸ª80pxã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ5ï¼‰ï¼šç»˜åˆ¶æ–‡å­—/2.jpeg" alt="æ–‡æœ¬å±…ä¸­"></p><h2 id="fontå±æ€§"><a href="#fontå±æ€§" class="headerlink" title="fontå±æ€§"></a>fontå±æ€§</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯´ä¸€ä¸‹æ–‡å­—ç›¸å…³çš„ä¸€äº›å±æ€§ï¼Œä¸Šé¢è¯´äº†ä¸€ä¸ª<code>font</code>å±æ€§ï¼Œ<code>font</code>å±æ€§çš„è¯­æ³•å’ŒCSSä¸­fontå±æ€§çš„è¯­æ³•æ˜¯ä¸€æ ·çš„ï¼Œä½ æœ‰æ²¡æœ‰å‘ç°canvaså’ŒCSSæœ‰å¥½å¤šåœ°æ–¹éƒ½æ˜¯æƒ³é€šçš„ï¼Œå…·ä½“APIå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.font=<span class="string">'&lt;font-style&gt; &lt;font-variant&gt; &lt;font-weight&gt; &lt;font-size / line-height&gt; &lt;font-family&gt;'</span>;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>font-style</code>çš„å€¼æœ‰<code>normal</code>ï¼Œ<code>italic</code>ï¼ˆæ–œä½“ï¼Œä½¿ç”¨æ–œä½“æ–‡å­—å€¾æ–œï¼‰ï¼Œ<code>oblique</code>ï¼ˆæ–œä½“ï¼Œå°†æ­£å¸¸çš„æ–‡å­—é€šè¿‡ç®—æ³•å€¾æ–œï¼Œå› æ­¤æ²¡æœ‰æ–œä½“å­—ä½“çš„å±æ€§ä¹Ÿå¯ä»¥å€¾æ–œï¼‰ã€‚<br><code>font-variant</code>çš„å€¼æœ‰<code>normal</code>ï¼Œ<code>small-caps</code>ã€‚<br><code>font-weight</code>çš„å€¼æœ‰<code>normal</code>ï¼Œ<code>bold</code>ï¼Œ<code>bolder</code>ï¼Œ<code>lighter</code>ï¼Œ<code>100~900</code>ï¼ˆ100åˆ°900çš„å€¼ï¼‰ã€‚<br>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢ä¾‹å­ä¸­çš„fontå±æ€§ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.font=<span class="string">'italic bold 30px å¾®è½¯é›…é»‘'</span>;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ5ï¼‰ï¼šç»˜åˆ¶æ–‡å­—/3.jpeg" alt="fontå±æ€§"></p><h2 id="textAlignå±æ€§"><a href="#textAlignå±æ€§" class="headerlink" title="textAlignå±æ€§"></a>textAlignå±æ€§</h2><p><code>textAlign</code>å±æ€§è¡¨ç¤ºæ–‡å­—çš„å¯¹é½æ–¹å¼ï¼Œå®ƒçš„å¯é€‰å€¼æœ‰ï¼š<code>start</code>ï¼Œ<code>end</code>ï¼Œ<code>center</code>ï¼Œ<code>left</code>ï¼Œ<code>right</code>ã€‚è¿™äº”ä¸ªï¼Œå…¶ä¸­<code>start</code>å’Œ<code>left</code>å¾ˆåƒï¼Œ<code>end</code>å’Œ<code>right</code>ä¹Ÿå¾ˆåƒï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä»–ä»¬åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œä½†æ˜¯æœ‰çš„å›½å®¶çš„æ–‡å­—å¹¶ä¸æ˜¯ä»å·¦å¾€å³å†™çš„ï¼Œè€Œæ˜¯ä»å³å¾€å·¦å†™ï¼Œå°±åƒæˆ‘å›½å¤ä»£ä¸€æ ·ï¼Œè¿™ä¸ªæ—¶å€™<code>start</code>å°±ç›¸å½“äº<code>right</code>äº†ã€‚æ¢å¥è¯è¯´<code>start</code>å’Œ<code>end</code>ä¼šæ£€æµ‹æ–‡æœ¬é¡ºåºæ˜¯<code>ltr</code>(left to right)è¿˜æ˜¯<code>rtl</code>(right to left)ï¼Œä½ å¯ä»¥ç»™DOMå…ƒç´ åŠ ä¸€ä¸ªå±æ€§<code>direction=â€œrtlâ€</code>ç„¶åçœ‹çœ‹æ•ˆæœã€‚ç”±äºç°åœ¨æˆ‘å›½å’Œå¤§å¤šæ•°çš„å›½å®¶éƒ½æ˜¯<code>ltr</code>ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å¯¹è¿™ä¸¤ä¸ªå±æ€§åšè¯¦ç»†çš„æè¿°äº†ï¼Œç°åœ¨ç»™ä¸€ä¸ªå¦ä¸€ç§è®©æ–‡å­—æ°´å¹³å±…ä¸­çš„æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">context.font=<span class="string">'30px å¾®è½¯é›…é»‘'</span>;</span><br><span class="line"><span class="keyword">var</span> text = <span class="string">"æ–‡æœ¬æ°´å¹³å±…ä¸­"</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®æ–‡æœ¬å±…ä¸­</span></span><br><span class="line">context.textAlign=<span class="string">'center'</span>;</span><br><span class="line"><span class="comment">// ç„¶ååœ¨ç”»å¸ƒæ°´å¹³çš„ä¸­é—´ä½ç½®ç»˜åˆ¶æ–‡å­—</span></span><br><span class="line">context.fillText(text, canvas.width / <span class="number">2</span>, <span class="number">80</span>);</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ5ï¼‰ï¼šç»˜åˆ¶æ–‡å­—/4.jpeg" alt="textAlignå±æ€§å±…ä¸­"></p><h2 id="textBaselineå±æ€§"><a href="#textBaselineå±æ€§" class="headerlink" title="textBaselineå±æ€§"></a>textBaselineå±æ€§</h2><p><code>textBaseline</code>å±æ€§æè¿°äº†æ–‡æœ¬åŸºçº¿çš„ä½ç½®ã€‚ä»–çš„å€¼æœ‰ï¼š<code>alphabetic</code>ï¼ˆé»˜è®¤ï¼Œä½¿ç”¨å­—æ¯è¡¨çš„åŸºçº¿ï¼‰ï¼Œ<code>top</code>ï¼Œ<code>hanging</code>ï¼ˆæ‚¬æŒ‚åŸºçº¿ï¼‰ï¼Œ<code>middle</code>ï¼Œ<code>ideographic</code>ï¼ˆè¡¨æ„åŸºçº¿ï¼‰ï¼Œ<code>bottom</code>ã€‚</p><p>è¿™é‡Œç»™ä¸€ä¸ªæ–‡å­—æ°´å¹³å‚ç›´å±…ä¸­çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.font=<span class="string">'30px å¾®è½¯é›…é»‘'</span>;</span><br><span class="line"><span class="keyword">var</span> text = <span class="string">"æ–‡æœ¬æ°´å¹³å‚ç›´å±…ä¸­"</span>;</span><br><span class="line">context.textAlign=<span class="string">'center'</span>;</span><br><span class="line">context.textBaseline=<span class="string">'middle'</span>;</span><br><span class="line">context.fillText(text, canvas.width / <span class="number">2</span>, canvas.height / <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/19/Canvasç³»åˆ—ï¼ˆ5ï¼‰ï¼šç»˜åˆ¶æ–‡å­—/5.jpeg" alt="æ°´å¹³å‚ç›´å±…ä¸­"></p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ</title>
      <link href="/2019/06/16/Canvas%E7%B3%BB%E5%88%97%EF%BC%884%EF%BC%89%EF%BC%9A%E7%BA%BF%E6%9D%A1%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/06/16/Canvas%E7%B3%BB%E5%88%97%EF%BC%884%EF%BC%89%EF%BC%9A%E7%BA%BF%E6%9D%A1%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡å‰ä¸‰ç« çš„å­¦ä¹ ï¼Œä½ å‡ ä¹å¯ä»¥ç»˜åˆ¶å‡ºä»»ä½•å›¾å½¢äº†ï¼Œä½†æ˜¯å´ä¸ä¼šç”»ä¸€æ¡è™šçº¿ï¼Œä¹Ÿæ˜¯å¤Ÿæƒ¨çš„ã€‚ä»Šå¤©çš„å†…å®¹å¾ˆç®€å•ï¼Œåªç®€ç»3ä¸ªå±æ€§å’Œ1ä¸ªæ–¹æ³•ï¼Œå‡†å¤‡å¥½äº†å—ï¼Ÿ</p><hr><h2 id="çº¿æ¡çš„ç²—çº¿"><a href="#çº¿æ¡çš„ç²—çº¿" class="headerlink" title="çº¿æ¡çš„ç²—çº¿"></a>çº¿æ¡çš„ç²—çº¿</h2><p><code>lineWidth</code>æ˜¯æ”¹å˜çº¿æ¡çš„ç²—çº¿çš„ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªåƒç´ ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">20</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">280</span>, <span class="number">50</span>);</span><br><span class="line">context.lineWidth=<span class="number">1</span>;</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¿™é‡Œæ²¡æœ‰beginPath ä½ çŒœçŒœè¿™ä¸‰æ¡çº¿çš„å®½åº¦åˆ†åˆ«æ˜¯å¤šå°‘</span></span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">20</span>, <span class="number">75</span>);</span><br><span class="line">context.lineTo(<span class="number">280</span>, <span class="number">75</span>);</span><br><span class="line">context.lineWidth=<span class="number">5</span>;</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">20</span>, <span class="number">100</span>);</span><br><span class="line">context.lineTo(<span class="number">280</span>, <span class="number">100</span>);</span><br><span class="line">context.lineWidth=<span class="number">10</span>;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ/1.jpeg" alt="æ”¹å˜çº¿å®½"></p><p>å¦‚æœä¸Šé¢æ²¡æœ‰<code>beginPath</code>é‚£ä¹ˆåé¢çº¿æè¾¹çš„æ—¶å€™ä¹Ÿä¼šæŠŠä¹‹å‰çš„ç»˜åˆ¶ä¸€ä¸‹ï¼Œé‚£ä¹ˆä¸‰æ¡å…ˆæœ€ç»ˆçš„å®½åº¦å°±éƒ½æ˜¯10äº†ã€‚<br><code>lineWidth</code>ä¹Ÿå¯ç”¨äºçŸ©å½¢å’Œåœ†å¼§ä¸Šï¼Œåªè¦ç”»çº¿çš„åœ°æ–¹éƒ½å¯ä»¥ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.rect(<span class="number">20</span>, <span class="number">20</span>, <span class="number">60</span>, <span class="number">60</span>);</span><br><span class="line">context.lineWidth=<span class="number">20</span>;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ/2.jpeg" alt="çŸ©å½¢æè¾¹"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ”¹å˜<code>lineWidth</code>ï¼ŒçŸ©å½¢çš„å¤§å°ä¹Ÿå˜äº†ï¼Œç›®å‰çš„å®½åº¦æ˜¯<code>çŸ©å½¢çš„å®½åº¦ + lineWidth</code>ï¼ˆå·¦è¾¹å¤šäº†ä¸€åŠï¼Œå³è¾¹ä¹Ÿå¤šäº†ä¸€åŠï¼‰ã€‚</p><h2 id="çº¿å¸½æ ·å¼"><a href="#çº¿å¸½æ ·å¼" class="headerlink" title="çº¿å¸½æ ·å¼"></a>çº¿å¸½æ ·å¼</h2><p>çº¿å¸½æ ·å¼ç”±lineCapæ¥å®šä¹‰ï¼Œå®ƒæœ‰ä¸‰ä¸ªå€¼<code>butt | round | square</code>åˆ†åˆ«å¯¹åº”<code>æ— çº¿å¸½ | åœ†è§’ | æ–¹å½¢</code>ï¼Œé»˜è®¤æ˜¯<code>butt</code>ï¼ˆæ— çº¿å¸½ï¼‰ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">20</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">280</span>, <span class="number">50</span>);</span><br><span class="line">context.lineWidth=<span class="number">10</span>;</span><br><span class="line">context.lineCap=<span class="string">'butt'</span>;<span class="comment">// æ— çº¿å¸½ é»˜è®¤å€¼</span></span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">20</span>, <span class="number">75</span>);</span><br><span class="line">context.lineTo(<span class="number">280</span>, <span class="number">75</span>);</span><br><span class="line">context.lineWidth=<span class="number">10</span>;</span><br><span class="line">context.lineCap=<span class="string">'round'</span>; <span class="comment">// åœ†è§’</span></span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">20</span>, <span class="number">100</span>);</span><br><span class="line">context.lineTo(<span class="number">280</span>, <span class="number">100</span>);</span><br><span class="line">context.lineWidth=<span class="number">10</span>;</span><br><span class="line">context.lineCap=<span class="string">'square'</span>; <span class="comment">// æ–¹å½¢</span></span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ/3.jpeg" alt="çº¿å¸½æ ·å¼"></p><p>çº¿å¸½æ ·å¼å¯¹äºè¶Šå®½çš„çº¿æ¡æ•ˆæœè¶Šæ˜æ˜¾ï¼Œæ‰€ä»¥ä¸Šé¢çº¿å®½ç»™äº†ä¸€ä¸ª10ã€‚åŒæ—¶å¯ä»¥çœ‹åˆ°çº¿å¸½ç»™çš„ä¸ä¸€æ ·ï¼Œå®½åº¦å…¶å®ä¹Ÿæ˜¯æœ‰ç‚¹ä¸åŒçš„ã€‚<br>çº¿å¸½åªæ˜¯å¯¹çº¿æ¡2ç«¯ç‚¹çš„æ ·å¼åšäº†å¤„ç†ï¼Œå¦‚æœæ˜¯çº¿æ¡ä¸­é—´çš„é‚£ä¹ˆå°±ä¸ç”Ÿæ•ˆäº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">200</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">200</span>, <span class="number">100</span>);</span><br><span class="line">context.lineWidth=<span class="number">20</span>;</span><br><span class="line">context.lineCap=<span class="string">'round'</span>;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ/4.jpeg" alt="ä¸­é—´ä¸ç”Ÿæ•ˆ"></p><p>å¦‚æœè¦æ”¹å˜ä¸­é—´çš„æ ·å­é‚£è¯¥æ€ä¹ˆåŠï¼Ÿé‚£ä¹ˆå°±æ˜¯ç”¨<code>lineJoin</code>ã€‚</p><h2 id="çº¿æ¡äº¤ç•Œå¤„æ ·å¼"><a href="#çº¿æ¡äº¤ç•Œå¤„æ ·å¼" class="headerlink" title="çº¿æ¡äº¤ç•Œå¤„æ ·å¼"></a>çº¿æ¡äº¤ç•Œå¤„æ ·å¼</h2><p>çº¿æ¡äº¤ç•Œå¤„æ ·å¼ç”±<code>lineJoin</code>æ¥å†³å®šï¼Œå®ƒæœ‰ä¸‰ä¸ªå€¼<code>miter | bevel | round</code>åˆ†åˆ«æ˜¯<code>å°–è§’ | æ–œè§’ | åœ†è§’</code>ï¼Œé»˜è®¤æ˜¯<code>miter</code>ã€‚æ–œè§’æ—¶å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">200</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">200</span>, <span class="number">100</span>);</span><br><span class="line">context.lineWidth=<span class="number">20</span>;</span><br><span class="line">context.lineCap=<span class="string">'round'</span>;</span><br><span class="line">context.lineJoin=<span class="string">'bevel'</span>;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ/5.jpeg" alt="æ–œè§’"></p><p>å¦‚æœ<code>context.lineJoin=&#39;bevel&#39;;</code>æ”¹ä¸º<code>context.lineJoin=&#39;round&#39;;</code>æ—¶ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ/6.jpeg" alt="åœ†è§’"></p><h2 id="ç»˜åˆ¶è™šçº¿"><a href="#ç»˜åˆ¶è™šçº¿" class="headerlink" title="ç»˜åˆ¶è™šçº¿"></a>ç»˜åˆ¶è™šçº¿</h2><p>è™šçº¿æ˜¯ç”±ç»†å°çš„å®çº¿å’Œç©ºç™½ç»„æˆï¼Œç»˜åˆ¶è™šçº¿ä½¿ç”¨<code>setLineDash</code>æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œæ•°ç»„æ˜¯å®çº¿å’Œç©ºç™½çš„é•¿åº¦ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">60</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line"><span class="comment">// å®çº¿å’Œç©ºç™½æ¯”ä¾‹æ˜¯10px : 5px</span></span><br><span class="line">context.setLineDash([<span class="number">10</span>,<span class="number">5</span>]);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ4ï¼‰ï¼šçº¿æ¡æ“ä½œ/7.jpeg" alt="æ”¹å˜çº¿å®½"></p><p>å€¼çš„ä¸€æçš„æ˜¯ï¼Œå¦‚æœä¸ä¼ æ•°ç»„çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼›ä¼ ä¸€ä¸ªç©ºæ•°ç»„çš„è¯ï¼Œä¼šæŒ‰ç…§å®çº¿å»ç»˜åˆ¶ï¼›å¦‚æœæ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯å®çº¿å’Œç©ºç™½ä¾æ¬¡æŒ‰è¿™ä¸ªå…ƒç´ å¤§å°æ¥ç»˜åˆ¶ï¼›å¦‚æœå¤šä¸ªå…ƒç´ çš„æ—¶å€™å°±æ˜¯äº¤æ›¿å¾ªç¯æ¥é—´éš”ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€</title>
      <link href="/2019/06/16/Canvas%E7%B3%BB%E5%88%97%EF%BC%883%EF%BC%89%EF%BC%9A%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%8A%B6%E6%80%81/"/>
      <url>/2019/06/16/Canvas%E7%B3%BB%E5%88%97%EF%BC%883%EF%BC%89%EF%BC%9A%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%8A%B6%E6%80%81/</url>
      
        <content type="html"><![CDATA[<p>å‰ä¸¤ç« æˆ‘ä»¬å­¦çš„æ˜¯åŸºæœ¬å›¾å½¢çš„æè¾¹å’Œå¡«å……ï¼Œå­¦å®ŒåŸºæœ¬å›¾å½¢ç»˜åˆ¶ä»¥åå°±ä¼šç»•ä¸è¿‡2ä¸ªæ¦‚å¿µå°±æ˜¯è·¯å¾„å’ŒçŠ¶æ€ï¼Œæœ¬ç« æˆ‘ä»¬çœ‹çœ‹è¿™ä¸€å—çš„å†…å®¹ã€‚</p><hr><h2 id="beginPath"><a href="#beginPath" class="headerlink" title="beginPath"></a>beginPath</h2><p>beginPathè¡¨ç¤ºå¼€å§‹ä¸€ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€ç« ç”»å¼§çš„æ—¶å€™ç”¨åˆ°è¿‡å¥½å¤šæ¬¡ï¼Œä»–çš„APIéå¸¸ç®€å•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br></pre></td></tr></table></figure><p>å¼€å§‹è·¯å¾„æœ‰2å±‚æ„æ€ï¼Œä¸€ä¸ªå°±æ˜¯æœ¬æ¬¡ç»˜åˆ¶çš„èµ·ç‚¹æ˜¯æ–°çš„ï¼ˆä¸å†æ˜¯ä¸Šæ¬¡ç»“æŸçš„ç‚¹äº†ï¼‰ï¼Œå¦å¤–ä¸€ä¸ªæ„æ€å°±æ˜¯ç»˜åˆ¶çš„æ ·å¼ä¹Ÿæ˜¯æ–°çš„ï¼ˆä¸å†ä¸ä¹‹å‰çš„æ ·å¼æœ‰å…³è”ï¼‰ã€‚å¯¹äºç¬¬ä¸€æ¡ä¸Šä¸€ä¸ªç« èŠ‚æˆ‘ä»¬å·²ç»è§è¯†è¿‡äº†ï¼Œå¦‚æœä¸å¼€å§‹ä¸€ä¸ªæ–°çš„è·¯å¾„é‚£ä¹ˆæè¾¹å¼§çº¿çš„æ—¶å€™å°±ä¼šæœ‰ä¸€æ¡ä¸Šæ¬¡ç»˜åˆ¶ç»“æŸåˆ°å¼§çº¿å¼€å§‹æ—¶çš„è¿çº¿ï¼ˆå½“ç„¶moveToå¯ä»¥é¿å…ï¼Œä½†éœ€è¦è®¡ç®—ï¼Œä¸æ–¹ä¾¿ï¼‰ã€‚<br>ç°åœ¨è€ƒè™‘è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç”»3æ¡çº¿ï¼Œçº¿çš„é¢œè‰²åˆ†åˆ«æ˜¯çº¢ç»¿è“ï¼Œä½¿ç”¨ä¹‹å‰çš„çŸ¥è¯†ï¼Œä½ åº”è¯¥å¯ä»¥çš„ï¼Œä½ å…ˆè¯•ä¸€ä¸‹ï¼Ÿæˆ–è®¸ä½ å†™çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">50</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'#FF0000'</span>;</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">75</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">75</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'#00FF00'</span>;</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">100</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'#0000FF'</span>;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåçš„ç»“æœå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š<br><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/1.jpeg" alt="é¢œè‰²å‡ºç°é”™è¯¯"></p><p>æˆ‘ä»¬å‘ç°é¢œè‰²æ˜¯é”™è¯¯çš„ï¼Œä½†æ˜¯åˆä¸æ¸…æ¥šå“ªé‡Œæœ‰é—®é¢˜äº†ã€‚éš¾é“æ˜¯å®ƒçš„APIæœ‰bugäº†å—?æˆ‘ä»¬æ‰“æ–­ç‚¹ï¼Œç„¶åå•æ­¥æ‰§è¡Œï¼Œçœ‹çœ‹ä¸Šé¢ä¸‰ä¸ªstrokeä¾æ¬¡æ‰§è¡Œåçš„æ•ˆæœï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/2.jpeg" alt="çº¢è‰²æ‰§è¡Œå"><br><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/3.jpeg" alt="ç»¿è‰²æ‰§è¡Œå"><br><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/4.jpeg" alt="è“è‰²æ‰§è¡Œå"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°çº¢è‰²ä»¥åæ˜¯å¯¹çš„ï¼ˆè™½ç„¶æŠŠåæ ‡ç³»ä¹Ÿå˜æˆçº¢è‰²äº†ï¼‰ï¼›ç„¶åç»¿è‰²æ‰§è¡ŒåæŠŠç»¿è‰²è¿™æ¡æ¸²æŸ“å¯¹äº†ï¼Œä½†æ˜¯åˆç”¨ç»¿è‰²æ¸²æŸ“äº†ä¸€ä¸‹çº¢è‰²çš„é‚£æ¡çº¿ï¼Œä½¿å¾—çº¢è‰²çš„çº¿å˜æˆ2è€…çš„å åŠ è‰²äº†ï¼›å½“ç»¿è‰²çš„æ‰§è¡Œå®Œäº†ä»¥åï¼ŒæŠŠæœ€åä¸€æ¡çº¿æè¾¹æˆç»¿è‰²ï¼Œä½†æ˜¯åˆæŠŠå‰é¢çš„ä¹Ÿæ¸²æŸ“äº†ä¸€éï¼Œæ‰€ä»¥æœ€ç»ˆçš„é¢œè‰²å°±æ˜¯æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ã€‚è¦è®©æ–°çš„çº¿ä¸åœ¨ç»˜åˆ¶ä¹‹å‰çš„å°±ç”¨<code>beginPath</code>æ¥å¼€å¯ä¸€ä¸ªæ–°çš„è·¯å¾„ã€‚çœ‹çœ‹æˆ‘ä»¬ä½¿ç”¨åçš„æ•ˆæœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">50</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">50</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'#FF0000'</span>;</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">75</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">75</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'#00FF00'</span>;</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">100</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'#0000FF'</span>;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/5.jpeg" alt="æ­£å¸¸æ¸²æŸ“"></p><p>æ€»ç»“ä¸€ä¸‹ï¼š<strong>ä½¿ç”¨beginPathè·¯å¾„å°†ä¸å†ä¸ä¹‹å‰çš„è”ç³»ï¼Œç»˜åˆ¶æ—¶ä¹Ÿä¸å†ç»˜åˆ¶ä¹‹å‰çš„ï¼ˆæ‰€ä»¥å·²ç»˜åˆ¶å›¾æ¡ˆçš„æ ·å¼ä¸å†å åŠ ï¼‰ã€‚</strong></p><h2 id="closePath"><a href="#closePath" class="headerlink" title="closePath"></a>closePath</h2><p>closePathæ˜¯é—­åˆè·¯å¾„ï¼Œæ³¨æ„æ˜¯é—­åˆè·¯å¾„è€Œä¸æ˜¯ç»“æŸè·¯å¾„ï¼Œè™½ç„¶ç›®å‰çš„ä½ç½®æ˜¯åœ¨beginPathåé¢ï¼Œä½†æ˜¯ä¸¤è€…æ²¡ä»€ä¹ˆå…³ç³»ï¼Œå®ƒå¹¶ä¸æ˜¯endPathï¼ˆæ²¡æœ‰è¿™ä¸ªï¼‰ã€‚</p><p>ç°åœ¨æœ‰éœ€æ±‚ï¼Œéœ€è¦æè¾¹ä¸€ä¸ª45Â°çš„æ‰‡å½¢ï¼Œä½ ä»¥ä½ ç°åœ¨çš„æŠ€æœ¯å®Œå…¨å¯ä»¥èƒœä»»ï¼Œå¤§ç¬”ä¸€æŒ¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">150</span>, <span class="number">75</span>);</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">80</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">45</span>);</span><br><span class="line">context.lineTo(<span class="number">150</span>, <span class="number">75</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/6.jpeg" alt="æè¾¹æ‰‡å½¢"></p><p>æ•ˆæœä¸é”™ï¼ŒæŒºæ»¡æ„çš„ã€‚ç°åœ¨æˆ‘ä»¬è§‚å¯Ÿå€’æ•°ç¬¬äºŒè¡Œä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>context.lineTo(150, 75);</code>ç”»äº†ä¸€æ¡å›åˆ°åœ†å¿ƒï¼ˆèµ·ç‚¹ï¼‰çš„çº¿ã€‚åœ¨<code>stroke</code>çš„æ—¶å€™å›åˆ°èµ·ç‚¹å¯ä»¥ç»˜åˆ¶å‡ºä¸€ä¸ªé—­åˆçš„å›¾å½¢ï¼Œè¿™ç§æ“ä½œå®åœ¨å¤ªå¤šäº†ï¼Œä¸ºäº†ç®€åŒ–è¿™ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>closePath</code>ã€‚ç°åœ¨ç›´æ¥æŠŠ<code>context.lineTo(150, 75);</code>æ›¿æ¢ä¸º<code>context.closePath();</code>ä½ ä¼šå‘ç°æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å°±çœå»äº†è‡ªå·±è®¡ç®—èµ·ç‚¹ä½ç½®çš„æ­¥éª¤äº†ã€‚æˆ‘å¼ºçƒˆå»ºè®®åœ¨é—­åˆè·¯å¾„çš„æ—¶å€™ä½¿ç”¨<code>closePath</code>ã€‚<br>éœ€è¦é¡ºä¾¿æé†’ä¸€ä¸‹ï¼Œå¡«å……ï¼ˆfillï¼‰çš„æ—¶å€™ï¼Œå¯¹äºä¸€ä¸ªç»ˆç‚¹å’Œèµ·ç‚¹æ²¡æœ‰é—­åˆçš„è·¯å¾„ï¼Œé»˜è®¤ä¼šé—­åˆäº†å†å»å¡«å……ï¼ˆä¸ç„¶æ²¡å¾—ç©äº†ï¼‰ï¼Œå¦‚ä¸‹ã€‚å½“ç„¶å¦‚æœè¿˜æœ‰å…¶ä»–æ²¡æœ‰é—­åˆçš„æ—¶å€™ï¼ˆå°±æ¯”å¦‚å¹³è¡Œçš„2ä¸ªçº¿æ®µï¼‰ï¼Œé‚£ä¹ˆå°±çœŸçš„æ²¡çš„å®Œäº†ï¼Œä»–ä¹Ÿâ€œä¸ä¼šâ€ç»˜åˆ¶äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">150</span>, <span class="number">75</span>);</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">80</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">45</span>);</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ²¡æœ‰é—­åˆï¼Œç›´æ¥å¡«å……ï¼Œç»“æœå’Œé—­åˆäº†ä»¥åæ˜¯ä¸€æ ·çš„æ•ˆæœï¼š<br><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/7.jpeg" alt="å¡«å……æ‰‡å½¢"></p><h2 id="ç‚¹æ˜¯å¦åœ¨è·¯å¾„å†…éƒ¨"><a href="#ç‚¹æ˜¯å¦åœ¨è·¯å¾„å†…éƒ¨" class="headerlink" title="ç‚¹æ˜¯å¦åœ¨è·¯å¾„å†…éƒ¨"></a>ç‚¹æ˜¯å¦åœ¨è·¯å¾„å†…éƒ¨</h2><p>è·Ÿè·¯å¾„æœ‰å…³çš„ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼Œå°±æ˜¯éœ€è¦åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ä¸€ä¸ªè·¯å¾„çš„å†…éƒ¨ã€‚canvasè€ƒè™‘åˆ°å¤§å®¶çš„è¿™ä¸ªéœ€è¦ï¼Œç»™äº†å¤§å®¶æä¾›äº†è¿™æ ·çš„APIï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åæ ‡(x, y)æ˜¯å¦åœ¨è·¯å¾„å†…éƒ¨ å¦‚æœåœ¨å°±è¿”å›trueå¦åˆ™å°±è¿”å›false</span></span><br><span class="line">context.isPointInPath(x, y);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æœ‰ä¸‰ç‚¹ï¼š</p><ol><li>å¦‚æœä¸€ä¸ªè·¯å¾„ç»“æŸå’Œå¼€å§‹çš„ä½ç½®æ²¡æœ‰é—­åˆï¼Œåˆ¤æ–­çš„æ—¶å€™ä¼šæŒ‰ç…§é—­åˆæ¥å¤„ç†ï¼ˆå¦‚æœç»“æŸç‚¹å’Œå¼€å§‹ç‚¹é—­åˆåæ•´ä¸ªè·¯å¾„è¿˜æ²¡æœ‰é—­åˆï¼Œé‚£ä¹ˆå°±è¿”å›falseï¼‰ã€‚</li><li><code>strokeRect</code>å’Œ<code>fillRect</code>ä¸ä¼šä¿ç•™ç»˜åˆ¶çš„çŸ©å½¢è·¯å¾„ï¼Œæ‰€ä»¥<code>isPointInPath</code>ä¸èƒ½å¯¹ä»–ä»¬è¿›è¡Œåˆ¤æ–­ï¼Œå¯ä»¥ä½¿ç”¨<code>rect</code>ä»£æ›¿ã€‚</li><li>å¦‚æœåˆšåˆšåœ¨è·¯å¾„æ‰€å¤„çš„ç›´çº¿ä¸Šï¼Œé‚£ä¹ˆéœ€è¦æ ¹æ®çº¿å®½æ¥å†³å®šï¼Œå¦‚æœè·¯å¾„å†…ä¸çº¿ä¸­å¿ƒä¸€ä¾§çš„æ—¶å€™é‚£ä¹ˆè¿”å›falseï¼Œå…¶ä»–çš„æ—¶å€™è¿”å›trueï¼Œä¸¾ä¸ªä¾‹å­æ¯”å¦‚çº¿å®½æ˜¯1ï¼Œé‚£ä¹ˆå¦‚æœåœ¨çº¿ä¸Šï¼Œè¯´æ˜æ˜¯å†…éƒ¨ï¼›å¦‚æœçº¿å®½æ˜¯3ï¼Œé‚£ä¹ˆåœ¨å†…éƒ¨å’Œå‰2ä¸ªåƒç´ ä¸Šæ˜¯å†…éƒ¨ï¼Œå¤–é¢çš„ä¸€ä¸ªåƒç´ æ˜¯å¤–éƒ¨ã€‚</li></ol><p>çœ‹äº†ç¬¬ä¸‰æ¡ä½ å¯èƒ½åˆä¼šé—®é‚£ä¹ˆå°±åªæƒ³çŸ¥é“æ˜¯å¦åœ¨çº¿ä¸Šæ€ä¹ˆåŠï¼Œé‚£å°±å¯èƒ½ä¼šç”¨åˆ°å¦ä¸€ä¸ªAPIäº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åæ ‡(x, y)æ˜¯å¦åœ¨æè¾¹ä¸Š å¦‚æœåœ¨å°±è¿”å›trueå¦åˆ™å°±è¿”å›false</span></span><br><span class="line">context.isPointInStroke(x, y);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä½ å¯èƒ½è¿˜ä¼šé—®ï¼Œä½ åªæƒ³çŸ¥é“æ˜¯å¦åœ¨è·¯å¾„çš„å†…éƒ¨ï¼Œæ ¹æœ¬ä¸å…³å¿ƒåœ¨ä¸åœ¨æè¾¹ä¸Šï¼Œé‚£ä¹ˆæ€ä¹ˆåŠï¼Ÿç»™ä½ æé†’ä¸€ä¸‹ï¼ŒæŠŠè¿™ä¸¤ä¸ªAPIç»¼åˆèµ·æ¥åˆ¤æ–­å°±å¯ä»¥äº†ï¼Œç›¸ä¿¡ä½ ä¸€å®šå¯ä»¥åšåˆ°çš„ã€‚æ­¤å¤–è¿™ä¸¤ä¸ªAPIæ¯”è¾ƒç®€å•å°±ä¸å†ç»™å‡ºä¾‹å­äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±ç ”ç©¶ä¸‹ã€‚</p><h2 id="è£å‰ªåŒºåŸŸ"><a href="#è£å‰ªåŒºåŸŸ" class="headerlink" title="è£å‰ªåŒºåŸŸ"></a>è£å‰ªåŒºåŸŸ</h2><p>è·¯å¾„å­¦å®Œäº†æˆ‘ä»¬å…ˆé¢å¤–æ’æ’­ä¸€ä¸ªå°çŸ¥è¯†ï¼Œå°±æ˜¯è£å‰ªåŒºåŸŸï¼Œå…ˆçœ‹ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å…ˆæè¾¹ä¸€ä¸ªåœ†å½¢ï¼Œå†å¡«å……ä¸€ä¸ªçŸ©å½¢ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å§‹æ–°çš„è·¯å¾„ ä¸ä¹‹å‰çš„ä¸å†æœ‰å…³ç³» å¦‚æœä¸å¼€å§‹ ä¸‹é¢çš„fillçš„æ—¶å€™ä¼šæŠŠä¸Šé¢åœ†ä¹Ÿfilläº†</span></span><br><span class="line">context.beginPath();</span><br><span class="line">context.rect(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/8.jpeg" alt="æè¾¹åœ†ï¼Œå¡«å……çŸ©å½¢"></p><p>ç„¶åæˆ‘ä»¬æŒ‰ç…§åœ†çš„æ ·å­è£å‰ªçŸ©å½¢ï¼Œç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰ç…§åœ†è£å‰ª</span></span><br><span class="line">context.clip();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.rect(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ç»“æœå¦‚ä¸‹ï¼Œç®€ç›´å®Œç¾ï¼š</p><p><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/9.jpeg" alt="æŒ‰ç…§åœ†è£å‰ªçŸ©å½¢"></p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯<strong>è£å‰ªä¹Ÿæ˜¯åŸºäºè·¯å¾„æ¥çš„ï¼Œæ‰€ä»¥<code>strokeRect</code>å’Œ<code>fillRect</code>æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚</strong><br>æˆ‘ä»¬å†ç”»ä¸€ä¸ªçŸ©å½¢ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰ç…§åœ†è£å‰ª</span></span><br><span class="line">context.clip();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.rect(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">context.fill();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†ç”»ä¸€ä¸ªçŸ©å½¢</span></span><br><span class="line">context.beginPath();</span><br><span class="line">context.rect(<span class="number">190</span>, <span class="number">35</span>, <span class="number">80</span>, <span class="number">80</span>);</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š<br><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/10.jpeg" alt="å†ç”»ä¸€ä¸ªçŸ©å½¢"></p><p>ä»€ä¹ˆæ”¾é”™å›¾äº†ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯è¿™ä¸ªæ ·å­ï¼æˆ‘ä»¬åˆ†æä¸€ä¸‹ï¼Œä¸Šé¢ç”»äº†ä¸€ä¸ªåœ†ï¼Œç„¶åæè¾¹äº†ï¼Œç„¶åæŒ‰ç…§åœ†è£å‰ªï¼Œé‚£ä¹ˆä¸‹é¢ç”»çš„ç¬¬ä¸€ä¸ªçŸ©å½¢ä¼šæŒ‰ç…§åœ†æ¥è£å‰ªï¼Œæ²¡é—®é¢˜ã€‚ç„¶åç”»äº†ç¬¬äºŒä¸ªçŸ©å½¢ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™ä¸ªçŸ©å½¢ä¹Ÿè¢«è£å‰ªäº†ï¼é‚£ä¹ˆæ€ä¹ˆè®©ç¬¬äºŒä¸ªçŸ©å½¢ä¸å†è£å‰ªå‘¢ï¼Ÿå¦‚æœåé¢çš„ä¸€ç›´éƒ½è¢«è£å‰ªï¼Œé‚£ä¹ˆæ¯è£å‰ªä¸€æ¬¡å°±ç¼©å°ä¸€ç‚¹ç‚¹è·ç¦»ï¼Œé‚£å¤šç—›è‹¦ã€‚</p><h2 id="çŠ¶æ€çš„ä¿å­˜äºæ¢å¤"><a href="#çŠ¶æ€çš„ä¿å­˜äºæ¢å¤" class="headerlink" title="çŠ¶æ€çš„ä¿å­˜äºæ¢å¤"></a>çŠ¶æ€çš„ä¿å­˜äºæ¢å¤</h2><p>æ¥ä¸‹æ¥å°±æ˜¯æˆ‘ä»¬çš„å¤„ç†åŠæ³•äº†ï¼Œå¦‚æœè£å‰ªå‰æŠŠå½“å‰çŠ¶æ€ä¿å­˜äº†ï¼Œç„¶åè£å‰ªå®Œç¬¬ä¸€ä¸ªçŸ©å½¢åï¼Œå†æŠŠçŠ¶æ€æ¢å¤äº†ï¼Œä¸æ˜¯å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜å—ï¼Ÿcanvasä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">360</span>);</span><br><span class="line">context.stroke();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿å­˜çŠ¶æ€</span></span><br><span class="line">context.save();</span><br><span class="line"></span><br><span class="line">context.clip();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.rect(<span class="number">150</span>, <span class="number">75</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">context.fill();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¢å¤ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ï¼Œå³æ²¡æœ‰è£å‰ªæ—¶é‚£ä¸ªçŠ¶æ€</span></span><br><span class="line">context.restore();</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.rect(<span class="number">190</span>, <span class="number">35</span>, <span class="number">80</span>, <span class="number">80</span>);</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªåˆ·æ–°ï¼Œå®Œç¾ï¼š<br><img src="/2019/06/16/Canvasç³»åˆ—ï¼ˆ3ï¼‰ï¼šè·¯å¾„ä¸çŠ¶æ€/11.jpeg" alt="æ¢å¤çŠ¶æ€"></p><p>é€šå¸¸è£å‰ªå‰ä¸€èˆ¬éƒ½ä¼šä¿å­˜è·¯å¾„çš„ï¼Œè£å‰ªå®Œåï¼Œä¸€èˆ¬éƒ½ä¼šæ¢å¤çš„ã€‚é™¤æ­¤ä¹‹å¤–ä¿å­˜ä¸æ¢å¤ä¹Ÿå¯ä»¥ç”¨åœ¨æŸäº›æ ·å¼çŠ¶æ€ä¸Šï¼Œè¿˜å¯ä»¥ç”¨åœ¨å½¢å˜ï¼ˆåé¢ä¼šè®²åˆ°çš„ï¼Œç±»ä¼¼ä¸CSS3çš„transformï¼‰çš„çŠ¶æ€ä¿å­˜ä¸Šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢</title>
      <link href="/2019/06/15/Canvas%E7%B3%BB%E5%88%97%EF%BC%882%EF%BC%89%EF%BC%9A%E6%9B%B2%E7%BA%BF%E5%9B%BE%E5%BD%A2/"/>
      <url>/2019/06/15/Canvas%E7%B3%BB%E5%88%97%EF%BC%882%EF%BC%89%EF%BC%9A%E6%9B%B2%E7%BA%BF%E5%9B%BE%E5%BD%A2/</url>
      
        <content type="html"><![CDATA[<p><a href="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/#more">ä¸Šä¸€ç« </a>å­¦çš„æ˜¯ç›´çº¿å›¾å½¢çš„æè¾¹å’Œå¡«å……ï¼Œæœ¬ç« æˆ‘ä»¬çœ‹çœ‹å¯¹æ›²çº¿å›¾å½¢çš„æè¾¹å’Œå¡«å……ã€‚</p><h2 id="åœ†å¼§"><a href="#åœ†å¼§" class="headerlink" title="åœ†å¼§"></a>åœ†å¼§</h2><p>ç”»å¼§çš„APIå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ†å¿ƒï¼š(x,y) åŠå¾„ï¼šradius èµ·å§‹å¼§åº¦ï¼šstartRadian ç»“æŸå¼§åº¦:endRadian ç”»å¼§æ–¹å‘ï¼šanticlockwise</span></span><br><span class="line">context.arc(x, y, radius, startRadian, endRadian, anticlockwise);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šè¿°èµ·å§‹å¼§åº¦å’Œç»“æŸå¼§åº¦éƒ½æ˜¯æˆ‘ä»¬æ•°å­¦ä¸Šå­¦çš„å¼§åº¦å°±æ˜¯2 * PIæ˜¯ä¸€åœˆï¼Œ</span></span><br><span class="line"><span class="comment">// é€šå¸¸æˆ‘ä»¬ä¹ æƒ¯ä¸Šå–œæ¬¢ç”¨è§’åº¦ä½œä¸ºå•ä½ï¼Œä¹Ÿå°±æ˜¯360Â°æ˜¯ä¸€åœˆ</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥æˆ‘ä»¬æ›´å¤šçš„ä½¿ç”¨ä¸€ä¸‹å…¬å¼</span></span><br><span class="line"><span class="comment">// èµ·å§‹è§’åº¦ï¼šstartAngle ç»“æŸè§’åº¦ï¼šendAngle</span></span><br><span class="line">ccontext.arc(x, y, radius, <span class="built_in">Math</span>.PI / <span class="number">180</span> * startAngle, <span class="built_in">Math</span>.PI / <span class="number">180</span> * endAngle, anticlockwise);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆç”»ä¸€ä¸ªå¼§çº¿ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">60</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">90</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/1.jpeg" alt="æè¾¹å¼§çº¿"></p><p>æˆ‘ä»¬çš„ä»£ç æ˜¯åŠ åœ¨ä¸Šä¸€ç« æœ€åçš„åæ ‡ç³»ä¸­çš„ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨arcç”»å¼§çš„è¯ï¼Œé‚£ä¹ˆèµ·å§‹ç‚¹æ˜¯ä¸Šä¸€ä¸ªç»˜åˆ¶çš„ç»“æŸï¼Œä¹Ÿå°±æ˜¯ç»˜åˆ¶åæ ‡ç³»çš„ç»“æŸä½ç½®ï¼Œä¸ºäº†è®©ä¹‹å‰çš„ä»£ç çš„ç»“æŸä¸åœ¨ä½œä¸ºæœ¬æ¬¡ç»˜åˆ¶çš„å¼€å§‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ–°çš„API<code>context.beginPath();</code>ï¼Œç”¨æ¥å¼€å¯ä¸€ä¸ªæ–°çš„è·¯å¾„ï¼Œè·¯å¾„ç›¸å…³çš„çŸ¥è¯†ä¼šåœ¨ä¸‹ä¸€ç« è·Ÿå¤§å®¶åˆ†äº«ã€‚æˆ‘ä»¬è¿™é‡Œç»˜åˆ¶äº†ä¸€ä¸ªåœ†å¿ƒæ˜¯(150,75)ï¼ŒåŠå¾„æ˜¯60ï¼Œä»0åº¦åˆ°90åº¦çš„å¼§ã€‚ç”±ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºå¼§çš„è§’åº¦æ˜¯æŒ‰ç…§æˆ‘ä»¬é«˜ä¸­å­¦çš„åæ ‡ç³»æ¥çš„ã€‚æ‰€ä»¥ï¼Œå­¦ä¹ æ˜¯æœ‰ç”¨çš„ï¼ï¼ï¼</p><p>å¡«å……å¼§çº¿ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">60</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">90</span>);</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/2.jpeg" alt="å¡«å……å¼§çº¿"></p><p>æè¾¹ç»“æœæœ‰æ²¡æœ‰å’Œä½ é¢„æƒ³çš„ä¸å¤ªä¸€æ ·ï¼Œä½ è„‘æµ·ä¸­çš„é—®é¢˜æˆ–è®¸ä¸‹ç« ç»™ä½ ç®€ç­”çš„ã€‚ç°åœ¨å…ˆè€ƒè™‘ä¸€ä¸‹ä¸Šé¢æœ€åä¸€ä¸ªå‚æ•°<code>anticlockwise</code>ï¼Œå®ƒå¦‚æœæ˜¯trueçš„æ—¶å€™è¡¨ç¤ºé€†æ—¶é’ˆç»˜åˆ¶ï¼Œfalseçš„æ—¶å€™æ˜¯é¡ºæ—¶é’ˆç»˜åˆ¶ï¼Œé»˜è®¤ä»€ä¹ˆéƒ½ä¸ä¼ ç›¸å½“äºä¼ äº†ä¸ª<code>undefined</code>ï¼Œå½“ç„¶ä¹Ÿå°±æ˜¯falseäº†ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå€¼è®¾ç½®ä¸ºtrueï¼Œçœ‹çœ‹ç»“æœï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/3.jpeg" alt="æè¾¹å¼§çº¿é€†æ—¶é’ˆ"></p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/4.jpeg" alt="å¡«å……å¼§çº¿é€†æ—¶é’ˆ"></p><p><code>anticlockwise</code>è¿˜æœ‰ä¸€ä¸ªç”¨å¤„å°±æ˜¯åˆ¶ä½œå›¾å½¢ä¸­çš„å›¾å½¢ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ä¹‹å‰çš„é‚£ç¯‡<a href="/2019/04/27/éé›¶ç¯ç»•è§„åˆ™/#more">éé›¶ç¯ç»•è§„åˆ™</a>ã€‚</p><h2 id="åœ†"><a href="#åœ†" class="headerlink" title="åœ†"></a>åœ†</h2><p>ç”»åœ†å¾ˆç®€å•åªè¦æŠŠä¸Šé¢çš„ç»“æŸåº¦æ•°æ”¹æˆ360å°±å¯ä»¥äº†ï¼Œç›´æ¥ç»™å‡ºç»“æœï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/5.jpeg" alt="æè¾¹åœ†"></p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/6.jpeg" alt="å¡«å……åœ†"></p><h2 id="å¦ä¸€ç§ç”»å¼§çš„æ–¹æ³•"><a href="#å¦ä¸€ç§ç”»å¼§çš„æ–¹æ³•" class="headerlink" title="å¦ä¸€ç§ç”»å¼§çš„æ–¹æ³•"></a>å¦ä¸€ç§ç”»å¼§çš„æ–¹æ³•</h2><p>canvasæä¾›äº†å¦ä¸€ç§ç”»å¼§çš„æ–¹æ³•ï¼Œå°±æ˜¯arcTo:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (x1, y1) è¡¨ç¤ºæ§åˆ¶ç‚¹çš„åæ ‡ ï¼ˆx2, y2ï¼‰æ˜¯ç»“æŸç‚¹çš„åæ ‡ radiusæ˜¯åœ†å¼§åŠå¾„</span></span><br><span class="line">context.arcTo(x1, y1, x2, y2, radius);</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆä½ ä¼šé—®èµ·å§‹ç‚¹çš„åæ ‡æ˜¯å“ªé‡Œå‘¢ï¼Ÿå…¶å®èµ·å§‹ç‚¹çš„åæ ‡å°±æ˜¯ä¸Šä¸€æ¬¡ç»˜åˆ¶ç»“æŸæ—¶çš„åæ ‡æˆ–è€…<code>moveTo</code>åçš„åæ ‡ï¼Œè¿™ä¸ªè§„åˆ™è·Ÿå‰é¢çš„<code>lineTo</code>æ˜¯ä¸€æ ·çš„ï¼Œåé¢çš„è´å¡å°”æ›²çº¿ä¹Ÿè·Ÿè¿™æ˜¯ä¸€ä¸ªé“ç†ã€‚arcToç”»å‡ºæ¥çš„å¼§çº¿åŠå¾„æ˜¯radiusï¼Œè¯¥å¼§çº¿ä¸èµ·å§‹ç‚¹æˆ–ç»ˆç‚¹ä¸æ§åˆ¶ç‚¹æ‰€åœ¨çš„ç›´çº¿ç›¸åˆ‡ã€‚å½“ç„¶çœ‹ä¸€ä¸ªä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">210</span>, <span class="number">75</span>);</span><br><span class="line">context.arcTo(<span class="number">210</span>, <span class="number">135</span>, <span class="number">150</span>, <span class="number">135</span>, <span class="number">60</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚å›¾ï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/7.jpeg" alt="arcTo"></p><p>æˆ‘æŠŠè¯´æ˜ä¹Ÿç»˜åˆ¶ä¸Šï¼Œå¦‚ä¸‹ï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/8.jpeg" alt="æ·»åŠ äº†è¯´æ˜"></p><p>æˆ‘ä»¬ä¸Šé¢ç»™çš„åŠå¾„æ˜¯60pxï¼Œè¿™ä¸ªåŠå¾„åˆšåˆšå¥½ï¼Œå› ä¸ºæ˜¯æˆ‘æœ¬äººç²¾å¿ƒè®¡ç®—çš„ï¼Œå¦‚æœåŠå¾„ä¸èƒ½æ„æˆä¸€ä¸ªå¾ˆå¥½çš„å¼§çº¿é‚£ä¼šæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿä¸‹é¢åˆ†åˆ«ç»™å‡ºåŠå¾„æ˜¯120pxå’Œ30pxçš„æ ·å­ï¼š</p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/9.jpeg" alt="åŠå¾„120px"></p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/10.jpeg" alt="åŠå¾„30px"></p><p>ç”±ä¸Šå¯ä»¥çŸ¥é“<strong>åœ†å¼§æ˜¯ä¸€å®šä¼šè¿‡èµ·å§‹ç‚¹çš„ï¼Œæœ‰å¯èƒ½ä¼šç»è¿‡ç»ˆç‚¹ï¼Œèµ·å§‹ç‚¹æœ‰å¯èƒ½æ˜¯å¤„äºåˆ‡çº¿ä¸Š</strong>ã€‚arcToæ˜¯æ²¡æœ‰é¡ºæ—¶é’ˆç”»å¼§è¿˜æ˜¯é€†æ—¶é’ˆç”»å¼§çš„æ§åˆ¶å‚æ•°çš„ï¼Œå› ä¸ºèµ·å§‹ç‚¹æ§åˆ¶ç‚¹å’Œç»ˆç‚¹å°±å¯ä»¥å†³å®šç”»å¼§çš„æ–¹å‘ã€‚</p><h2 id="arcToç”»å¼§çš„åº”ç”¨"><a href="#arcToç”»å¼§çš„åº”ç”¨" class="headerlink" title="arcToç”»å¼§çš„åº”ç”¨"></a>arcToç”»å¼§çš„åº”ç”¨</h2><p>arcToç”»å¼§æœ€å¸¸è§çš„åœºæ™¯å°±æ˜¯ç”»åœ†è§’çŸ©å½¢ã€‚ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ç”»äº†ä¸€ä¸ªæ­£æ–¹å½¢ä¸çŸ¥é“è¿˜æœ‰äººè®°å¾—ä¸ï¼Œä¸è®°å¾—çš„å¯ä»¥ä¼šå»çœ‹çœ‹ä»£ç ï¼Œç°åœ¨æˆ‘ä»¬å°±æŠŠé‚£ä¸ªçŸ©å½¢åŠ ä¸€ä¸ªåŠå¾„æ˜¯20pxçš„åœ†è§’ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹‹å‰ç»˜åˆ¶çš„æ˜¯èµ·ç‚¹åœ¨(90, 15)å®½å’Œé«˜éƒ½æ˜¯120çš„çŸ©å½¢</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥çŸ©å½¢çš„å³ä¸‹è§’æ˜¯(210, 135)</span></span><br><span class="line"><span class="comment">// ç°åœ¨åŠ 4ä¸ª20pxåœ†è§’</span></span><br><span class="line">context.moveTo(<span class="number">90</span> +  <span class="number">20</span>, <span class="number">15</span>);</span><br><span class="line">context.lineTo(<span class="number">210</span> - <span class="number">20</span>, <span class="number">15</span>);</span><br><span class="line">context.arcTo(<span class="number">210</span>, <span class="number">15</span>, <span class="number">210</span>, <span class="number">15</span> + <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">context.lineTo(<span class="number">210</span>, <span class="number">135</span> - <span class="number">20</span>);</span><br><span class="line">context.arcTo(<span class="number">210</span>, <span class="number">135</span>, <span class="number">210</span> - <span class="number">20</span>, <span class="number">135</span>, <span class="number">20</span>);</span><br><span class="line">context.lineTo(<span class="number">90</span> + <span class="number">20</span>, <span class="number">135</span>);</span><br><span class="line">context.arcTo(<span class="number">90</span>, <span class="number">135</span>, <span class="number">90</span>, <span class="number">135</span> - <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">context.lineTo(<span class="number">90</span>, <span class="number">15</span> + <span class="number">20</span>);</span><br><span class="line">context.arcTo(<span class="number">90</span>, <span class="number">15</span>, <span class="number">90</span> + <span class="number">20</span>, <span class="number">15</span>, <span class="number">20</span>);</span><br><span class="line">context.fillStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/11.jpeg" alt="åœ†è§’çŸ©å½¢"></p><h2 id="äºŒæ¬¡è´å¡å°”æ›²çº¿"><a href="#äºŒæ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="äºŒæ¬¡è´å¡å°”æ›²çº¿"></a>äºŒæ¬¡è´å¡å°”æ›²çº¿</h2><p>æˆ‘ä»¬ä½¿ç”¨arcToçš„æ—¶å€™å‚æ•°ä¸­æœ‰ä¸€ä¸ªæ§åˆ¶ç‚¹ï¼Œä¸€ä¸ªç»“æŸç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ªåŠå¾„ã€‚åœ†å¼§çš„åœ†å¿ƒåˆ°åœ†å¼§å’Œèµ·ç‚¹æˆ–ç»ˆç‚¹åˆ°æ§åˆ¶ç‚¹çš„åˆ‡çº¿çš„è·ç¦»åˆšå¥½æ˜¯åŠå¾„ã€‚è€ŒäºŒæ¬¡è´å¡å°”æ›²çº¿ç”»å‡ºçš„æ˜¯æ›´å¥½çš„æ›²çº¿ï¼Œå®ƒæ²¡æœ‰åŠå¾„çš„é™åˆ¶ï¼Œç”»å‡ºçš„å¼§çº¿å¹¶ä¸æ˜¯æŸä¸ªåœ†çš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„APIå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¶ä¸­(cpx, cpy)æ˜¯æ§åˆ¶ç‚¹ ï¼ˆx, yï¼‰æ˜¯ç»ˆç‚¹</span></span><br><span class="line">context.quadraticCurveTo(cpx, cpy, x, y);</span><br></pre></td></tr></table></figure><p>åŒæ ·æˆ‘ä»¬ç”»ä¸Šé¢çš„å››åˆ†ä¹‹ä¸€åœ†å¯ä»¥è¿™ä¹ˆå†™ï¼Œæ•ˆæœä¸ä¹‹å‰æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">210</span>, <span class="number">75</span>);</span><br><span class="line">context.quadraticCurveTo(<span class="number">210</span>, <span class="number">135</span>, <span class="number">150</span>, <span class="number">135</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">210</span>, <span class="number">75</span>);</span><br><span class="line"><span class="comment">// ç»“æŸç‚¹ä¿®æ”¹äº†ä¸€ä¸‹</span></span><br><span class="line">context.quadraticCurveTo(<span class="number">210</span>, <span class="number">135</span>, <span class="number">100</span>, <span class="number">135</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/12.jpeg" alt="äºŒæ¬¡è´å¡å°”æ›²çº¿"></p><h2 id="ä¸‰æ¬¡è´å¡å°”æ›²çº¿"><a href="#ä¸‰æ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="ä¸‰æ¬¡è´å¡å°”æ›²çº¿"></a>ä¸‰æ¬¡è´å¡å°”æ›²çº¿</h2><p>å¤§å®¶çŒœçŒœï¼Œä¸‰æ¬¡è´å¡å°”æ›²çº¿æ˜¯å‡ ä¸ªæ§åˆ¶ç‚¹ï¼Œå‡ ä¸ªç»“æŸç‚¹ï¼Ÿå“ˆå“ˆï¼Œå½“ç„¶æ˜¯2ä¸ªæ§åˆ¶ç‚¹ï¼Œ1ä¸ªç»“æŸç‚¹äº†ï¼Œæ€ä¹ˆå¯èƒ½æœ‰2ä¸ªç»“æŸçš„ä½ç½®å‘¢ï¼APIå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¶ä¸­(cp1x, cp1y)æ˜¯æ§åˆ¶ç‚¹1 (cp2x, cp2y)æ˜¯æ§åˆ¶ç‚¹2 ï¼ˆx, yï¼‰æ˜¯ç»ˆç‚¹</span></span><br><span class="line">context.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);</span><br></pre></td></tr></table></figure><p>ç»™ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">50</span>, <span class="number">75</span>);</span><br><span class="line">context.bezierCurveTo(<span class="number">100</span>, <span class="number">20</span>, <span class="number">200</span>, <span class="number">130</span>, <span class="number">250</span>, <span class="number">75</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾å¦‚ä¸‹ï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ2ï¼‰ï¼šæ›²çº¿å›¾å½¢/13.jpeg" alt="ä¸‰æ¬¡è´å¡å°”æ›²çº¿"></p>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢</title>
      <link href="/2019/06/15/Canvas%E7%B3%BB%E5%88%97%EF%BC%881%EF%BC%89%EF%BC%9A%E7%9B%B4%E7%BA%BF%E5%9B%BE%E5%BD%A2/"/>
      <url>/2019/06/15/Canvas%E7%B3%BB%E5%88%97%EF%BC%881%EF%BC%89%EF%BC%9A%E7%9B%B4%E7%BA%BF%E5%9B%BE%E5%BD%A2/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å‰ç«¯æœ€ä»¤äººå…´å¥‹çš„æŠ€æœ¯è«è¿‡äºCanvasæŠ€æœ¯ã€‚å®ƒå¯ä»¥åˆ¶ä½œå‡ºæ›´åŠ ç»šä¸½çš„æ•ˆæœï¼Œç”šè‡³å®Œå…¨å¯ä»¥èƒœä»»æ¸¸æˆå¼€å‘ã€‚æœ€è¿‘æˆ‘ä¹Ÿåœ¨å­¦ä¹ Canvasç›¸å…³çš„æŠ€æœ¯ï¼Œæ€»æ˜¯æƒ³æ‹¿å‡ºæ¥è·Ÿå¤§å®¶ä¸€èµ·åˆ†äº«åˆ†äº«ï¼Œç”±äºè¿™å—æŠ€æœ¯æ¯”è¾ƒåºå¤§ï¼Œæ‰€ä»¥æˆ‘å°±åˆ†ç« èŠ‚ä¸€ç« ä¸€ç« åœ°è·Ÿå¤§å®¶åˆ†äº«ã€‚è¿™å‡ ç« èŠ‚ä¸­æˆ‘ä»¬å¹¶ä¸æ¶‰åŠwebGLç›¸å…³çš„çŸ¥è¯†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±ç©ä¸€ç©ã€‚</p><p>æˆ‘ä»¬çš„å…¨éƒ¨ä»£ç å¯ä»¥åœ¨è¿™ä¸ªç½‘å€æŸ¥çœ‹ï¼š<a href="https://github.com/KaiOrange/canvas-demo" target="_blank" rel="noopener">https://github.com/KaiOrange/canvas-demo</a>ã€‚</p><hr><h2 id="å¿«é€Ÿä¸Šæ‰‹"><a href="#å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹"></a>å¿«é€Ÿä¸Šæ‰‹</h2><p>åœ¨HTML5ä¸­ï¼Œæ¶Œç°äº†å¾ˆå¤šçš„æ–°æŠ€æœ¯ï¼Œå…¶ä¸­æœ€ä»¤äººå…´å¥‹çš„å°±æ˜¯Canvasã€‚æˆ‘å°±ä¸å–å…³å­äº†ï¼Œç›´æ¥å¿«é€Ÿä½¿ç”¨å§ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰è¿™æ ·çš„HTMLä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Canvasç³»åˆ—<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span> &gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#canvas</span>&#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#f5f5f5</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ˜¯æˆ‘ä»¬çš„æ¨¡æ¿ï¼Œå¦‚æœä½ æƒ³å¥½å¥½å­¦ä¹ çš„è¯ï¼Œå»ºè®®ä½ ä¹Ÿåˆ›å»ºä¸€ä¸ª<code>index.html</code>æ–‡ä»¶ï¼Œå¹¶ä¸”æŠŠä»£ç æ•²ä¸€ä¸‹ã€‚æ­¤æ—¶æˆ‘ä»¬çœ‹åˆ°çš„æ•ˆæœæ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/1.jpeg" alt="åˆå§‹canvasæ•ˆæœ"></p><p>canvasæ ‡ç­¾é»˜è®¤çš„æ ·å¼æ˜¯å¤§å°ä¸º<code>300 * 150</code>åƒç´ ã€<code>æ²¡æœ‰èƒŒæ™¯è‰²</code>çš„è¡Œå†…æ›¿æ¢å…ƒç´ ï¼Œç±»ä¼¼äºimgæ ‡ç­¾ã€‚æˆ‘ä»¬è¿™é‡Œä¸ºäº†çœ‹ä¸Šå»æ›´åŠ æ–¹ä¾¿ç»™äº†ä¸€ä¸ªèƒŒæ™¯å…ƒç´ ã€‚<br>è¦ä½¿ç”¨canvasè¿›è¡Œç»˜å›¾ï¼Œéœ€è¦ä½¿ç”¨JavaScriptå»æ§åˆ¶å®ƒï¼Œç°åœ¨æˆ‘ä»¬å°±åœ¨scriptæ ‡ç­¾ä¸­æ·»åŠ JavaScriptä»£ç æ¥ç»˜åˆ¶ä¸€æ¡ç›´çº¿ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. è·å–canvaså…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="comment">// 2. è·å–ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"><span class="comment">// 3. ç»˜åˆ¶å›¾ç‰‡</span></span><br><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">75</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">75</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/2.jpeg" alt="ç»˜åˆ¶ä¸€æ¡çº¿"></p><p>é€šè¿‡ä¸Šé¢å‡ è¡Œä»£ç æˆ‘ä»¬çŸ¥é“canvasç»˜å›¾çš„æ—¶å€™æ— éå°±æ˜¯ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol><li>è·å–canvaså…ƒç´ </li><li>è·å–ä¸Šä¸‹æ–‡å¯¹è±¡</li><li>ç»˜åˆ¶å›¾ç‰‡</li></ol><p>ç¬¬ä¸€æ­¥è·å–canvaså…ƒç´ å…¶å®å°±æ˜¯DOMæ“ä½œï¼Œè·å–åˆ°çš„canvaså…ƒç´ ä¹Ÿæ˜¯DOMå…ƒç´ ï¼ŒDOMå…ƒç´ å°±æœ‰å¤§é‡çš„DOMç›¸å…³çš„å±æ€§å’Œæ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨<code>console.table(canvas);</code>æ‰“å°ä¸€ä¸‹ã€‚canvasä¸­æœ€é‡è¦çš„å±æ€§å’Œæ–¹æ³•è«è¿‡äºè¿™å››ä¸ªï¼š</p><table><thead><tr><th>å±æ€§æˆ–æ–¹æ³•</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>width</td><td>é•¿åº¦</td></tr><tr><td>height</td><td>å®½åº¦</td></tr><tr><td>getContext(â€˜2dâ€™)</td><td>è·å–2Dä¸Šä¸‹æ–‡ï¼Œå¦‚æœæ˜¯WebGLå¯ä»¥ä¼ webgl</td></tr><tr><td>toDataURL()</td><td>è·å–è½¬æ¢çš„ä½å›¾å­—ç¬¦ä¸²ï¼ˆåé¢ä¼šç®€ç»ï¼‰</td></tr></tbody></table><p>ç¬¬äºŒæ­¥ä¸­ä¼ é€’çš„æ˜¯<code>2d</code>ï¼Œè¿™æ ·ä¼šè¿”å›ä¸€ä¸ªç»˜åˆ¶2Då›¾å½¢çš„ä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯<code>context</code>å¯¹è±¡ã€‚å› ä¸ºcanvasæ˜¯ç”»å¸ƒçš„æ„æ€ï¼Œæœ‰äººä¹ŸæŠŠä¸Šä¸‹æ–‡å¯¹è±¡æˆä¸ºç”»ç¬”ã€‚å¦‚æœè¦ç»˜åˆ¶3Då›¾åƒæ€ä¹ˆåŠï¼Ÿå¯ä»¥ä¼ ä¸€ä¸ª<code>webgl</code>æ¥è·å–WebGLçš„ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·å°±å¯ä»¥ç»˜åˆ¶3Dæ•ˆæœäº†ï¼ˆWebGLæ˜¯åŸºäºOpenGLï¼Œæ˜¯å·²å­˜åœ¨çš„ä¸€å¥—æŠ€æœ¯ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ä½¿ç”¨3Dæ¥è·å–3Dçš„ä¸Šä¸‹æ–‡ï¼Œæœ‰å¯èƒ½ä»¥åå¼€å‘å‡ºæ€§èƒ½æ›´åŠ ä¼˜è¶Šçš„3Dç»˜åˆ¶ç³»ç»Ÿçš„è¯å¯èƒ½ä¼šå–ä»£WebGLï¼Œå½“ç„¶çŸ­æœŸå†…æ˜¯ä¸ä¼šçš„ï¼Œæ¯•ç«ŸWebGLåŠ ä¸Šéƒ¨åˆ†åº“ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œæ€§èƒ½ä¹ŸæŒºä¸é”™çš„ï¼‰ã€‚</p><p>æœ€é‡è¦çš„ç¬¬ä¸‰æ­¥ï¼Œcanvasæä¾›äº†å¤§é‡çš„APIä¾›æˆ‘ä»¬ç»˜åˆ¶å›¾ç‰‡ï¼Œæˆ‘ä»¬ä¸‹é¢å‡ ä¸ªç« èŠ‚ä¼šé‡ç‚¹ç®€ç»ã€‚</p><p>æœ€åéœ€è¦æ³¨æ„2ç‚¹ï¼š</p><ol><li>è®¡ç®—æœºä¸­é™¤äº†WebGLç­‰å°‘æ•°åæ ‡ç³»çš„yè½´æ˜¯å‘ä¸Šçš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯å‘ä¸‹çš„ï¼Œæˆ‘ä»¬çš„2dä¸Šä¸‹æ–‡çš„yè½´å°±æ˜¯å‘ä¸‹çš„ã€‚</li><li>è®¾ç½®canvaså¤§å°çš„æ—¶å€™ä½¿ç”¨HTMLä¸­çš„å±æ€§è®¾ç½®ï¼Œè€Œä¸è¦ä½¿ç”¨CSSè®¾ç½®ï¼Œå¦‚æœä½¿ç”¨CSSè®¾ç½®åä¼šç¼©æ”¾ã€‚</li></ol><p>å¯¹äºç¬¬äºŒæ¡ç‰¹åˆ«é‡è¦ï¼Œæˆ‘ä»¬è¯•ç€ä¿®æ”¹CSSï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#canvas</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨çš„æ•ˆæœæ˜¯ï¼š</p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/3.jpeg" alt="CSSæ§åˆ¶å®½åº¦"></p><p>å¯ä»¥çœ‹åˆ°çº¿æ®µä»ç„¶æ˜¯å±…ä¸­çš„ï¼Œè€Œä¸”æ˜æ˜¾ç²—äº†ï¼Œè¿™æ˜¯ç¼©æ”¾å¯¼è‡´çš„ã€‚<br>ä½¿ç”¨HTMLæ§åˆ¶å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"150"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/4.jpeg" alt="HTMLæ§åˆ¶å®½åº¦"></p><h2 id="ç»˜åˆ¶2æ¡çº¿æ®µ"><a href="#ç»˜åˆ¶2æ¡çº¿æ®µ" class="headerlink" title="ç»˜åˆ¶2æ¡çº¿æ®µ"></a>ç»˜åˆ¶2æ¡çº¿æ®µ</h2><p>ç»˜åˆ¶çº¿æ®µç”¨åˆ°2ä¸ªAPIï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†ç”»ç¬”ç§»åŠ¨åˆ°(x1, y1)çš„åæ ‡</span></span><br><span class="line">context.moveTo(x1, y1);</span><br><span class="line"><span class="comment">// ç”»çº¿åˆ°(x2, y2)çš„åæ ‡</span></span><br><span class="line">context.lineTo(x2, y2);</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°2æ­¥ä»¥åå…¶å®å¹¶æ²¡æœ‰ç”»çº¿ï¼Œé€šè¿‡ä¸Šé¢å¯ä»¥çœ‹åˆ°è¿˜éœ€è¦è°ƒç”¨<code>context.stroke();</code>ï¼Œè¿™ä¸€ç‚¹ä¸€å®šè¦è®°ä½ã€‚ä¸ºä»€ä¹ˆè¦å¤šæ­¤ä¸€æ­¥å‘¢ï¼Ÿä¸€æ–¹é¢æ˜¯å› ä¸ºä¸€æ¬¡æ€§ç»Ÿä¸€ç»˜åˆ¶ä¼šå‡å°‘å†…å­˜çš„å¼€é”€ï¼Œå¦ä¸€ä¸ªåŸå› æ˜¯å› ä¸ºcanvasä¸ä»…ä»…æ”¯æŒæè¾¹ï¼ˆstrokeï¼‰è¿˜æ”¯æŒå¡«å……ï¼ˆfillï¼‰ï¼Œåé¢é©¬ä¸Šå°±ä¼šé‡åˆ°äº†ã€‚</p><p>é‚£å¦‚æœç”»2æ¡çº¿å‘¢ï¼Ÿæˆ‘ä»¬å°±é‡å¤ä½¿ç”¨ä¸Šé¢ä¸¤ä¸ªAPIï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">65</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">65</span>);</span><br><span class="line">context.moveTo(<span class="number">10</span>, <span class="number">85</span>);</span><br><span class="line">context.lineTo(<span class="number">290</span>, <span class="number">85</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/5.jpeg" alt="ç»˜åˆ¶2æ¡çº¿"></p><p>ä½ å¯èƒ½å·²ç»çœ‹åˆ°äº†æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†<code>context.strokeStyle=&#39;blue&#39;;</code>æŠŠçº¿æ®µçš„é¢œè‰²æ”¹æˆè“è‰²ï¼ˆè€Œä¸æ˜¯é»˜è®¤çš„é»‘è‰²ï¼‰ï¼Œè¿™ä¸ªå±æ€§ä¸€å®šè¦åœ¨strokeä¹‹å‰è°ƒç”¨ï¼Œå¦åˆ™éƒ½æè¾¹ç»“æŸäº†æ‰è®¾ç½®ï¼Œæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œè¿™æ ·æ”¹å˜çš„æ˜¯ä¸‹é¢æè¾¹çš„é¢œè‰²ï¼Œå°±å¥½æ¯”ä½ æ‹¿é»‘è‰²çš„ç¬”ç”»äº†ä¸€æ¡çº¿ï¼Œç»“æœä½ åˆæ‹¿èµ·äº†ä¸€åªè“è‰²çš„ç¬”ï¼Œç„¶åä½ å¸Œæœ›ä½ åˆšåˆšè¯çš„çº¿æ˜¯è“è‰²çš„ã€‚<br>è¿™é‡Œçš„<code>strokeStyle</code>æ˜¯æè¾¹çš„æ ·å¼ï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯ç‰¹æ®Šé¢œè‰²å€¼å¦‚<code>blue</code>ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>rab(0,0,255)</code>,è¿˜å¯ä»¥æ˜¯<code>raba(0,0,255,1)</code>,æ›´å¯ä»¥æ˜¯<code>#0000FF</code>ï¼Œç”šè‡³æ˜¯å›¾ç‰‡ã€æ¸å˜ç­‰ï¼ˆåé¢ä¼šè®²åˆ°ï¼Œæ‰€ä»¥æ²¡æœ‰å«<code>strokeColor</code>ï¼‰ã€‚</p><h2 id="æè¾¹çŸ©å½¢"><a href="#æè¾¹çŸ©å½¢" class="headerlink" title="æè¾¹çŸ©å½¢"></a>æè¾¹çŸ©å½¢</h2><p>çŸ©å½¢å°±æ˜¯4æ¡çº¿æ®µï¼Œæˆ‘ä»¬ç›´æ¥å¼€ç”»ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">context.moveTo(<span class="number">90</span>, <span class="number">15</span>);</span><br><span class="line">context.lineTo(<span class="number">210</span>, <span class="number">15</span>);</span><br><span class="line">context.lineTo(<span class="number">210</span>, <span class="number">135</span>);</span><br><span class="line">context.lineTo(<span class="number">90</span>, <span class="number">135</span>);</span><br><span class="line">context.lineTo(<span class="number">90</span>, <span class="number">15</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/6.jpeg" alt="æè¾¹çŸ©å½¢"></p><p>æˆ‘ä»¬ç»˜åˆ¶äº†ä¸€ä¸ªå®½é«˜éƒ½ä¸º120pxçš„çŸ©å½¢ï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢ï¼‰ã€‚ç”±ä¸Šå¯çŸ¥<code>lineTo</code>åˆ’çº¿çš„èµ·ç‚¹æ˜¯<strong>ä¸Šä¸€æ¬¡ç§»åŠ¨åˆ°çš„åœ°æ–¹æˆ–è€…ä¸Šæ¬¡åˆ’çº¿ç»“æŸçš„åœ°æ–¹</strong>ï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰å¿…è¦æ¯æ¬¡éƒ½<code>moveTo</code>å½“å‰ä½ç½®ã€‚<br>ç”±äºçŸ©å½¢æ˜¯éå¸¸é‡è¦çš„å›¾å½¢ï¼Œæ‰€ä»¥canvasæä¾›äº†ä¸€ä¸ªæ›´åŠ æ–¹ä¾¿çš„APIï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»˜åˆ¶ä¸€ä¸ªèµ·å§‹åæ ‡ä¸º:(x, y) å®½åº¦:width é«˜åº¦:height çš„çŸ©å½¢</span></span><br><span class="line">context.rect(x, y, width, height);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–°çš„APIç»˜åˆ¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">context.rect(<span class="number">90</span>, <span class="number">15</span>, <span class="number">120</span>, <span class="number">120</span>);</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure><p>è¿™ä¸‹æ˜¯ä¸æ˜¯å®¹æ˜“å¤šäº†ï¼Ÿä»€ä¹ˆï¼Ÿè¿˜ä¸å®¹æ˜“ï¼Œé‚£ä¹ˆç»™ä½ ç®€ç»ä¸€ä¸ªæ›´ç®€å•çš„APIï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»˜åˆ¶ä¸€ä¸ªèµ·å§‹åæ ‡ä¸º:(x, y) å®½åº¦:width é«˜åº¦:height çš„çŸ©å½¢</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨strokeRectå°†ä¼šç›´æ¥ç»˜åˆ¶å‡ºæ¥ è€Œä¸éœ€è¦åœ¨è°ƒç”¨stroke()äº†</span></span><br><span class="line">context.strokeRect(x, y, width, height);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–°çš„APIç»˜åˆ¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.strokeRect(<span class="number">90</span>, <span class="number">15</span>, <span class="number">120</span>, <span class="number">120</span>);</span><br></pre></td></tr></table></figure><h2 id="å¡«å……çŸ©å½¢"><a href="#å¡«å……çŸ©å½¢" class="headerlink" title="å¡«å……çŸ©å½¢"></a>å¡«å……çŸ©å½¢</h2><p>å¡«å……å’Œæè¾¹ä¸€æ ·ï¼Œåªæ˜¯æè¾¹çš„æ—¶å€™è°ƒç”¨çš„æ˜¯strokeï¼Œå¡«å……çš„æ—¶å€™æ˜¯fillï¼Œçœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">context.moveTo(<span class="number">90</span>, <span class="number">15</span>);</span><br><span class="line">context.lineTo(<span class="number">210</span>, <span class="number">15</span>);</span><br><span class="line">context.lineTo(<span class="number">210</span>, <span class="number">135</span>);</span><br><span class="line">context.lineTo(<span class="number">90</span>, <span class="number">135</span>);</span><br><span class="line">context.lineTo(<span class="number">90</span>, <span class="number">15</span>);</span><br><span class="line">context.fillStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/7.jpeg" alt="æè¾¹çŸ©å½¢"></p><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ä¿®æ”¹å¡«å……çŸ©å½¢çš„æ ·å¼æ˜¯<code>fillStyle</code>ï¼Œå…¶ç”¨æ³•è·Ÿæè¾¹æ—¶æ˜¯ä¸€æ ·çš„ã€‚<br>æ­¤æ—¶ä½ ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œé‚£ä¹ˆæè¾¹çŸ©å½¢æœ‰ç®€å†™å—ï¼Ÿå¦‚æœä½ é—®çš„è¯ï¼Œè¯´æ˜ä½ çš„å­¦ä¹ åŠ›è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå…ˆç»™ä½ ä¸€ä¸ªèµã€‚å½“ç„¶æœ‰äº†ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å†™1</span></span><br><span class="line">context.rect(<span class="number">90</span>, <span class="number">15</span>, <span class="number">120</span>, <span class="number">120</span>);</span><br><span class="line">context.fillStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.fill();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å†™2</span></span><br><span class="line">context.fillStyle=<span class="string">'blue'</span>;</span><br><span class="line">context.fillRect(<span class="number">90</span>, <span class="number">15</span>, <span class="number">120</span>, <span class="number">120</span>);</span><br></pre></td></tr></table></figure><p>å¦‚æœæ—¢è¦æè¾¹åˆè¦å¡«å……æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥çœ‹è¿™ä¸ªï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.rect(<span class="number">90</span>, <span class="number">15</span>, <span class="number">120</span>, <span class="number">120</span>);</span><br><span class="line">context.strokeStyle=<span class="string">'red'</span>;</span><br><span class="line">context.stroke();</span><br><span class="line">context.fillStyle=<span class="string">'rgba(0,0,255,0.5)'</span>;</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼Œåƒä¸åƒCSSç»™äº†ä¸€ä¸ªèƒŒæ™¯å’Œä¸€ä¸ªè¾¹æ¡†ï¼Ÿæ²¡é”™å¡«å……å°±ç±»ä¼¼äºæ˜¯è®¾ç½®èƒŒæ™¯ï¼Œæè¾¹å°±ç±»ä¼¼äºç»™ä¸ªè¾¹æ¡†ã€‚</p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/8.jpeg" alt="æè¾¹å’Œå¡«å……"></p><h2 id="ç»˜åˆ¶ç®€æ˜“åæ ‡ç³»"><a href="#ç»˜åˆ¶ç®€æ˜“åæ ‡ç³»" class="headerlink" title="ç»˜åˆ¶ç®€æ˜“åæ ‡ç³»"></a>ç»˜åˆ¶ç®€æ˜“åæ ‡ç³»</h2><p>ä¸ºäº†æ›´æ–¹ä¾¿åé¢ä½ çš„ä½¿ç”¨æˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªç®€æ˜“çš„åæ ‡ç³»å§ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2019/06/15/Canvasç³»åˆ—ï¼ˆ1ï¼‰ï¼šç›´çº¿å›¾å½¢/9.jpeg" alt="ç®€æ˜“åæ ‡ç³»"></p><p>å®Œæ•´HTMLä»£ç å¦‚ä¸‹ï¼Œåé¢çš„å¦‚æœä¸å‡ºæ„å¤–çš„è¯å°±ä¼šåœ¨è¿™ä¸ªåŸºç¡€ä¸Šç»˜åˆ¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Canvasç³»åˆ—<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span> &gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#canvas</span>&#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#f5f5f5</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> sW = <span class="number">1</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> lW = <span class="number">4</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> spacing = <span class="number">10</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; canvas.width; x+=spacing) &#123;</span></span><br><span class="line"><span class="undefined">      context.moveTo(x, 0);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span>(x % (spacing * <span class="number">5</span>) === <span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="undefined">        context.lineTo(x, lW);</span></span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">        context.lineTo(x, sW);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> y = <span class="number">0</span>; y &lt; canvas.height; y+=spacing) &#123;</span></span><br><span class="line"><span class="undefined">      context.moveTo(0, y);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span>(y % (spacing * <span class="number">5</span>) === <span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="undefined">        context.lineTo(lW, y);</span></span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">        context.lineTo(sW, y);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    context.stroke();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// å…¶ä»–ä»£ç </span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å»ºç«‹è‡ªå·±çš„npmé•œåƒæœåŠ¡å™¨</title>
      <link href="/2019/06/15/%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84npm%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2019/06/15/%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84npm%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>å¥½å¤šå…¬å¸æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œéœ€è¦æŠŠå…¬å¸å†…éƒ¨çš„ä¾èµ–åŒ…æ”¾åœ¨npmæœåŠ¡å™¨ä¸Šè¿™æ ·å®‰è£…çš„æ—¶å€™ç›´æ¥ä½¿ç”¨<code>npm install</code>å®‰è£…äº†ã€‚åŒæ—¶ï¼Œå…¬å¸å¯èƒ½ä¸å¸Œæœ›è‡ªå·±çš„ä»£ç è¢«åˆ«äººçœ‹åˆ°ï¼Œé‚£ä¹ˆå»ºç«‹è‡ªå·±çš„npmé•œåƒæœåŠ¡å™¨æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚æœ€è¿‘æˆ‘ä¹Ÿé‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œå¸Œæœ›åœ¨è‡ªå·±å…¬å¸å†…éƒ¨æ­å»ºä¸€ä¸ªnpmé•œåƒæœåŠ¡å™¨ã€‚</p><p>æ­å»ºè¿™ä¸ªæœåŠ¡å™¨æœ‰ä¸¤ç§åŠæ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨cnpmæ¥åšï¼Œä¼˜ç‚¹æ˜¯åŠŸèƒ½å¼ºå¤§ï¼›è¿˜æœ‰ä¸€ç§è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨<a href="https://github.com/verdaccio/verdaccio" target="_blank" rel="noopener">verdaccio</a>ã€‚</p><p>cnpmæ–¹å¼æ˜¯æœ€å¸¸ç”¨çš„ï¼Œç½‘ä¸Šæœ‰å¥½å¤šç®€ç»ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹<a href="https://www.cnblogs.com/jymz/p/4511284.html" target="_blank" rel="noopener">è¿™ç¯‡</a>ï¼Œæˆ‘ä»¬è¿™é‡Œè®²çš„æ˜¯ç¬¬äºŒç§æ–¹æ³•ã€‚ä¸ºä»€ä¹ˆä½¿ç”¨ç¬¬äºŒç§æ–¹å¼å‘¢ï¼Œå› ä¸ºè¿™ç§æ–¹å¼å®åœ¨æ˜¯å¤ªç®€å•äº†ï¼ˆå¼€ç®±å³ç”¨ï¼‰ï¼Œå¯¹äºä¸€èˆ¬çš„å°å…¬å¸æ¥è¯´è¿™ç§æ–¹å¼éå¸¸åˆé€‚ã€‚å¦‚æœä½ çœ‹è¿‡å…¶ä»–çš„èµ„æ–™å¯èƒ½ä¼šäº†è§£åˆ°ä¸€ä¸ªåº“å«<code>sinopia</code>ä¹Ÿæ˜¯å¹²è¿™äº‹çš„ï¼Œå®ƒå’Œ<code>verdaccio</code>çš„ç”¨æ³•åŸºæœ¬å·®ä¸å¤šï¼Œå®é™…ä¸Š<code>verdaccio</code>å°±æ˜¯fork<code>sinopia</code>çš„ï¼Œè€Œ<code>verdaccio</code>èƒ½æ´»ä¸‹æ¥ï¼Œè¯´æ˜<code>verdaccio</code>è¦æ›´åŠ ä¼˜ç§€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±ä¸»è¦ç®€ç»ä¸€ä¸‹<code>verdaccio</code>çš„ä½¿ç”¨ã€‚</p><hr><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><ol><li><p>ä¸‹è½½å…¨å±€ä¾èµ–</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g verdaccio</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">verdaccio</span><br></pre></td></tr></table></figure></li></ol><p>å¥½äº†å—ï¼Ÿæ²¡é”™å¥½äº†ï¼è¿™ä¸ªæ—¶å€™ä½ å·²ç»å¯ä»¥è®¿é—®äº†ã€‚å½“ä½ å¯åŠ¨ä»¥åä¸å‡ºæ„å¤–çš„è¯ï¼Œä¼šæœ‰4è¡Œæ—¥å¿—ï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><p><img src="/2019/06/15/å»ºç«‹è‡ªå·±çš„npmé•œåƒæœåŠ¡å™¨/1.png" alt="ã€Š4è¡Œæ—¥å¿—ã€‹"></p><p>è¿™4è¡Œæ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œå…¶ä¸­ç¬¬ä¸€è¡Œæ˜¯verdaccioçš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œæ˜¯æ’ä»¶åŠ è½½ä¿¡æ¯ï¼Œç¬¬äºŒè¡Œæ˜¯é•œåƒæºçš„URLï¼Œé€šå¸¸æˆ‘ä»¬éœ€è¦å¼€æ”¾åˆ°æ•´ä¸ªå†…ç½‘ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸å¤ªå¸Œæœ›ä½¿ç”¨<code>localhost</code>å»è®¿é—®ï¼Œæ›´å¤šæƒ…å†µä¸‹å¸Œæœ›ä½¿ç”¨IPæˆ–è€…åŸŸåå»è®¿é—®ï¼Œè¿™ä¸ªæ—¶å€™å°±å¾—ä¿®æ”¹é…ç½®äº†ã€‚</p><h2 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h2><p>æ‰“å¼€é…ç½®æ–‡ä»¶<code>/Users/admin/.config/verdaccio/config.yaml</code>ï¼ˆå…·ä½“æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥å‚è€ƒä¸Šé¢ç¬¬ä¸€è¡Œæ—¥å¿—ï¼‰ï¼Œç„¶ååœ¨æœ€ä¸‹é¢æ·»åŠ ä¸€è¡Œï¼š<code>listen: 0.0.0.0:4873</code>ã€‚</p><p>å¦å¤–æˆ‘ä»¬çš„å›½å†…çš„é•œåƒæºä¸€èˆ¬æ˜¯ä½¿ç”¨æ·˜å®é•œåƒå»ä¸‹è½½ä¸œè¥¿çš„ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠæˆ‘ä»¬çš„é•œåƒæºçš„æ¥æºè®¾ç½®ä¸ºæ·˜å®çš„é•œåƒæºï¼Œè¿™æ ·å¯ä»¥æé«˜å›½å†…çš„ä¸‹è½½é€Ÿåº¦ã€‚åšæ³•ä¹Ÿæ˜¯ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>uplinks</code>ä¸‹é¢ä¸¤è¡ŒæŠŠurlæ›¿æ¢ä¸€ä¸‹ï¼Œå…·ä½“çš„å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a list of other known repositories we can talk to</span></span><br><span class="line"><span class="attr">uplinks:</span></span><br><span class="line"><span class="attr">  npmjs:</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">https://registry.npm.taobao.org/</span></span><br></pre></td></tr></table></figure><p>é…ç½®å¥½åå°±å¤§åŠŸå‘Šæˆäº†ï¼ŒæŠŠé…ç½®æ–‡ä»¶ä¿å­˜ä¸€ä¸‹ï¼Œç„¶åé‡å¯<code>verdaccio</code>ï¼ˆå‘½ä»¤è¡Œä¸­<code>Ctrl + C</code>ï¼Œç„¶åé‡æ–°è¿è¡Œ<code>verdaccio</code>å‘½ä»¤ï¼‰ã€‚</p><p>æ­¤æ—¶å¯ä»¥åœ¨æµè§ˆå™¨é”®å…¥<code>http://ä½ çš„IP:4873/</code>æˆ–è€…<code>http://localhost:4873/</code>æ¥è®¿é—®ç®¡ç†é¡µé¢ã€‚</p><h2 id="åˆ‡æ¢åˆ°æˆ‘ä»¬çš„é•œåƒæº"><a href="#åˆ‡æ¢åˆ°æˆ‘ä»¬çš„é•œåƒæº" class="headerlink" title="åˆ‡æ¢åˆ°æˆ‘ä»¬çš„é•œåƒæº"></a>åˆ‡æ¢åˆ°æˆ‘ä»¬çš„é•œåƒæº</h2><p>åˆ‡æ¢é•œåƒæºå¾ˆç®€å•ï¼Œåªè¦ä¸€è¡Œä»£ç å°±æå®šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry http://ä½ çš„IP:4873/</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¸ºäº†æ›´å¥½çš„å¯¹é•œåƒæºç®¡ç†æˆ‘å»ºè®®ä½¿ç”¨<code>nrm</code>æ¥åˆ‡æ¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br><span class="line">nrm add verdaccio http://ä½ çš„IP:4873/</span><br><span class="line">nrm use verdaccio</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘æŠŠæˆ‘ä»¬çš„é•œåƒæºå‘½åä¸º<code>verdaccio</code>ï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºä½ å–œæ¬¢çš„åå­—ï¼Œå…¬å¸å†…éƒ¨å»ºè®®ä½¿ç”¨å…¬å¸çš„åç§°ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>nrm ls</code>æŸ¥çœ‹æ‰€æœ‰é•œåƒæºï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>nrm use XXX</code>æ¢æˆé•œåƒæºåˆ—è¡¨ä¸­çš„å…¶ä»–é•œåƒæºã€‚</p><h2 id="ä½¿ç”¨pm2å¯åŠ¨"><a href="#ä½¿ç”¨pm2å¯åŠ¨" class="headerlink" title="ä½¿ç”¨pm2å¯åŠ¨"></a>ä½¿ç”¨pm2å¯åŠ¨</h2><p>æˆ‘ä»¬ä¸Šé¢ç›´æ¥è¿è¡Œå‘½ä»¤<code>verdaccio</code>å¯åŠ¨çš„ï¼Œè¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ï¼Œæœ‰çš„æ—¶å€™ä¸ºäº†æ›´åŠ ä¸¥è°¨çš„æ–¹å¼å¯ä»¥ä½¿ç”¨<code>pm2</code>ã€‚<code>pm2</code>æ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ç›´æ¥ä½¿ç”¨å®ƒå¯åŠ¨äº†ï¼Œæ›´å¤šä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹<a href="https://github.com/Unitech/pm2" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g pm2</span><br><span class="line">pm2 start verdaccio</span><br></pre></td></tr></table></figure><h2 id="ä¸Šä¼ ä¸€ä¸ªä¾èµ–åŒ…"><a href="#ä¸Šä¼ ä¸€ä¸ªä¾èµ–åŒ…" class="headerlink" title="ä¸Šä¼ ä¸€ä¸ªä¾èµ–åŒ…"></a>ä¸Šä¼ ä¸€ä¸ªä¾èµ–åŒ…</h2><p>è¯´äº†è¿™ä¹ˆå¤šæˆ‘ä»¬ç°åœ¨å¯ä»¥å¼€å‘ä¸€ä¸ªè‡ªå·±çš„åŒ…ï¼Œç„¶åä¸Šä¼ åˆ°æˆ‘ä»¬çš„é•œåƒæºä¸Šã€‚<br>é¦–å…ˆåˆ‡æ¢åˆ°æˆ‘ä»¬è‡ªå·±çš„æºä¸Šï¼Œç„¶åæ·»åŠ ç”¨æˆ·ï¼ˆæˆ‘ä»¬é•œåƒæºä¸Šçš„ç”¨æˆ·ä¸æ˜¯npmé•œåƒæºä¸­çš„ç”¨æˆ·ï¼‰ã€‚æ·»åŠ ç”¨æˆ·ä½¿ç”¨ä¸‹é¢å‘½ä»¤ï¼Œç„¶åä¾æ¬¡è¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ã€‚è¾“å…¥å¯†ç çš„æ—¶å€™æ˜¯çœ‹ä¸åˆ°å­—ç¬¦çš„ï¼Œå°½ç®¡è¾“å…¥å°±å¯ä»¥äº†ã€‚å½“æ“ä½œå®Œäº†ä¼šè¾“å‡ºä¸€è¡Œæ—¥å¿—<code>Logged in as orange on http://ä½ çš„IP:4873/.</code>è¡¨ç¤ºåˆ›å»ºç”¨æˆ·å¹¶ç™»å½•æˆåŠŸäº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm adduser</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>npm whoami</code>æŸ¥çœ‹ä½ æ˜¯å¦ç™»å½•æˆåŠŸäº†ã€‚</p><p>æ­¤æ—¶ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¾èµ–åŒ…ï¼Œç„¶åä¸Šä¼ ä¸Šå»äº†ã€‚æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªä¾èµ–åŒ…çš„åç§°ï¼Œæ¯”å¦‚å°±å«<code>my-package</code>ï¼Œæ‰¾ä¸€ä¸ªç›®å½•è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir my-package</span><br><span class="line">cd my-package</span><br><span class="line">npm init</span><br></pre></td></tr></table></figure><p><code>npm init</code>åä¼šè®©ä½ è¾“å…¥å…¶ä»–çš„é…ç½®é¡¹ï¼Œæ¯”å¦‚åŒ…åæ˜¯<code>my-package</code>ï¼Œå…¶ä»–çš„ç›´æ¥æŒ‰å›è½¦ï¼Œæœ€åè¾“å…¥ä¸€ä¸ª<code>yes</code>å°±å¯ä»¥äº†ã€‚æ­¤æ—¶ä½ ä¼šçœ‹åˆ°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªæ–‡ä»¶å¤¹å«<code>my-package</code>é‡Œé¢æœ‰ä¸ªæ–‡ä»¶<code>package.json</code>ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨<code>my-package</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª<code>index.js</code>çš„æ–‡ä»¶ã€‚è¾“å…¥ä¸‹é¢çš„ä»£ç ï¼Œå½“ç„¶å¦‚æœæƒ³è¾“å…¥å…¶ä»–çš„å°±çœ‹è‡ªå·±çš„å–œå¥½äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Hello World!`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬å·²ç»åˆ›å»ºå¥½äº†ä¸€ä¸ªéå¸¸ç®€å•çš„åŒ…ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä¸Šä¼ äº†ï¼Œä½¿ç”¨shell/cmdè¿›å…¥æˆ‘ä»¬çš„<code>my-package</code>ç›®å½•ï¼Œç„¶åè¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¦‚æœçœ‹åˆ°<code>+ my-package@1.0.0</code>è¯´æ˜å·²ç»ä¸Šä¼ æˆåŠŸäº†ï¼Œä½ å¯ä»¥ç”¨æµè§ˆå™¨æ‰“å¼€<code>http://ä½ çš„IP:4873/</code>ä½ ä¼šå‘ç°ç¡®å®å¤šäº†ä¸€ä¸ªåŒ…ã€‚</p><p>å¦‚æœä½ åœ¨ä¹‹åä¸Šä¼ çš„æ—¶å€™ä¸€å®šè¦ä¿®æ”¹<code>package.json</code>çš„<code>version</code>å­—æ®µï¼Œå¹¶ä¸”è¦å¤§äºç°åœ¨ï¼Œå¦åˆ™ä¸èƒ½ä¸Šä¼ ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤<code>npm version 1.0.1</code>ç›´æ¥ä¿®æ”¹ç‰ˆæœ¬å·ã€‚</p><h2 id="ä½¿ç”¨å¼€å‘å¥½çš„ä¾èµ–åŒ…"><a href="#ä½¿ç”¨å¼€å‘å¥½çš„ä¾èµ–åŒ…" class="headerlink" title="ä½¿ç”¨å¼€å‘å¥½çš„ä¾èµ–åŒ…"></a>ä½¿ç”¨å¼€å‘å¥½çš„ä¾èµ–åŒ…</h2><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬çš„ä¾èµ–åŒ…ï¼Œé¦–å…ˆåœ¨ä¸<code>my-package</code>åŒçº§ç›®å½•ä¸‹å†å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚å«<code>use-package</code>ã€‚åŒæ ·ä½¿ç”¨<code>npm init</code>å»åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®ã€‚å¹¶ä¸”åˆ›å»ºä¸€ä¸ª<code>index.js</code>çš„æ–‡ä»¶ã€‚</p><p>æ­¤æ—¶ä½ å¯ä»¥å®‰è£…æˆ‘ä»¬åˆšæ‰å‘å¸ƒçš„é‚£ä¸ªåŒ…äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install my-package</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”åœ¨<code>index.js</code>ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> helloWorld = <span class="built_in">require</span>(<span class="string">'my-package'</span>)</span><br><span class="line">helloWorld()</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¤§åŠŸå‘Šæˆï¼Œåœ¨shell/cmdä¸­æ‰“å¼€<code>use-package</code>æ–‡ä»¶å¤¹ï¼Œç„¶åè¾“å…¥å‘½ä»¤<code>node index</code>ï¼Œå¦‚æœçœ‹åˆ°<code>Hello World!</code>è¯´æ˜æˆ‘ä»¬ä¸Šä¼ çš„ä¾èµ–å·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npmé•œåƒ </tag>
            
            <tag> npmæº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šé«˜æ•ˆèƒ½ç¨‹åºå‘˜çš„ä¿®ç‚¼ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/05/26/%E3%80%8A%E9%AB%98%E6%95%88%E8%83%BD%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E4%BF%AE%E7%82%BC%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/05/26/%E3%80%8A%E9%AB%98%E6%95%88%E8%83%BD%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E4%BF%AE%E7%82%BC%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>ã€Šé«˜æ•ˆèƒ½ç¨‹åºå‘˜çš„ä¿®ç‚¼ã€‹å†™çš„æ˜¯ç»™ç¨‹åºå‘˜çš„ä¸€äº›å»ºè®®ã€‚ä¹¦ä¸­å¹¶æ²¡æœ‰æ¶‰åŠåˆ°ä»£ç ï¼Œè€Œæ˜¯ç¼–ç ä¹‹å¤–çš„ä¸€äº›æé«˜ç¨‹åºå‘˜æŠ€èƒ½çš„æŠ€å·§ï¼Œè€Œè¿™äº›æŠ€å·§å¾€å¾€æ˜¯ç¨‹åºå‘˜æ‰€ç¼ºä¹çš„ã€‚ä½œè€…<code>Jeff Atwood</code>ä¹Ÿæ˜¯ä¸€ä¸ªå¤§ç‰›ï¼Œå¦‚æœä½ æ²¡æœ‰å¬è¯´è¿‡ä»–ï¼Œé‚£ä¹ˆä½ è‚¯å®šå¬è¯´è¿‡ä»–åˆ›ç«‹çš„ä¸€ä¸ªç½‘ç«™ï¼š<a href="https://stackoverflow.com" target="_blank" rel="noopener">https://stackoverflow.com</a>ã€‚</p><p><img src="/2019/05/26/ã€Šé«˜æ•ˆèƒ½ç¨‹åºå‘˜çš„ä¿®ç‚¼ã€‹è¯»ä¹¦ç¬”è®°/1.jpeg" alt="ã€Šé«˜æ•ˆèƒ½ç¨‹åºå‘˜çš„ä¿®ç‚¼ã€‹"></p><hr><h3 id="å…¥é—¨é¡»çŸ¥"><a href="#å…¥é—¨é¡»çŸ¥" class="headerlink" title="å…¥é—¨é¡»çŸ¥"></a>å…¥é—¨é¡»çŸ¥</h3><p>ç¨‹åºå‘˜çš„å…«ç§å¢ƒç•Œï¼š</p><table><thead><tr><th>å¢ƒç•Œ</th><th>å…·ä½“æè¿°</th><th>å…¸å‹ç¨‹åºå‘˜</th></tr></thead><tbody><tr><td>ä¸æœ½ç¨‹åºå‘˜</td><td>äººå·²ç»ç¦»å¼€äº†è¿™ä¸ªä¸–ç•Œï¼Œä½†æ˜¯ä»–çš„ä»£ç å´ä¾ç„¶æ´»ç€</td><td>Dijkstra,Knuth</td></tr><tr><td>æˆåŠŸç¨‹åºå‘˜</td><td>ä¸ä»…æ‹¥æœ‰å¹¿æ³›çš„çŸ¥ååº¦ï¼ŒåŒäº‹è¿˜è¿è¥è€…ä¸€å®¶ä¸é”™çš„å…¬å¸ï¼Œç”šè‡³æ§åˆ¶ç€æ•´ä¸ªäº§ä¸šé“¾</td><td>æ¯”å°”ç›–èŒ¨,Carmack</td></tr><tr><td>çŸ¥åç¨‹åºå‘˜</td><td>å…¶ä»–ç¨‹åºå‘˜æˆ–å¤šæˆ–å°‘å¬è¯´è¿‡ä½ ï¼Œå¹¶ä¸”å¯¹æ‰€åœ¨é¢†åŸŸæœ‰ç§¯æå½±å“</td><td>é˜®ä¸€å³°,å¼ é‘«æ—­</td></tr><tr><td>èƒœä»»ç¨‹åºå‘˜</td><td>ä½ çš„èƒ½åŠ›ä½¿å¾—ä½ åœ¨å·¥ä½œä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œå…¬å¸å› ä½ çš„åŠ ç›Ÿè€Œå¾—åˆ°äº†æå‡</td><td>ä½ çš„æŸä¸ªé¢†å¯¼ï¼</td></tr><tr><td>æ™®é€šç¨‹åºå‘˜</td><td>åŸºæœ¬ä¸Šèƒ½å¤Ÿåº”å¯¹ä¸€èˆ¬çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œå¹¶ä¸”ä¸è®¤ä¸ºè‡ªå·±èƒ½å¤Ÿæˆä¸ºæ°å‡ºçš„ç¨‹åºå‘˜</td><td>ä½ ä»¬å…¬å¸é‚£ç§ä¸é”™çš„ç¨‹åºå‘˜ï¼</td></tr><tr><td>ä¸šä½™ç¨‹åºå‘˜</td><td>æœ‰åˆ›æ„ã€çƒ­è¡·äºç¼–ç ï¼Œå¾€å¾€æ˜¯ä¸€äº›æœ‰å‰é€”çš„å­¦ç”Ÿæˆ–å®ä¹ ç”Ÿ</td><td>å°±æ¯”å¦‚æˆ‘ï¼</td></tr><tr><td>ä½è°ƒç¨‹åºå‘˜</td><td>æœåŠ¡äºæŸå®¶å…¬å¸ï¼Œæ²¡æœ‰ä»€ä¹ˆæˆå°±ï¼Œå†™ä»£ç ä»…ä»…æ˜¯ä¸€ä»½å·¥ä½œ</td><td>ä½ ä»¬å…¬å¸æœ€å¤šçš„é‚£ç§ç¨‹åºå‘˜</td></tr><tr><td>çƒ‚ç¨‹åºå‘˜</td><td>æŠ€èƒ½åŒ®ä¹ï¼Œæ‰€åšçš„ä¸œè¥¿ç»™åŒäº‹å¸¦æ¥ç—›è‹¦</td><td>ä½ ä»¬å…¬å¸å› ä¸ºæŠ€æœ¯ä¸è¡Œè¢«å¼€é™¤çš„ç¨‹åºå‘˜</td></tr></tbody></table><p>æˆä¸ºä¸€åæ°å‡ºçš„ç¨‹åºå‘˜å…¶å®è·Ÿå†™ä»£ç æ²¡æœ‰å¤ªå¤§çš„å…³ç³»ï¼Œåšç¨‹åºå‘˜ç¡®å®éœ€è¦ä¸€äº›æŠ€èƒ½ï¼Œè¿˜è¦æœ‰åšéŸ§ä¸æ‹”çš„ç²¾ç¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæœ€é‡è¦çš„è¿˜è¦æœ‰<strong>è‰¯å¥½çš„æ²Ÿé€šæŠ€å·§</strong>ã€‚è¿™é‡Œè¯´çš„æ²Ÿé€šä¸ä»…ä»…æ˜¯äººä¸äººçš„æ²Ÿé€šè¿˜åŒ…æ‹¬çº¸é¢æ²Ÿé€šï¼Œæ¯”å¦‚<strong>å†™åšå®¢</strong>ç­‰ã€‚<br>å†™ä½œçš„è¿‡ç¨‹çœŸçš„å°±æ˜¯ä¸€æ¬¡æ¢ç´¢ä¹‹æ—…ï¼Œè€Œä¸”å®ƒä¼šè´¯ç©¿äººçš„ä¸€ç”Ÿã€‚</p><h3 id="æŠŠä¸€å †çƒ‚ä»£ç æå®šçš„è‰ºæœ¯"><a href="#æŠŠä¸€å †çƒ‚ä»£ç æå®šçš„è‰ºæœ¯" class="headerlink" title="æŠŠä¸€å †çƒ‚ä»£ç æå®šçš„è‰ºæœ¯"></a>æŠŠä¸€å †çƒ‚ä»£ç æå®šçš„è‰ºæœ¯</h3><p>æ¯ä¸€å¤©ï¼Œä½ ä¸€å®šè¦ä¸€èµ·åºŠå°±çƒ­æƒ…æ¾æ¹ƒã€‚å¦åˆ™ï¼Œä½ å°±åªæ˜¯åœ¨æ‰“å·¥ã€‚<br>é‡‘é’±å¯¹ç¤¾åŒºæ˜¯æœ‰æ¯’çš„ã€‚<br>ä¼ ç»Ÿçš„â€œèƒ¡èåœåŠ å¤§æ£’â€ï¼ˆä½¿é©´å­å‰è¿›å°±åœ¨ä»–å‰é¢æ”¾ä¸€ä¸ªèƒ¡èåœæˆ–è€…ç”¨å¤§æ£’é©±èµ¶ä»–ï¼‰çš„æ¿€åŠ±æ–¹å¼ä»…ä»…å¯¹äºé‚£äº›é‡å¤çš„ã€æœºæ¢°çš„ä»»åŠ¡æœ‰æ•ˆã€‚ï¼ˆè¨€å¤–ä¹‹æ„å¯¹è½¯ä»¶å¼€å‘æ˜¯æ²¡æœ‰æ•ˆæœçš„ï¼Œè½¯ä»¶å¼€å‘éœ€è¦çš„æ˜¯å†…åœ¨çš„æ¿€åŠ±ï¼Œè¦è®©ç¨‹åºå‘˜ä¸»åŠ¨åœ°å»æŠ•å…¥è‡ªå·±çš„äº‹ä¸šä¸­ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œä½œè€…åœ¨åˆ›ç«‹Stack Overflowçš„æ—¶å€™å¹¶ä¸åœ¨ä¹å‘˜å·¥ä»€ä¹ˆæ—¶å€™æ¥ä¸Šç­ï¼Œæˆ–è€…å¦‚ä½•å®‰æ’å·¥ä½œæ—¶é—´ï¼Œä¹Ÿä¸ä¼šäº‹æ— å·¨ç»†çš„æ ·æ ·è¿‡é—®ï¼Œæ­£å¦‚ä½ æ‰€è§çš„Stack Overflowæ˜¯æˆåŠŸçš„ï¼‰ã€‚<br>å¦‚æœä½ æƒ³é€ ä¸€è‰˜èˆ¹ï¼Œå°±ä¸è¦å‚¬ç€å·¥äººä»¬å»æ”¶é›†æœ¨æï¼Œåˆ†æ´¾å·¥ä½œï¼Œå‘å·æ–½ä»¤ã€‚ä½ åº”è¯¥æ•™ä¼šä»–ä»¬çš„æ˜¯å¯¹æ— è¾¹æ— é™…å¤§æµ·çš„æ¸´æœ›ã€‚<br>å¦‚æœæƒ³åœ¨æŸæ–¹é¢æœ‰æ‰€æé«˜ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯å‹¤åŠ ç»ƒä¹ ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åªé¡¾ç€åŸ‹å¤´å†™ä»£ç ï¼Œè¿è®¨è®ºã€åæ€æˆ–è€…å­¦ä¹ çš„æ—¶é—´éƒ½æ²¡æœ‰ï¼Œä½ å°†å¾—ä¸åˆ°çœŸæ­£çš„è¿›æ­¥ã€‚ä½ å¿…é¡»åœ¨ç£¨ç»ƒå·¥è‰ºä¸æ€è€ƒå¦‚ä½•æé«˜å·¥è‰ºä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªé€‚å½“çš„å¹³è¡¡ç‚¹ã€‚<br>æ²¿ç€é‚£æ¡è·¯ä¸‹å»ï¼Œä¸€å®šè¦å¿«ã€‚å¦‚æœæœ‰ä»€ä¹ˆä¸œè¥¿æŒ¡ä½äº†ä½ çš„å»è·¯è¯·ç»•å¼€å®ƒï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰ã€‚<br>å°½é‡é¿å…å¤šä»»åŠ¡åšäº‹ã€‚</p><h3 id="é«˜æ•ˆç¼–ç¨‹çš„åŸåˆ™"><a href="#é«˜æ•ˆç¼–ç¨‹çš„åŸåˆ™" class="headerlink" title="é«˜æ•ˆç¼–ç¨‹çš„åŸåˆ™"></a>é«˜æ•ˆç¼–ç¨‹çš„åŸåˆ™</h3><p>æ°¸è¿œéƒ½æ˜¯è‡ªå·±çš„é”™ï¼šç¨‹åºå‘˜æœ€åŸºæœ¬çš„æ„è¯†å°±æ˜¯ä½ å†™çš„ä»£ç åœ¨ä»»ä½•æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œé‚£ä¸€å®šæ˜¯ä½ çš„é”™ï¼ˆè€Œå¾€å¾€ä¸æ˜¯ç”µè„‘çš„é—®é¢˜ï¼‰ã€‚<br>å¤§é“è‡³ç®€ï¼šå¦‚æœä½ çƒ­çˆ±ç¼–ç ï¼Œè€Œä¸”çˆ±çš„æƒ…çœŸæ„åˆ‡ï¼Œé‚£ä½ å°±åº”è¯¥æƒœå¢¨å¦‚é‡‘ã€‚<br>é¿å…å†™æ³¨é‡Šï¼šæœ€å¥½çš„æ³¨é‡Šå°±æ˜¯ä»£ç ã€‚<br>å­¦ä¼šé˜…è¯»æºç ï¼šä¸ç®¡æ–‡æ¡£ä¸Šé¢æ€ä¹ˆè¯´ï¼Œæºä»£ç æ‰æ˜¯æœ€ç»ˆçš„äº‹å®ï¼Œæ˜¯ä½ æ‰€èƒ½æ‰¾åˆ°çš„æœ€å¥½çš„ï¼Œæœ€ç¡®å®šçš„ï¼Œæœ€æ–°çš„æ–‡æ¡£ã€‚<br>å‘ä¼™ä¼´æˆ–äº’è”ç½‘æ±‚åŠ©ï¼šå³ä½¿æ²¡æœ‰å¾—åˆ°ä½ æƒ³è¦çš„ç­”æ¡ˆï¼Œå¼ºè¿«è‡ªå·±å»å®Œæ•´åœ°è§£é‡Šè‡ªå·±çš„é—®é¢˜ï¼Œå¸¸å¸¸ä¹Ÿä¼šå¼•é¢†ä½ è¿›å…¥æ–°çš„è§†é‡æˆ–è€…ä¸ºä½ å¸¦æ¥æ–°çš„å‘ç°ã€‚<br>åˆ›æ–°ä»¥äººä¸ºæœ¬ï¼šåœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œæ‰§è¡Œæ„å‘³ç€ä¸“æ³¨äºæ„æˆä½ çš„åº”ç”¨ç¨‹åºçš„å¾®å°ç»†èŠ‚ã€‚<br>ä½ çš„å›¢é˜Ÿèƒ½é€šè¿‡ç”µæ¢¯æµ‹è¯•å—ï¼š60ç§’ä¹‹å†…ï¼Œæ¸…æ™°åœ°è§£é‡Šä»–ä»¬åœ¨åšä»€ä¹ˆï¼Œä»¥åŠä¸ºä»€ä¹ˆäººä»¬ä¼šåœ¨æ„ä»–ä»¬æ­£åœ¨åšçš„äº‹æƒ…ã€‚<br>æ€§èƒ½è‡´èƒœï¼šç½‘ç«™è½½å…¥å’Œæ˜¾ç¤ºçš„é€Ÿåº¦è¶Šæ…¢ï¼Œä½¿ç”¨ä»–çš„äººå°±ä¼šè¶Šå°‘ï¼ˆè¦ä¹ˆå¾ˆå¿«ï¼Œè¦ä¹ˆå·²ç»æ­»å»ï¼‰ã€‚</p><h3 id="æ‹›è˜ç¨‹åºå‘˜é¡»å¾—å…¶æ³•"><a href="#æ‹›è˜ç¨‹åºå‘˜é¡»å¾—å…¶æ³•" class="headerlink" title="æ‹›è˜ç¨‹åºå‘˜é¡»å¾—å…¶æ³•"></a>æ‹›è˜ç¨‹åºå‘˜é¡»å¾—å…¶æ³•</h3><p>æ€æ ·æ‹›è˜ç¨‹åºå‘˜ï¼š</p><ol><li>é¦–å…ˆè¦æ±‚é€šè¿‡å‡ ä¸ªç®€å•çš„â€œHello Worldâ€åœ¨çº¿æµ‹è¯•ã€‚</li><li>æå‡ºè¦çœ‹çœ‹ä»–ä»¬çš„æ–‡ä»¶å¤¹ã€‚</li><li>åªé›‡è®¤åŒå…¬å¸æ–‡åŒ–çš„äººã€‚</li><li>è¿›è¡Œä¸€ä¸ªå‘¨ç¥¥çš„ç»“æ„åŒ–ç”µè¯é¢è¯•ã€‚</li><li>ç»™ä»–ä»¬ä¸€ä¸ªâ€œè§†é•œâ€é¡¹ç›®ã€‚</li><li>æ‰¾ä¸ªæˆ¿é—´é¢è°ˆï¼Œå¹¶æœ€åå®šå¤ºã€‚</li><li>ä¸Šé¢æ²¡æœ‰å“ªæ¡ä¿è¯å®Œå…¨å¥æ•ˆçš„ã€‚</li></ol><p>é¢è¯•å®˜åº”å°½æœ€å¤§åŠªåŠ›å»é¿å…çš„2å¤§é”™è¯¯ï¼š</p><ol><li>ä¸è¦è®©å€™é€‰äººä¸»å¯¼é¢è¯•è¿‡ç¨‹ã€‚</li><li>å°å¿ƒåªä¼šä¸€æ‹›çš„â€œå°é©¬é©¹â€ã€‚</li></ol><p>è½¯ä»¶å¼€å‘è€…æœ€æ“…é•¿çš„å°±æ˜¯å­¦ä¹ ã€‚<br>å·¥ä½œç»éªŒå¹´æ•°ä¸ç¼–ç¨‹æŠ€èƒ½ä¹‹é—´æ˜¯æ²¡æœ‰å¿…è¦è”ç³»çš„ã€‚</p><h3 id="ä¿ƒä½¿å›¢é˜Ÿç´§å¯†åä½œ"><a href="#ä¿ƒä½¿å›¢é˜Ÿç´§å¯†åä½œ" class="headerlink" title="ä¿ƒä½¿å›¢é˜Ÿç´§å¯†åä½œ"></a>ä¿ƒä½¿å›¢é˜Ÿç´§å¯†åä½œ</h3><p>å›¢é˜Ÿçš„é—®é¢˜å¾€å¾€éƒ½æ˜¯äººçš„é—®é¢˜ã€‚<br>å¦‚æœä½ æƒ³æé«˜å›¢é˜Ÿçš„å·¥ç¨‹æ°´å¹³ï¼Œä½ éœ€è¦ä¸€ä¸ªé¢†å¯¼ï¼Œè€Œä¸æ˜¯é ä¸€ä¸ªè®­å¯¼å‘˜å»å¼ºåˆ¶æ‰§è¡Œã€‚<br>æœ€æœ‰æ•ˆçš„ä¸€ç§æŠ€æœ¯é¢†å¯¼å°±æ˜¯ä»¥èº«ä½œåˆ™ã€‚<br>è¦æœ‰ç»“å¯¹ç¼–ç¨‹æˆ–è€…ä»£ç è¯„å®¡ã€‚<br>æˆ‘ä»¬åº”è¯¥ä»¥æ€€ç–‘çš„æ€åº¦å»çœ‹å¾…ä¼šè®®ï¼ŒæŠŠå®ƒå½“æˆæ˜¯ä¸€ç§é™ä½å·¥ä½œæ•ˆç‡çš„é£é™©ã€‚<br>å¦‚ä½•å¼€å¥½ä¼šè®®ï¼š</p><ol><li>ä¼šè®®ç»å¯¹ä¸åº”è¯¥è¶…è¿‡ä¸€ä¸ªå°æ—¶ï¼Œå¦åˆ™åº”åˆ¤ä»¥æ­»åˆ‘ã€‚</li><li>æ¯ä¸ªä¼šè®®éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæ¸…æ™°çš„ç›®æ ‡ã€‚</li><li>åœ¨å¼€ä¼šä¹‹å‰é¢„å…ˆåšå¥½åŠŸè¯¾ã€‚</li><li>æŠŠä¼šè®®å˜æˆå¯é€‰çš„ã€‚</li><li>åœ¨ä¼šè®®ç»“æŸæ—¶æ¦‚æ‹¬ä¸€ä¸‹å¾…åŠäº‹é¡¹ã€‚</li></ol><p>å¦‚ä½•å¯¹å¾…â€œæ¢è‹¹æœâ€ï¼ˆä¸€ä¸ªåè‹¹æœæ”¾åœ¨ä¸€ç­å¥½è‹¹æœä¸­ï¼Œé‚£ä¹ˆå¾ˆå¿«è¿™æ¡†è‹¹æœéƒ½ä¼šåæ‰ï¼‰ï¼š</p><ol><li>ä½ ä¸å¿…å’Œå›¢é˜Ÿä¸­çš„æ¯ä¸ªäººéƒ½æˆä¸ºæœ‹å‹ï¼ˆä¸è¦å……å½“è€å¥½äººï¼‰ã€‚</li><li>å¦‚æœä½ çš„å›¢é˜Ÿä¸»ç®¡æˆ–è€…ç»ç†æ²¡æœ‰å¤„ç†é¡¹ç›®ä¸­çš„â€œåè‹¹æœâ€ï¼Œé‚£ä»–å°±æ˜¯ç©å¿½èŒå®ˆã€‚</li><li>æŠŠæŸä¸ªäººä»å›¢é˜Ÿä¸­è°ƒèµ°æ˜¯å¾ˆç—›è‹¦çš„ï¼Œä½†æ˜¯å½“ä½ æ„è¯†åˆ°ä½ æœ¬åº”è¯¥åœ¨6ä¸ªæœˆå‰å°±æŠŠæŸäººè°ƒèµ°æ—¶ï¼Œæ­¤æ—¶ä½ å·²ç»æ›´åŠ ç—›è‹¦äº†ï¼ˆæ²¡æœ‰å¿…è¦ç•™æƒ…é¢ï¼‰ã€‚</li></ol><p>è¿œç¨‹å¼€å‘éœ€è¦éµå¾ªçš„åŸåˆ™ï¼š</p><ol><li>è¿œç¨‹å›¢é˜Ÿæœ€å°2ä¸ªäººï¼Œéœ€è¦æ‰¾åˆ°ä¼™ä¼´ï¼ˆåºŸè¯ï¼‰ã€‚</li><li>åªæœ‰éå¸¸çƒ­çˆ±ç¼–ç¨‹çš„èµ„æ·±ç¨‹åºå‘˜æ‰å¯ä»¥ç”³è¯·è¿œç¨‹å¼€å‘çš„èŒä½ï¼ˆä¸»è§‚èƒ½åŠ¨æ€§è¦å¼ºï¼‰ã€‚</li><li>ä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œè¿œç¨‹å›¢é˜Ÿéœ€è¦å®Œå…¨è‡ªæ²»ï¼Œå¹¶ä¸”è¿˜éœ€è¦ä¸€ä¸ªæœ‰å¼ºçƒˆè¿œæ™¯å’Œæ‰§è¡ŒåŠ›çš„é¢†å¯¼è€…ã€‚</li></ol><h3 id="ç¨‹åºå‘˜çš„é«˜æ•ˆå·¥ä½œåœºæ‰€"><a href="#ç¨‹åºå‘˜çš„é«˜æ•ˆå·¥ä½œåœºæ‰€" class="headerlink" title="ç¨‹åºå‘˜çš„é«˜æ•ˆå·¥ä½œåœºæ‰€"></a>ç¨‹åºå‘˜çš„é«˜æ•ˆå·¥ä½œåœºæ‰€</h3><p>å¯ä»¥æé«˜æ•ˆç‡çš„åŸºç¡€è®¾æ–½ï¼š</p><ol><li>æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æœ‰ä¸¤å°æ˜¾ç¤ºå±ã€‚</li><li>æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æœ‰ä¸€å°å¿«é€Ÿçš„ç”µè„‘ã€‚</li><li>æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥è‡ªå·±é€‰æ‹©é¼ æ ‡å’Œé”®ç›˜ã€‚</li><li>æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æœ‰ä¸€æŠŠèˆ’é€‚çš„æ¤…å­ã€‚</li><li>æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥èƒ½å¿«é€Ÿæ¥å…¥äº’è”ç½‘ã€‚</li><li>æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æœ‰å®‰é™çš„å·¥ä½œç¯å¢ƒã€‚</li></ol><p>å¯¹äºå…¬å¸æ¥è¯´è¿™å‡ ä¸ªåŸºæœ¬æƒåˆ©å¾ˆå®¹æ˜“åšåˆ°ï¼Œè¿™äº›è¦æ±‚<strong>å¹¶ä¸è¿‡åˆ†</strong>ã€‚ä¸€ä¸ªå…¬å¸æ„¿æ„ä»˜ç»™ä¸€ä¸ªå¼€å‘äººå‘˜6W~10Wç¾å…ƒçš„è–ªæ°´ï¼ˆåœ¨ç¾å›½ï¼‰ï¼Œå´ç”¨ç³Ÿç³•çš„å·¥ä½œæ¡ä»¶ä»¥åŠç ´çƒ‚çš„ç¡¬ä»¶è®¾æ–½æ‘§æ®‹ä»–ï¼Œè¿™ä»¤æˆ‘éš¾ä»¥ç½®ä¿¡ï¼ˆä½œè€…è¯´çš„ï¼Œä¸æ˜¯æˆ‘è¯´çš„ï¼Œè™½ç„¶æˆ‘ä¹Ÿå¾ˆè®¤åŒï¼Œå“ˆå“ˆï¼‰ã€‚</p><p>è´­ä¹°ä¸€å¼ ä¼˜è´¨çš„æ¡Œå­å’Œä¸€æŠŠä¼˜è´¨çš„æ¤…å­ä¼šæ˜¯ä½ ä½œä¸ºä¸€åè½¯ä»¶å¼€å‘è€…æ‰€èƒ½åšçš„æœ€å¥½çš„æŠ•èµ„ä¹‹ä¸€äº†ã€‚</p><p>ç¨‹åºå‘˜æ ‡å‡†åå§¿ï¼š</p><ol><li>æ˜¾ç¤ºå™¨çš„é¡¶ç«¯åº”è¯¥ä¸çœ¼ç›å¹³é½ã€‚</li><li>æ¡Œå­çš„è¡¨é¢åº”è¯¥å’Œè‚šè„åŸºæœ¬æŒå¹³ã€‚</li><li>è„šåº”è¯¥åœ¨åœ°æ¿ä¸Šå¹³æ”¾ï¼Œå¹¶ä¸”è†å…³èŠ‚å‘ˆ90Â°ã€‚</li><li>å½“ä½ æ‰“å­—çš„æ—¶å€™ï¼Œæ‰‹è…•åº”è¯¥å’Œå‰è‡‚æˆä¸€æ¡ç›´çº¿ï¼Œä¸è¦ä¸Šå¼¯æˆ–è€…ä¸‹å¼¯ï¼Œä¹Ÿä¸è¦ä¾§å¼¯ã€‚</li></ol><p>æ‹¥æœ‰æ›´å¤šçš„æ˜¾ç¤ºç©ºé—´ç¡®å®ä¼šè®©ä½ çš„å·¥ä½œæ›´æœ‰æ•ˆç‡ã€‚</p><p>è´­ä¹°ä¼˜è´¨åº§æ¤…çš„å¿…è¦æ€§ï¼š</p><ol><li>åº§æ¤…æ˜¯ç¼–ç¨‹ä½“éªŒä¸­ä¸€ä¸ªä¸»è¦çš„ç»„æˆéƒ¨åˆ†ã€‚</li><li>å»‰ä»·çš„åº§æ¤…å¾ˆç³Ÿç³•ã€‚</li><li>åº§æ¤…æ˜¯è€ç”¨å“ã€‚</li></ol><p>ç†æƒ³æƒ…å†µä¸‹ä½ çš„æ˜¾ç¤ºå±ä¸åº”è¯¥æ¯”ç¯å…‰ä¸‹çš„ä¹¦æœ¬æ›´äº®ã€‚</p><h3 id="è®¾è®¡æ—¶è¦æŠŠç”¨æˆ·æ”¾åœ¨å¿ƒä¸Š"><a href="#è®¾è®¡æ—¶è¦æŠŠç”¨æˆ·æ”¾åœ¨å¿ƒä¸Š" class="headerlink" title="è®¾è®¡æ—¶è¦æŠŠç”¨æˆ·æ”¾åœ¨å¿ƒä¸Š"></a>è®¾è®¡æ—¶è¦æŠŠç”¨æˆ·æ”¾åœ¨å¿ƒä¸Š</h3><p>ä»¤äººèµå¿ƒæ‚¦ç›®çš„äº§å“å’Œè®©äººå‹‰å¼ºå®¹å¿çš„äº§å“ä¹‹é—´çš„å·®åˆ«ï¼Œå°±åœ¨äºä»–ä»¬çš„ç»†èŠ‚æœ‰æ²¡æœ‰è¢«åšå¥½ï¼ˆç»†èŠ‚å†³å®šæˆè´¥ï¼‰ã€‚<br>ç”¨æˆ·ç•Œé¢å°±ä»£è¡¨äº†ä½ çš„è½¯ä»¶ï¼ˆå‰ç«¯çš„é‡è¦æ€§ï¼‰ã€‚<br>ç”¨æˆ·ç•Œé¢é¡»ä¼˜å…ˆè®¾è®¡ã€‚<br>åœ¨ä½ è‰æ‹Ÿç”¨æˆ·ç•Œé¢çš„æ—¶å€™ï¼Œä½ å¿…é¡»ç½®èº«äºæŠ€æœ¯å¼€å‘ç¯å¢ƒä¹‹å¤–ï¼ˆä¸è¦è¢«æŠ€æœ¯æ‰€æŸç¼šï¼‰ã€‚<br>ä½ åº”è¯¥åŠªåŠ›ä¸æ‰¯ä¸Šä¸‹åˆ†é¡µè¿™ç©æ„å„¿ï¼Œå› ä¸ºä½ åº”è¯¥è®©ç”¨æˆ·åœ¨å‡ ä¸ªæ¡ç›®ä¸­å°±èƒ½æ‰¾åˆ°ä»–ä»¬æ‰€éœ€è¦çš„ä¸œè¥¿ï¼Œè¿™é«˜äºä¸€åˆ‡ã€‚<br>ç”¨æˆ·åªä¼šè¯»å–å±å¹•ä¸Šè¶³ä»¥è®©ä»–ä»¬å®Œæˆä»»åŠ¡çš„ã€æœ€å°‘é‡çš„æ–‡å­—ã€‚<br>ä½ çš„å›¢é˜Ÿå¯¹ç”¨æˆ·åé¦ˆçš„å“åº”é€Ÿåº¦ä¼šä¸ºä½ çš„è½¯ä»¶å®šä¸‹åŸºè°ƒã€‚<br>å³ä½¿ç¬¬ä¸€ç‰ˆåšçš„å¾ˆå·®åŠ²ï¼Œä¹Ÿè¦åšæŒæŠŠå®ƒå‘å¸ƒå‡ºå»ã€‚</p><h3 id="å®‰å…¨åŸºç¡€ï¼šä¿æŠ¤ç”¨æˆ·æ•°æ®"><a href="#å®‰å…¨åŸºç¡€ï¼šä¿æŠ¤ç”¨æˆ·æ•°æ®" class="headerlink" title="å®‰å…¨åŸºç¡€ï¼šä¿æŠ¤ç”¨æˆ·æ•°æ®"></a>å®‰å…¨åŸºç¡€ï¼šä¿æŠ¤ç”¨æˆ·æ•°æ®</h3><p>å°½é‡ä½¿ç”¨HTTPSåè®®ï¼Œå› ä¸ºï¼š</p><ol><li>HTTPSä¸å†æ˜¯å¥¢ä¾ˆå“äº†ã€‚</li><li>HTTPSæ„å‘³ç€æ²¡æœ‰äººèƒ½å¤Ÿåœ¨äº’è”ç½‘ä¸Šç›‘è§†ä½ ã€‚</li><li>HTTPSç°åœ¨å˜å¾—æ›´å¿«äº†ã€‚</li></ol><p>é™åˆ¶æ¯ä¸ªç”¨æˆ·çš„ç™»å½•å°è¯•æ¬¡æ•°æ˜¯å®‰å…¨é¢†åŸŸçš„101ï¼ˆ101ç©ºé™å¸ˆæ˜¯ç¾å›½é™†å†›çš„ä¸€åªç©ºä¸­çªå‡»éƒ¨é˜Ÿï¼Œåœ¨è¯ºæ›¼åº•ç™»é™†æˆ˜å½¹ä¸­é—»åï¼‰ã€‚<br>å®‰å…¨çš„å“ˆå¸Œç®—æ³•åº”è¯¥èƒ½é˜²æ­¢ç¯¡æ”¹ï¼ŒåŒæ—¶åº”è¯¥è¿è¡Œç¼“æ…¢ï¼ˆå‡é€Ÿæš´åŠ›é€†å‘ç ´è§£çš„é€Ÿåº¦ï¼‰ã€‚</p><h3 id="åŠ å¼ºä»£ç æµ‹è¯•ï¼Œåˆ«è®©ä»–å¤ªå·®åŠ²"><a href="#åŠ å¼ºä»£ç æµ‹è¯•ï¼Œåˆ«è®©ä»–å¤ªå·®åŠ²" class="headerlink" title="åŠ å¼ºä»£ç æµ‹è¯•ï¼Œåˆ«è®©ä»–å¤ªå·®åŠ²"></a>åŠ å¼ºä»£ç æµ‹è¯•ï¼Œåˆ«è®©ä»–å¤ªå·®åŠ²</h3><p>è½¯ä»¶å¼€å‘äººå‘˜åº”è¯¥ä¸å®¢æˆ·æ‚£éš¾ä¸å…±ã€‚<br>åŒçº§ä¹‹é—´çš„ä»£ç è¯„å®¡æ˜¯ä½ ä¸ºæé«˜ä»£ç è´¨é‡æ‰€èƒ½åšçš„æœ€å¤§çš„è´¡çŒ®ã€‚<br>å¦‚æœä¸æ‰¾æ¥çœŸæ­£çš„ç”¨æˆ·åšå¯ç”¨æ€§æµ‹è¯•çš„è¯ï¼Œä½ æ˜¯æ— æ³•çŸ¥é“ä½ çš„ç¨‹åºèƒ½å¦æ­£å¸¸å·¥ä½œçš„ã€‚</p><h3 id="åˆ›å»ºå¹¶ç®¡ç†ç¤¾åŒºï¼ŒåŒæ—¶ä»ä¸­æ”¶ç›Š"><a href="#åˆ›å»ºå¹¶ç®¡ç†ç¤¾åŒºï¼ŒåŒæ—¶ä»ä¸­æ”¶ç›Š" class="headerlink" title="åˆ›å»ºå¹¶ç®¡ç†ç¤¾åŒºï¼ŒåŒæ—¶ä»ä¸­æ”¶ç›Š"></a>åˆ›å»ºå¹¶ç®¡ç†ç¤¾åŒºï¼ŒåŒæ—¶ä»ä¸­æ”¶ç›Š</h3><p>ç¤¾åŒºåé¦ˆçš„ç»éªŒä¸æ•™è®­ï¼š</p><ol><li>90%çš„ç¤¾åŒºåé¦ˆéƒ½æ˜¯åƒåœ¾ã€‚</li><li>åˆ«æŠµæŒ¡ä¸ä½è¯±æƒ‘è€Œè¯¯å…¥æ­§é€”ã€‚</li><li>å¦è¯šè¯´å‡ºä½ ä¸æƒ³åšçš„äº‹ã€‚</li><li>å€¾å¬ç¤¾åŒºçš„å£°éŸ³ï¼Œä½†åˆ«è¢«å®ƒä»¬ç‰µç€é¼»å­èµ°ã€‚</li><li>å‚ä¸å¹¶æ”¯æŒä½ çš„ç¤¾åŒºã€‚</li></ol><p>æ¸¸æˆåŒ–çš„å¥½å¤„ï¼š</p><ol><li>å­¦ä¹ ï¼ˆåº”è¯¥ï¼‰æ˜¯æœ‰è¶£çš„ã€‚</li><li>æ¸¸æˆæ˜¯å­¦ä¹ çš„åŠ©æ‰‹ã€‚</li><li>æ¸¸æˆä¿ƒä½¿äººä»¬é½å¿ƒååŠ›ã€‚</li></ol><h3 id="æ­éœ²è¥é”€ä¼ä¿©ï¼Œä»¥åŠå¦‚ä½•é¿å…"><a href="#æ­éœ²è¥é”€ä¼ä¿©ï¼Œä»¥åŠå¦‚ä½•é¿å…" class="headerlink" title="æ­éœ²è¥é”€ä¼ä¿©ï¼Œä»¥åŠå¦‚ä½•é¿å…"></a>æ­éœ²è¥é”€ä¼ä¿©ï¼Œä»¥åŠå¦‚ä½•é¿å…</h3><p>å¸¸è§çš„9ä¸­è¥é”€ä¼ä¿©ï¼š</p><ol><li>ç”¨ä¸æ°å½“çš„æ¯”è¾ƒæ¥è¯¯å¯¼ã€‚</li><li>åˆ©ç”¨æ¶ˆè´¹æƒ¯æ€§ï¼ˆå¦‚æŠŠé»‘çç ä¸ç å®ç¿¡ç¿ æ”¾ä¸€èµ·æ¥æŠ¬é«˜é»‘çç çš„ä»·æ ¼ï¼‰ã€‚</li><li>â€œå…è´¹â€çš„è¯±æƒ‘ã€‚</li><li>å‡å€Ÿç¤¾ä¼šè¡Œä¸ºå‡†åˆ™ï¼ˆå¦‚åˆ©ç”¨ç¤¾åŒºæˆ–å…¬ç›Šäº‹ä¸šï¼‰ã€‚</li><li>æ•…æ„å…è®¸æ‹–å»¶ï¼ˆå¦‚åˆ†æœŸï¼‰ã€‚</li><li>åˆ©ç”¨ç¦€èµ‹æ•ˆåº”ã€‚</li><li>åˆ©ç”¨äººçš„â€œæŸå¤±åŒæ¶â€ã€‚</li><li>åˆ¶é€ ä¸åˆç†çš„æœŸæœ›ã€‚</li><li>åˆ©ç”¨å¯¹ä»·çš„åè§ã€‚</li></ol><p>æ¸¸æˆè¡¨é¢ä¸Šçœ‹æ˜¯å…è´¹çš„ï¼Œä½†å®é™…ä¸Šä»–ä»¬è¦é ä¸€å°æ’®ç©å®¶é€šè¿‡èŠ±é’±è´­ä¹°é¢å¤–çš„ä¸œè¥¿æ¥æ”¯æ’‘ï¼ˆå…è´¹å¢å€¼æ¨¡å¼ï¼‰ã€‚å› æ­¤ï¼Œç©å®¶ç¾¤ä½“å¿…é¡»éå¸¸å¤§ï¼Œæ‰è¶³ä»¥ç»´æŒè¿™ç§æ¸¸æˆçš„ä¸šåŠ¡æ¨¡å¼ã€‚ä¹Ÿå› æ­¤ï¼Œæ¸¸æˆçš„è¿è¥å•†é€šè¿‡ä¼šåœ¨äº’è”ç½‘çš„å¹¿å‘Šç©ºé—´é‡Œæ¨å¹¿ä»–ä»¬çš„æ¸¸æˆã€‚ï¼ˆæŸè¿…æ¸¸æˆæŠŠè¿™ç§è¥é”€æ–¹å¼å‘æŒ¥åˆ°æ·‹æ¼“ç²¾è‡´ï¼‰<br>ä½ä»·æ˜¯ä¸€ç§è¥é”€æ¨åŠ¨åŠ›ï¼Œå®ƒå¯ä»¥æˆå€çš„è¡¥å¿ä»·æ ¼é™ä½çš„éƒ¨åˆ†ã€‚</p><h3 id="è½»é‡ç¼“æ€¥ï¼Œäº†ç„¶äºå¿ƒ"><a href="#è½»é‡ç¼“æ€¥ï¼Œäº†ç„¶äºå¿ƒ" class="headerlink" title="è½»é‡ç¼“æ€¥ï¼Œäº†ç„¶äºå¿ƒ"></a>è½»é‡ç¼“æ€¥ï¼Œäº†ç„¶äºå¿ƒ</h3><p>å¹¸ç¦çš„æ–¹æ³•ï¼š</p><ol><li>æŠŠé’±èŠ±åœ¨ç»å†ä¸Šï¼Œè€Œä¸è¦èŠ±åœ¨ç‰©è´¨ä¸Šã€‚</li><li>åŠ©äººä¸ºä¹ã€‚</li><li>å¾ˆå¤šæ¬¡å°çš„ã€æ„‰å¿«çš„è´­ä¹°å®é™…ä¸Šæ¯”ä¸€æ¬¡å·¨é¢çš„è´­ä¹°æ›´èƒ½æœ‰æ•ˆåœ°ç»™ä½ å¸¦æ¥å¹¸ç¦ã€‚</li><li>å°‘ä¹°ä¿é™©ï¼ˆä¿é™©æ¡æ¬¾å¾ˆå®¹æ˜“ä¸ç”Ÿæ•ˆæˆ–è€…è¿”åˆ©æ”¿ç­–ä¼šè®©äººä¸å®‰ï¼‰ã€‚</li><li>ä¸ºå°†æ¥ä¹°å•ã€‚</li><li>ä¸‰æ€è€Œåè¡Œã€‚</li><li>å°å¿ƒæ¯”è¾ƒè´­ç‰©çš„é™·é˜±ã€‚</li><li>éšå¤§æµã€‚</li></ol><p>æ¥ä¹ŸåŒ†åŒ†ï¼Œå»ä¹ŸåŒ†åŒ†ï¼ˆä¸æ˜¯å†²å†²ï¼‰ï¼Œåˆ°å¤´æ¥ä¸¤æ‰‹ç©ºç©ºã€‚</p><p>æœ€åç”¨æ–‡ç« æœ€åæŠ›å‡ºçš„ä¸€ä¸ªé—®é¢˜ï¼Œç»“æŸæœ¬ç« çš„å†…å®¹ï¼š</p><blockquote><p>å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œæœ€éš¾çš„æ˜¯è¦ææ˜ç™½ä½ å¤œä»¥ç»§æ—¥åœ°æ‹¼å‘½å·¥ä½œåˆ°åº•æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Ÿ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¨‹åºäººç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè¿›åŒ–ï¼šä»å­¤èƒ†æå®¢åˆ°é«˜æ•ˆå›¢é˜Ÿã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/05/12/%E3%80%8A%E8%BF%9B%E5%8C%96%EF%BC%9A%E4%BB%8E%E5%AD%A4%E8%83%86%E6%9E%81%E5%AE%A2%E5%88%B0%E9%AB%98%E6%95%88%E5%9B%A2%E9%98%9F%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/05/12/%E3%80%8A%E8%BF%9B%E5%8C%96%EF%BC%9A%E4%BB%8E%E5%AD%A4%E8%83%86%E6%9E%81%E5%AE%A2%E5%88%B0%E9%AB%98%E6%95%88%E5%9B%A2%E9%98%9F%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ä¹¦æ˜¯Tockçš„åˆ›å§‹äºº<code>Brian Fitzpatrick</code>å’ŒSVNå¼€å‘è€…ä¹‹ä¸€çš„<code>Ben Collins-Sussman</code>å…±åŒå†™çš„ã€‚ä¸‹é¢æ˜¯æˆ‘è®°å½•çš„ä¸€äº›ä¹¦ä¸­çš„é‡ç‚¹ï¼š</p><p><img src="/2019/05/12/ã€Šè¿›åŒ–ï¼šä»å­¤èƒ†æå®¢åˆ°é«˜æ•ˆå›¢é˜Ÿã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€Šè¿›åŒ–ï¼šä»å­¤èƒ†æå®¢åˆ°é«˜æ•ˆå›¢é˜Ÿã€‹"></p><hr><h3 id="å¤©æ‰ç¨‹åºç¥è¯"><a href="#å¤©æ‰ç¨‹åºç¥è¯" class="headerlink" title="å¤©æ‰ç¨‹åºç¥è¯"></a>å¤©æ‰ç¨‹åºç¥è¯</h3><p>äººä»¬æ€»æ˜¯ç¼ºä¹å®‰å…¨æ„Ÿï¼Œå°±åƒç¨‹åºå‘˜æ‹…å¿ƒåˆ«äººçœ‹åˆ°å¹¶è¯„è®ºè‡ªå·±æœªå®Œæˆçš„å·¥ä½œï¼Œæ‰€ä»¥å¥½å¤šç¨‹åºå‘˜åœ¨å·¥ä½œæœªå®Œæˆçš„æ—¶å€™ä¸ä¼šé¢‘ç¹åœ°æäº¤ä»£ç ã€‚<br>äººæœ‰ä¸€ç§æœ¬èƒ½ï¼šå‘ç°é¢†å¯¼è€…å’Œæ¥·æ¨¡ï¼Œå°†ä»–ä»¬å¶åƒåŒ–ï¼Œç„¶åè¯•å›¾æ¨¡ä»¿ä»–ä»¬ã€‚æˆ‘ä»¬éƒ½éœ€è¦å´‡æ‹œè‹±é›„ä»¥æ¿€åŠ±è‡ªå·±ï¼Œç¼–ç¨‹å±Šä¹Ÿæœ‰è‡ªå·±çš„è‹±é›„ã€‚â€œæŠ€æœ¯åäººâ€ç°è±¡å‡ ä¹æ¼”å˜æˆäº†ç¥è¯ã€‚æ¯ä¸ªç¨‹åºå‘˜éƒ½å¸Œæœ›åƒæ—çº³æ–¯é‚£ä¹ˆå¯ä»¥å‡­ä¸€å·±ä¹‹åŠ›å®Œæˆä¸€ä¸ªæ“ä½œç³»ç»Ÿã€‚ä½†æ˜¯ä¸€ä¸ªäººæ˜¯ä¸å¯èƒ½å®Œæˆæ‰€æœ‰çš„äº‹æƒ…ï¼Œå°±æ¯”å¦‚æ—çº³æ–¯ï¼Œä»–å¹¶æ²¡æœ‰å®ŒæˆLinuxç³»ç»Ÿä¸­æ‰€æœ‰ä»£ç çš„ç¼–å†™ï¼ˆä»–ç¼–å†™çš„æ˜¯ä¸€ä¸ªç±»Unixçš„æ¦‚å¿µå†…æ ¸åŸå‹ï¼Œå…¶å®è¿™å·²ç»å¾ˆç‰›é€¼äº†ï¼‰ï¼Œè€Œè¦å®Œæˆæ•´ä¸ªLinuxç³»ç»Ÿï¼Œæ›´å¤šçš„æ˜¯éœ€è¦æ•´ä¸ªå›¢é˜Ÿæˆ–è€…æ•´ä¸ªç¤¾åŒºçš„åŠªåŠ›ã€‚<br>åœ¨å†…å¿ƒæ·±å¤„ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›æˆä¸ºå¤©æ‰ã€‚æå®¢çš„æœ€ç»ˆå¹»æƒ³å°±æ˜¯è·å¾—ä»¤äººç§°èµçš„æ–°åˆ›æ„ã€‚åœ¨å±±æ´é‡Œé—­å…³å‡ å‘¨ç”šè‡³æ•°æœˆï¼ŒåŠªåŠ›å®Œç¾å®ç°è‡ªå·±çš„åˆ›æ„ï¼Œç„¶åæ¨ªç©ºå‡ºä¸–ï¼Œä»¤æ‰€æœ‰äººæƒŠå¹ä¸å·²ã€‚åŒè¡Œå¹æœäºä½ çš„èªæ˜æ‰æ™ºï¼Œå¤§ä¼—æ’é˜Ÿä½¿ç”¨ä½ çš„è½¯ä»¶ï¼Œååˆ©éšä¹‹è€Œæ¥ã€‚ä½†æ˜¯ï¼Œè¿™ç§å¤©æ‰ç¥è¯å¾€å¾€æ˜¯ä¸å¯èƒ½å‘ç”Ÿçš„ï¼Œæ‰€ä»¥ä½ è¯¥é†’é†’äº†ã€‚<br>å¤©æ‰ç¥è¯ä¸€æ–¹é¢ç”±äºç¼ºä¹å®‰å…¨æ„Ÿè€Œå¯¼è‡´çš„ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ‹…å¿ƒè‡ªå·±çš„æƒ³æ³•è¢«åˆ«äººçŸ¥é“ï¼ˆå…¶å®æ²¡å¿…è¦ï¼Œæˆ–è®¸ä½ ä»¥ä¸ºç‹¬ç‰¹çš„æƒ³æ³•æ—©å°±è¢«åˆ«äººæƒ³åˆ°äº†ï¼‰ã€‚<br><strong>å•ç‹¬å·¥ä½œä¸€å®šæ¯”å¤šäººåˆä½œæ›´å…·æœ‰é£é™©ã€‚</strong>ç¼–ç¨‹é¢†åŸŸæå°‘å‡ºç°ç‹¬è¡Œä¾ ï¼Œå³ä¾¿çœŸæœ‰ï¼Œä»–ä»¬ä¹Ÿä¸æ˜¯åœ¨çœŸç©ºä¸­å®Œæˆè¶…äººåˆ›ä¸¾çš„ã€‚ä»–ä»¬çš„æƒŠä¸–ä¹‹ä½œå‡ ä¹éƒ½æ˜¯çµæ„Ÿçš„ç«èŠ±å’Œä¼˜ç§€å›¢é˜Ÿåˆ›ä½œå‡ºæ¥çš„ç»“æœã€‚å› ä¸º<strong>è½¯ä»¶å¼€å‘æ˜¯ä¸€é¡¹å›¢é˜Ÿæ´»åŠ¨ã€‚</strong><br>ä¼˜ç§€å›¢é˜Ÿçš„ä¸‰å¤§åŸºçŸ³ï¼šè°¦è™šï¼ˆHumilityï¼‰ã€å°Šé‡ï¼ˆRespectï¼‰ã€ä¿¡ä»»ï¼ˆTrustï¼‰ã€‚ä»¥ä¸‹ç®€ç§°HRTã€‚<br>HRTéœ€è¦æ¯ä¸ªæˆå‘˜åšçš„äº‹ï¼šæ”¾ä¸‹è‡ªæˆ‘ã€æ‰¹è¯„ä¸è‡ªæˆ‘æ‰¹è¯„ã€å¿«é€Ÿå¤±è´¥å’Œè¿­ä»£ã€ç•™å‡ºå­¦ä¹ çš„æ—¶é—´ã€å­¦ä¼šå¿è€ã€æ¥å—æ”¹å˜ã€‚</p><h3 id="æ‰“é€ å›¢é˜Ÿæ–‡åŒ–"><a href="#æ‰“é€ å›¢é˜Ÿæ–‡åŒ–" class="headerlink" title="æ‰“é€ å›¢é˜Ÿæ–‡åŒ–"></a>æ‰“é€ å›¢é˜Ÿæ–‡åŒ–</h3><p>å›¢é˜Ÿæ–‡åŒ–ä¸ä»…ä»…æ˜¯å›¢é˜Ÿæˆå‘˜å®Œæˆå·¥ä½œã€ç¼–å†™ä»£ç æˆ–å½¼æ­¤ç›¸å¤„çš„æ–¹å¼ï¼Œè€Œä¸”æ˜¯æˆå‘˜å…±äº«çš„ç»éªŒã€ä»·å€¼è§‚å’Œç›®æ ‡ã€‚<br>å¦‚æœå›¢é˜Ÿæˆå‘˜ä¸é‡è§†å›¢é˜Ÿæ–‡åŒ–ï¼Œä¸ä»…éš¾ä»¥åŸ¹å…»å¾ˆå¼ºå¤§çš„å›¢é˜Ÿè®¤åŒæ„Ÿå’Œå¯¹å·¥ä½œçš„é›†ä½“è£èª‰æ„Ÿï¼Œè€Œä¸”æ–°æˆå‘˜å¾ˆå®¹æ˜“ç»™å›¢é˜Ÿæ–‡åŒ–å¸¦æ¥ä¸å¥½çš„å½±å“ã€‚<br>å›¢é˜Ÿæ–‡åŒ–ä¸æ˜¯å›¢é˜Ÿé¢†å¯¼è€…è´Ÿè´£ç»´æŠ¤çš„ï¼Œè€Œæ˜¯æ¯ä¸ªæˆå‘˜å‚ä¸çš„ç»“æœã€‚<br>äººå°‘æ—¶ä½¿ç”¨åŒæ­¥æ²Ÿé€šï¼ˆä¼šè®®å’Œç”µè¯ç­‰ï¼‰ï¼Œäººå¤šæ—¶ä½¿ç”¨å¼‚æ­¥æ²Ÿé€šï¼ˆé‚®ä»¶ã€é—®é¢˜è·Ÿè¸ªç³»ç»Ÿç­‰ï¼‰ã€‚<br>é«˜å±‚åŒæ­¥æ–¹å¼ï¼šä»»åŠ¡è¯´æ˜ä¹¦ã€é«˜æ•ˆä¼šè®®ã€è®¾è®¡æ–‡æ¡£ã€‚<br>ä¸»æŒä¼šè®®çš„5æ¡å‡†åˆ™ï¼š</p><ol><li>åªé‚€è¯·å¿…éœ€äººå‘˜å‚åŠ ï¼›</li><li>è‰æ‹Ÿè®®ç¨‹å¹¶åœ¨ä¼šè®®å¼€å§‹å‰å°½æ—©å‘å‡ºï¼›</li><li>å®Œæˆä¼šè®®ç›®æ ‡å³å¯æ•£ä¼šï¼›</li><li>ä¿æŒä¼šè®®æŒ‰è®®ç¨‹è¿›è¡Œï¼›</li><li>å°½é‡å°†ä¼šè®®å®‰æ’åœ¨ä¸­æ–­ç‚¹é™„è¿‘ï¼ˆå¦‚åˆé¤æˆ–ä¸‹ç­çš„æ—¶é—´ï¼‰ã€‚</li></ol><p>æ—¥å¸¸è®¨è®ºæ–¹å¼ï¼šé‚®ä»¶ã€åœ¨çº¿èŠå¤©ã€é¢å¯¹é¢æ²Ÿé€šã€‚<br>å·¥ä½œä¸­çš„æ²Ÿé€šï¼šä»£ç æ³¨é‡Šã€ç½²åã€æ¯æ¬¡æäº¤å¿…æœ‰å®¡é˜…ã€æµ‹è¯•ä¸å‘å¸ƒæµç¨‹ã€‚</p><h3 id="ç¾¤é¾™ä¸å¯æ— é¦–"><a href="#ç¾¤é¾™ä¸å¯æ— é¦–" class="headerlink" title="ç¾¤é¾™ä¸å¯æ— é¦–"></a>ç¾¤é¾™ä¸å¯æ— é¦–</h3><p>é¡¹ç›®å’Œèˆ¹ä¸€æ ·ï¼Œå¦‚æœæ²¡æœ‰äººé¢†èˆªï¼Œé¡¹ç›®å›¢é˜Ÿå°±æ˜¯ä¸€ç¾¤åªä¼šç­‰å¾…äº‹æƒ…å‘ç”Ÿè€Œæ— æ‰€äº‹äº‹çš„æå®¢è€Œå·²ã€‚<br>å…¬å¸ä¸åº”è¯¥å¼ºåˆ¶å‘˜å·¥çš„èŒä¸šå‘å±•è¿›å…¥ç®¡ç†å±‚ã€‚å¦‚æœä¸€ä¸ªå·¥ç¨‹å¸ˆèƒ½å†™å‡ºå¾ˆå¥½çš„ä»£ç ï¼Œæ ¹æœ¬æ— æ„ç®¡ç†åˆ«äººæˆ–é¢†å¯¼å›¢é˜Ÿï¼Œé‚£ä¹ˆå¼ºåˆ¶ä»–æ‹…ä»»ç®¡ç†æˆ–æŠ€æœ¯ä¸»ç®¡èŒä½ä¼šä½¿ä½ å¤±å»ä¸€ä½ä¼˜ç§€çš„å·¥ç¨‹å¸ˆï¼Œæ¢æ¥ä¸€ä½å·®åŠ²çš„ç»ç†ï¼ˆæœ¬ä¹¦ä¸­çš„ç»ç†ç‰¹æŒ‡é¢†å¯¼è€…ï¼‰ã€‚<br>é¢†å¯¼è€…èƒ½åšçš„æœ€é‡è¦çš„äº‹å°±æ˜¯æœåŠ¡å›¢é˜Ÿï¼Œå°±åƒç®¡å®¶ç…§é¡¾å®¶äººçš„å¥åº·å’Œç¦åˆ©ä¸€æ ·ã€‚æœåŠ¡å‹é¢†å¯¼è€…ä¸ºå›¢é˜Ÿæ­æ¡¥é“ºè·¯ï¼Œåœ¨éœ€è¦æ—¶ç»™å‡ºå»ºè®®ï¼Œè€Œä¸”ä¾æ—§æ„¿æ„ä»äº‹å…·ä½“å·¥ä½œã€‚<br>é¢†å¯¼è€…ä¸å¥½çš„åšæ³•ï¼šé›‡ä½£è½¯å¼±è€…ã€å¿½è§†è¡¨ç°ä¸ä½³è€…ã€å¿½è§†äººé™…å…³ç³»ã€ä¸æ‰€æœ‰äººä¸ºå‹ï¼ˆè¦ä¿æŒè‡ªå·±çš„æƒå¨ï¼‰ã€æ”¾å®½æ‹›äººæ ‡å‡†ã€æŠŠå›¢é˜Ÿå½“å­©å­ç®¡ï¼ˆæ²¡å¿…è¦ä»€ä¹ˆéƒ½ç®¡ï¼‰ã€‚<br>é¢†å¯¼è€…å¥½çš„åšæ³•ï¼šæ”¾ä¸‹è‡ªå°Šã€æˆä¸ºç¦…æ„å¤§å¸ˆã€æˆä¸ºå›¢é˜Ÿå‚¬åŒ–å‰‚ã€æˆå‘˜å¤±è´¥ä¹Ÿæ²¡å…³ç³»ã€æˆä¸ºè€å¸ˆæˆ–å¯¼å¸ˆã€è®¾å®šæ¸…æ™°çš„ç›®æ ‡ã€å…³æ³¨å¹¸ç¦åº¦ã€è¦æœ‰è‡ªå·±çš„å·¥ä½œã€å¯»æ‰¾ä»£æ›¿è‡ªå·±çš„äººã€ç»™å›¢é˜Ÿä¸€æ–¹å‡€åœŸã€ä¿æŠ¤å›¢é˜Ÿã€è‚¯å®šå›¢é˜Ÿçš„æˆå°±ã€æ¿€åŠ±å›¢é˜Ÿã€‚</p><h3 id="åº”å¯¹æœ‰å®³çš„äºº"><a href="#åº”å¯¹æœ‰å®³çš„äºº" class="headerlink" title="åº”å¯¹æœ‰å®³çš„äºº"></a>åº”å¯¹æœ‰å®³çš„äºº</h3><p>ä¸è¦å°†å›¢é˜Ÿå½“ä½œä¸€ä¸ªåŠ›å›¾â€œé©±é™¤æ¶äººâ€çš„ç²¾è‹±å…„å¼Ÿä¼šï¼Œè€Œæ˜¯è¦åˆ›é€ ä¸€ç§æ‹’ç»å®¹å¿ç‰¹å®šè´Ÿé¢è¡Œä¸ºçš„å›¢é˜Ÿæ–‡åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦å»é™¤çš„æ˜¯è¡Œä¸ºè€Œä¸æ˜¯ç‰¹å®šçš„äººã€‚<br>å¸¸è§çš„æœ‰å®³è¡Œä¸ºï¼šä¸å°Šé‡ä»–äººçš„æ—¶é—´ã€è‡ªå¤§ã€é¢æŒ‡æ°”ä½¿ã€æ²Ÿé€šå¹¼ç¨šæˆ–æ··ä¹±ã€ç–‘ç¥ç–‘é¬¼ã€å®Œç¾ä¸»ä¹‰ã€‚<br>å¦‚ä½•å¤„ç†è¿™äº›æœ‰å®³çš„è¡Œä¸ºï¼šå¯¹å®Œç¾ä¸»ä¹‰è€…å¯ä»¥æ¢ä¸ªè¯é¢˜ã€å¯¹æœ‰æ„æ¿€æ€’ä½ çš„äººä¿æŒæ²‰é»˜ã€ä¸è¦è¿‡äºæƒ…ç»ªåŒ–ã€åœ¨æ„¤æ€’ä¸­å¯»æ‰¾äº‹å®ã€ä»¥å¾·æŠ¥æ€¨ã€é€‚æ—¶æ”¾æ‰‹ã€æ”¾çœ¼æœªæ¥ã€‚</p><h3 id="ç»„ç»‡æ“ä½œçš„è‰ºæœ¯"><a href="#ç»„ç»‡æ“ä½œçš„è‰ºæœ¯" class="headerlink" title="ç»„ç»‡æ“ä½œçš„è‰ºæœ¯"></a>ç»„ç»‡æ“ä½œçš„è‰ºæœ¯</h3><p>ç†æƒ³çš„å·¥ä½œä½“éªŒï¼šå®Œæˆæœ¬èŒå·¥ä½œåå¯»æ±‚æ›´å¤šçš„èŒè´£ã€æ‰¿æ‹…é£é™©ä¸”ä¸æƒ§å¤±è´¥ã€è¡¨ç°çš„åƒæˆå¹´äººä¸€æ ·ã€å¯¹ä¸ç¡®å®šçš„ä¸œè¥¿æå‡ºç–‘é—®ã€åŠæ—¶ä¸ç»ç†æ²Ÿé€šã€‚<br>é€šå¸¸æƒ…å†µï¼šç»ç†ä¸ç§°èŒï¼ˆæ¯”å¦‚ç»ç†å®³æ€•å¤±è´¥ã€ä¸ä¿¡èµ–å‘˜å·¥ã€è—åŒ¿ä¿¡æ¯ã€é‡åˆ°å¤±è´¥å½’ç»“äºå‘˜å·¥èº«ä¸Šã€è·å¾—æˆåŠŸè‡ªå·±ç‹¬äº«ç­‰ï¼‰ï¼ŒåŠå…¬å®¤æ”¿æ²»å®¶ï¼ˆå»ºè®®å°½é‡é¿å¼€ï¼‰ï¼Œç®¡ç†ä¸å½“çš„ç»„ç»‡ã€‚<br>ç»„ç»‡æ“ä½œçš„è‰ºæœ¯ï¼šå–å¾—åŸè°…æ¯”è·å–è®¸å¯æ›´å®¹æ˜“ã€å¦è¾Ÿè¹Šå¾„ã€å­¦ä¼šå‘ä¸Šç®¡ç†ã€å¸®åŠ©ä»–äººï¼ˆæˆ–è®¸ä¸ä¼šç«‹å³å¸¦æ¥å¥½å¤„ï¼Œä½†æœ‰å¯èƒ½å¤šå¹´ä»¥åä»–ä¼šå¸®åŠ©ä½ ï¼‰ã€æ™‹å‡åˆ°ä¸€ä¸ªå®‰å…¨çš„èŒä½ã€å¯»æ‰¾æœ‰è¥é”€åŠ›çš„æœ‹å‹ã€‚<br>å½“æœ‰æœºä¼šçº æ­£é”™è¯¯çš„æ—¶å€™ï¼Œèº«å±…é«˜ä½çš„é¢†å¯¼å¾€å¾€å¾ˆä¹æ„å»åšï¼Œç¹å¿™çš„é¢†å¯¼ä¹Ÿæ˜¯å¦‚æ­¤ã€‚<br>å¦‚æœçš„ç¡®æ— èƒ½ä¸ºåŠ›ï¼Œé‚£å°±ä¸è¦è€—ç€ï¼Œèµ°ä¸ºä¸Šç­–ã€‚ä½†æ˜¯ï¼Œä¸æ˜¯è¯´å¦‚æœç°åœ¨çš„å·¥ä½œå¹²å¾—ä¸å¼€å¿ƒå°±åº”è¯¥æ›´æ–°ç®€å†ç«‹é©¬èµ°äººã€‚ç›¸åï¼Œä½ çš„é¦–è¦ç›®æ ‡åº”å½“æ˜¯ä½œå‡ºæ‰€éœ€çš„æ”¹å˜ï¼Œä½¿è‡ªå·±å¼€å¿ƒï¼Œå®Œæˆç›®æ ‡ã€‚</p><h3 id="ç”¨æˆ·ä¹Ÿæ˜¯äºº"><a href="#ç”¨æˆ·ä¹Ÿæ˜¯äºº" class="headerlink" title="ç”¨æˆ·ä¹Ÿæ˜¯äºº"></a>ç”¨æˆ·ä¹Ÿæ˜¯äºº</h3><p>è¦åˆ›é€ ä¼˜ç§€çš„äº§å“ï¼Œéœ€è¦ç§¯æåœ°ä¸ç”¨æˆ·åˆä½œã€‚<br>å¦‚æœåˆ›é€ æ›´å¥½çš„äº§å“ï¼š</p><ol><li>å¸‚åœºè¥é”€ï¼šäº†è§£äººä»¬å¯¹è½¯ä»¶çš„çœ‹æ³•ï¼›ç€å†³å®šäº†ä»–ä»¬ä¼šä¸ä¼šæ„¿æ„å°è¯•ã€‚</li><li>äº§å“è®¾è®¡ï¼šå¦‚æœè½¯ä»¶åšä¸åˆ°å®¹æ˜“å°è¯•ã€é€Ÿåº¦å¿«ã€åˆå¥½è€Œä¸”ç”¨æˆ·é¢å¹¿ï¼Œç”¨æˆ·å°±ä¼šæµå¤±ã€‚</li><li>å®¢æˆ·æœåŠ¡ï¼šä¸»åŠ¨ä¸ç”¨æˆ·å»ºç«‹é•¿æœŸçš„è‰¯å¥½å…³ç³»èƒ½å½±å“è½¯ä»¶çš„æ¼”åŒ–å’Œç”¨æˆ·ä¿æŒç‡ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®¡ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡</title>
      <link href="/2019/04/27/%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/"/>
      <url>/2019/04/27/%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScriptæ˜¯åŸºäºäº‹ä»¶å¾ªç¯è€Œè¿è¡Œçš„ï¼Œå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡æ˜¯äº‹ä»¶å¾ªç¯ä¸­é‡è¦æ¦‚å¿µã€‚è‡ªnodeç«èµ·æ¥åï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹å°±æˆäº†é¢è¯•å®˜å‹è½´å¤§é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦ä¼šã€‚</p><p>JavaScriptçš„å¼‚æ­¥æœ€å¼€å§‹çš„æ—¶å€™æ˜¯åŸºäºä¸€ä¸ªä¸ªçš„å›è°ƒå‡½æ•°ï¼Œè€Œäº‹ä»¶å¾ªç¯ä¸­ä»»åŠ¡ï¼Œè¯´ç™½äº†ä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸ªçš„å‡½æ•°ï¼Œæ¯•ç«Ÿå‡½æ•°æ˜¯JavaScriptä¸­çš„ä¸€ç­‰å…¬æ°‘ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Œä»€ä¹ˆåˆæ˜¯å®ä»»åŠ¡å‘¢ï¼Ÿå…¶å®æ˜¯é€šè¿‡æ‰§è¡Œçš„æ—¶æœºæ¥åŒºåˆ†çš„ï¼š</p><blockquote><p>å¾®ä»»åŠ¡ï¼šåœ¨æœ¬æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œåæ‰§è¡Œã€‚<br>å®ä»»åŠ¡ï¼šåœ¨ä¸‹ä¸€ä¸ªä»»åŠ¡å¾ªç¯çš„æ—¶å€™æ‰§è¡Œã€‚</p></blockquote><p>è¿™é‡Œæœ‰ä¸€å¼ ç»å…¸çš„å›¾ç‰‡ï¼Œä¾›å¤§å®¶å‚è€ƒï¼š</p><p><img src="/2019/04/27/å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡/1.png" alt="å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡"></p><p>æ¯æ¬¡äº‹ä»¶çš„å¾ªç¯çš„æ‰§è¡Œéƒ½æ˜¯ä»¥å®ä»»åŠ¡å¼€å§‹çš„ã€‚å¦‚æœæœ¬æ¬¡å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•äº†ï¼Œé‚£ä¹ˆå°±ä¼šæ£€ç´¢æ˜¯å¦æœ‰å¾®ä»»åŠ¡ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆå°±å»æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå¦‚æœå¾®ä»»åŠ¡æ‰§è¡Œå®Œæˆ–è€…æ²¡æœ‰å¾®ä»»åŠ¡çš„è¯é‚£ä¹ˆå°±ä¼šè¿›å…¥ä¸‹æ¬¡äº‹ä»¶å¾ªç¯ã€‚</p><blockquote><p>å¸¸è§çš„å®ä»»åŠ¡ï¼šsetTimeoutã€setIntervalã€setImmediateï¼ˆNodeç‰¹æœ‰ï¼‰ã€requestAnimationFrameï¼ˆæµè§ˆå™¨ç‰¹æœ‰ï¼‰ã€‚<br>å¸¸è§çš„å®ä»»åŠ¡ï¼šPromiseä¸­çš„then/catch/finallyæ–¹æ³•ã€process.nextTickï¼ˆNodeç‰¹æœ‰ï¼‰ã€‚</p></blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹æ˜¯Promiseçš„æ„é€ æ–¹æ³•åœ¨newçš„æ—¶å€™ä¼šç«‹å³æ‰§è¡Œã€‚<br>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªè€æ‰ç‰™çš„ç»å…¸é¢è¯•é¢˜å§ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">    process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'3'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'4'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'5'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'6'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'7'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'8'</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'9'</span>);</span><br><span class="line">    process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'10'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'11'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'12'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>åˆ†åˆ«æ‰“å°ï¼š<code>1 7 6 8 2 4 3 5 9 11 10 12</code>ã€‚å¦‚æœå’Œä½ çš„é¢„æœŸæ˜¯ä¸€æ ·çš„è¯´æ˜ä½ å·²ç»æŒæ¡äº†ï¼Œå°±æ²¡å¿…è¦çœ‹ä¸‹é¢çš„åˆ†è§£æ­¥éª¤äº†ã€‚</p><ol><li>é¦–å…ˆæ‰“å°1ã€‚ç¬¬3è¡Œé‡åˆ°<code>setTimeout</code>åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œä¸‹æ¬¡å¤„ç†ã€‚ç¬¬16è¡Œï¼Œé‡åˆ°å¾®ä»»åŠ¡<code>process.nextTick</code>ï¼ŒåŠ å…¥åˆ°å¾®ä»»åŠ¡çš„é˜Ÿåˆ—ä¸­ã€‚ç¬¬20è¡Œ<code>new Promise</code>æ‰§è¡Œæ„é€ æ–¹æ³•<code>æ‰“å°7</code>ï¼Œå°†thenæ”¾åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ç¬¬20è¡Œå‘ç°<code>setTimeout</code>ï¼Œæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚</li><li>æœ¬æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œæ£€æµ‹å¾®ä»»åŠ¡ï¼Œå‘ç°æœ‰2ä¸ªï¼Œä¸€ä¸ªæ˜¯ç¬¬16è¡Œçš„<code>process.nextTick</code>ï¼Œä¸€ä¸ªæ˜¯23è¡Œçš„<code>then</code>ï¼Œåˆ†åˆ«æ‰§è¡Œï¼Œæ‰“å°6å’Œ8ã€‚</li><li>æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ç¬¬3è¡Œçš„<code>setTimeout</code>ï¼Œåˆ†åˆ«æ‰“å°2å’Œ4ï¼Œå‘ç°æœ‰2ä¸ªå¾®ä»»åŠ¡ï¼Œåˆ†åˆ«æ‰“å°3å’Œ5ã€‚</li><li>æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ç¬¬27è¡Œçš„<code>setTimeout</code>ï¼Œåˆ†åˆ«æ‰“å°9å’Œ11ï¼Œå‘ç°æœ‰2ä¸ªå¾®ä»»åŠ¡ï¼Œåˆ†åˆ«æ‰“å°10å’Œ12ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‹ä»¶å¾ªç¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éé›¶ç¯ç»•è§„åˆ™</title>
      <link href="/2019/04/27/%E9%9D%9E%E9%9B%B6%E7%8E%AF%E7%BB%95%E8%A7%84%E5%88%99/"/>
      <url>/2019/04/27/%E9%9D%9E%E9%9B%B6%E7%8E%AF%E7%BB%95%E8%A7%84%E5%88%99/</url>
      
        <content type="html"><![CDATA[<p>éé›¶ç¯ç»•è§„åˆ™æ˜¯å›¾å½¢å­¦ä¸­åˆ¤æ–­æŸä¸ªåŒºåŸŸæ˜¯åœ¨æ‰€å±åŒºåŸŸå¤–é¢è¿˜æ˜¯å†…éƒ¨çš„ä¸€ç§è§„åˆ™ã€‚</p><p>ç®€å•è¯´ä¸€ä¸‹å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š<strong>å¯¹äºè·¯å¾„ä¸­çš„ä»»æ„ç»™å®šåŒºåŸŸï¼Œä»è¯¥åŒºåŸŸå†…éƒ¨ç”»ä¸€æ¡è¶³å¤Ÿé•¿çš„çº¿æ®µï¼Œä½¿æ­¤çº¿æ®µçš„ç»ˆç‚¹å®Œå…¨éœ²åœ¨è·¯å¾„èŒƒå›´ä¹‹å¤–ã€‚ç„¶åå°†è®¡æ•°å™¨åˆå§‹åŒ–ä¸º0ï¼Œæ¯å½“è¿™æ¡çº¿æ®µä¸è·¯å¾„ä¸Šçš„ç›´çº¿æˆ–æ›²çº¿ç›¸äº¤æ—¶ï¼Œå°±æ”¹å˜è®¡æ•°å™¨çš„å€¼ã€‚å¦‚æœä¸è·¯å¾„é¡ºæ—¶é’ˆéƒ¨åˆ†ç›¸äº¤çš„æ—¶å€™ï¼Œåˆ™åŠ 1ï¼›å¦‚æœä¸è·¯å¾„çš„é€†æ—¶é’ˆéƒ¨åˆ†ç›¸äº¤çš„æ—¶å€™ï¼Œåˆ™å‡1ã€‚å¦‚æœæœ€ç»ˆå€¼ä¸æ˜¯0ï¼Œé‚£ä¹ˆè¯´æ˜åŒºåŸŸåœ¨è·¯å¾„çš„é‡Œé¢ã€‚</strong></p><p><img src="/2019/04/27/éé›¶ç¯ç»•è§„åˆ™/1.png" alt="éé›¶ç¯ç»•è§„åˆ™ç¤ºæ„å›¾"></p><p>å¦‚ä¸Šå›¾ï¼Œä¸€æ¡é—­åˆçš„è·¯å¾„ï¼Œå›´ç»•æˆäº†3ä¸ªåŒºåŸŸï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„Aã€Bã€Cï¼ˆå›¾ç•¥ä¸‘ï¼Œå‡‘åˆç€çœ‹å§ï¼‰ã€‚<br>AåŒºåŸŸå‘å¤–å¼•ä¸€æ¡çº¿æ®µï¼ˆç»¿è‰²çš„ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°ä¸è·¯å¾„çš„é¡ºæ—¶é’ˆç›¸äº¤ï¼Œæ‰€ä»¥è®¡æ•°å™¨åŠ 1ï¼Œå˜æˆäº†1ï¼Œè€Œå†å¤–é¢ä¸€äº›æ˜¯ä¸ä¼šç›¸äº¤äº†ï¼Œç”±äº1ä¸æ˜¯0ï¼Œæ‰€ä»¥Aåœ¨è·¯å¾„é‡Œé¢ã€‚<br>åŒç†ï¼ŒBåŒºåŸŸå¼•ä¸€æ¡çº¿æ®µï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å’Œé€†æ—¶é’ˆç›¸äº¤ï¼Œæ‰€ä»¥å‡1ï¼Œä¹Ÿå°±æ˜¯-1ï¼Œä¹Ÿä¸ä¼šå†ä¸è·¯å¾„ç›¸äº¤äº†ï¼Œç”±äº-1ä¸æ˜¯0ï¼Œæ‰€ä»¥Bä¹Ÿåœ¨è·¯å¾„çš„å†…éƒ¨ã€‚<br>å¯¹äºCæˆ‘ä»¬å¼•å…¥ä¸€æ¡çº¿æ®µï¼Œå®ƒ2æ¬¡éƒ½ä¸é¡ºæ—¶é’ˆç›¸äº¤ï¼Œæ‰€ä»¥è®¡æ•°ä¸º2ï¼Œä¹Ÿå°±åœ¨åŒºåŸŸçš„å†…éƒ¨äº†ã€‚</p><p>æ˜ç™½äº†åŸºæœ¬çš„åŸç†æˆ‘ä»¬çœ‹ä¸€ä¸ªä»£ç ç›¸å…³çš„ä¾‹å­å§ã€‚<br>ç°æœ‰HTMLï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span>&gt;</span>ä¸æ”¯æŒcanvas<span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœæ”¯æŒHTML5çš„<code>canvas</code>çš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªé»˜è®¤å¤§å°ä¸º<code>300px*150px</code>çš„canvasç”»æ¿ï¼›å¦‚æœä¸æ”¯æŒçš„æ—¶å€™ä¼šæŠŠcanvaså½“æˆä¸€ä¸ªdivå…ƒç´ æ¥å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šæ˜¾ç¤ºé‡Œé¢çš„æ–‡å­—äº†ã€‚</p><p>ç„¶åæˆ‘ä»¬ä½¿ç”¨JSæ¥ç»˜åˆ¶å›¾æ¡ˆï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">context.fillStyle = <span class="string">"red"</span>;</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">false</span>);</span><br><span class="line">context.arc(<span class="number">150</span>, <span class="number">75</span>, <span class="number">25</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">context.fill();</span><br></pre></td></tr></table></figure></p><p>ç”±ä¸Šæˆ‘ä»¬ç”»äº†2ä¸ªå¼§çº¿ï¼Œé¡¶ç‚¹éƒ½æ˜¯(150,75)çš„ä½ç½®ï¼ˆå…¶å®å°±æ˜¯canvasçš„ä¸­å¿ƒï¼‰ï¼Œç„¶ååŠå¾„ä¸€ä¸ªæ˜¯50ï¼Œä¸€ä¸ªæ˜¯25ï¼Œéƒ½æ˜¯ä»0åˆ°2Ï€ï¼ˆå¼§åº¦2Ï€ä¹Ÿå°±æ˜¯360Â°ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”»çš„æ˜¯2ä¸ªåœ†å½¢ï¼ˆå¼§çº¿æ˜¯ä»å³è¾¹å¼€å§‹ç”»å¼§çš„ï¼‰ã€‚æœ€åä¸€ä¸ªå‚æ•°æœ‰æ„æ€ï¼Œå¦‚æœä¸ºtrueçš„æ—¶å€™æ˜¯é€†æ—¶é’ˆç»˜åˆ¶ï¼Œå¦‚æœæ˜¯falseåˆ™æ˜¯é¡ºæ—¶é’ˆç»˜åˆ¶ï¼ˆé»˜è®¤æ˜¯falseï¼‰ï¼Œé‚£ä¹ˆä¸Šè¿°è·¯å¾„ä¸­ï¼Œå†…åœ†å†…éƒ¨å‘å¤–å¼•ä¸€æ¡å°„çº¿ï¼Œé‚£ä¹ˆä¸å†…åœ†äº¤å‰çš„åœ°æ–¹æ˜¯é€†æ—¶é’ˆï¼Œé‚£ä¹ˆå‡1ï¼Œè€Œä¸å¤–åœ†ç›¸äº¤çš„åœ°æ–¹æ˜¯é¡ºæ—¶é’ˆï¼Œæ‰€ä»¥åŠ 1ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ç»“æœæ˜¯0ï¼Œä¹Ÿå°±æ˜¯å†…åœ†å†…éƒ¨å…¶å®æ˜¯è·¯å¾„çš„å¤–é¢ï¼Œæ‰€ä»¥ç»˜åˆ¶å‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼š<br><img src="/2019/04/27/éé›¶ç¯ç»•è§„åˆ™/2.png" alt="åŒå¿ƒåœ†"></p><p>å¦‚æœæˆ‘ä»¬æŠŠä¸Šè¿°ç”»å¼§çš„æœ€åä¸€ä¸ªå‚æ•°éƒ½å»æ‰çš„è¯ï¼ˆä½¿ç”¨é»˜è®¤å€¼falseï¼‰ï¼Œé‚£ä¹ˆæ•ˆæœæ˜¯æ€ä¹ˆæ ·å­å‘¢ï¼Ÿå½“ç„¶æ˜¯å†…åœ†å†…éƒ¨ä¹Ÿåœ¨è·¯å¾„çš„å†…éƒ¨äº†ï¼ˆæœ‰ç‚¹ç»•ï¼‰ï¼Œå¦‚ä¸‹ï¼š<br><img src="/2019/04/27/éé›¶ç¯ç»•è§„åˆ™/3.png" alt="å†…åœ†ä¹Ÿåœ¨å†…éƒ¨"></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éé›¶ç¯ç»•è§„åˆ™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS7å±‚å±‚å é¡ºåº</title>
      <link href="/2019/04/25/CSS7%E5%B1%82%E5%B1%82%E5%8F%A0%E9%A1%BA%E5%BA%8F/"/>
      <url>/2019/04/25/CSS7%E5%B1%82%E5%B1%82%E5%8F%A0%E9%A1%BA%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>å±‚å é¡ºåºå¦‚ä¸‹ï¼š</p><p><img src="/2019/04/25/CSS7å±‚å±‚å é¡ºåº/1.png" alt="å±‚å é¡ºåº"></p><hr><p>æ›´å…·ä½“çš„å¯ä»¥å‚è€ƒå¼ é‘«æ—­çš„<a href="https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å±‚å é¡ºåº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å®˜ï¼šè€ƒä½ å‡ ä¸ªç®€å•çš„äº‹ä»¶é—®é¢˜å§</title>
      <link href="/2019/04/21/%E9%9D%A2%E8%AF%95%E5%AE%98%EF%BC%9A%E8%80%83%E4%BD%A0%E5%87%A0%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E9%97%AE%E9%A2%98%E5%90%A7/"/>
      <url>/2019/04/21/%E9%9D%A2%E8%AF%95%E5%AE%98%EF%BC%9A%E8%80%83%E4%BD%A0%E5%87%A0%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E9%97%AE%E9%A2%98%E5%90%A7/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é¢è¯•å®˜ï¼šè€ƒä½ å‡ ä¸ªç®€å•çš„äº‹ä»¶é—®é¢˜å§ã€‚<br>å‡ å°æ—¶åçš„ä½ ï¼šè™½ç„¶é¢è¯•å®˜è€ƒçš„å¾ˆç®€å•ï¼Œä½†æ˜¯å°±æ˜¯æ²¡æœ‰ç­”ä¸Šæ¥ã€‚</p></blockquote><p>äº‹ä»¶å¤„ç†æ˜¯JavaScriptä¸­éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å®¢æˆ·ç«¯è½¯ä»¶å¾€å¾€éƒ½æ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œæ‰€ä»¥é¢è¯•å®˜ç‰¹åˆ«å–œæ¬¢é—®ä¸€äº›äº‹ä»¶ç›¸å…³çš„çŸ¥è¯†ï¼Œè¿™é‡Œè®°å½•å‡ ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œä¾›å¤§å®¶å­¦ä¹ ã€‚</p><hr><p>äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·é˜¶æ®µã€ç›®æ ‡é˜¶æ®µå’Œäº‹ä»¶å†’æ³¡é˜¶æ®µï¼ˆè¿™ä¸ªé—®é¢˜å¤§å¤šæ•°åŒå­¦éƒ½çŸ¥é“ï¼Œå¾ˆå®¹æ˜“è¢«é—®æ‡µï¼‰ã€‚</p><p>äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆäº‹ä»¶ä¾¦å¬å™¨ï¼‰ï¼šå“åº”çš„æŸä¸ªäº‹ä»¶å‡½æ•°ã€‚</p><h4 id="æ·»åŠ äº‹ä»¶æœ‰å‡ ç§æ–¹å¼ï¼ˆä»¥clickäº‹ä»¶ä¸ºä¾‹ï¼‰ï¼Ÿ"><a href="#æ·»åŠ äº‹ä»¶æœ‰å‡ ç§æ–¹å¼ï¼ˆä»¥clickäº‹ä»¶ä¸ºä¾‹ï¼‰ï¼Ÿ" class="headerlink" title="æ·»åŠ äº‹ä»¶æœ‰å‡ ç§æ–¹å¼ï¼ˆä»¥clickäº‹ä»¶ä¸ºä¾‹ï¼‰ï¼Ÿ"></a>æ·»åŠ äº‹ä»¶æœ‰å‡ ç§æ–¹å¼ï¼ˆä»¥clickäº‹ä»¶ä¸ºä¾‹ï¼‰ï¼Ÿ</h4><ol><li><p>åœ¨HTMLä¸­æ·»åŠ <code>onclick</code>å±æ€§ï¼Œå€¼ä½¿ç”¨JSçš„å­—ç¬¦ä¸²æ¥è¡¨ç¤ºè¦æ‰§è¡Œçš„äº‹ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">value</span>=<span class="string">"æŒ‰é’®"</span> <span class="attr">onclick</span>=<span class="string">"handleClick()"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"æŒ‰é’®è¢«ç‚¹å‡»äº†"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç»™DOMå…ƒç´ æ·»åŠ <code>onclick</code>æ–¹æ³•ï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŒ‰é’®è¢«ç‚¹å‡»äº†"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>DOMå…ƒç´ ä½¿ç”¨<code>addEventListener</code>ï¼ˆIEä½¿ç”¨<code>attachEvent</code>ï¼‰æ¥æ·»åŠ æ–¹æ³•ï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŒ‰é’®è¢«ç‚¹å‡»äº†"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id="ä¸Šè¿°è¿™ç§onclickå’ŒaddEventListenerä¸¤ç§æ·»åŠ äº‹ä»¶çš„æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#ä¸Šè¿°è¿™ç§onclickå’ŒaddEventListenerä¸¤ç§æ·»åŠ äº‹ä»¶çš„æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="ä¸Šè¿°è¿™ç§onclickå’ŒaddEventListenerä¸¤ç§æ·»åŠ äº‹ä»¶çš„æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>ä¸Šè¿°è¿™ç§onclickå’ŒaddEventListenerä¸¤ç§æ·»åŠ äº‹ä»¶çš„æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h4><ol><li><code>onclick</code>æ˜¯DOM0çº§äº‹ä»¶å¤„ç†æ–¹å¼ï¼Œè€Œ<code>addEventListener</code>æ˜¯DOM2çº§äº‹ä»¶å¤„ç†æ–¹å¼ï¼Œæ‰€ä»¥å…¼å®¹æ€§<code>onclick</code>ä¼šæ›´å¥½ä¸€äº›ï¼ˆè™½ç„¶ç°åœ¨<code>addEventListener</code>ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼‰ã€‚</li><li><code>addEventListener</code>å¯ä»¥æ·»åŠ å¤šä¸ªæ–¹æ³•ï¼Œè€Œ<code>onclick</code>åªèƒ½æ·»åŠ ä¸€ä¸ªã€‚</li><li><p><code>addEventListener</code>å¯ä»¥æ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæ˜¯æ•è·è¿˜æ˜¯å†’æ³¡é˜¶æ®µè°ƒç”¨ï¼Œå¦‚æœä¸ºtrueçš„æ—¶å€™è¡¨ç¤ºæ•è·é˜¶æ®µè°ƒç”¨ï¼Œå¦‚æœæ˜¯falseçš„è¯è¡¨ç¤ºå†’æ³¡é˜¶æ®µè°ƒç”¨ï¼Œé»˜è®¤æ˜¯å†’æ³¡é˜¶æ®µè°ƒç”¨ï¼ˆundefinedç›¸å½“äºæ˜¯falseï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŒ‰é’®è¢«ç‚¹å‡»äº†"</span>);</span><br><span class="line">&#125;,<span class="literal">true</span>);</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"bodyè¢«ç‚¹å‡»äº†"</span>);</span><br><span class="line">&#125;,<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ä¼šå…ˆæ‰“å°"bodyè¢«ç‚¹å‡»äº†" å æ‰“å° "æŒ‰é’®è¢«ç‚¹å‡»äº†"</span></span><br><span class="line"><span class="comment">// å› ä¸ºç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯trueçš„æ—¶å€™è¡¨ç¤ºæ•è·é˜¶æ®µè°ƒç”¨</span></span><br><span class="line"><span class="comment">// å¦‚æœç¬¬ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯falseçš„æ—¶å€™ é‚£ä¹ˆå…ˆæ‰“å° "æŒ‰é’®è¢«ç‚¹å‡»äº†" åæ‰“å° "bodyè¢«ç‚¹å‡»äº†"</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸€ä¸ªæ˜¯falseä¸€ä¸ªæ˜¯trueé‚£ä¹ˆå…ˆæ‰“å°ä¸ºtrueçš„ å› ä¸ºæ•è·é˜¶æ®µå…ˆäºå†’æ³¡é˜¶æ®µ</span></span><br></pre></td></tr></table></figure></li><li><p><code>addEventListener</code>å¯ä»¥ä½¿ç”¨<code>removeEventListener</code>æ¥åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œ<code>onclick</code>æœ€å¤šåªæœ‰ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œæ‰€ä»¥åªè¦<code>btn.onclick = null;</code>å°±å¯ä»¥äº†ã€‚</p></li></ol><h4 id="addEventListenerä¸attachEventæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#addEventListenerä¸attachEventæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="addEventListenerä¸attachEventæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>addEventListenerä¸attachEventæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h4><ol><li><code>addEventListener</code>é€‚ç”¨äºæ­£å¸¸çš„W3Cæµè§ˆå™¨ï¼Œè€Œ<code>attachEvent</code>é€‚ç”¨äºIEæµè§ˆå™¨ï¼ˆæ³¨ï¼šEdgeéƒ½ä¸æ”¯æŒè¿™ç©æ„ï¼‰ã€‚</li><li><code>attachEvent</code>ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦å¸¦â€onâ€ã€‚æ¯”å¦‚æ·»åŠ clickäº‹ä»¶é‚£ä¹ˆattachEventçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯â€onclickâ€ã€‚</li><li><code>addEventListener</code>ä¸­çš„thisæŒ‡å‘DOMå…ƒç´ ï¼Œè€Œ<code>attachEvent</code>ä¸­çš„thisæŒ‡å‘windowã€‚</li><li><code>attachEvent</code>åªæ”¯æŒå†’æ³¡ä¸æ”¯æŒæ•è·ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</li><li><code>attachEvent</code>å¦‚æœæ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºé‚£ä¹ˆå…ˆæ‰§è¡Œåæ·»åŠ çš„åæ‰§è¡Œå…ˆæ·»åŠ çš„ï¼Œè¿™ä¸addEventListeneræ°å¥½ç›¸åï¼ˆIE9å’ŒIE10ä¿®æ”¹äº†æ‰§è¡Œé¡ºåºå’ŒaddEventListenerä¸€æ ·äº†ï¼Œå…ˆæ·»åŠ çš„å…ˆæ‰§è¡Œï¼‰ã€‚</li></ol><h4 id="å¦‚ä½•è·å–äº‹ä»¶å¯¹è±¡eventï¼Ÿ"><a href="#å¦‚ä½•è·å–äº‹ä»¶å¯¹è±¡eventï¼Ÿ" class="headerlink" title="å¦‚ä½•è·å–äº‹ä»¶å¯¹è±¡eventï¼Ÿ"></a>å¦‚ä½•è·å–äº‹ä»¶å¯¹è±¡eventï¼Ÿ</h4><p>é€šå¸¸æƒ…å†µä¸‹äº‹ä»¶å¤„ç†ç¨‹åºçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯eventå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// event å°±æ˜¯äº‹ä»¶å¯¹è±¡ é€šå¸¸çš„ä¹ æƒ¯ ä¹Ÿå¯ä»¥å‘½åä¸ºe</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µä¸‹ä¾‹å¤–ï¼Œå°±æ˜¯IEçš„DOM0çº§äº‹ä»¶<code>onclick</code>çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨çš„æ˜¯<code>window.event</code>æ¥è·å–ï¼ˆæ²¡é”™<code>attachEvent</code>ä¹Ÿæ˜¯é€šè¿‡äº‹ä»¶å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ¥è·å–ï¼‰ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>)</span>&#123;</span><br><span class="line">    event = event || <span class="built_in">window</span>.event;<span class="comment">// å…¼å®¹æ€§å¤„ç†</span></span><br><span class="line">    <span class="built_in">console</span>.log(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å¦‚ä½•æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Ÿ"><a href="#å¦‚ä½•æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Ÿ" class="headerlink" title="å¦‚ä½•æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Ÿ"></a>å¦‚ä½•æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Ÿ</h4><p>æ™®é€šæµè§ˆå™¨ä½¿ç”¨<code>event.preventDefault()</code>æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ŒIEä½¿ç”¨<code>event.retureValue = false;</code>ï¼ˆæ³¨æ„ï¼šå¹¶ä¸æ˜¯å‡½æ•°returnä¸€ä¸ªfalseï¼‰æ¥é˜»æ­¢ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>)</span>&#123;</span><br><span class="line">    event = event || <span class="built_in">window</span>.event;<span class="comment">// å…¼å®¹æ€§å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span>(event.preventDefault)&#123;<span class="comment">// é˜»æ­¢é»˜è®¤è¡Œä¸º</span></span><br><span class="line">        event.preventDefault();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        event.retureValue = <span class="literal">false</span>;<span class="comment">// IE</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å¦‚ä½•æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Ÿ"><a href="#å¦‚ä½•æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Ÿ"></a>å¦‚ä½•æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Ÿ</h4><p>æ™®é€šæµè§ˆå™¨ä½¿ç”¨<code>event.stopPropagation();</code>æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ŒIEä½¿ç”¨<code>event.cancelBubble = true;</code>ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>)</span>&#123;</span><br><span class="line">    event = event || <span class="built_in">window</span>.event;<span class="comment">// å…¼å®¹æ€§å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span>(event.stopPropagation)&#123;<span class="comment">// é˜»æ­¢äº‹ä»¶å†’æ³¡</span></span><br><span class="line">        event.stopPropagation();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        event.cancelBubble = <span class="literal">true</span>;<span class="comment">// IE</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="é‚£äº›æ ‡ç­¾æ”¯æŒloadäº‹ä»¶ï¼Ÿ"><a href="#é‚£äº›æ ‡ç­¾æ”¯æŒloadäº‹ä»¶ï¼Ÿ" class="headerlink" title="é‚£äº›æ ‡ç­¾æ”¯æŒloadäº‹ä»¶ï¼Ÿ"></a>é‚£äº›æ ‡ç­¾æ”¯æŒloadäº‹ä»¶ï¼Ÿ</h4><p>bodyï¼ˆæˆ–è€…windowå¯¹è±¡ï¼‰ï¼Œimgï¼Œscriptï¼ˆIE9+ï¼‰ï¼Œlinkï¼ˆIEå’ŒOperaæ”¯æŒï¼‰ã€‚</p><h4 id="ç‚¹å‡»ä¸€ä¸‹é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"><a href="#ç‚¹å‡»ä¸€ä¸‹é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ" class="headerlink" title="ç‚¹å‡»ä¸€ä¸‹é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"></a>ç‚¹å‡»ä¸€ä¸‹é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ</h4><p>mousedown &gt; mouseup &gt; clickã€‚</p><h4 id="åŒå‡»é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"><a href="#åŒå‡»é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ" class="headerlink" title="åŒå‡»é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"></a>åŒå‡»é¼ æ ‡å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ</h4><p>mousedown &gt; mouseup &gt; click &gt; mousedown &gt; mouseup &gt; click &gt; dbclickã€‚</p><h4 id="ç‚¹å‡»ä¸€ä¸‹é”®ç›˜å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"><a href="#ç‚¹å‡»ä¸€ä¸‹é”®ç›˜å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ" class="headerlink" title="ç‚¹å‡»ä¸€ä¸‹é”®ç›˜å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"></a>ç‚¹å‡»ä¸€ä¸‹é”®ç›˜å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ</h4><p>keydown &gt; keypress &gt; keyupï¼ˆæ³¨æ„è¿™é‡Œä¸clickçš„åŒºåˆ«ï¼‰ã€‚</p><h4 id="æŒ‰ä¸‹é”®ç›˜ä¸€ç›´ä¸æ”¾å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"><a href="#æŒ‰ä¸‹é”®ç›˜ä¸€ç›´ä¸æ”¾å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ" class="headerlink" title="æŒ‰ä¸‹é”®ç›˜ä¸€ç›´ä¸æ”¾å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"></a>æŒ‰ä¸‹é”®ç›˜ä¸€ç›´ä¸æ”¾å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ</h4><p>keydown &gt; keypress &gt; keydown &gt; keypress â€¦</p><h4 id="ç§»åŠ¨ç«¯è§¦æ‘¸ä¸€ä¸‹å±å¹•å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"><a href="#ç§»åŠ¨ç«¯è§¦æ‘¸ä¸€ä¸‹å±å¹•å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ" class="headerlink" title="ç§»åŠ¨ç«¯è§¦æ‘¸ä¸€ä¸‹å±å¹•å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ"></a>ç§»åŠ¨ç«¯è§¦æ‘¸ä¸€ä¸‹å±å¹•å‰åä¼šè°ƒç”¨é‚£äº›äº‹ä»¶ï¼Ÿ</h4><p>touchstart &gt; touchend &gt; mouseover &gt; mousemoveï¼ˆè§¦å‘ä¸€æ¬¡ï¼‰ &gt; mousedown &gt; mouseup &gt; clickã€‚</p><h4 id="äº‹ä»¶å¤„ç†åšè¿‡ä»€ä¹ˆä¼˜åŒ–ï¼Ÿ"><a href="#äº‹ä»¶å¤„ç†åšè¿‡ä»€ä¹ˆä¼˜åŒ–ï¼Ÿ" class="headerlink" title="äº‹ä»¶å¤„ç†åšè¿‡ä»€ä¹ˆä¼˜åŒ–ï¼Ÿ"></a>äº‹ä»¶å¤„ç†åšè¿‡ä»€ä¹ˆä¼˜åŒ–ï¼Ÿ</h4><ol><li>ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå¦‚è¡¨æ ¼ä¸­åˆ é™¤æŸä¸€è¡Œå¯ä»¥æŠŠäº‹ä»¶æ·»åŠ åˆ°è¡¨æ ¼ä¸Šè€Œä¸æ˜¯tdæ ‡ç­¾ï¼Œç„¶ååˆ¤æ–­é‚£ä¸€ä¸ªå…ƒç´ å‡ºå‘çš„ï¼Œç„¶åå¯¹ç‰¹å®šå…ƒç´ åšå¤„ç†ï¼Œè¿™æ ·æ—¢å¯ä»¥å‡å°‘äº‹ä»¶ç›‘å¬çš„æ•°é‡æœ‰å¯ä»¥ä¸ç”¨å…³ç³»æ–°å¢å…ƒç´ çš„æ—¶é—´ã€‚</li><li>ç§»é™¤HTMLçš„æ—¶å€™ï¼Œå…ˆæŠŠç»‘å®šçš„äº‹ä»¶åˆ é™¤ã€‚</li></ol><h4 id="å¦‚æœç”¨æˆ·åœ¨é¡µé¢ä¸Šå¡«å†™äº†ä¸€äº›æ•°æ®ç°åœ¨è¦å…³é—­é¡µç­¾ï¼Œæˆ‘æƒ³åœ¨ç”¨æˆ·å…³é—­çš„æ—¶å€™æé†’ä»–ä¸€ä¸‹è¯¥æ€ä¹ˆåšï¼Ÿ"><a href="#å¦‚æœç”¨æˆ·åœ¨é¡µé¢ä¸Šå¡«å†™äº†ä¸€äº›æ•°æ®ç°åœ¨è¦å…³é—­é¡µç­¾ï¼Œæˆ‘æƒ³åœ¨ç”¨æˆ·å…³é—­çš„æ—¶å€™æé†’ä»–ä¸€ä¸‹è¯¥æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="å¦‚æœç”¨æˆ·åœ¨é¡µé¢ä¸Šå¡«å†™äº†ä¸€äº›æ•°æ®ç°åœ¨è¦å…³é—­é¡µç­¾ï¼Œæˆ‘æƒ³åœ¨ç”¨æˆ·å…³é—­çš„æ—¶å€™æé†’ä»–ä¸€ä¸‹è¯¥æ€ä¹ˆåšï¼Ÿ"></a>å¦‚æœç”¨æˆ·åœ¨é¡µé¢ä¸Šå¡«å†™äº†ä¸€äº›æ•°æ®ç°åœ¨è¦å…³é—­é¡µç­¾ï¼Œæˆ‘æƒ³åœ¨ç”¨æˆ·å…³é—­çš„æ—¶å€™æé†’ä»–ä¸€ä¸‹è¯¥æ€ä¹ˆåšï¼Ÿ</h4><p>ç›‘å¬<code>window</code>å¯¹è±¡ä¸Šçš„<code>beforeunload</code>äº‹ä»¶å°±å¯ä»¥äº†ï¼Œå¯ä»¥è®¾ç½®<code>event.returnValue</code>çš„å€¼ç­‰äºä¸€ä¸ªæç¤ºè¯­ï¼Œä¹Ÿæœ‰æµè§ˆå™¨æ˜¯æ ¹æ®è¿”å›çš„å­—ç¬¦ä¸²æ¥æç¤ºçš„ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element,type,handler</span>)</span>&#123;<span class="comment">//é€šç”¨äº‹ä»¶æ·»åŠ å‡½æ•°</span></span><br><span class="line">   <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">        element.addEventListener(type,handler);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">        element.attachEvent(<span class="string">"on"</span> + type,handler);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        element[<span class="string">"on"</span> + type] = handler;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addEvent(<span class="built_in">window</span>,<span class="string">"beforeunload"</span>,<span class="function"><span class="keyword">function</span> (<span class="params">event</span>)</span>&#123;</span><br><span class="line">    event = event || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">var</span> msg = <span class="string">"å®˜äººï¼Œä½ å…ˆåˆ«èµ°å•Šï¼Œä½ å¡«çš„ä¸œè¥¿è¿˜æ²¡æœ‰ä¿å­˜å‘¢ï¼è¯·ä¸è¦å¼ƒæˆ‘è€Œå»å•Š..."</span>;</span><br><span class="line">    event.returnValue = msg;<span class="comment">// IEçš„å¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> msg;<span class="comment">//æ™®é€šæµè§ˆå™¨çš„å¤„ç†</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹è™½ç„¶æˆ‘ä»¬ç»™äº†ç‰¹å®šçš„å­—ç¬¦ä¸²å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºè¿™ä¸ªå­—ç¬¦ä¸²çš„ï¼ŒChromeå°±ä¼šç»™å®šç‰¹å®šçš„æç¤ºè¯­è€Œä¸æ˜¯ä½¿ç”¨æˆ‘ä»¬ç»™å®šçš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯åªæœ‰ç»™å®šå­—ç¬¦ä¸²ä¸ä¸ºç©ºï¼ˆéšå¼è½¬åŒ–ä¸ºtrueï¼‰å®ƒæ‰ä¼šç»™å‡ºæç¤ºã€‚</p><h4 id="ä¸‹åˆ—ä»£ç ä¾æ¬¡æ‰“å°çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸‹åˆ—ä»£ç ä¾æ¬¡æ‰“å°çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸‹åˆ—ä»£ç ä¾æ¬¡æ‰“å°çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸‹åˆ—ä»£ç ä¾æ¬¡æ‰“å°çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œbtnè¿˜æ˜¯ä¸Šé¢çš„buttonå…ƒç´ ã€‚</span></span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å†’æ³¡äº‹ä»¶1"</span>)</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å†’æ³¡äº‹ä»¶2"</span>)</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"document.bodyå†’æ³¡äº‹ä»¶"</span>)</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ•è·äº‹ä»¶1"</span>)</span><br><span class="line">&#125;,<span class="literal">true</span>);</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ•è·äº‹ä»¶2"</span>)</span><br><span class="line">&#125;,<span class="literal">true</span>);</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"document.bodyæ•è·äº‹ä»¶"</span>)</span><br><span class="line">&#125;,<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œçš„ç»“æœæ˜¯ï¼š</p><blockquote><p>document.bodyæ•è·äº‹ä»¶<br>å†’æ³¡äº‹ä»¶1<br>å†’æ³¡äº‹ä»¶2<br>æ•è·äº‹ä»¶1<br>æ•è·äº‹ä»¶2<br>document.bodyå†’æ³¡äº‹ä»¶</p></blockquote><p>äº‹ä»¶æ˜¯å…ˆæ•è·åå†’æ³¡çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä¸­é—´4ä¸ªäº‹ä»¶çš„æ‰§è¡Œï¼Œéƒ½æ˜¯å¤„äºç›®æ ‡é˜¶æ®µï¼Œç›®æ ‡é˜¶æ®µä¼šæŒ‰ç…§äº‹ä»¶çš„æ·»åŠ é¡ºåºæ¥æ‰§è¡Œï¼Œè€Œä¸ä¼šç®¡ä½ æ˜¯å¦æ˜¯æ•è·è¿˜æ˜¯å†’æ³¡ã€‚</p><h4 id="å¦‚ä½•è®©ä¸€ä¸ªäº‹ä»¶å…ˆå†’æ³¡åæ•è·ï¼Ÿ"><a href="#å¦‚ä½•è®©ä¸€ä¸ªäº‹ä»¶å…ˆå†’æ³¡åæ•è·ï¼Ÿ" class="headerlink" title="å¦‚ä½•è®©ä¸€ä¸ªäº‹ä»¶å…ˆå†’æ³¡åæ•è·ï¼Ÿ"></a>å¦‚ä½•è®©ä¸€ä¸ªäº‹ä»¶å…ˆå†’æ³¡åæ•è·ï¼Ÿ</h4><p>æµè§ˆå™¨éƒ½æ˜¯å…ˆæ•è·åå†’æ³¡çš„ï¼ˆå¦‚æœæ”¯æŒæ•è·çš„æ—¶å€™ï¼‰ï¼Œå¹¶ä¸æ”¯æŒå…ˆå†’æ³¡åæ•è·ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹é€ ä¸€ä¸‹æ•è·çš„å‡½æ•°ï¼Œè®©ä»–åœ¨å†’æ³¡ç»“æŸåå†æ‰§è¡Œï¼Œå°±å¯ä»¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœã€‚å¦‚ä¸Šé¢æœ€åä¸€ä¸ª<code>document.body</code>çš„äº‹ä»¶å¯ä»¥åƒä¸‹é¢è¿™æ ·æ”¹é€ ä¸€ä¸‹ï¼Œé‚£ä¹ˆ<code>document.bodyæ•è·äº‹ä»¶</code>å°†ä¼šåœ¨æœ€åæ‰“å°ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"document.bodyæ•è·äº‹ä»¶"</span>)</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;,<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‹ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPæ–‡ä»¶ç¼“å­˜åˆ¤æ–­æµç¨‹</title>
      <link href="/2019/04/20/HTTP%E6%96%87%E4%BB%B6%E7%BC%93%E5%AD%98%E5%88%A4%E6%96%AD%E6%B5%81%E7%A8%8B/"/>
      <url>/2019/04/20/HTTP%E6%96%87%E4%BB%B6%E7%BC%93%E5%AD%98%E5%88%A4%E6%96%AD%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/04/20/HTTPæ–‡ä»¶ç¼“å­˜åˆ¤æ–­æµç¨‹/1.png" alt="HTTPæ–‡ä»¶ç¼“å­˜åˆ¤æ–­æµç¨‹"></p><p>ç¼“å­˜åˆ¤æ–­æµç¨‹ï¼š</p><ol><li>å¦‚æœ<code>Cache-Control</code>ï¼ˆæˆ–è€…<code>Expires</code>ï¼Œ<code>Expires</code>ç»å¯¹æ—¶é—´ï¼Œä¼˜å…ˆçº§æ¯”<code>Cache-Control</code>ä½ï¼‰æœªè¿‡æœŸï¼Œé‚£ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™æŒ‰ç…§ä¸‹ä¸€æ¡æ¥åˆ¤æ–­ã€‚</li><li>å¦‚æœæœ‰<code>Etag</code>ï¼Œåˆ™ä¼šå‘æœåŠ¡å™¨å‘é€<code>Etag</code>å’Œ<code>If-None-Match</code>ï¼Œç”±æµè§ˆå™¨æ¥åˆ¤æ–­æ˜¯<code>200</code>è¿˜æ˜¯<code>304</code>ã€‚å¦‚æœæ²¡æœ‰<code>Etag</code>é‚£ä¹ˆæŒ‰ç…§ä¸‹ä¸€æ¡æ¥åˆ¤æ–­ã€‚</li><li>æµè§ˆå™¨åˆ¤æ–­<strong>ä¸Šæ¬¡æ–‡ä»¶å“åº”å¤´</strong>ä¸­æ˜¯å¦æœ‰<code>Last-Modified</code>ä¿¡æ¯ï¼Œæœ‰åˆ™è¿åŒ<code>If-Modified-Since</code>ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æ¥åˆ¤æ–­<code>200</code>è¿˜æ˜¯<code>304</code>ã€‚</li><li>å¦‚æœä»¥ä¸Šéƒ½æ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆæµè§ˆå™¨è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨ï¼Œè¿”å›<code>200</code>ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šç°ä»£å‰ç«¯æŠ€æœ¯è§£æã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/04/20/%E3%80%8A%E7%8E%B0%E4%BB%A3%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/04/20/%E3%80%8A%E7%8E%B0%E4%BB%A3%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>è¿™æœ¬ä¹¦å¹¶æ²¡æœ‰è®²å¤ªå¤šçš„æ·±å±‚æ¬¡çš„æŠ€æœ¯ï¼Œè®²çš„éƒ½æ˜¯ä¸€äº›åŸç†ä¸æ€è·¯ï¼Œéå¸¸é€‚åˆæƒ³è¦ä»å®è§‚ä¸Šäº†è§£å‰ç«¯çš„è¯»è€…ã€‚æœ¬ç¬”è®°æŒ‰ç…§é‡Œé¢çš„ç« èŠ‚è®°å½•ä¸€äº›ä¹¦ä¸­æœ‰æ„æ€çš„éƒ¨åˆ†ã€‚</p><p><img src="/2019/04/20/ã€Šç°ä»£å‰ç«¯æŠ€æœ¯è§£æã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€Šç°ä»£å‰ç«¯æŠ€æœ¯è§£æã€‹"></p><hr><h3 id="Webå‰ç«¯æŠ€æœ¯åŸºç¡€"><a href="#Webå‰ç«¯æŠ€æœ¯åŸºç¡€" class="headerlink" title="Webå‰ç«¯æŠ€æœ¯åŸºç¡€"></a>Webå‰ç«¯æŠ€æœ¯åŸºç¡€</h3><p>å‰ç«¯å¼€å‘æ¨¡å¼çš„æ¼”å˜ï¼šé™æ€é»„é¡µã€æœåŠ¡å™¨ç»„è£…åŠ¨æ€ç½‘é¡µæ•°æ®ã€åç«¯ä¸ºä¸»çš„MVCã€å‰åç«¯åˆ†ç¦»ã€çº¯å‰ç«¯MV*ä¸ºä¸»ä¸ä¸­é—´å±‚ç›´å‡ºã€å‰ç«¯Virtual DOMä¸MNV*å‰åç«¯åŒæ„ã€‚</p><p>æµè§ˆå™¨çš„ç»„æˆéƒ¨åˆ†ï¼šç”¨æˆ·ç•Œé¢ã€ç½‘ç»œã€JavaScriptå¼•æ“ã€æ¸²æŸ“å¼•æ“ã€UIåç«¯ã€JavaScriptè§£é‡Šå™¨å’ŒæŒä¹…åŒ–æ•°æ®å­˜å‚¨ã€‚</p><p>æ¸²æŸ“å¼•æ“å·¥ä½œæµç¨‹ï¼šè§£æHTMLæ„å»ºDOMæ ‘ã€æ„å»ºæ¸²æŸ“æ ‘ã€æ¸²æŸ“æ ‘å¸ƒå±€é˜¶æ®µã€ç»˜åˆ¶æ¸²æŸ“æ ‘ã€‚</p><p>é¡µé¢ç”Ÿæˆåï¼Œå¦‚æœé¡µé¢å…ƒç´ ä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œå°±è¦ä»å¸ƒå±€é˜¶æ®µå¼€å§‹é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšé‡æ’ã€‚å¦‚æœé¡µé¢å…ƒç´ åªæ˜¯æ˜¾ç¤ºæ ·å¼æ”¹å˜è€Œå¸ƒå±€ä¸å˜ï¼Œé‚£ä¹ˆé¡µé¢å†…å®¹æ”¹å˜å°†ä»ç»˜åˆ¶é˜¶æ®µå¼€å§‹ï¼Œä¹Ÿæˆä¸ºé¡µé¢çš„é‡ç»˜ã€‚é‡æ’é€šå¸¸ä¼šå¯¼è‡´é¡µé¢å…ƒç´ å‡ ä½•å¤§å°ä½ç½®å‘ç”Ÿå˜åŒ–ä¸”ä¼´éšç€é‡æ–°æ¸²æŸ“çš„å·¨å¤§ä»£ä»·ï¼Œå› ä¸ºæˆ‘ä»¬è¦å°½é‡å‡å°‘é‡æ’ã€‚</p><p>CSSæƒé‡ï¼š!important &gt; å†…è”æ ·å¼ &gt; idé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾é€‰æ‹©å™¨ &gt; ç»§æ‰¿çš„æ ·å¼</p><p>æµè§ˆå™¨æ‰€æ”¯æŒçš„ç¼“å­˜æ–¹å¼ï¼šHTTPæ–‡ä»¶ç¼“å­˜ã€LocalStorageã€SessionStorageã€indexDBã€Web SQLã€Cookieã€cacheStorageã€Application Cacheã€‚</p><p>Chromeæµè§ˆå™¨HTTPç¼“å­˜èµ„æºä½ç½®ï¼šDevTools &gt; Application &gt; Frames</p><p>HTTPæ–‡ä»¶ç¼“å­˜åˆ¤æ–­æµç¨‹ï¼Œè¿™ä¸€éƒ¨åˆ†æ¯”è¾ƒé‡è¦ï¼Œå•ç‹¬æˆç« ï¼Œè¯·çœ‹<a href="/2019/04/20/HTTPæ–‡ä»¶ç¼“å­˜åˆ¤æ–­æµç¨‹/#more">è¿™é‡Œ</a>ã€‚</p><p>sessionStorageå…³é—­æµè§ˆå™¨ä¼šè‡ªåŠ¨æ¸…ç©ºã€‚</p><p>Cookieä¸€èˆ¬ä¼šé€šè¿‡HTTPè¯·æ±‚å‘é€åˆ°æœåŠ¡ç«¯ï¼Œé€šå¸¸è®¤ä¸ºé†‰å€’é•¿åº¦é™åˆ¶æ˜¯4KBï¼Œå¯ä»¥åˆ†ä¸ºSession Cookieå’ŒæŒä¹…å‹Cookieã€‚å…¶ä¸­Session Cookieä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæµè§ˆå™¨å…³é—­ä¼šæ¶ˆå¤±ï¼›æŒä¹…å‹Cookieä¿å­˜åœ¨ç¡¬ç›˜ä¸­ã€‚</p><p>è°ƒè¯•node:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g node-inspector</span><br><span class="line">node-debugger index.js</span><br></pre></td></tr></table></figure></p><p>ç„¶åä½¿ç”¨<code>node-inspector</code>å‘½ä»¤ä¼šç»™å‡ºä¸€ä¸ªurlï¼Œæµè§ˆå™¨è®¿é—®è¿™ä¸ªurlå°±å¯ä»¥è°ƒè¯•äº†ã€‚</p><h3 id="å‰ç«¯ä¸åè®®"><a href="#å‰ç«¯ä¸åè®®" class="headerlink" title="å‰ç«¯ä¸åè®®"></a>å‰ç«¯ä¸åè®®</h3><p>é€šå¸¸ä¸€ä¸ªå®Œæ•´çš„HTTPæŠ¥æ–‡ç”±å¤´éƒ¨ã€ç©ºè¡Œã€æ­£æ–‡ä¸‰éƒ¨åˆ†ç»„æˆã€‚ç©ºè¡Œç”¨äºåŒºåˆ†æŠ¥æ–‡å¤´éƒ¨å’ŒæŠ¥æ–‡æ­£æ–‡ï¼Œç”±ä¸€ä¸ªå›è½¦ç¬¦å’Œä¸€ä¸ªæ¢è¡Œç¬¦ç»„æˆã€‚</p><p>HTTP1.1æ ‡å‡†å‘å¸ƒä¸1999å¹´ï¼Œç›¸å¯¹äº1.0å¢åŠ äº†åè®®æ‰©å±•åˆ‡æ¢ã€ç¼“å­˜ã€éƒ¨åˆ†æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–ã€é•¿è¿æ¥ã€æ¶ˆæ¯ä¼ é€’ã€hostå¤´åŸŸã€é”™è¯¯æç¤ºç­‰ä¸€äº›é‡è¦çš„å¢å¼ºç‰¹æ€§ã€‚</p><p>HTTP1.1é•¿è¿æ¥æœºåˆ¶æ˜¯é€šè¿‡è¯·æ±‚å¤´ä¸­çš„keep-aliveå¤´ä¿¡æ¯æ¥æ§åˆ¶çš„ã€‚é»˜è®¤æ˜¯åŒ…å«æ­¤ä¿¡æ¯çš„ã€‚1.0å¦‚æœæ·»åŠ çš„è¯å¦‚æœæœåŠ¡å™¨æ”¯æŒçš„æƒ…å†µä¸‹ä¼šè¿”å›ä¸€ä¸ªkeep-aliveè¡¨ç¤ºæ–‡ä»¶è¯·æ±‚å¯ä»¥å¤ç”¨ä¹‹å‰çš„è¯·æ±‚ã€‚</p><p>åè®®æ‰©å±•åˆ‡æ¢æŒ‡çš„æ˜¯HTTP1.1åè®®æ”¯æŒåœ¨è¯·æ±‚å¤´ä¿¡æ¯ä¸­æ·»åŠ Upgradeå¤´å¹¶è®©å®¢æˆ·ç«¯é€šè¿‡å¤´éƒ¨æ ‡è¯†ä»¤æœåŠ¡å™¨çŸ¥é“å®ƒèƒ½å¤Ÿæ”¯æŒå…¶ä»–å¤‡ç”¨é€šè®¯åè®®çš„ä¸€ç§æœºåˆ¶ã€‚å¦‚WebSocketè¿æ¥æ—¶æµè§ˆå™¨ä¼šåœ¨å¤´ä¿¡æ¯ä¸­æ·»åŠ <code>Connection:Upgrade</code>å’Œ<code>Upgrade:websocket</code>å‘Šè¯‰æµè§ˆå™¨ï¼Œåé¢è¦è¿›è¡Œåè®®åˆ‡æ¢ä¸ºWebSocketåè®®ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒçš„è¯åˆ™åœ¨å“åº”å¤´ä¸­è¿”å›ä¸Šé¢2ä¸ªå¤´ä¿¡æ¯ï¼Œå¹¶è¿”å›101çš„å“åº”ç ã€‚</p><p>éƒ¨åˆ†æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–è¯´çš„æ˜¯HTTP1.1ä¸ä»…å¯ä»¥ä¼ è¾“æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚FormDataã€‚</p><p>HTTP2.0çš„ç‰¹æ€§ï¼š</p><ol><li>å®Œå…¨é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼æ¥ä¼ è¾“æ•°æ®ã€‚</li><li>ä½¿ç”¨TCPå¤šè·¯å¤ç”¨çš„æ–¹å¼æ¥é™ä½ç½‘ç»œè¯·æ±‚è¿æ¥æ—¶å»ºç«‹ä¸å…³é—­çš„å¼€é”€ã€‚</li><li>æ”¯æŒä¼ è¾“æµçš„ä¼˜å…ˆçº§å’Œæµé‡æ§åˆ¶æœºåˆ¶ï¼Œæ‰€ä»¥ä¸éœ€è¦å†æŠŠCSSæ”¾åœ¨HTMLé¡¶éƒ¨ï¼ŒJavaScriptæ”¾åœ¨HTMLåº•éƒ¨ï¼ŒHTTP2.0è‡ªåŠ¨å°±ä¼šåšè¿™äº›äº‹æƒ…ã€‚</li><li>æ”¯æŒæœåŠ¡ç«¯æ¨é€ã€‚</li><li>å¼ºåˆ¶ä½¿ç”¨SSLåè®®ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯HTTPSåè®®ã€‚</li></ol><p>å¸¸è§çš„ç½‘ç»œæ”»å‡»æ‰‹æ®µï¼šXSSã€SQLæ³¨å…¥ã€CSRFï¼ˆcross-site Request Forgery,è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ï¼‰ã€‚</p><p>XSSå¯ä»¥é€šè¿‡è½¬ä¹‰HTMLæ ‡ç­¾æ¥è§£å†³ï¼ŒSQLæ³¨å…¥å¯ä»¥ä½¿ç”¨é¢„å¤„ç†æ¥è§£å†³ï¼ŒCSRFå¯ä»¥é€šè¿‡æ·»åŠ Tokenæ¥è§£å†³ï¼ˆç›¸å¯¹çš„ï¼‰ã€‚</p><p>DNSåŠ«æŒï¼Œæ”»å‡»è€…åŠ«æŒäº†DNSï¼Œä½¿å¾—åŸŸåè½¬åŒ–ä¸ºIPçš„è¿‡ç¨‹ï¼ŒæŒ‡å‘äº†å…¶ä»–çš„IPã€‚<br>HTTPåŠ«æŒï¼Œè¯»å–æˆ–è€…ä¿®æ”¹HTTPæŠ¥æ–‡ä¸­çš„å†…å®¹ï¼Œå¸¸ç”¨çš„å¤„ç†æªæ–½å°±æ˜¯ä½¿ç”¨HTTPSè¯·æ±‚ã€‚</p><p>HTTPSåè®®æ˜¯é€šè¿‡åŠ å…¥äº†SSLå±‚æ¥åŠ å¯†HTTPæ•°æ®è¿›è¡Œå®‰å…¨ä¼ è¾“çš„HTTPåè®®ï¼Œé»˜è®¤ç«¯å£æ˜¯443ã€‚</p><p>æœåŠ¡ç«¯ä¸»åŠ¨æ‰¾å®¢æˆ·ç«¯çš„æ–¹å¼ï¼šWebSocketã€è½®è¯¢ã€é•¿è½®è¯¢ã€DDPï¼ˆæ™®åŠç¨‹åº¦ä¸é«˜ï¼‰ã€HTTPæµã€‚</p><h3 id="å‰ç«¯ä¸‰å±‚ç»“æ„ä¸åº”ç”¨"><a href="#å‰ç«¯ä¸‰å±‚ç»“æ„ä¸åº”ç”¨" class="headerlink" title="å‰ç«¯ä¸‰å±‚ç»“æ„ä¸åº”ç”¨"></a>å‰ç«¯ä¸‰å±‚ç»“æ„ä¸åº”ç”¨</h3><p>é¡µé¢ä½¿ç”¨tableæ ‡ç­¾ä¼šæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºtableä¼šç­‰è¡¨æ ¼å†…å…¨éƒ¨å†…å®¹éƒ½è§£æå®Œæˆåè¿›è¡Œä¸€æ¬¡æ€§æ¸²æŸ“ã€‚</p><p>ES7å¸¸ç”¨çš„ä¸‰ç§ç‰¹æ€§ï¼šå¹‚æŒ‡æ•°æ“ä½œç¬¦ï¼ˆ2**3 === 8ï¼‰ï¼ŒArray.prototype.includesï¼Œasync/awaitã€‚</p><p>å‰ç«¯ç»Ÿä¸€CSSæ ·å¼çš„æ–¹å¼ï¼šresetï¼ˆæ¸…æ¥šæµè§ˆå™¨çš„é»˜è®¤æ ·å¼ï¼‰ã€normalizeï¼ˆä½¿ç”¨æŸä¸€ç§é»˜è®¤æ ·å¼ï¼‰ã€neatï¼ˆä¸¤è€…ç»“åˆï¼Œéœ€è¦æ ¹æ®ç½‘é¡µè®¾è®¡ç‰¹ç‚¹æ¥ï¼‰ã€‚</p><p>å‰ç«¯å®ç°åŠ¨ç”»çš„äº”ç§æ–¹å¼ï¼šJavaScriptæ“ä½œDOMå®ç°ï¼ŒSVGåŠ¨ç”»ï¼ŒCSS transitionã€CSS animationã€Canvasã€‚</p><p>å“åº”å¼è®¾è®¡çš„2ç§æ–¹æ³•ï¼š</p><ol><li>å‰ç«¯æˆ–è€…åç«¯åˆ¤æ–­userAgentæ¥è·³è½¬ä¸åŒçš„é¡µé¢æ¥å®Œæˆä¸åŒè®¾å¤‡æµè§ˆå™¨çš„é€‚é…ï¼ˆå¸¸è§çš„ç§»åŠ¨ç«¯ä»¥m.å¼€å¤´çš„åŸŸåï¼‰ã€‚</li><li>ä½¿ç”¨åª’ä½“æŸ¥è¯¢ï¼Œè‡ªåŠ¨æ”¹å˜é¡µé¢å¸ƒå±€ã€‚</li></ol><p>å¸¸ç”¨çš„remåˆå§‹å€¼å®šä¹‰æ–¹æ³•ï¼š</p><ol><li><code>1rem = å±å¹•å®½åº¦ * å±å¹•åˆ†è¾¨ç‡ / 10</code>ä¹Ÿå°±æ˜¯1remæƒ³åˆ°äºå±å¹•å®½åº¦çš„10%ï¼Œæ‰€æœ‰å°ºå¯¸ç›¸å½“äºä½¿ç”¨ç™¾åˆ†æ¯”æ¥å¸ƒå±€çš„ã€‚</li><li><code>1rem = å±å¹•å®½åº¦ / 320 * 10</code>ä¹Ÿå°±æ˜¯1remæƒ³åˆ°äº320pxå±å¹•ä¸Šçš„10åƒç´ ã€‚</li></ol><p>æœ¬ç« å…¶ä»–å†…å®¹ä¸»è¦ä¸ºHTMLã€CSSã€JSçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ä»¥åŠES6çš„ä¸€äº›å†…å®¹ï¼Œè¿™é‡Œå°±ä¸å†åˆ—å‡ºæ¥äº†ã€‚</p><h3 id="å‰ç«¯é¡¹ç›®ä¸æŠ€æœ¯å®è·µ"><a href="#å‰ç«¯é¡¹ç›®ä¸æŠ€æœ¯å®è·µ" class="headerlink" title="å‰ç«¯é¡¹ç›®ä¸æŠ€æœ¯å®è·µ"></a>å‰ç«¯é¡¹ç›®ä¸æŠ€æœ¯å®è·µ</h3><p>å‰ç«¯é€šç”¨è§„èŒƒï¼šä¸‰å±‚æ¶æ„åˆ†ç¦»ï¼ˆHTML/CSS/JSï¼‰ã€ç¼©è¿›ï¼ˆé€šå¸¸ä¸€ä¸ªtabå››ä¸ªç©ºæ ¼ï¼‰ã€å†…å®¹ç¼–ç ï¼ˆ<code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code>ï¼‰ã€æ ‡ç­¾å±æ€§ç­‰ä½¿ç”¨å°å†™ã€ä»£ç æ¯è¡Œä¸è¶…è¿‡120ä¸ªï¼ˆæˆ–80ä¸ªï¼‰å­—ç¬¦ã€å¤šå†™æ³¨é‡Šã€è¡Œå°¾å»æ‰å¤šäºçš„ç©ºæ ¼ä¸ç¬¦å·ã€‚</p><p>for-inå¾ªç¯é‡Œé¢è¦å°½é‡å«æœ‰<code>hasOwnProperty</code>é˜²æ­¢è®¿é—®åŸå‹ä¸­çš„å±æ€§æˆ–æ–¹æ³•ã€‚</p><p>å¸¸ç”¨çš„æ¨¡å—åŒ–æ–¹æ³•æœ‰ï¼šAMDï¼ˆrequireJSï¼‰ã€CMDï¼ˆseaJSï¼‰ã€CommonJSï¼ˆnodeè§„èŒƒï¼‰ã€import/exportç­‰ã€‚</p><p>è‡ªåŠ¨åŒ–æ„å»ºå¸¸ç”¨æµç¨‹ï¼šè¯»å–å…¥å£æ–‡ä»¶ã€åˆ†ææ¨¡å—å¼•ç”¨ã€æŒ‰ç…§å¼•ç”¨åŠ è½½æ¨¡å—ã€æ¨¡å—æ–‡ä»¶ç¼–è¯‘å¤„ç†ã€æ¨¡å—æ–‡ä»¶åˆå¹¶ã€æ–‡ä»¶ä¼˜åŒ–å¤„ç†ã€å†™å…¥ç”Ÿæˆç›®å½•ã€‚</p><p>ç®€å•ä¸ŠæŠ¥ç”¨æˆ·ç‚¹å‡»ä½ç½®çš„ä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).on(<span class="string">"click"</span>,<span class="string">"body"</span>,<span class="function"><span class="keyword">function</span> (<span class="params">e</span>)</span>&#123;</span><br><span class="line">    report(e.pageX,e.pageY);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ä½œä¸ºå‰ç«¯çš„å¼€å‘è€…ï¼Œå­¦ä¹ çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚çœ‹åˆ«äººçš„æŠ€æœ¯åšå®¢ï¼Œç ”ç©¶æœ€æ–°çš„æŠ€æœ¯æ–¹å‘ã€é˜…è¯»å¼€æºä»£ç ã€æŒºæŠ€æœ¯åˆ†äº«ä¼šã€çœ‹ä¹¦ç­‰ã€‚</p><p>ä¸€åˆ‡æŠ€æœ¯æœ€ç»ˆçš„ç›®çš„éƒ½æ˜¯ä¸ºäº§å“å®ç°æœåŠ¡çš„ï¼Œåˆ‡è®°å‹¿è¿‡åˆ†è¿½æ±‚æŠ€æœ¯ï¼Œå»ºè®®å¤§å®¶çœ‹ä¸€ä¸¤æœ¬å…³äºäº§å“ç»ç†æ–¹å‘çš„ä¹¦ç±ã€‚</p><hr><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬è®°å½•äº†ä¸€äº›ä¹¦ä¸­é‡ç‚¹çš„éƒ¨åˆ†ï¼Œæ­¤å¤–è¿˜æœ‰å¾ˆå¤šä¸€éƒ¨åˆ†å†…å®¹è®²çš„æ˜¯MVVMçš„æ€æƒ³ã€ä»¥åŠå‰ç«¯è·¨æ ˆå¼€å‘ã€ä¸€äº›æŠ€æœ¯çš„å®è·µã€å¯¹å‰ç«¯æœªæ¥çš„ä¸€äº›å±•æœ›ç­‰ï¼Œç”±äºå†…å®¹æ¯”è¾ƒå¤šå°±ä¸å±•å¼€è¯¦ç»†è¯´äº†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»çœ‹çœ‹ä¹¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯æŠ€æœ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bindã€callã€applyçš„å®ç°</title>
      <link href="/2019/04/18/bind%E3%80%81call%E3%80%81apply%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2019/04/18/bind%E3%80%81call%E3%80%81apply%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p><code>bind</code>ã€<code>call</code>ã€<code>apply</code>æ˜¯JavaScriptä¸­<code>Function.prototype</code>éå¸¸é‡è¦çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œä»–ä»¬çš„ä½œç”¨æ˜¯æ”¹å˜<code>this</code>çš„æŒ‡å‘ã€‚ä¸‰è€…çš„åŒºåˆ«æ˜¯ï¼š</p><blockquote><p><code>bind</code>è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ”¹å˜äº†<code>this</code>çš„æŒ‡å‘ã€‚<br><code>call</code>ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä¼ é€’å‚æ•°ç”¨é€—å·éš”å¼€ã€‚<br><code>apply</code>ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä¼ é€’å‚æ•°ä½¿ç”¨æ•°ç»„ä¼ é€’ç»™ç¬¬äºŒä¸ªå‚æ•°ã€‚</p></blockquote><p>æˆ‘ä»¬ç°åœ¨è¯¦ç»†è§£è¯»ä¸€ä¸‹å„ä¸ªå‡½æ•°çš„å®ç°æ–¹å¼ã€‚</p><h3 id="bindçš„å®ç°"><a href="#bindçš„å®ç°" class="headerlink" title="bindçš„å®ç°"></a>bindçš„å®ç°</h3><p><code>bind</code>çš„åŸºæœ¬ç”¨æ³•ï¼š</p><ol><li>å‡½æ•°è°ƒç”¨<code>bind</code>ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚</li><li><code>bind</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®¿ä¸»å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œçš„<code>this</code>ã€‚</li><li><code>bind</code>è¿”å›å‡½æ•°æ‰§è¡Œæ—¶å€™çš„å‚æ•°æ˜¯<code>bind</code>æ–¹æ³•ç¬¬äºŒä¸ªè‡³å¤šä¸ªå‚æ•°ä¸è°ƒç”¨æ—¶å‚æ•°çš„åˆé›†ã€‚</li></ol><p>bindç®€å•å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;<span class="comment">// è¿™ä¸ªthiså…¶å®æ˜¯çœŸæ­£çš„å‡½æ•°</span></span><br><span class="line">    <span class="comment">// è·å–ç¬¬äºŒè‡³å¤šä¸ªå‚æ•°</span></span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•° è¯¥å‡½æ•°æ˜¯çœŸæ­£æ‰§è¡Œæ—¶çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–çœŸæ­£æ‰§è¡Œæ—¶ä¼ è¿›æ¥çš„å‡½æ•°</span></span><br><span class="line">        <span class="keyword">var</span> bindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">        <span class="comment">// åˆå¹¶å‚æ•° å¹¶ä¸”è°ƒç”¨å‡½æ•°</span></span><br><span class="line">        <span class="keyword">return</span> self.apply(context, args.concat(bindArgs));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªç®€å•çš„<code>bind</code>å·²ç»è§£å†³äº†ä¸Šé¢çš„ä¸‰ä¸ªåŸºæœ¬ç”¨æ³•äº†ï¼Œå…¶å®<code>bind</code>è¿˜æœ‰2ä¸ªé™„åŠ çš„ç‰¹æ€§ï¼š</p><ol start="4"><li>å¦‚æœä¸Šé¢selfä¸æ˜¯å‡½æ•°ï¼ˆé˜²æ­¢éå‡½æ•°çš„åŸå‹æŒ‡å‘<code>Function.prototype</code>ï¼‰ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ã€‚</li><li>ä»æ”¹å˜<code>this</code>çš„æŒ‡å‘æ¥çœ‹ï¼Œ<code>new</code>çš„ä¼˜å…ˆçº§å¤§äº<code>bind</code>ã€‚</li></ol><p>åŠŸèƒ½æ›´å¼ºå¤§çš„<code>bind</code>å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> self !== <span class="string">"function"</span>) &#123;<span class="comment">// å¦‚æœselfä¸æ˜¯å‡½æ•°åˆ™æŠ¥é”™</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªä¸­é—´å‡½æ•° è®©è¿”å›çš„å‡½æ•°ç»§æ‰¿å®ƒ</span></span><br><span class="line">    <span class="keyword">var</span> FN = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> returnFn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">        <span class="comment">// é‡ç‚¹ å¦‚æœè¿”å›å‡½æ•°çš„thisæ˜¯FN è¯´æ˜æ˜¯newå‡ºæ¥çš„ thiså°±æ˜¯newçš„å¯¹è±¡ å¦åˆ™æ˜¯context</span></span><br><span class="line">        <span class="keyword">return</span> self.apply(<span class="keyword">this</span> <span class="keyword">instanceof</span> FN ? <span class="keyword">this</span> : context, args.concat(bindArgs));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// FNçš„åŸå‹æŒ‡å‘å‡½æ•°çš„åŸå‹</span></span><br><span class="line">    FN.prototype = self.prototype;</span><br><span class="line">    <span class="comment">// è¿”å›çš„å‡½æ•°ç»§æ‰¿FN</span></span><br><span class="line">    returnFn.prototype = <span class="keyword">new</span> FN();</span><br><span class="line">    <span class="keyword">return</span> returnFn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="callçš„å®ç°"><a href="#callçš„å®ç°" class="headerlink" title="callçš„å®ç°"></a>callçš„å®ç°</h3><p><code>call</code>çš„åŸºæœ¬ç”¨æ³•ï¼š</p><ol><li>å‡½æ•°è°ƒç”¨<code>call</code>ï¼Œå‡½æ•°ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”<code>this</code>æŒ‡å‘äº†ç¬¬ä¸€ä¸ªå‡½æ•°ã€‚</li><li><code>call</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>null</code>æˆ–è€…<code>undefined</code>çš„æ—¶å€™<code>this</code>ä¼šç»‘å®šåœ¨å…¨å±€å¯¹è±¡ä¸Šã€‚</li><li><code>call</code>æ–¹æ³•ç¬¬äºŒä¸ªè‡³å¤šä¸ªå‚æ•°ä¼šä¼ ç»™æ‰§è¡Œçš„æ–¹æ³•ã€‚</li></ol><p><code>call</code>æ–¹æ³•ç®€å•å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸ºç©º åˆ™ç»‘å®šåœ¨å…¨å±€å‡½æ•°</span></span><br><span class="line">    <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨context.fn() æ¥è°ƒç”¨å‡½æ•° æ¥æ¨¡æ‹Ÿfnç»‘å®šåœ¨contextä¸Š</span></span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>, len = <span class="built_in">arguments</span>.length; i &lt; len; i++) &#123;</span><br><span class="line">        args.push(<span class="string">'arguments['</span> + i + <span class="string">']'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œæ¯”è¾ƒå°´å°¬ å› ä¸ºcontext.fnè°ƒç”¨çš„æ—¶å€™ æ— æ³•æŠŠä¸å®šé•¿çš„arguments ä¸€ä¸ªä¸€ä¸ªåœ°ä¼ è¿›å»</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥å°±ä½¿ç”¨evalæ–¹æ³•äº† å½“ç„¶å¯ä»¥ç”¨applyä½†æ˜¯ç¨åæˆ‘ä»¬ä¹Ÿè¦å®ç°å®ƒ æ‰€ä»¥å°±ä¸èƒ½ç”¨äº†</span></span><br><span class="line">    <span class="keyword">var</span> result = <span class="built_in">eval</span>(<span class="string">'context.fn('</span> + args +<span class="string">')'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤æ·»åŠ çš„æ–¹æ³•ï¼ˆæ¯å°¸ç­è¿¹ï¼‰</span></span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="applyçš„å®ç°"><a href="#applyçš„å®ç°" class="headerlink" title="applyçš„å®ç°"></a>applyçš„å®ç°</h3><p><code>apply</code>çš„åŸºæœ¬ç”¨æ³•ï¼š</p><ol><li>å‡½æ•°è°ƒç”¨<code>apply</code>ï¼Œå‡½æ•°ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”<code>this</code>æŒ‡å‘äº†ç¬¬ä¸€ä¸ªå‡½æ•°ã€‚</li><li><code>apply</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>null</code>æˆ–è€…<code>undefined</code>çš„æ—¶å€™<code>this</code>ä¼šç»‘å®šåœ¨å…¨å±€å¯¹è±¡ä¸Šã€‚</li><li><code>apply</code>æ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç›¸å½“äºå‡½æ•°æ‰§è¡Œæ—¶çš„å‚æ•°ã€‚</li></ol><p><code>apply</code>æ–¹æ³•ç®€å•å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.apply = <span class="function"><span class="keyword">function</span> (<span class="params">context, arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result;</span><br><span class="line">    <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">        result = context.fn();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> args = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">            args.push(<span class="string">'arr['</span> + i + <span class="string">']'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        result = <span class="built_in">eval</span>(<span class="string">'context.fn('</span> + args + <span class="string">')'</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bind </tag>
            
            <tag> call </tag>
            
            <tag> apply </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>generatorå¤„ç†å¼‚æ­¥æ“ä½œ</title>
      <link href="/2019/04/14/generator%E5%A4%84%E7%90%86%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/04/14/generator%E5%A4%84%E7%90%86%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p><code>generator</code>æ˜¯ES6æ–°çš„è¯­æ³•ï¼Œæˆ‘ä»¬å…ˆç®€å•çš„å›é¡¾ä¸€ä¸‹ä»–çš„ä½¿ç”¨ï¼š</p><h3 id="generatoråŸºæœ¬ç”¨æ³•"><a href="#generatoråŸºæœ¬ç”¨æ³•" class="headerlink" title="generatoråŸºæœ¬ç”¨æ³•"></a>generatoråŸºæœ¬ç”¨æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> * <span class="title">genFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'aaa'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'bbb'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'ccc'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gen = genFn();</span><br><span class="line">gen.next();<span class="comment">// &#123;value: "aaa", done: false&#125;</span></span><br><span class="line">gen.next();<span class="comment">// &#123;value: "bbb", done: false&#125;</span></span><br><span class="line">gen.next();<span class="comment">// &#123;value: "ccc", done: true&#125;</span></span><br><span class="line">gen.next();<span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br><span class="line">gen.next();<span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p><code>generator</code>å‡½æ•°æ˜¯åœ¨<code>function</code>å’Œå‡½æ•°åä¹‹é—´æ·»åŠ <code>*</code>æ¥å®šä¹‰çš„ã€‚<code>generator</code>å‡½æ•°è°ƒç”¨åå¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œï¼Œå½“è°ƒç”¨è¿”å›å¯¹è±¡çš„<code>next</code>æ–¹æ³•ä¼šæ‰§è¡Œå¹¶è¿”å›<code>generator</code>å‡½æ•°å®šä¹‰å¤„çš„<code>yield</code>ï¼ˆæˆ–<code>return</code>ï¼‰å‰é¢çš„å€¼ï¼Œä»è€Œä½¿å¾—æ‰§è¡Œä¸å®šä¹‰åˆ†ç¦»ã€‚</p><p><code>generator</code>å¯¹è±¡çš„<code>next</code>æ–¹æ³•ä¹Ÿå¯ä»¥ä¼ å‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> * <span class="title">genFn</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"arg="</span> + arg)</span><br><span class="line">    <span class="keyword">var</span> a = <span class="keyword">yield</span> <span class="string">'aaa'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a="</span> + a);</span><br><span class="line">    <span class="keyword">var</span> b = <span class="keyword">yield</span> <span class="string">'bbb'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b="</span> + b);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'ccc'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gen = genFn(<span class="string">"123"</span>);<span class="comment">// å°†argçš„å€¼èµ‹å€¼ä¸ºâ€œ123â€ ä½†æ˜¯å¹¶æ²¡æœ‰æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">var</span> ga = gen.next(<span class="string">"a"</span>);<span class="comment">// æ‰§è¡Œ æ‰“å°"arg=123" å› ä¸ºå¹¶æ²¡æœ‰yieldæ‰€ä»¥ç›¸å½“äºâ€œaâ€çš„å€¼æ²¡æœ‰èµ‹å€¼ç»™ä»»ä½•å˜é‡</span></span><br><span class="line"><span class="built_in">console</span>.log(ga);<span class="comment">// &#123;value: "aaa", done: false&#125;</span></span><br><span class="line"><span class="keyword">var</span> gb = gen.next(<span class="string">"b"</span>);<span class="comment">// æ‰§è¡Œ å¹¶æŠŠ"b" ä¼ ç»™å˜é‡a æ‰“å°"a=b" </span></span><br><span class="line"><span class="built_in">console</span>.log(gb);<span class="comment">// &#123;value: "bbb", done: false&#125;</span></span><br><span class="line"><span class="keyword">var</span> gc = gen.next(<span class="string">"c"</span>);<span class="comment">// æ‰§è¡Œ æŠŠ"c"çš„å€¼èµ‹å€¼ç»™b æ‰“å°"b=c"</span></span><br><span class="line"><span class="built_in">console</span>.log(gc);<span class="comment">// &#123;value: "ccc", done: true&#125;</span></span><br><span class="line">gen.next();<span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br><span class="line">gen.next();<span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><h3 id="generatorç®€å•å¼‚æ­¥å¤„ç†"><a href="#generatorç®€å•å¼‚æ­¥å¤„ç†" class="headerlink" title="generatorç®€å•å¼‚æ­¥å¤„ç†"></a>generatorç®€å•å¼‚æ­¥å¤„ç†</h3><p>ç°åœ¨ä½¿ç”¨æœ‰ä¸€ä¸ªå¼‚æ­¥çš„<code>fetch</code>è¯·æ±‚ï¼Œæ‰“å°å‡ºå®ƒè¿”å›çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™<code>generator</code>ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">asyncGenFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="keyword">yield</span> fetch(<span class="string">"https://api.github.com/emojis"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gen = asyncGenFn();<span class="comment">// ä¸€å®šè¦æ³¨æ„è¿™é‡Œæ²¡æœ‰æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">var</span> result = gen.next();<span class="comment">// &#123;value: Promise, done: false&#125;</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶çš„result.valueå°±æ˜¯asyncGenFnä¸­çš„fetchè¿”å›çš„Promise é‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥è¿™ä¹ˆå¤„ç†äº†</span></span><br><span class="line">result.value.then(<span class="function"><span class="params">data</span>=&gt;</span>data.json())<span class="comment">// å°†æ•°æ®è½¬åŒ–ä¸ºJSONæ ¼å¼</span></span><br><span class="line">    .then(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">        gen.next(data);<span class="comment">// æŠŠdataå†ä¼ å›asyncGenFnè®©ä»–è‡ªå·±æ‰“å°</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢æˆ‘ä»¬å·²ç»æŠŠä¸€ä¸ªå¼‚æ­¥æ“ä½œç”¨generatorå¤„ç†äº†ï¼Œæˆ‘ä»¬ç°åœ¨å¤„ç†2ä¸ªå¼‚æ­¥æ“ä½œï¼Œå†åŠ ä¸€ä¸ªfetchè¯·æ±‚å‘é€åçš„1ç§’åæ‰“å°å­—ç¬¦ä¸²çš„ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        resolve(<span class="string">"Hello World"</span>);<span class="comment">// 1ç§’åæ‰“å°Hello World</span></span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">asyncGenFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result1 = <span class="keyword">yield</span> fetch(<span class="string">"https://api.github.com/emojis"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(result1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result2 = <span class="keyword">yield</span> promise;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å¼‚æ­¥æ•°æ®æ˜¯ï¼š"</span> + result2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gen = asyncGenFn();<span class="comment">// ä¸€å®šè¦æ³¨æ„è¿™é‡Œæ²¡æœ‰æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">var</span> result1 = gen.next();<span class="comment">// &#123;value: Promise, done: false</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶çš„result.valueå°±æ˜¯asyncGenFnä¸­çš„fetchè¿”å›çš„Promise é‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥è¿™ä¹ˆå¤„ç†äº†</span></span><br><span class="line">result1.value.then(<span class="function"><span class="params">data</span>=&gt;</span>data.json())<span class="comment">// å°†æ•°æ®è½¬åŒ–ä¸ºJSONæ ¼å¼</span></span><br><span class="line">    .then(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> result2 = gen.next(data);<span class="comment">// æŠŠdataå†ä¼ å›asyncGenFnè®©ä»–è‡ªå·±æ‰“å°</span></span><br><span class="line">        <span class="comment">// è°ƒç”¨è¿™é‡Œçš„å‰åŠéƒ¨åˆ†å’Œä¹‹å‰çš„æ˜¯ä¸€æ ·çš„ ç°åœ¨å¼€å§‹å¤„ç†ç¬¬äºŒä¸ªyield</span></span><br><span class="line">        <span class="comment">// æ­¤æ—¶çš„resulet2çš„å€¼æ˜¯ &#123;value: Promise, done: false&#125;</span></span><br><span class="line">        <span class="comment">// å…¶ä¸­result2.valueå°±æ˜¯asyncGenFnä¸­çš„promise é‚£ä¹ˆæ­¤æ—¶ä½ å¯ä»¥</span></span><br><span class="line">        result2.value.then(<span class="function">(<span class="params">val</span>)=&gt;</span>&#123;<span class="comment">// è¿™ä¸ªvalå°±æ˜¯"Hello World"</span></span><br><span class="line">            gen.next(val);<span class="comment">// æŠŠ"Hello World"ä¼ å›æ‰“å° "å¼‚æ­¥æ•°æ®æ˜¯ï¼šHello World"</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡2æ¬¡çš„å¼‚æ­¥è¯·æ±‚æˆ‘ä»¬è²Œä¼¼å‘ç°äº†ç‚¹å¤„ç†è§„å¾‹ï¼Œä¸Šé¢å¯¹<code>generator</code>çš„å¤„ç†åŸºæœ¬ä¸Šéƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œå”¯ä¸€ä¸€ç‚¹åŒºåˆ«å°±æ˜¯<code>result1.value.then</code>è°ƒç”¨çš„æ—¶å€™å…ˆè½¬æ¢äº†ä¸€ä¸‹æ•°æ®ã€‚å…¶å®è½¬æ¢æ•°æ®è¿™ä¸€ä¸ªæ­¥éª¤ä¹Ÿæ˜¯ä¸€ä¸ª<code>Promise</code>é‚£æˆ‘ä»¬å°±å¯ä»¥æŠŠä»–å½“åšå¼‚æ­¥æ¥å¤„ç†å’¯ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æ”¾åœ¨<code>asyncGenFn</code>å‡½æ•°å†…éƒ¨æ¥å¤„ç†ï¼Œè¯·çœ‹è¿™é‡Œï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">asyncGenFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result1 = <span class="keyword">yield</span> fetch(<span class="string">"https://api.github.com/emojis"</span>);</span><br><span class="line">result1 = <span class="keyword">yield</span> result1.json();<span class="comment">// å¼‚æ­¥å°±yieldä¸€ä¸‹</span></span><br><span class="line"><span class="built_in">console</span>.log(result1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result2 = <span class="keyword">yield</span> promise;<span class="comment">//promiseè¿˜æ˜¯ä¸Šé¢çš„promise</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å¼‚æ­¥æ•°æ®æ˜¯ï¼š"</span> + result2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gen = asyncGenFn();<span class="comment">// ä¸€å®šè¦æ³¨æ„è¿™é‡Œæ²¡æœ‰æ‰§è¡Œ</span></span><br><span class="line">gen.next().value.then(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;<span class="comment">// fetch</span></span><br><span class="line">    gen.next(data).value.then(<span class="function">(<span class="params">val</span>)=&gt;</span>&#123;<span class="comment">// è½¬æ¢ä¸ºjson</span></span><br><span class="line">        gen.next(val).value.then(<span class="function">(<span class="params">val</span>)=&gt;</span>&#123;<span class="comment">// å¼‚æ­¥promise</span></span><br><span class="line">            gen.next(val); </span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸‹æœ‰æ²¡æœ‰è±ç„¶å¼€æœ—ï¼Œå¼‚æ­¥æ“ä½œçš„æ‰§è¡Œå…¶å®æ˜¯ä¸€ä¸ªå¥—è·¯ï¼Œå°±æ˜¯é€’å½’è°ƒç”¨<code>gen.next().value.then()</code>å°±å¯ä»¥äº†ã€‚ç”±ä¸Šå¯çŸ¥ï¼Œ<strong>å¼‚æ­¥çš„<code>generator</code>æ‰§è¡Œæ—¶å¦‚æœé‡åˆ°<code>yield</code>é‚£ä¹ˆå°±å»è°ƒç”¨<code>gen.next().value.then()</code>å»å¤„ç†è¯¥<code>Promise</code></strong>ï¼Œåé¢è¿™ä¸ªå¤„ç†çš„è¿‡ç¨‹æ˜¯å¾ˆæœºæ¢°åœ°ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥æŠŠå¤„ç†<code>Promise</code>è¿™ä¸ªè¿‡ç¨‹å°è£…ä¸€ä¸‹ï¼Œç„¶åå°†æ³¨æ„åŠ›å®Œå…¨æ”¾åœ¨<code>generator</code>ä¸Šå‘¢ï¼Œå‡å¦‚æˆ‘ä»¬æŠŠè¿™ä¸ªå°è£…å¥½çš„ä¸œè¥¿å«ä»–æ‰§è¡Œå™¨ï¼Œé‚£æ ·æˆ‘ä»¬å°±å½»åº•ä¸éœ€è¦å…³æ³¨æ‰§è¡Œå™¨æ€ä¹ˆå®ç°äº†ï¼Œåªéœ€è¦å…³æ³¨<code>generator</code>ç„¶åç”¨æ‰§è¡Œå™¨å»æ‰§è¡Œå®ƒã€‚æ­¤æ—¶ä½ è²Œä¼¼æ‡‚äº†ç‚¹ä»€ä¹ˆï¼Œä½†æ˜¯ä½ è¿˜ä¼šé—®å¦‚æœä¸æ˜¯<code>Promise</code>çš„å¼‚æ­¥æ“ä½œå‘¢ï¼Ÿæˆ‘ä»¬å…ˆä¸è€ƒè™‘è¿™ç§æƒ…å†µï¼Œè¿™é‡Œå‡è®¾ä½ å¾ˆèªæ˜ï¼Œä¼ çš„æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œéƒ½æ˜¯<code>Promise</code>ã€‚æŸå¤§ç¥è¯´ï¼šâ€œ<strong>è¿‡æ—©çš„ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºã€‚</strong>â€ã€‚<br>ç°åœ¨æˆ‘ä»¬å°±ç®€å•çš„å®ç°ä¸€ä¸‹è¿™ä¸ªæ‰§è¡Œå™¨å§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">actuator</span>(<span class="params">gen</span>)</span>&#123;<span class="comment">// æ¥æ”¶ä¸€ä¸ª generator å‡½æ•°</span></span><br><span class="line">    <span class="keyword">var</span> g = gen();<span class="comment">// å¹¶æ²¡æœ‰æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> result = g.next(data);<span class="comment">// è°ƒç”¨nextæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">if</span> (result.done) <span class="keyword">return</span> result.value;<span class="comment">// å¦‚æœç»“æŸåˆ™è¿”å›å€¼</span></span><br><span class="line">        result.value.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;<span class="comment">// ä¸Šé¢çš„å¥—è·¯</span></span><br><span class="line">            next(data);<span class="comment">// é€’å½’è°ƒç”¨</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">actuator(asyncGenFn); <span class="comment">// ç”¨æ‰§è¡Œå™¨å»æ‰§è¡Œ ç»“æœä¸€ä¸‹</span></span><br></pre></td></tr></table></figure><h3 id="generatorå¼‚æ­¥å¤„ç†ç»•ä¸å¼€çš„ä¸€ä¸ªåº“co"><a href="#generatorå¼‚æ­¥å¤„ç†ç»•ä¸å¼€çš„ä¸€ä¸ªåº“co" class="headerlink" title="generatorå¼‚æ­¥å¤„ç†ç»•ä¸å¼€çš„ä¸€ä¸ªåº“co"></a>generatorå¼‚æ­¥å¤„ç†ç»•ä¸å¼€çš„ä¸€ä¸ªåº“<strong>co</strong></h3><p>æˆ‘ä»¬ç”¨äº†å¾ˆå°‘çš„å‡ è¡Œä»£ç å†™äº†ä¸€ä¸ªæ‰§è¡Œå™¨ï¼Œå…¶å®è¿™ä¸Šé¢çš„<code>actuator</code>å‡½æ•°æ˜¯å¯¹å¤§ç¥<code>TJ Holowaychuk</code>æ‰€å†™çš„<strong>co</strong>åº“çš„æ‹™åŠ£æ¨¡ä»¿ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´æ¥å¼•ç”¨<code>co</code>åº“æ¥å®ç°æˆ‘ä»¬çš„å¼‚æ­¥æ“ä½œï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>);</span><br><span class="line"></span><br><span class="line">co(asyncGenFn); <span class="comment">// å°±è¿™ä¹ˆç®€å•</span></span><br></pre></td></tr></table></figure></p><p>å¤„ç†<code>generator</code>çš„å¼‚æ­¥å°±è¿™ä¹ˆç®€å•ï¼Œç›´æ¥ç”¨<code>co</code>åº“åŒ…ä¸€å±‚å°±ä¼šæ‰§è¡Œã€‚ä¹‹å‰æˆ‘ä»¬è¿˜ç•™äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœ<code>yield</code>åé¢çš„ä¸æ˜¯<code>Promise</code>é‚£è¯¥æ€ä¹ˆåŠï¼Ÿå…¶å®ä¹Ÿå¥½åŠï¼Œåªè¦æŠŠå®ƒè½¬æ¢ä¸º<code>Promise</code>å°±å¯ä»¥äº†ï¼Œ<code>co</code>ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ã€‚å¦å¤–æˆ‘ä»¬è¿™é‡Œå‡è®¾éƒ½æ˜¯ç›´æ¥æˆåŠŸçš„ï¼Œå¤±è´¥çš„æƒ…å†µä¸‹å¹¶æ²¡æœ‰è€ƒè™‘ï¼Œ<code>co</code>å·²ç»æŠŠå¤±è´¥çš„æƒ…å†µä¹Ÿå¤„ç†äº†ã€‚é‚£å®ƒåœ¨æˆ‘ä»¬çš„<code>actuator</code>å‡½æ•°çš„åŸºç¡€ä¸Šåšäº†é‚£äº›æ“ä½œå‘¢ï¼Ÿè¯·çœ‹<a href="https://github.com/tj/co/blob/master/index.js" target="_blank" rel="noopener">coæºç </a>ï¼Œgithubä»“åº“åœ¨<a href="https://github.com/tj/co" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><h3 id="asyncå‡½æ•°å¤„ç†å¼‚æ­¥"><a href="#asyncå‡½æ•°å¤„ç†å¼‚æ­¥" class="headerlink" title="asyncå‡½æ•°å¤„ç†å¼‚æ­¥"></a>asyncå‡½æ•°å¤„ç†å¼‚æ­¥</h3><p>asyncå‡½æ•°å¤„ç†å¼‚æ­¥ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFn</span>(<span class="params"></span>) </span>&#123;<span class="comment">// ä½¿ç”¨asyncå…³é”®å­—çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">var</span> result1 = <span class="keyword">await</span> fetch(<span class="string">"https://api.github.com/emojis"</span>);</span><br><span class="line">result1 = <span class="keyword">await</span> result1.json();<span class="comment">// å¼‚æ­¥å°±awaitä¸€ä¸‹ awaitå…³é”®å­—åªèƒ½ç”¨äºasyncå‡½æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(result1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result2 = <span class="keyword">await</span> promise;<span class="comment">//promiseè¿˜æ˜¯ä¸Šé¢çš„promise</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å¼‚æ­¥æ•°æ®æ˜¯ï¼š"</span> + result2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncFn();<span class="comment">// æ‰§è¡Œasyncå‡½æ•°</span></span><br></pre></td></tr></table></figure></p><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°<code>async</code>å‡½æ•°å’Œ<code>generator</code>å‡½æ•°å¤„ç†å¼‚æ­¥çš„ä»£ç å¾ˆç›¸ä¼¼ï¼Œæ— éå°±æ˜¯æŠŠ<code>*</code>æ¢æˆ<code>async</code>å¹¶ä¸”æŒªäº†ä¸€ä¸ªä½ç½®ï¼ˆä¸æŒªä½ç½®ç¼–è¯‘å™¨è¿˜ä»¥ä¸º<code>async</code>æ˜¯ä½ çš„å‡½æ•°åå‘¢ï¼‰ï¼Œç„¶åæŠŠé‡Œé¢çš„<code>yeild</code>æ¢æˆäº†<code>await</code>ã€‚å…¶å®<code>async</code>å‡½å°±æ˜¯<code>generator</code>å’Œ<code>co</code>çš„è¯­æ³•ç³–ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ,,, é‡Œé¢å¯èƒ½ç”¨åˆ°äº†await</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°±ç›¸å½“äº</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> co(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ... é‡Œé¢ç”¨åˆ°äº†yeild</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€ä»¥å¼‚æ­¥å‡½æ•°fnçš„æ‰§è¡Œfn()ç›¸å½“äºç”¨æ‰§è¡Œå™¨coæ¥æ‰§è¡Œgenerator</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> generator </tag>
            
            <tag> å¼‚æ­¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/2019/04/13/JavaScript%E4%B8%AD%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2019/04/13/JavaScript%E4%B8%AD%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼‰æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸²ï¼Œå°†åŒ¹é…çš„å­ä¸²åšæ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­ä¸²ç­‰ã€‚</p></blockquote><h3 id="åˆ›å»ºæ­£åˆ™å¯¹è±¡"><a href="#åˆ›å»ºæ­£åˆ™å¯¹è±¡" class="headerlink" title="åˆ›å»ºæ­£åˆ™å¯¹è±¡"></a>åˆ›å»ºæ­£åˆ™å¯¹è±¡</h3><ol><li><p>è¯­æ³•æ¨¡æ‹Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/\d/gi</span>;</span><br></pre></td></tr></table></figure></li><li><p>newåˆ›å»º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regExp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\d"</span>,<span class="string">"gi"</span>);</span><br></pre></td></tr></table></figure></li></ol><p>ä¸¤è€…çš„åŒºåˆ«ï¼šå¦‚æœä½¿ç”¨newæ¥åˆ›å»ºé‚£ä¹ˆéœ€è¦å¯¹æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œè½¬ä¹‰å¦‚<code>\d</code>éœ€è¦è½¬ä¹‰ä¸º<code>\\d</code>ï¼Œ<code>\\</code>éœ€è¦è½¬ä¹‰ä¸º<code>\\\\</code>ã€‚</p><h3 id="åŒ¹é…æ ‡ç¤º"><a href="#åŒ¹é…æ ‡ç¤º" class="headerlink" title="åŒ¹é…æ ‡ç¤º"></a>åŒ¹é…æ ‡ç¤º</h3><table><thead><tr><th>åŒ¹é…æ ‡ç¤º</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>g</td><td>å…¨å±€åŒ¹é…</td></tr><tr><td>i</td><td>å¿½ç•¥å¤§å°å†™</td></tr><tr><td>m</td><td>å¤šè¡Œæœç´¢</td></tr></tbody></table><h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨"><a href="#æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨"></a>æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨</h3><p>JavaScriptä¸­æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨æ¶‰åŠ2ä¸ªç±»å‹ï¼Œä¸€ä¸ªå°±æ˜¯ä¸Šé¢çš„<code>RegExp</code>ï¼Œè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„<code>String</code>ã€‚<br>RegExpå¯¹è±¡æ­£åˆ™å¤„ç†å¸¸ç”¨çš„æ–¹æ³•ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th><th>ä½¿ç”¨</th></tr></thead><tbody><tr><td>test</td><td>åŒ¹é…å‚æ•°æ˜¯å¦å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­</td><td>regExp.test(str);</td></tr><tr><td>exec</td><td>è¿”å›åŒ¹é…æ¨¡å¼çš„å­—ç¬¦ä¸²</td><td>regExp.exec(str);</td></tr></tbody></table><p>Stringå¯¹è±¡æ­£åˆ™å¤„ç†å¸¸ç”¨çš„æ–¹æ³•ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th><th>ä½¿ç”¨</th></tr></thead><tbody><tr><td>search</td><td>åŒ¹é…ç¬¦åˆåŒ¹é…è§„åˆ™çš„å­—ç¬¦ä¸²å‡ºç°çš„ä½ç½®</td><td>str.search(regExp);// æ²¡åŒ¹é…åˆ°è¿”å›-1</td></tr><tr><td>match</td><td>è¿”å›åŒ¹é…æ¨¡å¼çš„å­—ç¬¦ä¸²ï¼ˆè¿”å›æ•°ç»„ï¼‰</td><td>str.match(regExp);// æ²¡åŒ¹é…åˆ°è¿”å›null</td></tr><tr><td>replace</td><td>ä½¿ç”¨æŒ‡å®šçš„å†…å®¹æ›¿æ¢åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</td><td>str.replace(regExp,â€æ–°çš„å­—ç¬¦ä¸²æˆ–å‡½æ•°â€);</td></tr><tr><td>split</td><td>ä½¿ç”¨åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²å­—ç¬¦ä¸²ï¼ˆè¿”å›æ•°ç»„ï¼‰</td><td>str.split(regExp);// æ²¡åŒ¹é…åˆ°è¿”å›æ•´ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„</td></tr></tbody></table><p>æ­¤å¤–regExpå¯¹è±¡è¿˜æœ‰å‡ ä¸ªä¸å¤ªå¸¸ç”¨çš„å±æ€§ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/\d/gi</span>;</span><br><span class="line"><span class="built_in">console</span>.log(regExp.global);<span class="comment">// æ˜¯å¦å…¨å±€å˜é‡ å¦‚æœæœ‰æ ‡è¯†ç¬¦g é‚£ä¹ˆè¿”å›true è¿™é‡Œæ‰“å°true</span></span><br><span class="line"><span class="built_in">console</span>.log(regExp.ignoreCase);<span class="comment">// æ˜¯å¦å¿½ç•¥å¤§å°å†™ å¦‚æœæœ‰æ ‡è¯†ç¬¦i é‚£ä¹ˆè¿”å›true è¿™é‡Œæ‰“å°true</span></span><br><span class="line"><span class="built_in">console</span>.log(regExp.multiline);<span class="comment">// æ˜¯å¦å¤šè¡Œ å¦‚æœæœ‰æ ‡è¯†ç¬¦m é‚£ä¹ˆè¿”å›true è¿™é‡Œæ‰“å°false</span></span><br><span class="line"><span class="built_in">console</span>.log(regExp.source);<span class="comment">// åŒ¹é…è§„åˆ™ è¿™é‡Œæ‰“å°\d</span></span><br><span class="line"><span class="built_in">console</span>.log(regExp.lastIndex);<span class="comment">// å¼€å§‹æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹çš„ä½ç½® è¿™é‡Œæ‰“å°0</span></span><br></pre></td></tr></table></figure></p><h3 id="å­è¡¨è¾¾å¼ä¸åå‘å¼•ç”¨"><a href="#å­è¡¨è¾¾å¼ä¸åå‘å¼•ç”¨" class="headerlink" title="å­è¡¨è¾¾å¼ä¸åå‘å¼•ç”¨"></a>å­è¡¨è¾¾å¼ä¸åå‘å¼•ç”¨</h3><p>è¿™é‡Œæœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼š</p><blockquote><p><strong>å­è¡¨è¾¾å¼</strong>ï¼šåœ¨æ­£åˆ™åŒ¹é…ä¸­ï¼Œä½¿ç”¨ä¸€å¯¹æ‹¬å·æ‹¬èµ·æ¥çš„å†…å®¹å°±æ˜¯å­è¡¨è¾¾å¼ã€‚<br><strong>æ•è·</strong>ï¼šåœ¨æ­£åˆ™åŒ¹é…ä¸­ï¼Œå­è¡¨è¾¾å¼åŒ¹é…åˆ°çš„å†…å®¹ä¼šè¢«ç³»ç»Ÿæ•è·åˆ°ç³»ç»Ÿçš„ç¼“å†²åŒºä¸­ã€‚<br><strong>åå‘å¼•ç”¨</strong>ï¼šå½“æ•è·ä»¥åï¼Œå¯ä»¥åœ¨åŒ¹é…æ¨¡å¼ä¸­ä½¿ç”¨<code>\n</code>ï¼ˆnè¡¨ç¤ºæ•°å­—ï¼Œä»<strong>1</strong>å¼€å§‹ï¼‰ï¼Œæ¥å¼•ç”¨ç³»ç»Ÿä¸­ç¬¬å‡ å·ç¼“å†²åŒºçš„å†…å®¹ã€‚</p></blockquote><p>æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬è¦åŒ¹é…ä¸¤ä¸ªç›¸åŒå•è¯ï¼ˆè¿™é‡Œçš„å•è¯å…¶å®æ˜¯æŒ‡å¤šä¸ªå­—æ¯ï¼‰ä¸­é—´æ˜¯ä¸‰ä¸ªæ•°å­—çš„å†…å®¹ï¼Œå¦‚<code>a123a</code>ã€<code>abc666abc</code>è¿™ç§çš„ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"java123javabbb1232bccccc322deee666e"</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/(\w+)\d&#123;3&#125;\1/gi</span>;<span class="comment">// æ•è·å¤šä¸ªå­—æ¯ ä¸­é—´æ˜¯3ä¸ªæ•°å­— ç„¶ååé¢çš„å†…å®¹ä¸å‰é¢çš„ç›¸åŒ</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(regExp);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">// ["java123java", "e666e"]</span></span><br></pre></td></tr></table></figure></p><p>æ˜¯ä¸æ˜¯æœ‰ç‚¹æ˜ç™½äº†ï¼Œä¸æ˜ç™½æˆ‘ä»¬å†çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼ŒæŸ¥æ‰¾å¦‚<code>1221</code>ã€<code>6886</code>è¿™æ ·çš„<code>ABBA</code>å½¢çš„æ•°å­—ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"12213456886"</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/(\d)(\d)\2\1/gi</span>;<span class="comment">// æ•è·2ä¸ªæ•°å­— ç„¶åå…ˆæ˜¯ç¬¬äºŒä¸ªæ•°å­— åæ˜¯ç¬¬ä¸€ä¸ªæ•°å­—</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(regExp);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">// ["1221", "6886"]</span></span><br></pre></td></tr></table></figure></p><p><strong>é€šå¸¸æƒ…å†µä¸‹ï¼Œåé¢å†…å®¹å’Œå‰é¢å†…å®¹ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œå°±ä½¿ç”¨åˆ°å­è¡¨è¾¾å¼ã€æ•è·ã€åå‘å¼•ç”¨çš„æ¦‚å¿µäº†ã€‚</strong></p><p>ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥ä½¿ç”¨<code>RegExp</code>å¯¹è±¡çš„<code>exec</code>æ–¹æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"12213456886"</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/(\d)(\d)\2\1/gi</span>;</span><br><span class="line"><span class="keyword">var</span> result;</span><br><span class="line"><span class="keyword">while</span>(result = regExp.exec(str))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    <span class="comment">// åˆ†åˆ«æ‰“å°ï¼š</span></span><br><span class="line">    <span class="comment">// ["1221", "1", "2", index: 0, input: "12213456886", groups: undefined]</span></span><br><span class="line">    <span class="comment">// ["6886", "6", "8", index: 7, input: "12213456886", groups: undefined]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯è§ï¼Œexecæ–¹æ³•éœ€è¦å¾ªç¯æ‰“å°ï¼Œæ‰“å°çš„ç»“æœä¹Ÿæ›´åŠ å…¨é¢ã€‚å¦‚æœè¦è·å–åŒ¹é…åˆ°çš„å†…å®¹å¯ä»¥è·å–ä¸‹æ ‡ä¸º<code>0</code>çš„å…ƒç´ ã€‚</p><h3 id="é™å®šç¬¦"><a href="#é™å®šç¬¦" class="headerlink" title="é™å®šç¬¦"></a>é™å®šç¬¦</h3><blockquote><p>é™å®šç¬¦å¯ä»¥æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªç»™å®šå†…å®¹å¿…é¡»å‡ºç°å¤šå°‘æ¬¡æ‰èƒ½æ»¡è¶³åŒ¹é…ã€‚</p></blockquote><p>å¦‚ä¸Šé¢ä¾‹å­ä¸­<code>var regExp = /(\w+)\d{3}\1/gi;</code>å…¶ä¸­<code>{3}</code>å°±æ˜¯é™å®šç¬¦ï¼Œé™åˆ¶å¿…é¡»å‡ºç°3æ¬¡ã€‚æ›´å¤šçš„é™å®šç¬¦å¯ä»¥çœ‹è¿™é‡Œï¼š</p><table><thead><tr><th>é™å®šç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>*</td><td>åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td>+</td><td>åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td>?</td><td>åŒ¹é…0æ¬¡æˆ–1æ¬¡</td></tr><tr><td>{n}</td><td>åŒ¹é…næ¬¡ï¼Œnä¸ºæ•°å­—</td></tr><tr><td>{n,}</td><td>åŒ¹é…næ¬¡æˆ–å¤šæ¬¡ï¼ˆè‡³å°‘næ¬¡ï¼‰</td></tr><tr><td>{n,m}</td><td>æœ€å°‘åŒ¹é…næ¬¡ï¼Œæœ€å¤šåŒ¹é…mæ¬¡</td></tr></tbody></table><p>ç”±ä¸Šå¯è§ï¼Œ<code>*</code>ç›¸å½“äº<code>{0,}</code>ï¼Œ<code>+</code>ç›¸å½“äº<code>{1,}</code>ï¼Œ<code>?</code>ç›¸å½“äº<code>{0,1}</code></p><p>æˆ‘ä»¬å†çœ‹ä¸€ä¸ªä¾‹å­:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"123456aaaaa5678"</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/\d&#123;3,5&#125;/gi</span>;</span><br><span class="line"><span class="keyword">var</span> result = str.match(regExp);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">// ["12345", "5678"]</span></span><br></pre></td></tr></table></figure></p><p>ä¸Šå¼ä¸­<code>123</code>å…¶å®ä¹Ÿæ˜¯æ»¡è¶³æˆ‘ä»¬çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†æ˜¯JSä¸­çš„æ­£åˆ™åŒ¹é…æ˜¯<strong>è´ªå©ªåŒ¹é…</strong>çš„ï¼Œä»–ä¼šå°½å¯èƒ½å¤šçš„å»åŒ¹é…ã€‚</p><h3 id="å®šä½ç¬¦"><a href="#å®šä½ç¬¦" class="headerlink" title="å®šä½ç¬¦"></a>å®šä½ç¬¦</h3><blockquote><p>å®šä½ç¬¦å¯ä»¥å°†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å›ºå®šåœ¨ä¸€è¡Œçš„å¼€å§‹æˆ–ç»“æŸã€‚ä¹Ÿå¯ä»¥å›ºå®šåœ¨å•è¯çš„å¼€å§‹æˆ–ç»“å°¾å‡ºã€‚</p></blockquote><table><thead><tr><th>å®šä½ç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>^</td><td>åŒ¹é…å¼€å§‹çš„ä½ç½®</td></tr><tr><td>$</td><td>åŒ¹é…ç»“æŸçš„ä½ç½®</td></tr><tr><td>\b</td><td>åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œå‰é¢æ˜¯å¼€å§‹ä½ç½®æˆ–è€…åé¢æ˜¯ç»“æŸä½ç½®ï¼Œæˆ–è€…æœ‰ç©ºæ ¼</td></tr><tr><td>\B</td><td>åŒ¹é…éå•è¯è¾¹ç•Œ</td></tr></tbody></table><p>å¦‚<code>var regExp = /^h/gi;</code>åŒ¹é…ä»¥<code>h</code>å¼€å¤´çš„å†…å®¹ï¼Œ<code>var regExp = /ld$/gi;</code>åŒ¹é…ä»¥<code>ld</code>ç»“å°¾çš„å†…å®¹ã€‚</p><h3 id="å¸¸ç”¨åŒ¹é…è§„åˆ™"><a href="#å¸¸ç”¨åŒ¹é…è§„åˆ™" class="headerlink" title="å¸¸ç”¨åŒ¹é…è§„åˆ™"></a>å¸¸ç”¨åŒ¹é…è§„åˆ™</h3><table><thead><tr><th>åŒ¹é…è§„åˆ™</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>[a-z]</td><td>æ ‡ç¤ºa-zä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>[A-Z]</td><td>æ ‡ç¤ºA-Zä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>[0-9]</td><td>æ ‡ç¤º0-9ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>[0-9A-Z]</td><td>æ ‡ç¤º0-9æˆ–è€…A-Zä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>[abcd]</td><td>æ ‡ç¤ºaæˆ–è€…bæˆ–è€…cæˆ–è€…d</td></tr><tr><td>[^A-Z]</td><td>æ ‡ç¤ºæ’é™¤A-Zå¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>\d</td><td>åŒ¹é…ä¸€ä¸ªæ•°å­—ï¼Œå³[0-9]</td></tr><tr><td>\D</td><td>åŒ¹é…ä¸€ä¸ªéæ•°å­—ï¼Œå³[^0-9]</td></tr><tr><td>\w</td><td>åŒ¹é…å•è¯å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯æ•°å­—å­—æ¯ä¸‹åˆ’çº¿ï¼Œå³[0-9a-zA-Z_]</td></tr><tr><td>\W</td><td>åŒ¹é…éå•è¯å­—ç¬¦ï¼Œå¦‚ï¼ï¿¥ç­‰</td></tr><tr><td>\s</td><td>åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œç©ºæ ¼ã€æ¢è¡Œã€åˆ¶è¡¨ç¬¦ç­‰</td></tr><tr><td>\S</td><td>åŒ¹é…éç©ºç™½å­—ç¬¦</td></tr><tr><td>.</td><td>ï¼ˆçœ‹å¾—æ¸…å—ï¼Œä¸€ä¸ªç‚¹ï¼‰åŒ¹é…éæ¢è¡Œå¤–çš„ä»»æ„å­—ç¬¦</td></tr></tbody></table><p>é‚£å¦‚æœè¦åŒ¹é…æ‰€æœ‰çš„ä»»æ„å­—ç¬¦æ€ä¹ˆåŠï¼Ÿæ˜¯ç”¨<code>[.\n]</code>å°±å¯ä»¥äº†ã€‚è¿™é‡Œåˆ—å‡ºäº†ä¸€äº›å¸¸ç”¨çš„åŒ¹é…è§„åˆ™ï¼Œæ›´å¤šæ›´è¯¦ç»†çš„è§„åˆ™å¯ä»¥çœ‹<a href="https://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1700215?fr=aladdin#7" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><h3 id="è½¬ä¹‰ç¬¦"><a href="#è½¬ä¹‰ç¬¦" class="headerlink" title="è½¬ä¹‰ç¬¦"></a>è½¬ä¹‰ç¬¦</h3><p>è½¬ä¹‰ç¬¦<code>\</code>ç”¨æ¥è½¬ä¹‰æ­£åœ¨è¡¨è¾¾å¼å­ä¸­æœ‰ç‰¹æ®Šæ„ä¹‰çš„ç¬¦å·ã€‚å°±æ¯”å¦‚åŒ¹é…ä¸€ä¸ªå·¦æ‹¬å·ï¼Œé‚£ä¹ˆå°±éœ€è¦è½¬ä¹‰ä¸€ä¸‹<code>var regExp = /\(/;</code>ã€‚éœ€è¦è½¬ä¹‰çš„å­—ç¬¦æœ‰ï¼š<code>(){}[]\/.*+?^$</code>ç­‰ã€‚</p><h3 id="é¢„æŸ¥"><a href="#é¢„æŸ¥" class="headerlink" title="é¢„æŸ¥"></a>é¢„æŸ¥</h3><ol><li><p>æ­£å‘é¢„æŸ¥(?=)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"é›·é”‹å¥½äººï¼Œé›·é”‹å¤§å¥½äºº"</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/é›·é”‹(?=å¥½äºº)/gi</span>;<span class="comment">// åŒ¹é…åé¢æ˜¯"å¥½äºº"çš„é›·é”‹ å³ç¬¬ä¸€ä¸ªé›·é”‹</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(regExp);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">// ["é›·é”‹"]</span></span><br></pre></td></tr></table></figure></li><li><p>è´Ÿå‘é¢„æŸ¥(?!)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"é›·é”‹å¥½äººï¼Œé›·é”‹å¤§å¥½äºº"</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/é›·é”‹(?!å¥½äºº)/gi</span>;<span class="comment">// åŒ¹é…åé¢ä¸æ˜¯"å¥½äºº"çš„é›·é”‹ å³ç¬¬äºŒä¸ªé›·é”‹</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(regExp);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">// ["é›·é”‹"]</span></span><br></pre></td></tr></table></figure></li><li><p>ç»“æœä¸è¢«æ•è·(?:)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•è·å­—æ¯æˆ–è€…æ•°å­—åé¢è·Ÿç€ä¸¤ä¸ªç›¸åŒçš„æ•°å­—çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"a123b11"</span>;</span><br><span class="line"><span class="comment">// å› ä¸ºæˆ‘ä»¬ç¬¬ä¸€ä¸ªæ˜¯å­—æ¯æˆ–æ•°å­—éœ€è¦ä¸Šä¸€ä¸ªæ‹¬å·è¡¨ç¤ºæ•´ä½“ ä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›è¢«æ•è· </span></span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/(?:\d|\w)(\d)\1/gi</span>;</span><br><span class="line"><span class="keyword">var</span> result = str.match(regExp);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">// ["b11"]</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="ç»å…¸æ¡ˆä¾‹"><a href="#ç»å…¸æ¡ˆä¾‹" class="headerlink" title="ç»å…¸æ¡ˆä¾‹"></a>ç»å…¸æ¡ˆä¾‹</h3><p>å°†â€æˆ‘â€¦æˆ‘â€¦..æˆ‘..æ˜¯.æ˜¯â€¦.æ˜¯ä¸€ä¸ªä¸ªâ€¦.ä¸ªå¸…å¸…å¸…â€¦.å¸…å¸…å¸…å“¥â€è½¬åŒ–ä¸ºâ€æˆ‘æ˜¯ä¸€ä¸ªå¸…å“¥â€â€ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"æˆ‘...æˆ‘.....æˆ‘..æ˜¯.æ˜¯....æ˜¯ä¸€ä¸ªä¸ª....ä¸ªå¸…å¸…å¸…....å¸…å¸…å¸…å“¥"</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/\./gi</span>;<span class="comment">// å› ä¸º.æ˜¯ç‰¹æ®Šå­—ç¬¦ éœ€è¦è½¬ä¹‰</span></span><br><span class="line">str = str.replace(regExp,<span class="string">""</span>);<span class="comment">// ç¬¬ä¸€æ­¥å»æ‰ç©ºæ ¼</span></span><br><span class="line">regExp = <span class="regexp">/(.)\1+/gi</span>;<span class="comment">// è¿™é‡Œçš„ç‚¹è¡¨ç¤ºä»»æ„éæ¢è¡Œå­—ç¬¦ ç„¶ååŒ¹é…å¤šä¸ª ä¸€å®šè¦æ³¨æ„è¿™é‡Œå¿…éœ€æœ‰gæ ‡ç¤º</span></span><br><span class="line">str.replace(regExp,<span class="string">"$1"</span>);<span class="comment">// $1ç±»ä¼¼äºæ­£åˆ™ä¸­çš„\1 </span></span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">// "æˆ‘æ˜¯ä¸€ä¸ªå¸…å“¥"</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/04/13/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BD%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE%E6%8C%87%E5%8D%97%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/04/13/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BD%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE%E6%8C%87%E5%8D%97%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>è¿™æœ¬ä¹¦æ˜¯å¾ˆä¹…ä¹‹å‰ä¹°çš„ï¼Œä»Šå¤©å›é¡¾äº†ä¸€ä¸‹ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸‹ç¬”è®°ã€‚<br>æœ¬ä¹¦çš„å‰¯æ ‡é¢˜æ˜¯â€œå‰ç«¯å·¥ç¨‹å¸ˆæŠ€èƒ½ç²¾é«“â€å¯è§è¿™æœ¬ä¹¦çš„ç‰›é€¼ä¹‹å¤„ã€‚è¿™æœ¬ä¹¦ä¹Ÿå¾ˆè–„ï¼Œåªæœ‰147é¡µï¼Œä½†æ˜¯æ¯ä¸€ç« éƒ½æ˜¯ç²¾é«“ã€‚ç”±äºè¿™æœ¬ä¹¦æ¯ç« æå‡ºäº†ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå°±æŒ‰ç…§æ¯å¼ çš„å…·ä½“å†…å®¹ç»™å‡ºå§ã€‚</p><p><img src="/2019/04/13/ã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ã€‹"></p><hr><h3 id="å‡å°‘HTTPè¯·æ±‚"><a href="#å‡å°‘HTTPè¯·æ±‚" class="headerlink" title="å‡å°‘HTTPè¯·æ±‚"></a>å‡å°‘HTTPè¯·æ±‚</h3><blockquote><p><strong>æ€§èƒ½é»„é‡‘æ³•åˆ™</strong>ï¼šåªæœ‰10%~20%çš„æœ€ç»ˆç”¨æˆ·å“åº”æ—¶é—´èŠ±åœ¨äº†ä¸‹è½½HTMLæ–‡æ¡£ä¸Šï¼Œå…¶ä½™çš„80%~90%æ—¶é—´èŠ±åœ¨äº†ä¸‹è½½é¡µé¢ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡ã€JSã€CSSã€éŸ³é¢‘ç­‰ï¼‰ä¸Šã€‚</p></blockquote><p>ä¼˜åŒ–æ–¹æ³•ï¼šä½¿ç”¨å›¾ç‰‡åœ°å›¾ï¼ˆmapæ ‡ç­¾ï¼‰ã€CSS Spritesï¼ˆé›ªç¢§å›¾ï¼‰ã€å†…è”å›¾ç‰‡ï¼ˆbase64å›¾ç‰‡ï¼‰ã€è„šæœ¬å’Œæ ·å¼çš„åˆå¹¶ç­‰ã€‚</p><h3 id="ä½¿ç”¨CDN"><a href="#ä½¿ç”¨CDN" class="headerlink" title="ä½¿ç”¨CDN"></a>ä½¿ç”¨CDN</h3><blockquote><p><strong>CDNï¼ˆContent Delivery Network å†…å®¹å‘å¸ƒç½‘ç»œï¼‰</strong>æ˜¯ä¸€ç»„åˆ†å¸ƒåœ¨å¤šä¸ªä¸åŒåœ°ç†ä½ç½®çš„WebæœåŠ¡å™¨ï¼Œç”¨äºæ›´åŠ æœ‰æ•ˆåœ°å‘ç”¨æˆ·å‘å¸ƒå†…å®¹ã€‚</p></blockquote><p>ä¼˜ç‚¹ï¼š</p><ol><li>å¯ä»¥é€‰æ‹©ç½‘ç»œé˜¶è·ƒæ•°é‡æœ€å°çš„æœåŠ¡å™¨ï¼Œæˆ–è€…å…·æœ‰æœ€çŸ­å“åº”æ—¶é—´çš„æœåŠ¡å™¨ã€‚</li><li>å¯ä»¥è¿›è¡Œç¼“å­˜ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>å“åº”æ—¶é—´å¯èƒ½ä¼šå—åˆ°å…¶ä»–ç½‘ç«™çš„å½±å“ã€‚</li><li>æ— æ³•ç›´æ¥æ§åˆ¶æœåŠ¡å™¨æ‰€å¸¦æ¥çš„ç‰¹æ®ŠæœåŠ¡ï¼Œå¦‚ä¿®æ”¹æŸä¸ªHTTPçš„å“åº”å¤´ä¿¡æ¯ã€‚</li><li>å¦‚æœCDNæœåŠ¡çš„æ€§èƒ½ä¸‹é™ï¼Œä½ çš„å·¥ä½œè´¨é‡ä¹Ÿä¼šéšä¹‹ä¸‹é™ã€‚</li></ol><h3 id="æ·»åŠ Expireså¤´ä¿¡æ¯"><a href="#æ·»åŠ Expireså¤´ä¿¡æ¯" class="headerlink" title="æ·»åŠ Expireså¤´ä¿¡æ¯"></a>æ·»åŠ Expireså¤´ä¿¡æ¯</h3><p>Expireså“åº”å¤´ï¼š<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Expires</span>: Sun, 25 Mar 2029 09:16:01 GMT</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæŸä¸ªèµ„æºä½¿ç”¨è¿™ä¸ªå“åº”å¤´é‚£ä¹ˆè¯¥èµ„æºä¼šåœ¨è¿™ä¸ªæ—¶é—´å†…ä½¿ç”¨ç¼“å­˜ã€‚<br>HTTP1.1å¼•å…¥äº†<code>Cache-Control</code>å¤´æ¥å…‹æœ<code>Expires</code>çš„é™åˆ¶ï¼Œ<code>Cache-Control</code>ä½¿ç”¨<code>max-age</code>æŒ‡ä»¤æŒ‡å®šèµ„æºè¢«ç¼“å­˜å¤šä¹…ã€‚å®ƒä»¥ç§’ä¸ºå•ä½å®šä¹‰äº†ä¸€ä¸ªæ—¶é—´ï¼Œå¦‚æœèµ„æºä»ä¸Šæ¬¡è¯·æ±‚çš„ç§’æ•°åˆ°æœ¬æ¬¡è¯·æ±‚å°äº<code>max-age</code>ï¼Œæµè§ˆå™¨å°±ä½¿ç”¨ç¼“å­˜ä¸­çš„èµ„æºï¼Œå°±å¯ä»¥é¿å…é¢å¤–çš„HTTPè¯·æ±‚ã€‚<code>Cache-Control</code>çš„ä¼˜å…ˆçº§é«˜äº<code>Expires</code>ï¼Œå¦‚æœä¸¤è€…éƒ½æœ‰çš„æ—¶å€™å¯¹äºæ”¯æŒHTTP1.1çš„æµè§ˆå™¨ä½¿ç”¨çš„æ˜¯<code>Cache-Control</code>ï¼Œä¸æ”¯æŒçš„ä½¿ç”¨<code>Expires</code>ã€‚</p><p>Cache-Controlå“åº”å¤´ï¼š<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Cache-Control</span>: max-age=31526000</span><br></pre></td></tr></table></figure></p><p>å¯¹äºHTMLç­‰ç»å¸¸å˜åŠ¨çš„èµ„æºï¼Œä¸åº”è¯¥ä½¿ç”¨<strong>é•¿ä¹…</strong>çš„Expireså¤´ä¿¡æ¯ã€‚ä¸ºäº†ç¡®ä¿ç”¨æˆ·èƒ½è·å–èµ„æºçš„æœ€æ–°ç‰ˆæœ¬ï¼Œéœ€è¦åœ¨æ‰€æœ‰HTMLé¡µé¢ä¸­ä¿®æ”¹èµ„æºçš„æ–‡ä»¶åï¼ˆå¦‚åŠ ç‰ˆæœ¬å·æˆ–è€…hashå€¼ï¼‰ã€‚</p><h3 id="å‹ç¼©èµ„æº"><a href="#å‹ç¼©èµ„æº" class="headerlink" title="å‹ç¼©èµ„æº"></a>å‹ç¼©èµ„æº</h3><p>ä»HTTP1.1å¼€å§‹ï¼Œwebå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡HTTPè¯·æ±‚ä¸­çš„<code>Accept-Encoding</code>å¤´æ¥è¡¨ç¤ºå¯¹å‹ç¼©çš„æ”¯æŒï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Accept-Encoding</span>: gzip,deflate</span><br></pre></td></tr></table></figure><p>webæœåŠ¡å™¨é€šè¿‡å“åº”ä¸­çš„<code>Content-Encoding</code>æ¥é€šçŸ¥webå®¢æˆ·ç«¯ï¼Œä½¿ç”¨äº†å‹ç¼©:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Encoding</span>: gzip</span><br></pre></td></tr></table></figure><p>é€šå¸¸æƒ…å†µä¸‹å›¾ç‰‡å’ŒPDFä¸åº”è¯¥å‹ç¼©ï¼Œå› ä¸ºä»–ä»¬å·²ç»å‹ç¼©è¿‡äº†ã€‚ä¸€èˆ¬å¤§äº1KBæˆ–2KBçš„æ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚<code>mod_gzip_minimum_file_size</code>æŒ‡ä»¤ï¼ˆApacheæœåŠ¡å™¨ï¼‰æ§åˆ¶å¸Œæœ›å‹ç¼©æ–‡ä»¶çš„æœ€å°å¤§å°ï¼Œé»˜è®¤æ˜¯500Bã€‚</p><h3 id="å°†CSSæ”¾åœ¨é¡¶éƒ¨"><a href="#å°†CSSæ”¾åœ¨é¡¶éƒ¨" class="headerlink" title="å°†CSSæ”¾åœ¨é¡¶éƒ¨"></a>å°†CSSæ”¾åœ¨é¡¶éƒ¨</h3><p>ä¹Ÿå°±æ˜¯åœ¨headæ ‡ç­¾ä¸­ä½¿ç”¨linkæ ‡ç­¾å¼•å…¥CSSã€‚å¦‚æœæ”¾åœ¨htmlæ–‡æ¡£çš„åº•éƒ¨çš„æ—¶å€™ï¼ŒåŠ è½½CSSä¼šå¯¼è‡´DOMå›æµï¼ˆé‡æ’ï¼‰ï¼Œæµªè´¹ä¸å¿…è¦çš„è®¡ç®—ã€‚</p><h3 id="å°†JSæ”¾åœ¨åº•éƒ¨"><a href="#å°†JSæ”¾åœ¨åº•éƒ¨" class="headerlink" title="å°†JSæ”¾åœ¨åº•éƒ¨"></a>å°†JSæ”¾åœ¨åº•éƒ¨</h3><p>ä¹Ÿå°±æ˜¯æŠŠJSæ”¾åœ¨bodyæ ‡ç­¾å†…éƒ¨çš„æœ€ä¸‹é¢æ¥å¼•å…¥ã€‚<br>HTTP1.1å»ºè®®æµè§ˆå™¨ä»æ¯ä¸ªä¸»æœºåå¹¶è¡Œåœ°ä¸‹è½½2ä¸ªèµ„æºï¼ˆä¸åŒæµè§ˆå™¨çš„å®ç°ä¸åŒï¼Œå¯èƒ½ä¸æ˜¯2ä¸ªï¼‰ï¼Œä½†æ˜¯JSå´ä¸ä¸€æ ·ï¼ŒJSä¸‹è½½æ—¶åªæœ‰ä¸€ä¸ªï¼Œè€Œå¾€å¾€JSä¹Ÿæ˜¯æ¯”è¾ƒå¤§çš„æ‰€ä»¥ä¼šé˜»å¡å…¶ä»–èµ„æºçš„ä¸‹è½½ã€‚å°†JSæ”¾åœ¨åº•éƒ¨å°†ä¸ä¼šé˜»å¡åé¢å†…å®¹çš„å‘ˆç°ï¼Œä¹Ÿä¸ä¼šé˜»å¡åé¢å…¶ä»–èµ„æºçš„ä¸‹è½½ï¼Œè¿˜å¯ä»¥é˜²æ­¢DOMæ“ä½œæŠ¥é”™ã€‚</p><h3 id="é¿å…CSSè¡¨è¾¾å¼"><a href="#é¿å…CSSè¡¨è¾¾å¼" class="headerlink" title="é¿å…CSSè¡¨è¾¾å¼"></a>é¿å…CSSè¡¨è¾¾å¼</h3><p>ç°åœ¨CSSè¡¨è¾¾å¼çœŸçš„å¾ˆå°‘ä½¿ç”¨äº†ï¼Œä¼°è®¡å¤§å¤šæ•°äººè¿˜ä¸çŸ¥é“è¿™ç©æ„ï¼Œè°·æ­Œæµè§ˆå™¨éƒ½ä¸æ”¯æŒï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background-color</span>: <span class="selector-tag">expression</span>((<span class="selector-tag">new</span> <span class="selector-tag">Date</span>())<span class="selector-class">.getHours</span>() % 2 ? "<span class="selector-tag">red</span>" : "<span class="selector-tag">blue</span>")</span><br></pre></td></tr></table></figure></p><h3 id="ä½¿ç”¨å¤–éƒ¨JSå’ŒCSS"><a href="#ä½¿ç”¨å¤–éƒ¨JSå’ŒCSS" class="headerlink" title="ä½¿ç”¨å¤–éƒ¨JSå’ŒCSS"></a>ä½¿ç”¨å¤–éƒ¨JSå’ŒCSS</h3><p>å•çº¯æ¥è®²ï¼Œä½¿ç”¨å†…è”å¼•å…¥èµ„æºæ¯”å¤–éƒ¨å¼•å…¥å¿«30%~50%ï¼Œä¸»è¦æ˜¯å› ä¸ºå¤–éƒ¨èµ„æºéœ€è¦æ‰¿æ‹…æ›´å¤šçš„HTTPè¯·æ±‚ã€‚ä½†æ˜¯æœ‰ç¼“å­˜çš„æ—¶å€™å°±å·®ä¸å¤šäº†ï¼Œä½†æ˜¯æ”¾åœ¨å¤–éƒ¨è¿˜å¯ä»¥å®ç°èµ„æºçš„å¤ç”¨ã€‚</p><h3 id="å‡å°‘DNSæŸ¥æ‰¾"><a href="#å‡å°‘DNSæŸ¥æ‰¾" class="headerlink" title="å‡å°‘DNSæŸ¥æ‰¾"></a>å‡å°‘DNSæŸ¥æ‰¾</h3><p>DNSå°†ä¼šæŠŠåŸŸåæ˜ å°„åˆ°ipä¸Šã€‚å‡å°‘DNSæŸ¥æ‰¾çš„æ„æ€å°±æ˜¯æµè§ˆå™¨å’ŒwebæœåŠ¡å™¨æ„‰å¿«çš„é€šè®¯ç€ï¼Œå¹¶ä¿æŒTCPè¿æ¥æ‰“å¼€çš„çŠ¶æ€ï¼Œå°±æ²¡æœ‰ç†ç”±è¿›è¡ŒDNSæŸ¥æ‰¾ã€‚æœåŠ¡å™¨å¯ä»¥è®¾ç½®TTLï¼ˆTime-to-liveï¼‰å€¼å‘Šè¯‰å®¢æˆ·ç«¯DNSè®°å½•å¯ä»¥ç¼“å­˜å¤šä¹…ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è®¾ç½®<code>Keep-alive</code>å¤´ä¿¡æ¯:<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Connection</span>: Keep-alive</span><br></pre></td></tr></table></figure></p><h3 id="ç²¾ç®€JSå’ŒCSS"><a href="#ç²¾ç®€JSå’ŒCSS" class="headerlink" title="ç²¾ç®€JSå’ŒCSS"></a>ç²¾ç®€JSå’ŒCSS</h3><p>å…¶å®å°±æ˜¯æŠŠJSå’ŒCSSä»£ç å‹ç¼©ã€‚æ‰€è°“å‹ç¼©å°±æ˜¯å»æ‰ç©ºæ ¼ã€æ¢è¡Œç¬¦å’Œåˆ¶è¡¨ç¬¦å¹¶è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼ˆæ¯”å¦‚CSSä½¿ç”¨0ä»£æ›¿0pxç­‰ï¼‰ã€‚</p><h3 id="é¿å…é‡å®šå‘"><a href="#é¿å…é‡å®šå‘" class="headerlink" title="é¿å…é‡å®šå‘"></a>é¿å…é‡å®šå‘</h3><p>è¦é¿å…å“åº”ç ä¸º301æˆ–è€…302è¿™æ ·çš„è¯·æ±‚ï¼Œä¼šå¯¼è‡´é¡µé¢å˜æ…¢ã€‚</p><h3 id="åˆ é™¤é‡å¤è„šæœ¬"><a href="#åˆ é™¤é‡å¤è„šæœ¬" class="headerlink" title="åˆ é™¤é‡å¤è„šæœ¬"></a>åˆ é™¤é‡å¤è„šæœ¬</h3><p>è¿™ä¸ªå°±ä¸ç”¨è¯´äº†ï¼Œæé«˜ä»£ç çš„åˆ©ç”¨ç‡ã€‚</p><h3 id="é…ç½®æˆ–åˆ é™¤ETag"><a href="#é…ç½®æˆ–åˆ é™¤ETag" class="headerlink" title="é…ç½®æˆ–åˆ é™¤ETag"></a>é…ç½®æˆ–åˆ é™¤ETag</h3><p>ETagï¼ˆEntity Tagï¼Œå®ä½“æ ‡ç­¾ï¼‰æ˜¯webæœåŠ¡å™¨å’Œæµè§ˆå™¨ç”¨äºç¡®å®šç¼“å­˜èµ„æºçš„ä¸€ç§æœ‰æ•ˆæœºåˆ¶ã€‚å®ƒæ˜¯å”¯ä¸€è¡¨ç¤ºäº†ä¸€ä¸ªèµ„æºçš„ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬çš„å­—ç¬¦ä¸²ã€‚å”¯ä¸€çš„æ ¼å¼çº¦æŸæ˜¯è¯¥å­—ç¬¦ä¸²å¿…é¡»ç”¨å¼•å·å¼•ç”¨èµ·æ¥ã€‚<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ETag</span>: "10c24bc-4ab-457e1c1f"</span><br></pre></td></tr></table></figure></p><p>é€šå¸¸åº”ç”¨å¤„äºä¸€ä¸ªæœºå­çš„æ—¶å€™é‚£ä¹ˆå»ºè®®é…ç½®ETagï¼Œä½†æ˜¯å¦‚æœåº”ç”¨å¤„äºä¸€ä¸ªé›†ç¾¤çš„æ—¶å€™ï¼Œå»ºè®®ä¸ä½¿ç”¨ETagã€‚å› ä¸ºæµè§ˆå™¨å¦‚æœä»é›†ç¾¤çš„ä¸€å°æœºå­ä¸­è·å–äº†èµ„æºï¼Œç„¶åå†æ¬¡è¯·æ±‚èµ„æºçš„æ—¶å€™å¦‚æœæ˜¯å¦ä¸€å°çš„æ—¶å€™ï¼Œé‚£ä¹ˆä¸¤ä¸ªæœºå­ç”Ÿæˆçš„ETagå¾€å¾€æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ ·å°±ä¼šä½¿å¾—ç¼“å­˜å¤±æ•ˆã€‚</p><h3 id="ä½¿Ajaxå¯ç¼“å­˜"><a href="#ä½¿Ajaxå¯ç¼“å­˜" class="headerlink" title="ä½¿Ajaxå¯ç¼“å­˜"></a>ä½¿Ajaxå¯ç¼“å­˜</h3><p>å°†Ajaxç¼“å­˜äº†å¯ä»¥æé«˜æ€§èƒ½è¿™æ˜¯è‚¯å®šçš„ï¼Œè¿™ä¹Ÿæ­£æ˜¯ä¸€äº›åº“é»˜è®¤ä½¿ç”¨äº†ç¼“å­˜ï¼Œå¦‚æœä¸ºäº†æé«˜è¯·æ±‚çš„å‡†ç¡®æ€§ï¼Œä¸ªäººè§‰çš„è¿™æ¡è§„åˆ™å¯ä»¥å¿½ç•¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯æ€§èƒ½ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿæ’åº</title>
      <link href="/2019/04/10/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"/>
      <url>/2019/04/10/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>å¿«é€Ÿæ’åºæ˜¯æœ€æ•ˆç‡æé«˜çš„ä¸€ç§æ’åºæ–¹æ³•ï¼Œæ­£å› ä¸ºå®ƒæ•ˆç‡é«˜ï¼Œæ‰€ä»¥ä¹Ÿå—åˆ°äº†é¢è¯•å®˜çš„é’çï¼ŒåŒæ ·æˆäº†ç¨‹åºå‘˜å¿…ä¼šçš„å†…å®¹ã€‚O(âˆ©_âˆ©)Oå“ˆå“ˆ~</p><p>å®ƒçš„æ€æƒ³æ˜¯é€‰ä¸€ä¸ªåŸºå‡†ï¼Œç„¶åæŠŠå°äºåŸºå‡†çš„å€¼æ”¾åœ¨å·¦è¾¹ï¼Œå¤§äºåŸºå‡†çš„å€¼æ”¾åœ¨å³è¾¹ï¼ˆå‡è®¾ä»å°åˆ°å¤§æ’åºï¼‰ã€‚ç„¶ååˆ†åˆ«é€’å½’å·¦è¾¹å’Œå³è¾¹çš„éƒ¨åˆ†ï¼Œå½“æ‰€æœ‰çš„é€’å½’å®Œæ¯•åå°±æ˜¯å·²ç»æ’å¥½åºçš„ç»“æœäº†ã€‚</p><p>å¸‚é¢ä¸Šæµä¼ æœ€å¹¿çš„å¿«é€Ÿæ’åºæ˜¯é˜®ä¸€å³°è€å¸ˆåšå®¢ä¸­å†™çš„ï¼Œæˆ‘ä»¬è¿™ç¬”ç›´æ¥æ‹¿è¿‡æ¥è®°å½•ä¸€ä¸‹ï¼ŒåŸæ–‡åœ¨<a href="http://www.ruanyifeng.com/blog/2011/04/quicksort_in_javascript.html" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> quickSort = <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">ã€€ã€€<span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>) &#123; <span class="keyword">return</span> arr; &#125;</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> pivotIndex = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>);</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> pivot = arr.splice(pivotIndex, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> left = [];</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> right = [];</span><br><span class="line">ã€€ã€€<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€left.push(arr[i]);</span><br><span class="line">ã€€ã€€ã€€ã€€&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€right.push(arr[i]);</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€<span class="keyword">return</span> quickSort(left).concat([pivot], quickSort(right));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é˜®ä¸€å³°è€å¸ˆçš„å¿«é€Ÿæ’åºé€‰æ‹©çš„æ˜¯æœ€ä¸­é—´çš„å…ƒç´ ä½œä¸ºåŸºå‡†ï¼Œå·¦è¾¹å’Œå³è¾¹çš„éƒ½å®šä¹‰äº†ä¸€ä¸ªæ–°çš„æ•°ç»„æ¥æ¥æ”¶ï¼Œæœ€åæŠŠæ•°ç»„è¿æ¥èµ·æ¥ã€‚è¿™ä¸ªå¿«é€Ÿæ’åºçš„ä¼˜ç‚¹æ˜¯æ€è·¯å¾ˆæ˜ç¡®ï¼Œç¼ºç‚¹æ˜¯å› ä¸ºå®šä¹‰äº†æ–°çš„æ•°ç»„æ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ¯”è¾ƒé«˜ã€‚é‚£å¦‚ä½•é™ä½ç©ºé—´å¤æ‚åº¦å‘¢ï¼Ÿå…¶å®åªè¦æ“ä½œå…ƒæ•°ç»„å°±å¯ä»¥äº†ï¼Œè¿™é‡Œç»™å‡ºå¦ä¸€ç§å¿«é€Ÿæ’åºçš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params">arr,low,high</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ç”¨iå’Œjè®°å½•ä¸‹åˆå§‹çš„æœ€ä½ä½å’Œæœ€é«˜ä½ tempè®°å½•ä¸‹åŸºå‡† è¿™é‡Œå‡è®¾æ˜¯èµ·å§‹ä½ç½®</span></span><br><span class="line">    <span class="keyword">var</span> i = low,j = high,temp = arr[i];</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;<span class="comment">// å¦‚æœä½ä½çš„å°äºé«˜ä½çš„æ—¶å€™é‚£ä¹ˆå¯¹ç«‹é¢çš„å€¼è¿›è¡Œäº¤æ¢</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; temp &lt;= arr[j]) &#123;<span class="comment">// æ‰«æå³è¾¹ å¦‚æœå³è¾¹çš„çš„æœ‰æ¯”tempå°çš„éœ€è¦äº¤æ¢</span></span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­i &lt; jä¸ºäº†é¿å…ä¸éœ€è¦äº¤æ¢çš„æƒ…å†µ ä¸‹åŒ</span></span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;<span class="comment">// å¦‚æœå³è¾¹çš„æœ‰äº¤æ¢çš„æƒ…å†µåˆ™æ”¾åœ¨å·¦è¾¹çš„ä½ç½®</span></span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[i] &lt; temp) &#123;<span class="comment">// æ‰«æå·¦è¾¹ å¦‚æœå·¦è¾¹çš„çš„æœ‰æ¯”tempå¤§çš„éœ€è¦äº¤æ¢</span></span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;<span class="comment">// å¦‚æœå·¦è¾¹çš„æœ‰äº¤æ¢çš„æƒ…å†µåˆ™æ”¾åœ¨æœ‰è¾¹çš„ä½ç½®</span></span><br><span class="line">            arr[j] = arr[i];</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¸Šé¢å¾ªç¯ç»“æŸçš„æ—¶å€™iä½ç½®å·¦è¾¹çš„éƒ½æ¯”tempå° å³è¾¹çš„éƒ½æ¯”tempå¤§ è¿™åªtempç»™å½“å‰ä½ç½®</span></span><br><span class="line">    arr[i] = temp;</span><br><span class="line">    <span class="keyword">if</span> (low &lt; i) &#123;</span><br><span class="line">        sort(arr,low,i - <span class="number">1</span>);<span class="comment">// é€’å½’éå†å·¦ä¾§</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (j &lt; high) &#123;</span><br><span class="line">        sort(arr,j + <span class="number">1</span>,high);<span class="comment">// é€’å½’éå†å³ä¾§</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>)</span>&#123;<span class="comment">// ä¸ºäº†ç»™sortä¼ åˆå§‹å€¼ è€Œå°è£…çš„ä¸€å±‚</span></span><br><span class="line">    <span class="keyword">return</span> sort(arr,<span class="number">0</span>,arr.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">8</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>];</span><br><span class="line">quickSort(arr);</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¿«é€Ÿçš„æ—¶é—´å¤æ‚åº¦è¦æ¯”é˜®ä¸€å³°è€å¸ˆçš„ç¨å¾®ä½ä¸€ç‚¹ï¼Œä¸è¿‡æ¯”é˜®ä¸€å³°è€å¸ˆçš„å¿«é€Ÿæ’åºç¨å¾®éš¾ç†è§£ä¸€ç‚¹ã€‚å…¶å®æˆ‘ä»¬åœ¨<a href="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/#more">ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°</a>ä¸€æ–‡ä¸­ä¹Ÿæœ‰å¿«é€Ÿæ’åºçš„è®°å½•ï¼Œé‚£ä¸ªå¿«é€Ÿæ’åºä¸è¿™ä¸ªæœ‰ä¸€ç‚¹ç‚¹çš„ä¸åŒï¼Œé‚£ä¸ªæ’åºçš„åŸºå‡†é€‰æ‹©çš„ä¸­é—´å€¼ï¼Œç„¶åæ¯æ¬¡å¾ªç¯ç›´æ¥äº¤æ¢å·¦ä¾§çš„å’Œå³ä¾§çš„å…ƒç´ ï¼Œæ•´ä½“æ€è·¯ç›¸å·®æ— å‡ ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥åœ¨é‚£ç¯‡æ–‡ç« ä¸­æœä¸€ä¸‹å¿«é€Ÿæ’åºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¿«é€Ÿæ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†’æ³¡æ’åº</title>
      <link href="/2019/04/10/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/"/>
      <url>/2019/04/10/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>å†’æ³¡æ’åºæ˜¯æœ€ç®€å•çš„ä¸€ç§æ’åºæ–¹æ³•ï¼Œæ­£å› ä¸ºå®ƒå¾ˆç®€å•ï¼Œæ‰€ä»¥å—åˆ°äº†é¢è¯•å®˜çš„é’çï¼Œæˆäº†ç¨‹åºå‘˜å¿…ä¼šçš„å†…å®¹ã€‚</p><p>å®ƒçš„æ€æƒ³æ˜¯é€šè¿‡ä¸¤æ¬¡å¾ªç¯ï¼Œå¦‚æœå‰ä¸€ä¸ªæ¯”åä¸€ä¸ªå°çš„æ—¶å€™é‚£ä¹ˆä¸¤è€…äº’æ¢ä½ç½®ï¼ˆå‡è®¾æ˜¯ä»å°åˆ°å¤§æ’åºï¼‰ã€‚å°±è¿™æ ·å¤§çš„æ•°å°±ä¼šåƒæ°´ä¸­çš„æ°”æ³¡ä¸€æ ·ä»å‰é¢é€æ¸èµ°åˆ°åé¢ï¼Œè¿™ä¹Ÿæ­£å¼åå­—çš„ç”±æ¥ã€‚</p><p>è¿™é‡Œç»™å‡ºå†’æ³¡æ’åºçš„å®ç°ï¼Œé‡Œé¢ä½¿ç”¨äº†flagè¿›è¡Œæ ‡è®°ï¼Œå¦‚æœå·²ç»æ’å¥½åºçš„æ•°ç»„é‚£ä¹ˆå°±ä¸éœ€è¦å¤šæ¬¡éå†äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>; <span class="comment">// æ ‡è®°æŸæ¬¡å¾ªç¯æ˜¯å¦æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span> &amp;&amp; flag; i++)&#123;</span><br><span class="line">        flag = <span class="literal">false</span>; <span class="comment">// å¦‚æœæœ¬æ¬¡å¾ªç¯æ²¡æœ‰äº¤æ¢ è¯´æ˜å·²ç»å·²ç»æ˜¯æ’å¥½åºçš„ ä¸éœ€è¦å†éå†äº†</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++)&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå‰é¢çš„æ¯”åé¢çš„å¤§ é‚£ä¹ˆäº¤æ¢å…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[j + <span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">var</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                flag = <span class="literal">true</span>;<span class="comment">// æœ‰äº¤æ¢çš„æ—¶å€™ è¯´æ˜å¾ˆå¯èƒ½è¿˜æ²¡æœ‰æ’å¥½åº</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">8</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>];</span><br><span class="line">bubbleSort(arr);</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†’æ³¡æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜²æŠ–ä¸èŠ‚æµ</title>
      <link href="/2019/04/09/%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/"/>
      <url>/2019/04/09/%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<h3 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h3><blockquote><p>é˜²æŠ–ï¼šå¤šæ¬¡è§¦å‘æŸä¸ªå‡½æ•°ï¼Œä»¥æœ€åä¸€æ¬¡å‡½æ•°çš„æ‰§è¡Œä¸ºå‡†ã€‚</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ç»™å®šäº†ä¸€ä¸ªæ—¶é—´nï¼Œå¦‚æœåœ¨næ¯«ç§’å†…é‡å¤æ‰§è¡ŒæŸä¸ªå‡½æ•°é‚£ä¹ˆå°†ä¸ä¼šæ‰§è¡Œï¼Œå¦‚æœnæ¯«ç§’å†…ä¸å†è§¦å‘è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå°†æ‰§è¡Œè¯¥å‡½æ•°ã€‚è¡¨ç°çš„æ•ˆæœæ˜¯<strong>å¦‚æœä¸€ç›´è§¦å‘å‡½æ•°ï¼Œé‚£ä¹ˆåªæœ‰æœ€åä¸€æ¬¡æ‰ä¼šæ‰§è¡Œ</strong>ã€‚</p><p>ç®€å•å®ç°:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timeout;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> context = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line"></span><br><span class="line">        clearTimeout(timeout)</span><br><span class="line">        timeout = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            func.apply(context, args)</span><br><span class="line">        &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç®€å•ä½¿ç”¨:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = debounce(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å‡½æ•°æ‰§è¡Œäº†"</span>);</span><br><span class="line">&#125;,<span class="number">500</span>);</span><br><span class="line">fn();<span class="comment">// ç¬¬ä¸€æ¬¡ å¹¶ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">fn();<span class="comment">// ç¬¬äºŒæ¬¡ å¹¶ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">fn();<span class="comment">// ç¬¬ä¸‰æ¬¡ ç”±äº500æ¯«ç§’åæ²¡æœ‰å†æ¬¡æ‰§è¡Œ æ‰€ä»¥ä¼šåœ¨500æ¯«ç§’åæ‰“å°"å‡½æ•°æ‰§è¡Œäº†"</span></span><br></pre></td></tr></table></figure></p><p>é˜²æŠ–é€‚ç”¨åœºæ™¯ï¼šå¤šæ¬¡é‡å¤çš„æ“ä½œä»¥æœ€åä¸€ä¸ªä¸ºå‡†çš„ã€‚å°±æ¯”å¦‚åˆ—è¡¨é¡µæœ‰ä¸€ä¸ªæŸ¥è¯¢æŒ‰é’®ï¼Œå¾€å¾€æˆ‘ä»¬å¤šæ¬¡æŸ¥è¯¢çš„ç»“æœéƒ½æ˜¯ä»¥æœ€åä¸€æ¬¡çš„ç»“æœä¸ºå‡†ï¼Œè¿™é‡Œå°±å¯ä»¥ç”¨é˜²æŠ–ã€‚</p><h3 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h3><blockquote><p>èŠ‚æµï¼šå¤šæ¬¡è§¦å‘æŸä¸ªå‡½æ•°ï¼Œä¸€æ®µæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡ã€‚</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ç»™å®šäº†ä¸€ä¸ªæ—¶é—´nï¼Œå¦‚æœåœ¨næ¯«ç§’å†…è¯¥å‡½æ•°å¤šæ¬¡è°ƒç”¨é‚£ä¹ˆä¼šå¿½ç•¥è¿™äº›è°ƒç”¨ï¼Œç­‰næ¯«ç§’åä¼šæ‰§è¡Œè¯¥å‡½æ•°ã€‚è¡¨ç°çš„æ•ˆæœæ˜¯<strong>å¦‚æœä¸€ç›´è§¦å‘å‡½æ•°ï¼Œé‚£ä¹ˆæ¯éš”næ¯«ç§’å°±ä¼šæ‰§è¡Œä¸€æ¬¡å‡½æ•°</strong>ã€‚</p><p>ç®€å•å®ç°:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timeout = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> context = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="keyword">if</span> (!timeout) &#123;</span><br><span class="line">            timeout = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                timeout = <span class="literal">null</span>;</span><br><span class="line">                func.apply(context, args)</span><br><span class="line">            &#125;, wait)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>èŠ‚æµé€‚ç”¨åœºæ™¯ï¼šå°†å¯†é›†å‹æ“ä½œï¼Œè½¬æ¢ä¸ºç›¸å¯¹æ¾æ•£å‹çš„æ“ä½œ,ä»¥å‡å°è®¡ç®—é‡ã€‚å°±æ¯”å¦‚<code>onmousemove</code>å’Œ<code>onresize</code>äº‹ä»¶çš„å¤„ç†ç­‰ã€‚</p><p><code>lodash</code>åº“å·²ç»å¯¹<a href="https://www.lodashjs.com/docs/4.17.5.html#debounce" target="_blank" rel="noopener">é˜²æŠ–</a>å’Œ<a href="https://www.lodashjs.com/docs/4.17.5.html#throttle" target="_blank" rel="noopener">èŠ‚æµ</a>åšäº†å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜²æŠ– </tag>
            
            <tag> èŠ‚æµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptæ˜“é”™ç‚¹ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</title>
      <link href="/2019/04/08/JavaScript%E6%98%93%E9%94%99%E7%82%B9%EF%BC%88%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%89/"/>
      <url>/2019/04/08/JavaScript%E6%98%93%E9%94%99%E7%82%B9%EF%BC%88%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span> (<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">F.prototype = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> o1 = <span class="keyword">new</span> F();</span><br><span class="line"><span class="built_in">console</span>.log(F.prototype);</span><br><span class="line"><span class="built_in">console</span>.log(o1.__proto__);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">console</span>.log(o2.__proto__);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>null<br>object<br>undefined</p></blockquote><p>ç‚¹è¯„:<br><strong><code>new</code>çš„æ—¶å€™ï¼Œå¦‚æœæ„é€ å‡½æ•°çš„åŸå‹æ˜¯æ˜¯objectç±»å‹é‚£ä¹ˆæµè§ˆå™¨ä¼šæ·»åŠ <code>o1.__proto__ = F.prototype</code>å¦åˆ™ä¼šæ·»åŠ <code>o1.__proto__ = Object.prototype</code></strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-1"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-1" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="keyword">this</span> ? <span class="class"><span class="keyword">class</span> <span class="title">b</span></span>&#123;&#125; :<span class="class"><span class="keyword">class</span> <span class="title">c</span></span>&#123;&#125;;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> a,<span class="keyword">typeof</span> b, <span class="keyword">typeof</span> c);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>function undefined undefined</p></blockquote><p>ç‚¹è¯„:<br><strong>classå’Œfunctionå¤„äºç­‰å¼å³è¾¹çš„æ—¶å€™ä¸ä¼šå‘å¤–æš´éœ²ç±»åå’Œå‡½æ•°å</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-2"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-2" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = <span class="string">"john"</span>.split(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.reverse();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr3 = <span class="string">"jones"</span>.split(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">arr2.push(arr3);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"array 1: length="</span> + arr1.length + <span class="string">" last="</span> + arr1.slice(<span class="number">-1</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"array 2: length="</span> + arr2.length + <span class="string">" last="</span> + arr2.slice(<span class="number">-1</span>));</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>array 1: length=5 last=j,o,n,e,s<br>array 2: length=5 last=j,o,n,e,s</p></blockquote><p>ç‚¹è¯„:<br><strong>reverseä¼šæ”¹å˜åŸæ•°ç»„ï¼Œæ‰€ä»¥arr1å’Œarr2å…¶å®æ˜¯ä¸€ä¸ªæ•°ç»„</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-3"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-3" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;, b = &#123;<span class="attr">key</span>:<span class="string">'b'</span>&#125;,c = &#123;<span class="attr">key</span>:<span class="string">'c'</span>&#125;;</span><br><span class="line"></span><br><span class="line">a[b] = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">a[c] = <span class="number">456</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a[b]);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>456</p></blockquote><p>ç‚¹è¯„:<br><strong><code>[]</code>è®¿é—®å±æ€§çš„æ—¶å€™å¯¹äºå¯¹è±¡ä¼šè°ƒç”¨<code>toString</code>æ–¹æ³•ï¼Œbå’Œcçš„<code>toString</code>çš„ç»“æœéƒ½æ˜¯<code>[object Object]</code></strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-4"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-4" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">n</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a.x = a = &#123;<span class="attr">n</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a.x);</span><br><span class="line"><span class="built_in">console</span>.log(b.x);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>undefined<br>{n: 2}</p></blockquote><p>ç‚¹è¯„:<br><strong>æ‰§è¡Œç¬¬ä¸‰è¡Œé‚£ä¸ªç­‰å¼çš„æ—¶å€™ï¼Œa.xå…ˆè¿›å…¥æ ˆï¼Œæ­¤æ—¶aå’Œbåº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚ä¹‹ååé¢é‚£ä¸ªç­‰å¼è¿›æ ˆå¹¶æ‰§è¡Œï¼Œåé¢çš„ç»“æœæŠŠaæ”¹äº†ï¼Œä¹Ÿå°±æ˜¯aå˜æˆ{n:2}äº†ï¼Œè¿”å›çš„ç»“æœä¹Ÿæ˜¯{n:2}ã€‚æ­¤æ—¶å‰é¢çš„a.xçš„åœ°å€å°±æ˜¯b.xçš„åœ°å€ï¼Œæ‰€ä»¥b.x = {n:2}ã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-5"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-5" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="literal">undefined</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="literal">null</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="string">"012"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="string">"abc"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(&#123;<span class="attr">valueOf</span>:<span class="function"><span class="params">()</span>=&gt;</span><span class="number">123</span>&#125;));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(&#123;<span class="attr">toString</span>:<span class="function"><span class="params">()</span>=&gt;</span><span class="number">456</span>&#125;));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(&#123;<span class="attr">valueOf</span>:<span class="function"><span class="params">()</span>=&gt;</span><span class="number">123</span>,<span class="attr">toString</span>:<span class="function"><span class="params">()</span>=&gt;</span><span class="number">456</span>&#125;));</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>0<br>NaN<br>0<br>12<br>NaN<br>123<br>456<br>123</p></blockquote><p>ç‚¹è¯„:<br><strong>Numberè½¬æ¢çš„æ—¶å€™ä¸ä¼ å€¼å’Œä¼ å…¥nullçš„æ—¶å€™æ˜¯0ï¼›å¦‚æœæ˜¯undefinedçš„æ—¶å€™ç„¶åçš„æ˜¯NaNï¼›å­—ç¬¦ä¸²ä¼šå¿½ç•¥å‰ç½®çš„0ï¼ˆè€Œä¸æ˜¯8è¿›åˆ¶ï¼‰ï¼›ä¸ä»¥æ•°å­—å¼€å¤´çš„æ˜¯NaNï¼›å¯¹è±¡ä¼šè°ƒç”¨valueOf()æ–¹æ³•ï¼Œå¦‚æœç»“æœç”¨Numberè½¬åŒ–åè¿˜æ˜¯NaNï¼Œé‚£ä¹ˆå°±ä¼šç”¨toString()çš„ç»“æœå†è½¬æ¢ä¸€æ¬¡ã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-6"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-6" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseFloat</span>(<span class="string">"0xA"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">"0xA"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">"012"</span>));</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>0<br>10<br>12</p></blockquote><p>ç‚¹è¯„:<br><strong>parseFloatå¯¹äº16è¿›åˆ¶çš„éƒ½æ¢è½¬åŒ–ä¸º0ï¼ŒparseIntå¯¹0å¼€å¤´çš„éƒ½ä¼šå¿½ç•¥ï¼ˆES3çš„æ—¶å€™æ˜¯æŒ‰ç…§8è¿›åˆ¶è½¬æ¢çš„ï¼‰ã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-7"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-7" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.POSITIVE_INFINITY + <span class="built_in">Number</span>.POSITIVE_INFINITY);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.POSITIVE_INFINITY + <span class="built_in">Number</span>.NEGATIVE_INFINITY);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.NEGATIVE_INFINITY + <span class="built_in">Number</span>.NEGATIVE_INFINITY);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> + <span class="literal">NaN</span>);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>Infinity<br>NaN<br>-Infinity<br>NaN</p></blockquote><p>ç‚¹è¯„:<br><strong>æ­£æ— ç©·åŠ æ­£æ— ç©·ç­‰äºæ­£æ— ç©·ï¼Œè´Ÿæ— ç©·åŠ è´Ÿæ— ç©·ç­‰äºè´Ÿæ— ç©·ï¼Œæ­£æ— ç©·åŠ è´Ÿæ— ç©·ä¸æ˜¯ä¸ªæ•°ï¼Œä¸æ˜¯ä¸ªæ•°åŠ å…¶ä»–æ•°ä»»ç„¶ä¸æ˜¯ä¸ªæ•°ã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-8"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-8" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> &lt; <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> = <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>false<br>false<br>false</p></blockquote><p>ç‚¹è¯„:<br><strong>NaNå’Œä»»ä½•æ•°å­—æ¯”è¾ƒéƒ½æ˜¯falseã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-9"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-9" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = (a = <span class="number">1</span>,b = <span class="number">2</span>,c = <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(d);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>3</p></blockquote><p>ç‚¹è¯„:<br><strong>é€—å·è¡¨è¾¾å¼è¿”å›æœ€åä¸€ä¸ªã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-10"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-10" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> <span class="keyword">instanceof</span> <span class="built_in">Number</span>);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>false</p></blockquote><p>ç‚¹è¯„:<br><strong>123çš„æ•°æ®ç±»å‹æ˜¯numberè€Œä¸æ˜¯objectï¼Œæ‰€æœ‰ä¸æ˜¯å¯¹è±¡çš„æ•°æ®ç±»å‹ä½¿ç”¨instanceoféƒ½è¿”å›falseã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-11"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-11" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>));</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>[3, 2, 1]<br>[undefined, undefined, undefined]</p></blockquote><p>ç‚¹è¯„:<br><strong>new Arrayçš„æ—¶å€™å¤šä¸ªå‚æ•°çš„æ—¶å€™ä¼šè®¤ä¸ºæ˜¯æ•°ç»„çš„å†…å®¹ï¼Œä¸€ä¸ªå‚æ•°çš„æ—¶å€™ä¼šè®¤ä¸ºæ˜¯æ•°ç»„çš„é•¿åº¦ã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-12"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-12" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F1</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F2</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">name</span>:<span class="string">"ä¸å‘Šè¯‰ä½ "</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F3</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> F1());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> F2());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> F3());</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>F1 {}<br>{name: â€œä¸å‘Šè¯‰ä½ â€}<br>F3 {}</p></blockquote><p>ç‚¹è¯„:<br><strong>newçš„æ—¶å€™å¦‚æœæ„é€ æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆnewçš„ç»“æœå°±æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ æ–¹æ³•çš„åŸå‹ã€‚</strong></p><h3 id="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-13"><a href="#ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ-13" class="headerlink" title="ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ"></a>ä¸‹é¢è¾“å‡ºçš„æ˜¯ä»€ä¹ˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"æˆ‘å°±è¦æŠ›å‡ºé”™è¯¯"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn());</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p>2</p></blockquote><p>ç‚¹è¯„:<br><strong>finallyä¸€å®šä¼šæ‰§è¡Œï¼Œå³ä½¿æœ‰returnä¹Ÿé˜»æ­¢ä¸äº†ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ˜“é”™ç‚¹ </tag>
            
            <tag> é¢è¯•é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS3å¡ç‰‡å…‰ç…§æ•ˆæœ</title>
      <link href="/2019/03/25/CSS3%E5%8D%A1%E7%89%87%E5%85%89%E7%85%A7%E6%95%88%E6%9E%9C/"/>
      <url>/2019/03/25/CSS3%E5%8D%A1%E7%89%87%E5%85%89%E7%85%A7%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ä»Šå¤©è¦ä½¿ç”¨CSS3å®ç°ä¸‹é¢è¿™æ ·çš„å¡ç‰‡å…‰ç…§æ•ˆæœï¼š</p><p><img src="/2019/03/25/CSS3å¡ç‰‡å…‰ç…§æ•ˆæœ/1.gif" alt="å¡ç‰‡å…‰ç…§"></p><hr><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>é¦–å…ˆç»™å‡ºHTMLç»“æ„ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hover-light"</span>&gt;</span>å¡ç‰‡å…‰ç…§æ•ˆæœ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åç»™å‡ºåˆå§‹çš„CSSç»“æ„:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hover-light</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#70c3ff</span>;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ•ˆæœå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­:<br><img src="/2019/03/25/CSS3å¡ç‰‡å…‰ç…§æ•ˆæœ/2.png" alt="åˆå§‹æ ·å¼"></p><p>è¦å®ç°å¡ç‰‡å…‰ç…§çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å­å…ƒç´ ï¼Œæ­¤æ—¶ä½¿ç”¨ä¼ªå…ƒç´ <code>::after</code>æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚æˆ‘ä»¬éœ€è¦ç»™<code>::after</code>æ·»åŠ ä¸€ä¸ªæ–œç€çš„æ¸å˜æ¥æ¨¡æ‹Ÿå…‰ç…§æ•ˆæœï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä»å·¦åˆ°å³çš„æ¸å˜ï¼Œç„¶åå†ç»™ä¸€ä¸ªå€¾æ–œçš„å½¢å˜å°±å¯ä»¥æ¨¡æ‹Ÿäº†ã€‚æœ€å¥½å†ç»™ä¸€ä¸ªç®€å•çš„æ‚¬æµ®åŠ¨ç”»å°±å®Œäº‹äº†ã€‚ä¸‹é¢ç›´æ¥ç»™å‡ºCSSçš„å…¶ä»–ä»£ç ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hover-light</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#70c3ff</span>;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*å­ç»çˆ¶ç›¸å¯¹*/</span></span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="comment">/*å­æº¢å‡ºçˆ¶å…ƒç´ éšè— è¿™æ ·hoverå­å…ƒç´ çš„æ—¶å€™ ä¸ç®—hoverçˆ¶å…ƒç´ */</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hover-light</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="comment">/*é¦–å…ˆéšè—å­å…ƒç´ */</span></span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/*è®¾ç½®å’Œçˆ¶å…ƒç´ ä¸€æ ·å¤§*/</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="comment">/*æ·»åŠ ä»å·¦å¾€å³çš„æ¸å˜ å³æ¨¡ä»¿å…‰ç…§æ•ˆæœ*/</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(0deg,hsla(0,0%,100%,0),<span class="built_in">hsla</span>(0,0%,100%,.5),<span class="built_in">hsla</span>(0,0%,100%,0));</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right,hsla(0,0%,100%,0),<span class="built_in">hsla</span>(0,0%,100%,.5),<span class="built_in">hsla</span>(0,0%,100%,0));</span><br><span class="line">    <span class="comment">/*å…‰ç…§æ˜¯æ–œç€çš„æ›´å¥½çœ‹*/</span></span><br><span class="line">    <span class="attribute">-o-transform</span>: <span class="built_in">skewx</span>(-25deg);</span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">skewx</span>(-25deg);</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">skewx</span>(-25deg);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">skewx</span>(-25deg);</span><br><span class="line">    <span class="comment">/*æ·»åŠ åŠ¨ç”»æ•ˆæœ*/</span></span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hover-light</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="comment">/*é¼ æ ‡æ”¾åœ¨çˆ¶å…ƒç´ ä¸Š ç§»åŠ¨å­å…ƒç´ */</span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™æ ·å°±å®ç°äº†ä¸Šé¢çš„å¡ç‰‡å…‰ç…§æ•ˆæœ!</p><h2 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h2><p>ä¸Šé¢å…‰ç…§æ•ˆæœå·²ç»å®Œæˆï¼Œå…¶å®CSS3çš„å½¢å˜æŠ•å½±ç­‰åŠŸèƒ½ç»„åˆèµ·æ¥å¯ä»¥å®ç°æ›´å¥½çš„æ•ˆæœï¼Œæˆ‘ä»¬ç°åœ¨æ·»åŠ æ ·å¼ï¼Œç»™çˆ¶å…ƒç´ ä¹Ÿæ·»åŠ ä¸€ä¸ªåŠ¨ç”»çš„æ•ˆæœï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hover-light</span>&#123;</span><br><span class="line">    <span class="comment">/*... å…¶ä»–ä»£ç ç›¸ä¸Š*/</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hover-light</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="comment">/*... å…¶ä»–ä»£ç ç›¸ä¸Š*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*æ·»åŠ åŠ¨ç”»æ•ˆæœ ç›´æ¥ç»§æ‰¿çˆ¶ç±»çš„æ•ˆæœ*/</span></span><br><span class="line">    <span class="attribute">transition</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hover-light</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="comment">/*å‘ä¸Šç§»åŠ¨6ä¸ªåƒç´ */</span></span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">translateY</span>(-6px);</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(-6px);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-6px);</span><br><span class="line">    <span class="comment">/*æ·»åŠ ä¸€ä¸ªæ·¡ä¸€ç‚¹çš„é˜´å½±*/</span></span><br><span class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">0</span> <span class="number">26px</span> <span class="number">40px</span> -<span class="number">24px</span> <span class="built_in">rgba</span>(0,36,100,.5);</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">26px</span> <span class="number">40px</span> -<span class="number">24px</span> <span class="built_in">rgba</span>(0,36,100,.5);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">26px</span> <span class="number">40px</span> -<span class="number">24px</span> <span class="built_in">rgba</span>(0,36,100,.5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶çš„æ•ˆæœï¼š</p><p><img src="/2019/03/25/CSS3å¡ç‰‡å…‰ç…§æ•ˆæœ/3.gif" alt="æ·»åŠ é˜´å½±åŠ¨ç”»"></p><p>å®Œæ•´HTMLä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>CSSS3å¡ç‰‡å…‰ç…§æ•ˆæœ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        body&#123;</span></span><br><span class="line"><span class="undefined">            padding: 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.hover-light</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 250px;</span></span><br><span class="line"><span class="undefined">            height: 180px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#70c3ff</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span><span class="selector-pseudo">:white</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 2rem;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">            border-radius: 8px;</span></span><br><span class="line"><span class="css">            <span class="comment">/*å­ç»çˆ¶ç›¸å¯¹*/</span></span></span><br><span class="line"><span class="undefined">            position: relative;</span></span><br><span class="line"><span class="css">            <span class="comment">/*å­æº¢å‡ºçˆ¶å…ƒç´ éšè— è¿™æ ·hoverå­å…ƒç´ çš„æ—¶å€™ ä¸ç®—hoverçˆ¶å…ƒç´ */</span></span></span><br><span class="line"><span class="undefined">            overflow: hidden;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">transition</span>: <span class="selector-tag">all</span> <span class="selector-class">.3s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.hover-light</span><span class="selector-pseudo">::after</span>&#123;</span></span><br><span class="line"><span class="undefined">            content: "";</span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="css">            <span class="comment">/*é¦–å…ˆéšè—å­å…ƒç´ */</span></span></span><br><span class="line"><span class="undefined">            left: -100%;</span></span><br><span class="line"><span class="undefined">            top: 0;</span></span><br><span class="line"><span class="css">            <span class="comment">/*è®¾ç½®å’Œçˆ¶å…ƒç´ ä¸€æ ·å¤§*/</span></span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            height: 100%;</span></span><br><span class="line"><span class="css">            <span class="comment">/*æ·»åŠ ä»å·¦å¾€å³çš„æ¸å˜ å³æ¨¡ä»¿å…‰ç…§æ•ˆæœ*/</span></span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-image</span>: <span class="selector-tag">-webkit-linear-gradient</span>(0<span class="selector-tag">deg</span>,<span class="selector-tag">hsla</span>(0,0%,100%,0),<span class="selector-tag">hsla</span>(0,0%,100%,<span class="selector-class">.5</span>),<span class="selector-tag">hsla</span>(0,0%,100%,0));</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>,<span class="selector-tag">hsla</span>(0,0%,100%,0),<span class="selector-tag">hsla</span>(0,0%,100%,<span class="selector-class">.5</span>),<span class="selector-tag">hsla</span>(0,0%,100%,0));</span></span><br><span class="line"><span class="css">            <span class="comment">/*å…‰ç…§æ˜¯æ–œç€çš„æ›´å¥½çœ‹*/</span></span></span><br><span class="line"><span class="undefined">            -o-transform: skewx(-25deg);</span></span><br><span class="line"><span class="undefined">            -moz-transform: skewx(-25deg);</span></span><br><span class="line"><span class="undefined">            -webkit-transform: skewx(-25deg);</span></span><br><span class="line"><span class="undefined">            transform: skewx(-25deg);</span></span><br><span class="line"><span class="css">            <span class="comment">/*æ·»åŠ åŠ¨ç”»æ•ˆæœ ç›´æ¥ç»§æ‰¿çˆ¶ç±»çš„æ•ˆæœ*/</span></span></span><br><span class="line"><span class="undefined">            transition: inherit;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.hover-light</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/*é¼ æ ‡æ”¾åœ¨çˆ¶å…ƒç´ ä¸Š ç§»åŠ¨å­å…ƒç´ */</span></span></span><br><span class="line"><span class="undefined">            left: 100%;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.hover-light</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/*å‘ä¸Šç§»åŠ¨6ä¸ªåƒç´ */</span></span></span><br><span class="line"><span class="undefined">            -moz-transform: translateY(-6px);</span></span><br><span class="line"><span class="undefined">            -webkit-transform: translateY(-6px);</span></span><br><span class="line"><span class="undefined">            transform: translateY(-6px);</span></span><br><span class="line"><span class="css">            <span class="comment">/*æ·»åŠ ä¸€ä¸ªæ·¡ä¸€ç‚¹çš„é˜´å½±*/</span></span></span><br><span class="line"><span class="css">            <span class="selector-tag">-moz-box-shadow</span>: 0 26<span class="selector-tag">px</span> 40<span class="selector-tag">px</span> <span class="selector-tag">-24px</span> <span class="selector-tag">rgba</span>(0,36,100,<span class="selector-class">.5</span>);</span></span><br><span class="line"><span class="css">            <span class="selector-tag">-webkit-box-shadow</span>: 0 26<span class="selector-tag">px</span> 40<span class="selector-tag">px</span> <span class="selector-tag">-24px</span> <span class="selector-tag">rgba</span>(0,36,100,<span class="selector-class">.5</span>);</span></span><br><span class="line"><span class="css">            <span class="selector-tag">box-shadow</span>: 0 26<span class="selector-tag">px</span> 40<span class="selector-tag">px</span> <span class="selector-tag">-24px</span> <span class="selector-tag">rgba</span>(0,36,100,<span class="selector-class">.5</span>);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hover-light"</span>&gt;</span>å¡ç‰‡å…‰ç…§æ•ˆæœ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSSæ•ˆæœ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—</title>
      <link href="/2019/03/19/CSS3%E5%AE%9E%E7%8E%B0%E5%BD%A9%E8%89%B2%E7%82%AB%E9%85%B7%E6%96%87%E5%AD%97/"/>
      <url>/2019/03/19/CSS3%E5%AE%9E%E7%8E%B0%E5%BD%A9%E8%89%B2%E7%82%AB%E9%85%B7%E6%96%87%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ä»Šå¤©è¦ä½¿ç”¨CSS3å®ç°ä¸‹é¢è¿™æ ·çš„é…·é…·çš„æ•ˆæœï¼š</p><p><img src="/2019/03/19/CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—/1.gif" alt="å½©è‰²ç‚«é…·æ–‡å­—"></p><hr><p>è¦å®ç°è¿™æ ·çš„æ•ˆæœåªéœ€è¦ä¸‰æ­¥ï¼š</p><ol><li>è®¾ç½®æ¸å˜èƒŒæ™¯è‰²ï¼›</li><li>æŒ‰ç…§æ–‡å­—æ‹†åˆ†èƒŒæ™¯ï¼›</li><li>å»æ‰æ–‡å­—æœ¬èº«çš„é¢œè‰²ï¼›</li><li>è®¾ç½®åŠ¨ç”»ã€‚</li></ol><p>æˆ‘ä»¬ä¹ŸæŒ‰ç…§è¿™ä¸ªæ­¥éª¤ä¸€æ­¥ä¸€æ­¥çš„å†™å‡ºæ ·å¼ï¼Œé¦–å…ˆç»™å‡ºHTMLç»“æ„ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"color-text"</span>&gt;</span>è¿™é‡Œæ˜¯å½©è‰²çš„æ–‡å­—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åç»™å‡ºåˆå§‹çš„CSSç»“æ„:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color-text</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶æ•ˆæœå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­:<br><img src="/2019/03/19/CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—/2.png" alt="åˆå§‹æ ·å¼"></p><h2 id="ä¸€ã€è®¾ç½®æ¸å˜èƒŒæ™¯è‰²"><a href="#ä¸€ã€è®¾ç½®æ¸å˜èƒŒæ™¯è‰²" class="headerlink" title="ä¸€ã€è®¾ç½®æ¸å˜èƒŒæ™¯è‰²"></a>ä¸€ã€è®¾ç½®æ¸å˜èƒŒæ™¯è‰²</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color-text</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(left, blue,</span><br><span class="line">        #66ffff 10%, #cc00ff 20%,</span><br><span class="line">        #CC00CC 30%, #CCCCFF 40%,</span><br><span class="line">        #00FFFF 50%, #CCCCFF 60%,</span><br><span class="line">        #CC00CC 70%, #CC00FF 80%,</span><br><span class="line">        #66FFFF 90%, blue 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹æ˜¯æ¸å˜èƒŒæ™¯è‰²åº”è¯¥æ˜¯æŒ‰ç…§50%å¯¹ç§°çš„ä¸ç„¶å°±ä¼šå‡ºç°æ–­å±‚ã€‚è¿™ä¸ªæ—¶å€™çš„æ•ˆæœå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­äº†ï¼š<br><img src="/2019/03/19/CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—/3.png" alt="è®¾ç½®æ¸å˜è‰²"></p><h2 id="äºŒã€æŒ‰ç…§æ–‡å­—æ‹†åˆ†èƒŒæ™¯"><a href="#äºŒã€æŒ‰ç…§æ–‡å­—æ‹†åˆ†èƒŒæ™¯" class="headerlink" title="äºŒã€æŒ‰ç…§æ–‡å­—æ‹†åˆ†èƒŒæ™¯"></a>äºŒã€æŒ‰ç…§æ–‡å­—æ‹†åˆ†èƒŒæ™¯</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color-text</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(left, blue,</span><br><span class="line">        #66ffff 10%, #cc00ff 20%,</span><br><span class="line">        #CC00CC 30%, #CCCCFF 40%,</span><br><span class="line">        #00FFFF 50%, #CCCCFF 60%,</span><br><span class="line">        #CC00CC 70%, #CC00FF 80%,</span><br><span class="line">        #66FFFF 90%, blue 100%);</span><br><span class="line">    <span class="attribute">-webkit-background-clip</span>: text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶çš„æ•ˆæœæ˜¯ï¼š</p><p><img src="/2019/03/19/CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—/4.png" alt="æŒ‰ç…§æ–‡å­—æ‹†åˆ†èƒŒæ™¯"></p><p>å’¦ï¼Ÿè²Œä¼¼æ²¡ä»€ä¹ˆæ•ˆæœï¼Ÿå…¶å®ä»”ç»†çœ‹ä½ å¯ä»¥çœ‹åˆ°æ–‡å­—å·²ç»ä¸æ˜¯é»˜è®¤çš„é‚£ç§é»‘è‰²äº†ï¼Œå…¶å®å·²ç»ç”Ÿæ•ˆäº†ï¼Œåªæ˜¯å­—ä½“æœ¬èº«çš„é¢œè‰²æŠŠèƒŒæ™¯è‰²è¦†ç›–äº†ã€‚</p><h2 id="ä¸‰ã€å»æ‰æ–‡å­—æœ¬èº«çš„é¢œè‰²"><a href="#ä¸‰ã€å»æ‰æ–‡å­—æœ¬èº«çš„é¢œè‰²" class="headerlink" title="ä¸‰ã€å»æ‰æ–‡å­—æœ¬èº«çš„é¢œè‰²"></a>ä¸‰ã€å»æ‰æ–‡å­—æœ¬èº«çš„é¢œè‰²</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color-text</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(left, blue,</span><br><span class="line">        #66ffff 10%, #cc00ff 20%,</span><br><span class="line">        #CC00CC 30%, #CCCCFF 40%,</span><br><span class="line">        #00FFFF 50%, #CCCCFF 60%,</span><br><span class="line">        #CC00CC 70%, #CC00FF 80%,</span><br><span class="line">        #66FFFF 90%, blue 100%);</span><br><span class="line">    <span class="attribute">-webkit-background-clip</span>: text;</span><br><span class="line">    <span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å»æ‰å­—ä½“æœ¬èº«çš„é¢œè‰²CSS3è¿˜æœ‰ä¸€ç§æ–¹æ³•å«<code>text-fill-color</code>ä»–å¯ä»¥è®¾ç½®æ–‡å­—çš„å¡«å……è‰²ä¼˜å…ˆçº§æ¯”<code>color</code>é«˜ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥ä»£æ›¿<code>color: transparent;</code>ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-webkit-text-fill-color</span>: <span class="selector-tag">transparent</span>;</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶çš„æ•ˆæœæ˜¯:<br><img src="/2019/03/19/CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—/5.png" alt="å»æ‰æ–‡å­—æœ¬èº«çš„é¢œè‰²"></p><h2 id="å››ã€è®¾ç½®åŠ¨ç”»"><a href="#å››ã€è®¾ç½®åŠ¨ç”»" class="headerlink" title="å››ã€è®¾ç½®åŠ¨ç”»"></a>å››ã€è®¾ç½®åŠ¨ç”»</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color-text</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="comment">/* è®¾ç½®èƒŒæ™¯é€æ˜è‰² */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(left, blue,</span><br><span class="line">        #66ffff 10%, #cc00ff 20%,</span><br><span class="line">        #CC00CC 30%, #CCCCFF 40%,</span><br><span class="line">        #00FFFF 50%, #CCCCFF 60%,</span><br><span class="line">        #CC00CC 70%, #CC00FF 80%,</span><br><span class="line">        #66FFFF 90%, blue 100%);</span><br><span class="line">    <span class="comment">/* æ”¹å˜background-sizeæ˜¯ä¸ºäº†è®©åŠ¨ç”»åŠ¨èµ·æ¥ */</span></span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">200%</span> <span class="number">100%</span>;</span><br><span class="line">    <span class="comment">/* æŒ‰ç…§æ–‡å­—æ‹†åˆ†èƒŒæ™¯ */</span></span><br><span class="line">    <span class="attribute">-webkit-background-clip</span>: text;</span><br><span class="line">    <span class="comment">/* å°†å­—ä½“è®¾ç½®æˆé€æ˜è‰² */</span></span><br><span class="line">    <span class="attribute">-webkit-text-fill-color</span>: transparent;</span><br><span class="line">    <span class="comment">/* å¯ç”¨åŠ¨ç”» */</span></span><br><span class="line">    <span class="attribute">animation</span>: masked-animation <span class="number">4s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> masked-animation &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: -<span class="number">100%</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™æ ·è®¾ç½®æˆ‘ä»¬å°±å¤§åŠŸå‘Šæˆäº†!</p><h2 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h2><p>ä¸Šé¢ä½¿ç”¨åˆ°äº†<code>text-fill-color</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œçœ‹çœ‹å®ƒçš„<a href="https://caniuse.com/#search=text-fill-color" target="_blank" rel="noopener">å…¼å®¹æ€§</a>ã€‚å®ƒçš„ä¸€å¤§ç”¨é€”å°±æ˜¯ä¸Šé¢è¿™æ ·è®¾ç½®ç‚«é…·çš„å½©è‰²æ–‡å­—ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨é€”å°±æ˜¯è®¾ç½®é•‚ç©ºæ–‡å­—ï¼Œå¦‚ä¸‹ã€‚<br>HTMLï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hollow-out-text"</span>&gt;</span>é•‚ç©ºæ–‡å­—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>CSSï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hollow-out-text</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="comment">/*è®¾ç½®èƒŒæ™¯é€æ˜*/</span></span><br><span class="line">    <span class="attribute">-webkit-text-fill-color</span>: transparent;</span><br><span class="line">    <span class="comment">/*è®¾ç½®é•‚ç©ºçº¿æ¡*/</span></span><br><span class="line">    <span class="attribute">-webkit-text-stroke</span>: <span class="number">1px</span> <span class="number">#cc00ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ€ç»ˆæ•ˆæœï¼š</p><p><img src="/2019/03/19/CSS3å®ç°å½©è‰²ç‚«é…·æ–‡å­—/6.png" alt="é•‚ç©ºæ–‡å­—"></p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSSæ•ˆæœ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æ•°ç»„</title>
      <link href="/2019/03/17/%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%98%AF%E4%B8%8D%E6%98%AF%E6%95%B0%E7%BB%84/"/>
      <url>/2019/03/17/%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%98%AF%E4%B8%8D%E6%98%AF%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä½¿ç”¨<code>instanceof</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœè¿”å›trueé‚£ä¹ˆè¯´æ˜å°±æ˜¯æ•°ç»„</span></span><br><span class="line"><span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>Object.prototype.toString</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”±äºæ•°ç»„é‡å†™äº†toStringæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Object.prototype.toStringæ–¹æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯ä¸æ˜¯æ•°ç»„</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.toString.call(value) === <span class="string">"[object Array]"</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>value.constructor.name</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æµ‹æ„é€ å‡½æ•°çš„åç§°æ˜¯ä¸æ˜¯Array</span></span><br><span class="line"><span class="keyword">if</span> (value.constructor.name === <span class="string">"Array"</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ES5çš„<code>Array.isArray()</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5æ ‡å‡† ç®€å• å¥½ç”¨ ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸æ”¯æŒ</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value))&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ¤æ–­æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠJavaScriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/03/10/%E3%80%8AJavaScript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/03/10/%E3%80%8AJavaScript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>è€è§„çŸ©ï¼Œè¿™ç¯‡æ–‡ç« è®°å½•ä¹¦ä¸­çš„é‡ç‚¹éƒ¨åˆ†ï¼Œå¤–åŠ è‡ªå·±çš„è§è§£ï¼Œä¸ä¼šå¯¹å…¨ä¹¦è¿›è¡Œå¤è¿°ï¼Œä½†è®°å½•çš„ç»å¯¹æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œæƒ³è¦äº†è§£è·Ÿå¤šå†…å®¹è¯·çœ‹åŸç‰ˆå›¾ä¹¦ã€‚</p><p><img src="/2019/03/10/ã€ŠJavaScriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€ŠJavaScriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ã€‹"></p><hr><p>å‡½æ•°å¼ç¼–ç¨‹çš„ç›®æ ‡ï¼šä½¿ç”¨å‡½æ•°æ¥æŠ½è±¡ä½œç”¨åœ¨æ•°æ®ä¹‹ä¸Šçš„æ§åˆ¶æµä¸æ“ä½œï¼Œä»è€Œåœ¨ç³»ç»Ÿä¸­æ¶ˆé™¤å‰¯ä½œç”¨å¹¶å‡å°‘å¯¹çŠ¶æ€çš„æ”¹å˜ã€‚</p><p>çº¯å‡½æ•°æ‰€å…·æœ‰çš„æ€§è´¨ï¼š</p><blockquote><p>ä»…å–å†³äºæä¾›çš„è¾“å…¥ï¼Œè€Œä¸ä¾èµ–äºä»»ä½•åœ¨å‡½æ•°æ±‚å€¼æœŸé—´æˆ–è°ƒç”¨é—´éš”æ—¶å¯èƒ½å˜åŒ–çš„éšè—çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ã€‚<br>ä¸ä¼šé€ æˆæˆ–è¶…å‡ºå…¶ä½œç”¨åŸŸçš„å˜åŒ–ã€‚å¦‚ä¿®æ”¹å…¨å±€å˜é‡å¯¹è±¡æˆ–å¼•ç”¨ä¼ é€’çš„å‚æ•°ã€‚</p></blockquote><p>å¼•ç”¨é€æ˜ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°å¯¹äºç›¸åŒçš„è¾“å…¥å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„ç»“æœï¼Œé‚£ä¹ˆè¯´å®ƒæ˜¯å¼•ç”¨é€æ˜çš„ã€‚</p><p>å‡½æ•°å¼ç¼–ç¨‹æ˜¯æŒ‡ä¸ºåˆ›å»ºä¸å¯å˜çš„ç¨‹åºï¼Œé€šè¿‡æ¶ˆé™¤å¤–éƒ¨å¯è§çš„å‰¯ä½œç”¨ï¼Œæ¥å¯¹çº¯å‡½æ•°çš„å£°æ˜å¼çš„æ±‚å€¼è¿‡ç¨‹ã€‚</p><p>é«˜é˜¶å‡½æ•°ï¼šæŸäº›å‡½æ•°å¯ä»¥æ¥æ”¶å…¶å®ƒçš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ ·çš„å‡½æ•°ç§°ä¸ºé«˜é˜¶å‡½æ•°ã€‚</p><p>mapå‡½æ•°çš„ç®€å•å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> len = arr.length,</span><br><span class="line">            result = <span class="keyword">new</span> <span class="built_in">Array</span>(len);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> idx = <span class="number">0</span>; idx &lt; len; ++idx) &#123;</span><br><span class="line">        result[idx] = fn(arr[idx], idx, arr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>reduceå‡½æ•°çš„ç®€å•å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reduce</span>(<span class="params">arr, fn,accumulator</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="number">-1</span>,</span><br><span class="line">        len = arr.length;</span><br><span class="line">    <span class="keyword">if</span> (!accumulator &amp;&amp; len &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        accumulator = arr[++idx];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (++idx &lt; len) &#123;</span><br><span class="line">        accumulator = fn(accumulator,arr[idx], idx, arr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> accumulator;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>filterå‡½æ•°çš„ç®€å•å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params">arr, predicate</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="number">-1</span>,</span><br><span class="line">        len = arr.length,</span><br><span class="line">        result = [];</span><br><span class="line">    <span class="keyword">while</span> (++idx &lt; len) &#123;</span><br><span class="line">        <span class="keyword">let</span> value = arr[idx];</span><br><span class="line">        <span class="keyword">if</span> (predicate(value, idx, <span class="keyword">this</span>)) &#123;</span><br><span class="line">            result.push(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>lodashå¯¹è±¡å·²ç»å®šä¹‰äº†å¥½äº†å¾ˆå¤šå‡½æ•°ï¼Œåœ¨æœ¬ç« ä¸­_ä»£è¡¨lodashå¯¹è±¡ã€‚ä½¿ç”¨lodashçš„reduceå¯¹æ•°ç»„æ±‚å’Œï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_([<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]).reduce(_.add);  <span class="comment">//-&gt; 13</span></span><br></pre></td></tr></table></figure></p><p>å®æˆ˜ï¼šæ ¼å¼åŒ–åå­—<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">'alonzo church'</span>, <span class="string">'Haskell curry'</span>, <span class="string">'stephen_kleene'</span>,</span><br><span class="line">             <span class="string">'John Von Neumann'</span>, <span class="string">'stephen_kleene'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isValid = <span class="function"><span class="params">val</span> =&gt;</span> !_.isUndefined(val) &amp;&amp; !_.isNull(val);</span><br><span class="line"></span><br><span class="line">_.chain(names)</span><br><span class="line">    .filter(isValid)</span><br><span class="line">    .map(<span class="function"><span class="params">s</span> =&gt;</span> s.replace(<span class="regexp">/_/</span>, <span class="string">' '</span>))</span><br><span class="line">    .uniq()</span><br><span class="line">    .map(_.startCase)</span><br><span class="line">    .sort()</span><br><span class="line">    .value(); </span><br><span class="line"><span class="comment">//-&gt; ['Alonzo Church', 'Haskell Curry', 'Jon Von Neumann', 'Stephen Kleene']</span></span><br></pre></td></tr></table></figure></p><p><code>_.chain</code>å¯ä»¥æ·»åŠ ä¸€ä¸ªè¾“å…¥å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰çš„çŠ¶æ€ï¼Œä»è€Œèƒ½å°†è¿™äº›è¾“å…¥è½¬æ¢ä¸ºæ‰€éœ€è¾“å‡ºçš„æ“ä½œé“¾æ¥åœ¨ä¸€èµ·ã€‚<br><code>_.chain</code>çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥æƒ°æ€§è®¡ç®—ï¼Œåœ¨è°ƒç”¨<code>value()</code>å‰å¹¶ä¸ä¼šçœŸæ­£çš„æ‰§è¡Œä»»ä½•æ“ä½œã€‚<br>å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªlodashåŒ…è£…å¯¹è±¡ï¼Œè€Œä¸æ˜¯åŸç”Ÿçš„å¯¹è±¡ã€‚</p><p>åƒå†™SQLä¸€æ ·ç¼–ç¨‹<br>å‡å¦‚æœ‰SQLè¯­å¥ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> p.firstname <span class="keyword">FROM</span> Person p</span><br><span class="line"><span class="keyword">WHERE</span> p.birthYear &gt; <span class="number">1903</span> <span class="keyword">and</span> p.country <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="string">'US'</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> p.firstname</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨<code>_.mixin</code>å¯ä»¥ç»™lodashå¯¹è±¡æ·»åŠ æ–°çš„å‡½æ•°ï¼ˆè¿™é‡Œå…¶å®ç›¸å½“äºèµ·åˆ«åï¼‰ï¼Œå¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">_.mixin(&#123;<span class="string">'select'</span>:   _.map,</span><br><span class="line">         <span class="string">'from'</span>:     _.chain,</span><br><span class="line">         <span class="string">'where'</span>:    _.filter,</span><br><span class="line">         <span class="string">'sortBy'</span>:   _.sortByOrder&#125;);</span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆæŸ¥è¯¢è¯­å¥å°±å¯ä»¥ä¿®æ”¹ä¸ºï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_.from(persons)</span><br><span class="line">   .where(<span class="function"><span class="params">p</span> =&gt;</span> p.birthYear &gt; <span class="number">1903</span> &amp;&amp; p.address.country !== <span class="string">'US'</span>)</span><br><span class="line">   .sortBy([<span class="string">'firstname'</span>])</span><br><span class="line">   .select(<span class="function"><span class="params">p</span> =&gt;</span> p.firstname)</span><br><span class="line">   .value();</span><br></pre></td></tr></table></figure></p><p>é€’å½’æ±‚å’Œ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(_.isEmpty(arr)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> _.first(arr) + sum(_.rest(arr));<span class="comment">//_.firstè·å–çš„æ˜¯ç¬¬ä¸€ä¸ªå€¼ _.restæ˜¯å‰©ä¸‹çš„å€¼</span></span><br><span class="line">&#125;</span><br><span class="line">sum([]); <span class="comment">//-&gt; 0</span></span><br><span class="line">sum([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]); <span class="comment">//-&gt;45</span></span><br></pre></td></tr></table></figure></p><p>å°¾é€’å½’çš„é€’å½’æ±‚å’Œ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">arr, acc = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(_.isEmpty(arr)) &#123; </span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> sum(_.rest(arr), acc + _.first(arr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å…ƒæ•°ï¼šå‡½æ•°æ‰€æ¥å—çš„å‚æ•°æ•°é‡ï¼Œä¹Ÿè¢«ç§°ä¸ºå‡½æ•°çš„é•¿åº¦ã€‚</p><p>æŸ¯é‡ŒåŒ–ï¼šæŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§åœ¨æ‰€æœ‰å‚æ•°è¢«æä¾›ä¹‹å‰ï¼ŒæŒ‚èµ·æˆ–â€œå»¶è¿Ÿâ€å‡½æ•°æ‰§è¡Œï¼Œå°†å¤šä¸ªå‚æ•°è½¬åŒ–ä¸ºä¸€å…ƒå‡½æ•°åºåˆ—çš„æŠ€æœ¯ã€‚<br>å¦‚ä¸€ä¸ªä¸‰ä¸ªå‚æ•°çš„æŸ¯é‡ŒåŒ–å‡½æ•°å®šä¹‰ï¼š<code>curry(f) :: ((a,b,c) -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; d</code>ã€‚</p><p>ä¸€ä¸ªäºŒå…ƒæŸ¯é‡ŒåŒ–çš„å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry2</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">firstArg</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">secondArg</span>) </span>&#123;</span><br><span class="line">              <span class="keyword">return</span> fn(firstArg, secondArg);</span><br><span class="line">          &#125;;</span><br><span class="line">     &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> curry2AddFn = curry2(add);</span><br><span class="line">curry2AddFn(<span class="number">1</span>)(<span class="number">2</span>);<span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><p>å¤šå…ƒæŸ¯é‡ŒåŒ–å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> length = fn.length</span><br><span class="line">    <span class="keyword">let</span> lists = args || []</span><br><span class="line">    <span class="keyword">let</span> listLen</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">..._args</span>) </span>&#123;</span><br><span class="line">        lists = [...lists, ..._args]</span><br><span class="line">        listLen = lists.length</span><br><span class="line">        <span class="keyword">if</span> (listLen &lt; length) &#123;</span><br><span class="line">            <span class="keyword">const</span> that = lists</span><br><span class="line">            lists = []</span><br><span class="line">            <span class="keyword">return</span> curry(fn, ...that)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (listLen === length) &#123;</span><br><span class="line">            <span class="keyword">const</span> that = lists</span><br><span class="line">            lists = []</span><br><span class="line">            <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, that)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åº”ç”¨éƒ¨åˆ†ï¼šåº”ç”¨éƒ¨åˆ†æ˜¯ä¸€ç§é€šè¿‡å°†å‡½æ•°çš„ä¸å¯å˜å‚æ•°è‡ªå·±åˆå§‹åŒ–ä¸ºå›ºå®šå€¼æ¥åˆ›å»ºæ›´å°å…ƒæ•°å‡½æ•°çš„æ“ä½œã€‚å°±æ¯”å¦‚ä¸€ä¸ª5ä¸ªå‚æ•°çš„å‡½æ•°æˆ‘ä»¬é€šè¿‡åº”ç”¨éƒ¨åˆ†å¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ªç»™å®šäº†2ä¸ªç‰¹å®šå‚æ•°çš„å‡½æ•°ï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ—¶å€™åªè¦ç»™å¦å¤–ä¸‰ä¸ªå°±è¡Œäº†ã€‚</p><p>åº”ç”¨éƒ¨åˆ†çš„å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">partial</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> fn = <span class="keyword">this</span>, boundArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">let</span> placeholder = &lt;&lt;partialPlaceholderObj&gt;&gt;;// &lt;&lt;partialPlaceholderObj&gt;&gt; æ˜¯ä¸€ä¸ªå ä½ç¬¦ é€šå¸¸ç”¨undefined lodashä½¿ç”¨çš„æ˜¯_   </span><br><span class="line">    let bound = function() &#123;</span><br><span class="line">        let position = 0, length = args.length;</span><br><span class="line">        let args = Array(length);</span><br><span class="line">        for (let i = 0; i &lt; length; i++) &#123;</span><br><span class="line">            args[i] = boundArgs[i] === placeholder</span><br><span class="line">                ? arguments[position++] : boundArgs[i];</span><br><span class="line">        &#125;</span><br><span class="line">        while (position &lt; arguments.length) &#123;</span><br><span class="line">            args.push(arguments[position++]);</span><br><span class="line">        &#125;</span><br><span class="line">        return fn.apply(this, args);</span><br><span class="line">    &#125;;</span><br><span class="line">    return bound;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å®æˆ˜1ï¼šä½¿ç”¨lodashçš„åº”ç”¨éƒ¨åˆ†å¯¹æ ¸å¿ƒè¯­è¨€æ‰©å±•ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„lodashä¸­çš„å ä½ç¬¦æ˜¯_ï¼Œä¹Ÿå°±æ˜¯_.partialå‚æ•°ä¸­çš„_ä¼šåœ¨è°ƒç”¨æ—¶æ›¿æ¢ä¸ºè°ƒç”¨æ—¶çš„å‚æ•°</span></span><br><span class="line"><span class="comment">// è·å–å­—ç¬¦ä¸²å‰å‡ ä¸ªå­ä¸²</span></span><br><span class="line"><span class="built_in">String</span>.prototype.first = _.partial(<span class="built_in">String</span>.prototype.substring, <span class="number">0</span>, _);</span><br><span class="line"><span class="string">'Functional Programming'</span>.first(<span class="number">3</span>); <span class="comment">// -&gt; 'Fun'</span></span><br><span class="line"><span class="comment">// å°†åå­—è½¬åŒ–ä¸º[Last, First]æ ¼å¼</span></span><br><span class="line"><span class="built_in">String</span>.prototype.asName = </span><br><span class="line">    _.partial(<span class="built_in">String</span>.prototype.replace, /(\w+)\s(\w+)/, <span class="string">'$2, $1'</span>);</span><br><span class="line"><span class="string">'Alonzo Church'</span>.asName(); <span class="comment">//-&gt;  'Church, Alonzo'</span></span><br><span class="line"><span class="comment">// å®ç°ç±»ä¼¼äºsplitçš„æ•ˆæœ</span></span><br><span class="line"><span class="built_in">String</span>.prototype.explode = </span><br><span class="line">   _.partial(<span class="built_in">String</span>.prototype.match, /[\w]/gi);</span><br><span class="line"><span class="string">'ABC'</span>.explode(); <span class="comment">//-&gt;  ['A', 'B', 'C']</span></span><br><span class="line"><span class="comment">// è§£æURL </span></span><br><span class="line"><span class="built_in">String</span>.prototype.parseUrl = _.partial(<span class="built_in">String</span>.prototype.match,</span><br><span class="line">/(http[s]?|ftp):\/\/([^:\/\s]+)\.([^:\/\s]&#123;<span class="number">2</span>,<span class="number">5</span>&#125;)/); </span><br><span class="line"><span class="string">'http://example.com'</span>.parseUrl(); <span class="comment">// -&gt; [ 'http://example.com', 'http', 'example', 'com' ]</span></span><br></pre></td></tr></table></figure></p><p>å®æˆ˜2ï¼šç”Ÿæˆç‰¹å®šç§’æ•°çš„å»¶è¿Ÿå‡½æ•°ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Scheduler = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// lodashä¸­_ä¹Ÿå¯ç”¨äº_.bindä¸­ è¡¨ç¤ºå ä½ç¬¦ </span></span><br><span class="line">    <span class="comment">// _.bindçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ç»‘å®šçš„å‡½æ•° ç¬¬äºŒä¸ªå‡½æ•°æ˜¯å®¿ä¸»å¯¹è±¡ ä¹‹åçš„å‚æ•°æ˜¯ç»‘å®šå‡½æ•°çš„å‚æ•° </span></span><br><span class="line">    <span class="comment">// ä¸‹ä¾‹ä¸­ä¸¤ä¸ªå ä½ç¬¦ç›¸å½“äºéƒ½æ˜¯setTimeoutå‡½æ•°çš„å‚æ•° ä»–çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•° ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¯«ç§’æ•°</span></span><br><span class="line">    <span class="keyword">const</span> delayedFn = _.bind(setTimeout, <span class="literal">undefined</span>, _, _);</span><br><span class="line">    <span class="comment">// ä¸‹é¢ç›¸å½“äºæŠŠsetTimeoutç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨è°ƒç”¨çš„å‡½æ•° ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿå°±æ˜¯æ—¶é—´ç»™5000 10000 æˆ–è€… è‡ªå·±ä¼ è¿›å»</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      delay5:  _.partial(delayedFn, _, <span class="number">5000</span>),</span><br><span class="line">      delay10: _.partial(delayedFn, _, <span class="number">10000</span>),</span><br><span class="line">      delay:   _.partial(delayedFn, _, _)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">Scheduler.delay5(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   consoleLog(<span class="string">'Executing After 5 seconds!'</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å‡½æ•°ç»„åˆï¼šå‡½æ•°ç»„åˆæ˜¯ä¸€ç§å°†å·²è¢«åˆ†å‰²çš„ç®€å•ä»»åŠ¡ç»„ç»‡æˆå¤æ‚è¡Œä¸ºçš„æ•´ä½“è¿‡ç¨‹ã€‚<br>å®šä¹‰å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">g :: A -&gt; B <span class="comment">//å‡½æ•°gè¾“å…¥Aè¿”å›B</span></span><br><span class="line">f :: B -&gt; C <span class="comment">//å‡½æ•°fè¾“å…¥Bè¿”å›C</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é‚£ä¹ˆfå’Œgçš„ç»„åˆ å¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°è¾“å…¥få’Œg ç”Ÿæˆä¸€ä¸ªå¯ä»¥è¾“å…¥A ç›´æ¥å˜æˆCçš„å‡½æ•°</span></span><br><span class="line">f â— g = f(g) = compose :: ((B -&gt; C), (A -&gt; B)) -&gt; (A -&gt; C)</span><br></pre></td></tr></table></figure></p><p>ç»„åˆçš„å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params"><span class="regexp">/* fns */</span></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">   <span class="keyword">let</span> start = args.length - <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> i = start;</span><br><span class="line">      <span class="keyword">let</span> result = args[start].apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      <span class="keyword">while</span> (i--)</span><br><span class="line">          result = args[i].call(<span class="keyword">this</span>, result);</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">   &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>identityï¼ˆI-ç»„åˆå­ï¼‰ï¼šè¿”å›å’Œå‚æ•°ç›¸åŒçš„ç»„åˆå­ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// identity :: (a) -&gt; a</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼šè¿™é‡Œçš„ç»„åˆå­åªå†™äº†å•çº¯çš„ä¸€å±‚çš„å®ç°ï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™éƒ½æ˜¯æŸ¯é‡ŒåŒ–åçš„ç»“æœã€‚å°±æ¯”å¦‚identityç»„åˆå­å…¶å®æ˜¯<code>R.curry(identity)</code>ï¼ŒæŸ¯é‡ŒåŒ–åçš„ç»„åˆå­æ“ä½œèµ·æ¥æ›´æ–¹ä¾¿ã€‚</p><p>tapï¼ˆK-ç»„åˆå­ï¼‰ï¼šå°†æ²¡æœ‰å‡½æ•°è¿”å›å€¼çš„å‡½æ•°è¿”å›è¾“å…¥å€¼ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tap :: (a -&gt; *) -&gt; a -&gt; a</span></span><br><span class="line"><span class="keyword">var</span> tap = <span class="function"><span class="keyword">function</span> <span class="title">tap</span>(<span class="params">fn, x</span>) </span>&#123;</span><br><span class="line">  fn(x);</span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>altï¼ˆOR-ç»„åˆå­ï¼‰ï¼šå¦‚æœç¬¬ä¸€ä¸ªå‡½æ•°è¿”å›æœ‰å€¼ï¼Œé‚£ä¹ˆå°±è¿”å›ç¬¬ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼å¦åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„è¿”å›å€¼ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> alt = <span class="function"><span class="keyword">function</span> (<span class="params">func1, func2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> func1(val) || func2(val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨Ramdaçš„å®ç°</span></span><br><span class="line"><span class="keyword">const</span> alt = <span class="function">(<span class="params">func1, func2, val</span>) =&gt;</span> func1(val) || func2(val);</span><br></pre></td></tr></table></figure></p><p>seqï¼ˆS-ç»„åˆå­ï¼‰ï¼šä¸¤ä¸ªæˆ–è€…å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä¼šç”¨ç›¸åŒçš„å€¼é¡ºåºè°ƒç”¨æ‰€æœ‰çš„è¿™äº›å‡½æ•°ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> seq = <span class="function"><span class="keyword">function</span>(<span class="params"><span class="regexp">/*funcs*/</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> funcs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">       funcs.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">          fn(val);</span><br><span class="line">       &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>forkï¼ˆjoin-ç»„åˆå­ï¼‰ï¼šéœ€è¦ä¸‰ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå³ä»¥ä¸€ä¸ªjoinå‡½æ•°å°†ä¸¤ä¸ªforkå‡½æ•°çš„å¤„ç†ç»“æœå†æ¬¡è¿›è¡Œå¤„ç†ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fork = <span class="function"><span class="keyword">function</span>(<span class="params">join, func1, func2</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> join(func1(val), func2(val));</span><br><span class="line">   &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>å‡½æ•°å¼ç¼–ç¨‹ç©ºå€¼çš„å¤„ç†ï¼šFunctorå’ŒMonadã€‚<br>å‡½æ•°å¼ç¼–ç¨‹å¯¹ç©ºå€¼çš„å¤„ç†é€šå¸¸ä¸æ˜¯ç”¨<code>try-catch</code>å’Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºæ¥å¤„ç†ï¼Œå®ƒçš„å¤„ç†æ–¹å¼é€šå¸¸æ˜¯åœ¨å¤–é¢åŒ…ä¸€å±‚æ•°æ®ç»“æ„ã€‚ç±»ä¼¼ä¸jQueryå¤„ç†DOMå…ƒç´ ä¸€æ ·ï¼Œä¼šåŒ…è£…ä¸€å±‚jQueryå¯¹è±¡ï¼Œè¿™æ ·å¦‚æœæ²¡æœ‰æ‰¾åˆ°DOMå…ƒç´ å¤„ç†èµ·æ¥ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</p><p>Functorï¼ˆå‡½å­ï¼‰æ˜¯ä¸€ä¸ªå¯ä»¥å°†å‡½æ•°åº”ç”¨åˆ°å®ƒåŒ…è£¹çš„å€¼ä¸Šï¼Œå¹¶å°†ç»“æœå†åŒ…è£¹èµ·æ¥çš„æ•°æ®ç»“æ„ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">constructor</span>(value) &#123;</span><br><span class="line">        <span class="keyword">this</span>._value = value; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// map :: (A -&gt; B) -&gt; A -&gt; B </span></span><br><span class="line">    map(f) &#123; </span><br><span class="line">        <span class="keyword">return</span> f(<span class="keyword">this</span>._value);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Wrapper ('</span> + <span class="keyword">this</span>._value + <span class="string">')'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// wrap :: A -&gt; Wrapper(A)</span></span><br><span class="line"><span class="keyword">const</span> wrap = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="keyword">new</span> Wrapper(val);</span><br><span class="line"></span><br><span class="line"><span class="comment">// fmap :: (A -&gt; B) -&gt; Wrapper[A] -&gt; Wrapper[B] </span></span><br><span class="line"><span class="comment">// è¿™ä¸ªåœ°æ–¹å…¶å®å°±æ˜¯Functor</span></span><br><span class="line">Wrapper.prototype.fmap = <span class="function"><span class="keyword">function</span> (<span class="params">f</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> wrap(f(<span class="keyword">this</span>._value));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrappedValue = wrap(<span class="string">'Get Functional'</span>);<span class="comment">//å°†å­—ç¬¦ä¸²åŒ…è£¹èµ·æ¥</span></span><br><span class="line"><span class="comment">// è¿˜è®°å¾—å‰é¢è¯´çš„ç»„åˆå­identityå— å°±æ˜¯è¿™ä¹ˆä½¿ç”¨çš„ è¿™é‡Œå¯ä»¥è·å–åˆ°è¢«åŒ…è£…çš„å†…å®¹ </span></span><br><span class="line">wrappedValue.map(R.identity); <span class="comment">// 'Get Functional'</span></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥åšå…¶ä»–å¤„ç†</span></span><br><span class="line">wrappedValue.map(<span class="built_in">console</span>.log); </span><br><span class="line">wrappedValue.map(R.toUpper); <span class="comment">//-&gt; 'GET FUNCTIONAL'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨fmap</span></span><br><span class="line"><span class="keyword">const</span> plus = R.curry(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b);</span><br><span class="line"><span class="keyword">const</span> plus3 = plus(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">const</span> two = wrap(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> five = two.fmap(plus3); <span class="comment">//-&gt; Wrapper(5)</span></span><br><span class="line">five.map(R.identity); <span class="comment">//-&gt; 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> plus10 = plus(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">const</span> fifteen = two.fmap(plus3).fmap(plus10); <span class="comment">//-&gt; Wrapper(15)</span></span><br><span class="line">fifteen.map(R.identity);<span class="comment">//-&gt; 15</span></span><br></pre></td></tr></table></figure></p><p>Functorçš„å±€é™æ€§ï¼šä½¿ç”¨composeç»„åˆåŒ…è£…å‡½æ•°åä¼šæœ‰å¤šå±‚åŒ…è£…ç»“æ„ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å¤šä¸ª<code>.map(R.identity)</code>æ¥æŠ½å‡ºç»“æœï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚å¯ä»¥ä½¿ç”¨Monadæ¥å¤„ç†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(value) &#123;  </span><br><span class="line">        <span class="keyword">this</span>._value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wrapper.ofå…¶å®å°±æ˜¯åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">of</span>(a) &#123;  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Wrapper(a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    map(f) &#123;  </span><br><span class="line">        <span class="keyword">return</span> Wrapper.of(f(<span class="keyword">this</span>._value));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€’å½’æŠ½ç¦»å€¼</span></span><br><span class="line">    join() &#123;  </span><br><span class="line">        <span class="keyword">if</span>(!(<span class="keyword">this</span>._value <span class="keyword">instanceof</span> Wrapper)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value.join();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    get() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    toString() &#123;  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Wrapper (<span class="subst">$&#123;<span class="keyword">this</span>._value&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç®€å•ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">var</span> msg = Wrapper.of(<span class="string">'Hello Monads!'</span>)</span><br><span class="line">   .map(R.toUpper)</span><br><span class="line">   .map(R.identity); <span class="comment">//-&gt; Wrapper('HELLO MONADS!')</span></span><br><span class="line"><span class="comment">// æ— è®ºå¤šå°‘å±‚åªè¦è°ƒç”¨.joinå°±ä¼šè¿”å›æœ€åä¸€å±‚</span></span><br><span class="line">msg.join();<span class="comment">//-&gt; Wrapper('HELLO MONADS!')</span></span><br><span class="line">msg.join().get();<span class="comment">//-&gt; 'HELLO MONADS!'</span></span><br></pre></td></tr></table></figure><p>Maybe Monadç”¨æ¥å¤„ç†æ˜¯å¦ä¸ºç©ºçš„åˆ¤æ–­é€»è¾‘ã€‚å®ƒæœ‰2ä¸ªå…·ä½“çš„ç±»å‹ï¼šJustå’ŒNothingã€‚</p><blockquote><p>Just(value)è¡¨ç¤ºæœ‰å€¼æ—¶çš„å®¹å™¨ã€‚<br>Nothing()è¡¨ç¤ºæ²¡æœ‰å€¼æ—¶çš„å®¹å™¨ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maybe</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> just(a) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Just(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> nothing() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Nothing();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> fromNullable(a) &#123;</span><br><span class="line">        <span class="keyword">return</span> a !== <span class="literal">null</span> ? Maybe.just(a) : Maybe.nothing();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">of</span>(a) &#123;</span><br><span class="line">        <span class="keyword">return</span> just(a);</span><br><span class="line">    &#125;</span><br><span class="line">    get isNothing() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">    get isJust() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Just</span> <span class="keyword">extends</span> <span class="title">Maybe</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">constructor</span>(value) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>._value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    get value() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    map(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> Maybe.fromNullable(f(<span class="keyword">this</span>._value));  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getOrElse() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value;  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    filter(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> Maybe.fromNullable(f(<span class="keyword">this</span>._value) ? <span class="keyword">this</span>._value : <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    chain(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> f(<span class="keyword">this</span>._value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    toString () &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Maybe.Just(<span class="subst">$&#123;<span class="keyword">this</span>._value&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Nothing</span> <span class="keyword">extends</span> <span class="title">Maybe</span> </span>&#123;</span><br><span class="line">    map(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    get value() &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Can't extract the value of a Nothing."</span>);  </span><br><span class="line">    &#125; </span><br><span class="line">    getOrElse(other) &#123;</span><br><span class="line">        <span class="keyword">return</span> other;</span><br><span class="line">    &#125;  </span><br><span class="line">    filter(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value;  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    chain(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    get isNothing() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    toString() &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Maybe.Nothing'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//çœ‹å®Œä¸Šé¢ä¼°è®¡ä½ ä¹Ÿæ‡µäº† çœ‹ä¸€ä¸‹ä½¿ç”¨ä½ å°±ä¼šç¬é—´æ˜ç™½</span></span><br><span class="line">Maybe.fromNullable(<span class="string">"abc"</span>).map(<span class="function"><span class="params">r</span> =&gt;</span> r.toUpperCase()).getOrElse(<span class="string">"ä¸èƒ½ä¸ºç©º"</span>);<span class="comment">//-&gt; "ABC"</span></span><br><span class="line">Maybe.fromNullable(<span class="literal">null</span>).map(<span class="function"><span class="params">r</span> =&gt;</span> r.toUpperCase()).getOrElse(<span class="string">"ä¸èƒ½ä¸ºç©º"</span>);<span class="comment">//-&gt; "ä¸èƒ½ä¸ºç©º"</span></span><br></pre></td></tr></table></figure><p>Either Monadç”¨æ¥æˆ–çš„åˆ¤æ–­é€»ã€‚å®ƒä¹Ÿæœ‰2ä¸ªå…·ä½“çš„ç±»å‹ï¼šLeftå’ŒRightã€‚</p><blockquote><p>Left(a)åŒ…å«ä¸€ä¸ªå¯èƒ½çš„é”™è¯¯æ¶ˆæ¯æˆ–æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ã€‚<br>Right(b)åŒ…å«ä¸€ä¸ªæˆåŠŸå€¼ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Either</span> </span>&#123; </span><br><span class="line">    <span class="keyword">constructor</span>(value) &#123;</span><br><span class="line">        <span class="keyword">this</span>._value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    get value() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> left(a) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Left(a); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> right(a) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Right(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> fromNullable(val) &#123; </span><br><span class="line">        <span class="keyword">return</span> val !== <span class="literal">null</span> &amp;&amp; val !== <span class="literal">undefined</span> ? Either.right(val) : Either.left(val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">of</span>(a) &#123;  </span><br><span class="line">        <span class="keyword">return</span> Either.right(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Left</span> <span class="keyword">extends</span> <span class="title">Either</span> </span>&#123;</span><br><span class="line">    map(_) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">// noop</span></span><br><span class="line">    &#125;</span><br><span class="line">    get value() &#123;  </span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Can't extract the value of a Left(a)."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æå–rightçš„å€¼</span></span><br><span class="line">    getOrElse(other) &#123; </span><br><span class="line">        <span class="keyword">return</span> other;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹leftæ“ä½œ ä¸å¯¹rightæ“ä½œ</span></span><br><span class="line">    orElse(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> f(<span class="keyword">this</span>._value);  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    chain(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    getOrElseThrow(a) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(a);</span><br><span class="line">    &#125; </span><br><span class="line">    filter(f) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Either.Left(<span class="subst">$&#123;<span class="keyword">this</span>._value&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Right</span> <span class="keyword">extends</span> <span class="title">Either</span> </span>&#123;</span><br><span class="line">    map(f) &#123;   </span><br><span class="line">        <span class="keyword">return</span> Either.of(f(<span class="keyword">this</span>._value));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æå–rightçš„å€¼</span></span><br><span class="line">    getOrElse(other) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value;  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹leftæ“ä½œ ä¸å¯¹rightæ“ä½œ</span></span><br><span class="line">    orElse() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    chain(f) &#123;   </span><br><span class="line">        <span class="keyword">return</span> f(<span class="keyword">this</span>._value);</span><br><span class="line">    &#125;</span><br><span class="line">    getOrElseThrow() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    filter(f) &#123;   </span><br><span class="line">        <span class="keyword">return</span> Either.fromNullable(f(<span class="keyword">this</span>._value) ? <span class="keyword">this</span>._value : <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Either.Right(<span class="subst">$&#123;<span class="keyword">this</span>._value&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çœ‹ä¸æ‡‚å§ é‚£å°±å†çœ‹ä¸€ä¸ªä¾‹å­ï¼Œç»™ä¸€ä¸ªæ•°å­—å–ç»å¯¹å€¼ï¼Œå¦‚æœå°äº0é‚£ä¹ˆè¿”å›å®ƒçš„ç›¸åæ•° å¦åˆ™è¿”å›è¿™ä¸ªæ•°å­—ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLT0</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(num &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> Either.of(num);<span class="comment">// ofå…¶å®å°±æ˜¯right</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Either.left(<span class="string">"å°äº0"</span>);<span class="comment">// leftè¯´æ˜æ˜¯å°äº0çš„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// rightçš„è¯ ä¸ä¼šæ‰§è¡ŒorElseé‡Œé¢çš„å‡½æ•°</span></span><br><span class="line">isLT0(<span class="number">1</span>).orElse(<span class="function"><span class="params">val</span>=&gt;</span>Either.of(-val)).value;<span class="comment">// 1</span></span><br><span class="line">isLT0(<span class="number">-1</span>).orElse(<span class="function"><span class="params">val</span>=&gt;</span>Either.of(-val)).value;<span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>IO Monadç”¨æ¥å¤„ç†ä¸çº¯çš„å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IO</span> </span>&#123;</span><br><span class="line">   <span class="keyword">constructor</span>(effect) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!_.isFunction(effect)) &#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="string">'IO Usage: function required'</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.effect = effect;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">of</span>(a) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> IO( <span class="function"><span class="params">()</span> =&gt;</span> a ); </span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">from</span>(fn) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> IO(fn);   </span><br><span class="line">   &#125; </span><br><span class="line">   map(fn) &#123;</span><br><span class="line">      <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> IO(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fn(self.effect());</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">   chain(fn) &#123; </span><br><span class="line">        <span class="keyword">return</span> fn(<span class="keyword">this</span>.effect());</span><br><span class="line">   &#125;</span><br><span class="line">   run() &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.effect();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ—¶ä½ ç‰¹åˆ«æ‡µé€¼ åŒæ ·æ¥ä¸€ä¸ªä¾‹å­</span></span><br><span class="line"><span class="comment">// readå’Œwriteæ˜¯ä¸çº¯çš„å‡½æ•° æ“ä½œDOMäº† æœ‰å‰¯ä½œç”¨</span></span><br><span class="line"><span class="keyword">const</span> read = <span class="function"><span class="keyword">function</span> (<span class="params">document, id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">`\#<span class="subst">$&#123;id&#125;</span>`</span>).innerHTML;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> write = <span class="function"><span class="keyword">function</span>(<span class="params">document, id</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">`\#<span class="subst">$&#123;id&#125;</span>`</span>).innerHTML = val;</span><br><span class="line">   &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜è®°å¾—ä¹‹å‰çš„åº”ç”¨éƒ¨åˆ†å—</span></span><br><span class="line"><span class="keyword">const</span> readDom = _.partial(read, <span class="built_in">document</span>);</span><br><span class="line"><span class="keyword">const</span> writeDom = _.partial(write, <span class="built_in">document</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨åŠ å…¥æœ‰DOMç»“æ„ï¼š&lt;div id="student-name"&gt;alonzo church&lt;/div&gt;</span></span><br><span class="line"><span class="keyword">const</span> changeToStartCase = </span><br><span class="line">    IO.from(readDom(<span class="string">'student-name'</span>)).</span><br><span class="line">           map(_.startCase).</span><br><span class="line">           map(writeDom(<span class="string">'student-name'</span>));</span><br><span class="line"><span class="comment">//æœ€åæ‰§è¡Œä¸çº¯çš„å‡½æ•° è°ƒç”¨åDOMç»“æ„å˜æˆäº†ï¼š&lt;div id="student-name"&gt;Alonzo Church&lt;/div&gt;</span></span><br><span class="line">changeToStartCase.run();</span><br></pre></td></tr></table></figure><p>è®°å¿†åŒ–ï¼ˆmemoizationï¼‰ï¼šå°†å‡½æ•°çš„è®¡ç®—ç»“æœä¿å­˜èµ·æ¥ï¼Œå¦‚æœä¸‹æ¬¡ä¼ å…¥ç›¸åŒçš„å‚æ•°é‚£ä¹ˆå°±ç›´æ¥è¿”å›ç»“æœã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.memoized = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">// è®°å¿†åŒ–å‡½æ•°</span></span><br><span class="line">    <span class="keyword">let</span> key = <span class="built_in">JSON</span>.stringify(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">this</span>._cache = <span class="keyword">this</span>._cache || &#123;&#125;;</span><br><span class="line">    <span class="keyword">this</span>._cache[key] = <span class="keyword">this</span>._cache[key] || </span><br><span class="line">            <span class="keyword">this</span>.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._cache[key];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Function</span>.prototype.memoize = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">// æ¿€æ´»è®°å¿†åŒ–</span></span><br><span class="line">    <span class="keyword">let</span> fn = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (fn.length !== <span class="number">1</span>)&#123; <span class="comment">//å‡è®¾è¿™é‡Œåªè®°å¿†åŒ–ä¸€å…ƒå‡½æ•° å¦‚æœå¤šå…ƒå‡½æ•°ä¼šæœ‰å¦‚ä½•åšå‘¢ ä½ å¯ä»¥è€ƒè™‘ä¸€ä¸‹</span></span><br><span class="line">        <span class="keyword">return</span> fn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> fn.memoized.apply(fn, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨è®°å¿†åŒ–ï¼š</span></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªæ–æ³¢æ‹‰å¥‘å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> factorial = <span class="function">(<span class="params">(n</span>) =&gt;</span> (n === <span class="number">0</span>) ? <span class="number">1</span> </span><br><span class="line">         : (n * factorial(n - <span class="number">1</span>)));</span><br><span class="line"></span><br><span class="line">factorial = factorial.memoize();<span class="comment">//æ¿€æ´»è®°å¿†åŒ–</span></span><br><span class="line">factorial(<span class="number">10</span>);<span class="comment">//é¦–æ¬¡ä¼šè®¡ç®—</span></span><br><span class="line">factorial(<span class="number">10</span>);<span class="comment">//ç¬¬äºŒæ¬¡ç›´æ¥ä½¿ç”¨è®¡ç®—åçš„å€¼</span></span><br></pre></td></tr></table></figure></p><p>ä¸Šè¿°æ–æ³¢æ‹‰å¥‘å‡½æ•°ä½¿ç”¨äº†é€’å½’ä¼šæœ‰è¾ƒé«˜çš„ç©ºé—´ä½¿ç”¨ç‡å¯ä»¥ä½¿ç”¨å°¾é€’å½’æ¥ä¼˜åŒ–ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> factorial = <span class="function">(<span class="params">n, current = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">    (n === <span class="number">1</span>) ? current :</span><br><span class="line">    factorial(n - <span class="number">1</span>, n * current);</span><br></pre></td></tr></table></figure></p><p>æœ€åæˆ‘ä»¬ç®€å•çš„ç”¨Promiseå°è£…ä¸€ä¸‹AJAXä½œä¸ºæœ¬ç¯‡æ–‡ç« çš„ç»“æŸï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getJSON = <span class="function"><span class="keyword">function</span> (<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> req = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">        req.responseType = <span class="string">'json'</span>;</span><br><span class="line">        req.open(<span class="string">'GET'</span>, url);</span><br><span class="line">        req.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(req.status == <span class="number">200</span>) &#123;</span><br><span class="line">               <span class="keyword">let</span> data = <span class="built_in">JSON</span>.parse(req.responseText);</span><br><span class="line">               resolve(data);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">               reject(<span class="keyword">new</span> <span class="built_in">Error</span>(req.statusText));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        req.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="keyword">if</span>(reject) &#123;</span><br><span class="line">              reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'IO Error'</span>));</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        req.send();</span><br><span class="line">    &#125;);     </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line">getJSON(<span class="string">'/students'</span>).then(</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">students</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(R.map(<span class="function"><span class="params">student</span> =&gt;</span> student.name, students));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error.message);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> å‡½æ•°å¼ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/03/10/%E3%80%8AJavaScript%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/03/10/%E3%80%8AJavaScript%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>è¿™æœ¬ä¹¦è®©æˆ‘å›é¡¾äº†ä¸€éå¤§å­¦æ—¶å€™å­¦çš„æ•°æ®ç»“æ„ã€‚æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯ç¨‹åºå‘˜æœ€å–œæ¬¢ä¹Ÿæ˜¯æœ€ç—›è‹¦çš„éƒ¨åˆ†ï¼Œè¿™æœ¬ä¹¦å¾ˆè½»æ¾çš„æè¿°äº†è¿™éƒ¨åˆ†ä¸œè¥¿ï¼Œæ˜¯ä¸€æœ¬å¾ˆä¸é”™çš„ä¹¦ã€‚è¿™ç¯‡æ–‡ç« è®°å½•ä¹¦ä¸­çš„é‡ç‚¹éƒ¨åˆ†ï¼Œå¹¶ä¸ä¼šå¯¹ä¹¦ä¸­æ‰€æœ‰çš„å†…å®¹éƒ½å¤è¿°ä¸€éï¼Œå¦‚æœå¸Œæœ›äº†è§£æ›´å¤šçš„å†…å®¹å¯ä»¥å»çœ‹çœ‹è¿™æœ¬ä¹¦ã€‚ç”±äºES5å’ŒES6æ€æƒ³åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„ï¼Œè¿™é‡Œåªè®°å½•ES6çš„å®ç°ã€‚</p><p><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹"></p><hr><p><strong>1. æ ˆ</strong></p><p>æ ˆæ˜¯ä¸€ç§éµä»åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰åŸåˆ™çš„æœ‰åºé›†åˆã€‚<br>æ–°æ·»åŠ çš„æˆ–å¾…åˆ é™¤çš„å…ƒç´ éƒ½ä¿å­˜åœ¨æ ˆçš„åŒä¸€ç«¯ï¼Œç§°ä½œæ ˆé¡¶ï¼Œå¦ä¸€ç«¯å°±å«æ ˆåº•ã€‚åœ¨æ ˆé‡Œï¼Œæ–°å…ƒç´ éƒ½é è¿‘æ ˆé¡¶ï¼Œæ—§å…ƒç´ éƒ½æ¥è¿‘æ ˆåº•ã€‚</p><p>æ ˆçš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Stack = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Stack</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">constructor</span> () &#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, []);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        push(element)&#123;</span><br><span class="line">            <span class="keyword">let</span> s = items.get(<span class="keyword">this</span>);</span><br><span class="line">            s.push(element);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pop()&#123;</span><br><span class="line">            <span class="keyword">let</span> s = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">let</span> r = s.pop();</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        peek()&#123;</span><br><span class="line">            <span class="keyword">let</span> s = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> s[s.length<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        isEmpty()&#123;</span><br><span class="line">            <span class="keyword">return</span> items.get(<span class="keyword">this</span>).length == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        size()&#123;</span><br><span class="line">            <span class="keyword">let</span> s = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> s.length;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        clear()&#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, []);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        print()&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        toString()&#123;</span><br><span class="line">            <span class="keyword">return</span> items.get(<span class="keyword">this</span>).toString();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Stack3;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>åº”ç”¨ï¼šåè¿›åˆ¶è½¬æ¢æˆå…¶ä»–è¿›åˆ¶ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baseConverter</span>(<span class="params">decNumber, base = <span class="number">2</span></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> remStack = <span class="keyword">new</span> Stack(),</span><br><span class="line">        rem,</span><br><span class="line">        baseString = <span class="string">''</span>,</span><br><span class="line">        digits = <span class="string">'0123456789ABCDEF'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (decNumber &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        rem = <span class="built_in">Math</span>.floor(decNumber % base);</span><br><span class="line">        remStack.push(rem);</span><br><span class="line">        decNumber = <span class="built_in">Math</span>.floor(decNumber / base);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!remStack.isEmpty())&#123;</span><br><span class="line">        baseString += digits[remStack.pop()];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> baseString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(baseConverter(<span class="number">100345</span>, <span class="number">2</span>));<span class="comment">// 11000011111111001</span></span><br><span class="line"><span class="built_in">console</span>.log(baseConverter(<span class="number">100345</span>, <span class="number">8</span>));<span class="comment">// 303771</span></span><br><span class="line"><span class="built_in">console</span>.log(baseConverter(<span class="number">100345</span>, <span class="number">16</span>));<span class="comment">// 187F9</span></span><br></pre></td></tr></table></figure></p><p><strong>2. é˜Ÿåˆ—</strong></p><p>é˜Ÿåˆ—æ˜¯éµå¾ªFIFOï¼ˆFirst In First Outï¼Œå…ˆè¿›å…ˆå‡ºï¼Œä¹Ÿç§°ä¸ºå…ˆæ¥å…ˆæœåŠ¡ï¼‰åŸåˆ™çš„ä¸€ç»„æœ‰åºçš„é¡¹ã€‚<br>é˜Ÿåˆ—åœ¨å°¾éƒ¨æ·»åŠ æ–°å…ƒç´ ï¼Œå¹¶ä»é¡¶éƒ¨ç§»é™¤å…ƒç´ ã€‚æœ€æ–°æ·»åŠ çš„å…ƒç´ å¿…é¡»æ’åœ¨é˜Ÿåˆ—çš„æœ«å°¾ã€‚<br>é˜Ÿåˆ—çš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Queue = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">constructor</span> () &#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, []);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        enqueue(element) &#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            q.push(element);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        dequeue() &#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">let</span> r = q.shift();</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        front() &#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> q[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        isEmpty()&#123;</span><br><span class="line">            <span class="keyword">return</span> items.get(<span class="keyword">this</span>).length == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        size()&#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> q.length;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        clear()&#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, []);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        print()&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        toString()&#123;</span><br><span class="line">            <span class="keyword">return</span> items.get(<span class="keyword">this</span>).toString();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Queue;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>ä¼˜å…ˆé˜Ÿåˆ—ï¼šç»™å®šä¸€ä¸ªä¼˜å…ˆçº§ï¼Œå¦‚æœæ–°æ’å…¥çš„å…ƒç´ æŒ‰ç…§ä¼˜å…ˆçº§é«˜ä½ä»æ ˆé¡¶åˆ°æ ˆå°¾æ’å…¥åˆ°ç¬¬ä¸€ä¸ªä¼˜å…ˆçº§æ¯”ä»–çš„å°å…ƒç´ çš„å‰é¢ã€‚<br>æ³¨ï¼šè¿™ä¸ªå®ç°ä¸­å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> PriorityQueue = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">QueueElement</span> </span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(element, priority)&#123;</span><br><span class="line">            <span class="keyword">this</span>.element = element;</span><br><span class="line">            <span class="keyword">this</span>.priority = priority;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span> </span>&#123; <span class="comment">//extends Queue &#123; //with this approach the private properties are not reachable through inheritance</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">constructor</span> () &#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, []);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        enqueue(element, priority)&#123;</span><br><span class="line">            <span class="keyword">let</span> queueElement = <span class="keyword">new</span> QueueElement(element, priority);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> added = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;q.length; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span> (queueElement.priority &lt; q[i].priority)&#123;<span class="comment">// å¦‚æœæ’å…¥çš„ä¼˜å…ˆçº§æ¯”å…ƒç´ çš„ä¼˜å…ˆçº§é«˜</span></span><br><span class="line">                    q.splice(i,<span class="number">0</span>,queueElement);</span><br><span class="line">                    added = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!added)&#123;<span class="comment">//å¦‚æœå‰é¢çš„ä¼˜å…ˆçº§éƒ½æ¯”è‡ªå·±å¤§é‚£ä¹ˆæ’å…¥åˆ°æ ˆå°¾</span></span><br><span class="line">                q.push(queueElement);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            items.set(<span class="keyword">this</span>, q);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        dequeue() &#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">let</span> r = q.shift();</span><br><span class="line">            items.set(<span class="keyword">this</span>, q);</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        front() &#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> q[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        isEmpty()&#123;</span><br><span class="line">            <span class="keyword">return</span> items.get(<span class="keyword">this</span>).length == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        size()&#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> q.length;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        clear()&#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, []);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        print()&#123;</span><br><span class="line">            <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;q.length; i++)&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;q[i].element&#125;</span>  - <span class="subst">$&#123;q[i].priority&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> PriorityQueue;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> priorityQueue = <span class="keyword">new</span> PriorityQueue();</span><br><span class="line">priorityQueue.enqueue(<span class="string">"John"</span>, <span class="number">2</span>);</span><br><span class="line">priorityQueue.enqueue(<span class="string">"Jack"</span>, <span class="number">1</span>);</span><br><span class="line">priorityQueue.enqueue(<span class="string">"Ana"</span>, <span class="number">3</span>);</span><br><span class="line">priorityQueue.print();</span><br></pre></td></tr></table></figure><p>å®æˆ˜ï¼šå‡»é¼“ä¼ èŠ±ï¼Œä½¿ç”¨å¾ªç¯é˜Ÿåˆ—æ¥å®ç°ã€‚<br>é¢˜ç›®æè¿°ï¼šåœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œå­©å­ä»¬å›´æˆä¸€ä¸ªåœ†åœˆï¼ŒæŠŠèŠ±å°½å¿«åœ°ä¼ é€’ç»™æ—è¾¹çš„äººã€‚æŸä¸€æ—¶åˆ»ä¼ èŠ±åœæ­¢ï¼Œ<br>è¿™ä¸ªæ—¶å€™èŠ±åœ¨è°æ‰‹é‡Œï¼Œè°å°±é€€å‡ºåœ†åœˆç»“æŸæ¸¸æˆã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°åªå‰©ä¸€ä¸ªå­©å­ï¼ˆèƒœè€…ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hotPotato</span> (<span class="params">nameList, num</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> queue = <span class="keyword">new</span> Queue();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;nameList.length; i++)&#123;</span><br><span class="line">        queue.enqueue(nameList[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> eliminated = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">while</span> (queue.size() &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;num; i++)&#123;</span><br><span class="line">            queue.enqueue(queue.dequeue());</span><br><span class="line">        &#125;</span><br><span class="line">        eliminated = queue.dequeue();</span><br><span class="line">        <span class="built_in">console</span>.log(eliminated + <span class="string">' was eliminated from the Hot Potato game.'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> queue.dequeue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> names = [<span class="string">'John'</span>,<span class="string">'Jack'</span>,<span class="string">'Camila'</span>,<span class="string">'Ingrid'</span>,<span class="string">'Carl'</span>];</span><br><span class="line"><span class="keyword">let</span> winner = hotPotato(names, <span class="number">7</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'The winner is: '</span> + winner);<span class="comment">// The winner is: John</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç¤ºä¾‹å›¾ï¼š<br><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/2.png" alt="å‡»é¼“ä¼ èŠ±"></p><p><strong>3. åˆ—è¡¨</strong><br>åˆ—è¡¨æ˜¯ä¸ºäº†è§£å†³æ•°ç»„æ’å…¥æˆ–ç§»é™¤æ¶ˆè€—å†…å­˜å¤§è€Œå‡ºç°çš„æ•°æ®ç»“æ„ã€‚<br>é“¾è¡¨å­˜å‚¨æœ‰åºçš„å…ƒç´ é›†åˆï¼Œä½†ä¸åŒäºæ•°ç»„ï¼Œé“¾è¡¨ä¸­çš„å…ƒç´ åœ¨å†…å­˜ä¸­å¹¶ä¸æ˜¯è¿ç»­æ”¾ç½®çš„ã€‚æ¯ä¸ªå…ƒç´ ç”±ä¸€ä¸ªå­˜å‚¨å…ƒç´ æœ¬èº«çš„èŠ‚ç‚¹å’Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ï¼ˆä¹Ÿç§°æŒ‡é’ˆæˆ–é“¾æ¥ï¼‰ç»„æˆã€‚</p><p>åˆ—è¡¨çš„å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> LinkedList = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(element)&#123;</span><br><span class="line">            <span class="keyword">this</span>.element = element;</span><br><span class="line">            <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> length = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">    <span class="keyword">const</span> head = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">constructor</span> () &#123;</span><br><span class="line">            length.set(<span class="keyword">this</span>, <span class="number">0</span>);</span><br><span class="line">            head.set(<span class="keyword">this</span>, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        append(element) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> node = <span class="keyword">new</span> Node(element),</span><br><span class="line">                current;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.getHead() === <span class="literal">null</span>) &#123; <span class="comment">//first node on list</span></span><br><span class="line">                head.set(<span class="keyword">this</span>, node);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                current = <span class="keyword">this</span>.getHead();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//loop the list until find last item</span></span><br><span class="line">                <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">                    current = current.next;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//get last item and assign next to added item to make the link</span></span><br><span class="line">                current.next = node;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//update size of list</span></span><br><span class="line">            <span class="keyword">let</span> l = <span class="keyword">this</span>.size();</span><br><span class="line">            l++;</span><br><span class="line">            length.set(<span class="keyword">this</span>, l);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        insert(position, element) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//check for out-of-bounds values</span></span><br><span class="line">            <span class="keyword">if</span> (position &gt;= <span class="number">0</span> &amp;&amp; position &lt;= <span class="keyword">this</span>.size()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">let</span> node = <span class="keyword">new</span> Node(element),</span><br><span class="line">                    current = <span class="keyword">this</span>.getHead(),</span><br><span class="line">                    previous,</span><br><span class="line">                    index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (position === <span class="number">0</span>) &#123; <span class="comment">//add on first position</span></span><br><span class="line"></span><br><span class="line">                    node.next = current;</span><br><span class="line">                    head.set(<span class="keyword">this</span>, node);</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">while</span> (index++ <span class="xml"><span class="tag">&lt; <span class="attr">position</span>) &#123;</span></span></span><br><span class="line"><span class="xml">                        previous = current;</span></span><br><span class="line"><span class="xml">                        current = current.next;</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                    node.next = current;</span></span><br><span class="line"><span class="xml">                    previous.next = node;</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                //update size of list</span></span><br><span class="line"><span class="xml">                let l = this.size();</span></span><br><span class="line"><span class="xml">                l++;</span></span><br><span class="line"><span class="xml">                length.set(this, l);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                return true;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            &#125; else &#123;</span></span><br><span class="line"><span class="xml">                return false;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        removeAt(position) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            //check for out-of-bounds values</span></span><br><span class="line"><span class="xml">            if (position &gt; -1 &amp;&amp; position <span class="tag">&lt; <span class="attr">this.size</span>()) &#123;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                let current = this.getHead(),</span></span><br><span class="line"><span class="xml">                    previous,</span></span><br><span class="line"><span class="xml">                    index = 0;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                //removing first item</span></span><br><span class="line"><span class="xml">                if (position === 0) &#123;</span></span><br><span class="line"><span class="xml">                    head.set(this, current.next);</span></span><br><span class="line"><span class="xml">                &#125; else &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    while (index++ <span class="tag">&lt; <span class="attr">position</span>) &#123;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                        previous = current;</span></span><br><span class="line"><span class="xml">                        current = current.next;</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    //link previous with current's next - skip it to remove</span></span><br><span class="line"><span class="xml">                    previous.next = current.next;</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                let l = this.size();</span></span><br><span class="line"><span class="xml">                l--;</span></span><br><span class="line"><span class="xml">                length.set(this, l);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                return current.element;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            &#125; else &#123;</span></span><br><span class="line"><span class="xml">                return null;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        remove(element) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            let index = this.indexOf(element);</span></span><br><span class="line"><span class="xml">            return this.removeAt(index);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        indexOf(element) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            let current = this.getHead(),</span></span><br><span class="line"><span class="xml">                index = 0;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            while (current) &#123;</span></span><br><span class="line"><span class="xml">                if (element === current.element) &#123;</span></span><br><span class="line"><span class="xml">                    return index;</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">                index++;</span></span><br><span class="line"><span class="xml">                current = current.next;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            return -1;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        isEmpty() &#123;</span></span><br><span class="line"><span class="xml">            return this.size() === 0;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        size() &#123;</span></span><br><span class="line"><span class="xml">            return length.get(this);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        getHead() &#123;</span></span><br><span class="line"><span class="xml">            return head.get(this);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        toString() &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            let current = this.getHead(),</span></span><br><span class="line"><span class="xml">                string = '';</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            while (current) &#123;</span></span><br><span class="line"><span class="xml">                string += current.element + (current.next ? ', ' : '');</span></span><br><span class="line"><span class="xml">                current = current.next;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">            return string;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        print() &#123;</span></span><br><span class="line"><span class="xml">            console.log(this.toString());</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    return LinkedList;</span></span><br><span class="line"><span class="xml">&#125;)();</span></span><br></pre></td></tr></table></figure></p><p>åŒå‘åˆ—è¡¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> DoublyLinkedList = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(element) &#123;</span><br><span class="line">            <span class="keyword">this</span>.element = element;</span><br><span class="line">            <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">this</span>.prev = <span class="literal">null</span>; <span class="comment">//NEW</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> length = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">    <span class="keyword">const</span> head = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">    <span class="keyword">const</span> tail = <span class="keyword">new</span> <span class="built_in">WeakMap</span>(); <span class="comment">//NEW</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">DoublyLinkedList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">constructor</span> () &#123;</span><br><span class="line">            length.set(<span class="keyword">this</span>, <span class="number">0</span>);</span><br><span class="line">            head.set(<span class="keyword">this</span>, <span class="literal">null</span>);</span><br><span class="line">            tail.set(<span class="keyword">this</span>, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        append(element) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> node = <span class="keyword">new</span> Node(element),</span><br><span class="line">                current, _tail;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.getHead() === <span class="literal">null</span>) &#123; <span class="comment">//first node on list</span></span><br><span class="line">                head.set(<span class="keyword">this</span>, node);</span><br><span class="line">                tail.set(<span class="keyword">this</span>, node); <span class="comment">//NEW</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//attach to the tail node //NEW</span></span><br><span class="line">                _tail = <span class="keyword">this</span>.getTail();</span><br><span class="line">                _tail.next = node;</span><br><span class="line">                node.prev = _tail;</span><br><span class="line">                tail.set(<span class="keyword">this</span>, node);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//update size of list</span></span><br><span class="line">            <span class="keyword">let</span> l = <span class="keyword">this</span>.size();</span><br><span class="line">            l++;</span><br><span class="line">            length.set(<span class="keyword">this</span>, l);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        insert(position, element) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//check for out-of-bounds values</span></span><br><span class="line">            <span class="keyword">if</span> (position &gt;= <span class="number">0</span> &amp;&amp; position &lt;= <span class="keyword">this</span>.size()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">let</span> node = <span class="keyword">new</span> Node(element),</span><br><span class="line">                    current = <span class="keyword">this</span>.getHead(),</span><br><span class="line">                    previous,</span><br><span class="line">                    index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (position === <span class="number">0</span>) &#123; <span class="comment">//add on first position</span></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (!<span class="keyword">this</span>.getHead()) &#123;       <span class="comment">//NEW</span></span><br><span class="line">                        head.set(<span class="keyword">this</span>, node);</span><br><span class="line">                        tail.set(<span class="keyword">this</span>, node);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        node.next = current;</span><br><span class="line">                        current.prev = node; <span class="comment">//NEW &#123;1&#125;</span></span><br><span class="line">                        head.set(<span class="keyword">this</span>, node);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (position === <span class="keyword">this</span>.size()) &#123; <span class="comment">//last item //NEW</span></span><br><span class="line"></span><br><span class="line">                    current = tail;     </span><br><span class="line">                    current.next = node;</span><br><span class="line">                    node.prev = current;</span><br><span class="line">                    tail.set(<span class="keyword">this</span>, node);</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">while</span> (index++ <span class="xml"><span class="tag">&lt; <span class="attr">position</span>) &#123; </span></span></span><br><span class="line"><span class="xml">                        previous = current;</span></span><br><span class="line"><span class="xml">                        current = current.next;</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                    node.next = current;</span></span><br><span class="line"><span class="xml">                    previous.next = node;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    current.prev = node; //NEW</span></span><br><span class="line"><span class="xml">                    node.prev = previous; //NEW</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                //update size of list</span></span><br><span class="line"><span class="xml">                let l = this.size();</span></span><br><span class="line"><span class="xml">                l++;</span></span><br><span class="line"><span class="xml">                length.set(this, l);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                return true;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            &#125; else &#123;</span></span><br><span class="line"><span class="xml">                return false;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        removeAt(position) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            //check for out-of-bounds values</span></span><br><span class="line"><span class="xml">            if (position &gt; -1 &amp;&amp; position <span class="tag">&lt; <span class="attr">this.size</span>()) &#123;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                let _head = this.getHead(),</span></span><br><span class="line"><span class="xml">                    _tail = this.getTail(),</span></span><br><span class="line"><span class="xml">                    current = _head,</span></span><br><span class="line"><span class="xml">                    previous,</span></span><br><span class="line"><span class="xml">                    index = 0;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                //removing first item</span></span><br><span class="line"><span class="xml">                if (position === 0) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    _head = current.next; </span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    //if there is only one item, then we update tail as well //NEW</span></span><br><span class="line"><span class="xml">                    if (this.size() === 1) &#123; </span></span><br><span class="line"><span class="xml">                        _tail = null;</span></span><br><span class="line"><span class="xml">                    &#125; else &#123;</span></span><br><span class="line"><span class="xml">                        _head.prev = null; </span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                &#125; else if (position === this.size() - 1) &#123; //last item //NEW</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    current = _tail; </span></span><br><span class="line"><span class="xml">                    _tail = current.prev;</span></span><br><span class="line"><span class="xml">                    _tail.next = null;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                &#125; else &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    while (index++ <span class="tag">&lt; <span class="attr">position</span>) &#123; </span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                        previous = current;</span></span><br><span class="line"><span class="xml">                        current = current.next;</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                    //link previous with current's next - skip it to remove</span></span><br><span class="line"><span class="xml">                    previous.next = current.next; </span></span><br><span class="line"><span class="xml">                    current.next.prev = previous; //NEW</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                head.set(this,_head);</span></span><br><span class="line"><span class="xml">                tail.set(this,_tail);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                //update size of list</span></span><br><span class="line"><span class="xml">                let l = this.size();</span></span><br><span class="line"><span class="xml">                l--;</span></span><br><span class="line"><span class="xml">                length.set(this, l);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                return current.element;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            &#125; else &#123;</span></span><br><span class="line"><span class="xml">                return null;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        remove(element) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            let index = this.indexOf(element);</span></span><br><span class="line"><span class="xml">            return this.removeAt(index);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        indexOf(element) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            let current = this.getHead(),</span></span><br><span class="line"><span class="xml">                index = -1;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            //check first item</span></span><br><span class="line"><span class="xml">            if (element == current.element) &#123;</span></span><br><span class="line"><span class="xml">                return 0;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            index++;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            //check in the middle of the list</span></span><br><span class="line"><span class="xml">            while (current.next) &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                if (element == current.element) &#123;</span></span><br><span class="line"><span class="xml">                    return index;</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">                current = current.next;</span></span><br><span class="line"><span class="xml">                index++;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            //check last item</span></span><br><span class="line"><span class="xml">            if (element == current.element) &#123;</span></span><br><span class="line"><span class="xml">                return index;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            return -1;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        isEmpty() &#123;</span></span><br><span class="line"><span class="xml">            return this.size() === 0;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        size() &#123;</span></span><br><span class="line"><span class="xml">            return length.get(this);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        toString() &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            let current = this.getHead(),</span></span><br><span class="line"><span class="xml">                s = current ? current.element : '';</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            while (current &amp;&amp; current.next) &#123;</span></span><br><span class="line"><span class="xml">                current = current.next;</span></span><br><span class="line"><span class="xml">                s += ', ' + current.element;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            return s;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        inverseToString() &#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            let current = this.getTail(),</span></span><br><span class="line"><span class="xml">                s = current ? current.element : '';</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            while (current &amp;&amp; current.prev) &#123;</span></span><br><span class="line"><span class="xml">                current = current.prev;</span></span><br><span class="line"><span class="xml">                s += ', ' + current.element;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            return s;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        print() &#123;</span></span><br><span class="line"><span class="xml">            console.log(this.toString());</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        printInverse() &#123;</span></span><br><span class="line"><span class="xml">            console.log(this.inverseToString());</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        getHead() &#123;</span></span><br><span class="line"><span class="xml">            return head.get(this);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        getTail() &#123;</span></span><br><span class="line"><span class="xml">            return tail.get(this);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    return DoublyLinkedList;</span></span><br><span class="line"><span class="xml">&#125;)();</span></span><br></pre></td></tr></table></figure><p><strong>4. é›†åˆ</strong><br>é›†åˆæ˜¯ç”±ä¸€ç»„æ— åºä¸”å”¯ä¸€ï¼ˆå³ä¸èƒ½é‡å¤ï¼‰çš„é¡¹ç»„æˆçš„ã€‚è¿™ä¸ªæ•°æ®ç»“æ„ä½¿ç”¨äº†ä¸æœ‰é™é›†åˆç›¸åŒçš„æ•°å­¦æ¦‚å¿µï¼Œä½†åº”ç”¨åœ¨è®¡ç®—æœºç§‘å­¦çš„æ•°æ®ç»“æ„ä¸­ã€‚<br>æ³¨ï¼šè¿™é‡Œçš„åç§°å«Setä½†æ˜¯æœ€å¥½ä¸è¦ç”¨è¿™ä¸ªåå­—ï¼Œå› ä¸ºES6ä¸­æœ¬æ¥å°±æœ‰è¿™ä¸ªå…¨å±€å˜é‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">Set</span> = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Set</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">constructor</span> () &#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, &#123;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        add(value)&#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.has(value))&#123;</span><br><span class="line">                <span class="keyword">let</span> items_ = items.get(<span class="keyword">this</span>);</span><br><span class="line">                items_[value] = value;<span class="comment">// [é”®ï¼Œé”®]å½¢å¼</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">delete</span>(value)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.has(value))&#123;</span><br><span class="line">                <span class="keyword">let</span> items_ = items.get(<span class="keyword">this</span>);</span><br><span class="line">                <span class="keyword">delete</span> items_[value];</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        has(value)&#123;</span><br><span class="line">            <span class="keyword">let</span> items_ = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> items_.hasOwnProperty(value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        clear()&#123;</span><br><span class="line">            items.set(<span class="keyword">this</span>, &#123;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        size()&#123;</span><br><span class="line">            <span class="keyword">let</span> items_ = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Object</span>.keys(items_).length;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        values()&#123;</span><br><span class="line">            <span class="keyword">let</span> values = [];</span><br><span class="line">            <span class="keyword">let</span> items_ = items.get(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>, keys=<span class="built_in">Object</span>.keys(items_); i&lt;keys.length; i++) &#123;</span><br><span class="line">                values.push(items_[keys[i]]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> values;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        getItems()&#123;</span><br><span class="line">            <span class="keyword">return</span> items.get(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¹¶é›† AåˆBçš„å…¨éƒ¨å…ƒç´ </span></span><br><span class="line">        union(otherSet)&#123;</span><br><span class="line">            <span class="keyword">let</span> unionSet = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> values = <span class="keyword">this</span>.values();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;values.length; i++)&#123;</span><br><span class="line">                unionSet.add(values[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            values = otherSet.values();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;values.length; i++)&#123;</span><br><span class="line">                unionSet.add(values[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> unionSet;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// äº¤é›† Aå’ŒBå…¬å…±çš„éƒ¨åˆ†</span></span><br><span class="line">        intersection(otherSet)&#123;</span><br><span class="line">            <span class="keyword">let</span> intersectionSet = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> values = <span class="keyword">this</span>.values();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;values.length; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span> (otherSet.has(values[i]))&#123;</span><br><span class="line">                    intersectionSet.add(values[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> intersectionSet;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å·®é›† Aå»è¿‡Bçš„éƒ¨åˆ†</span></span><br><span class="line">        difference(otherSet)&#123;</span><br><span class="line">            <span class="keyword">let</span> differenceSet = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> values = <span class="keyword">this</span>.values();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;values.length; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span> (!otherSet.has(values[i]))&#123;</span><br><span class="line">                    differenceSet.add(values[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> differenceSet;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å­é›† Bæ˜¯å¦åŒ…å«A</span></span><br><span class="line">        subset(otherSet)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.size() &gt; otherSet.size())&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> values = <span class="keyword">this</span>.values();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;values.length; i++)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (!otherSet.has(values[i]))&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Set</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p><strong>5. å­—å…¸</strong><br>åœ¨å­—å…¸ä¸­ï¼Œå­˜å‚¨çš„æ˜¯[é”®ï¼Œå€¼]å¯¹ï¼ˆå…¶å®å°±æ˜¯æˆ‘ä»¬çš„Mapï¼‰ï¼Œå…¶ä¸­é”®åæ˜¯ç”¨æ¥æŸ¥è¯¢ç‰¹å®šå…ƒç´ çš„ã€‚å­—å…¸å’Œé›†åˆå¾ˆç›¸ä¼¼ï¼Œé›†åˆä»¥[å€¼ï¼Œå€¼]çš„å½¢å¼å­˜å‚¨å…ƒç´ ï¼Œå­—å…¸åˆ™æ˜¯ä»¥[é”®ï¼Œå€¼]çš„å½¢å¼æ¥å­˜å‚¨å…ƒç´ ã€‚å­—å…¸ä¹Ÿç§°ä½œæ˜ å°„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dictionary</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> items = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.set = <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">        items[key] = value; </span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.delete = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.has(key))&#123;</span><br><span class="line">            <span class="keyword">delete</span> items[key];</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.has = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> items.hasOwnProperty(key);</span><br><span class="line">        <span class="comment">//return value in items;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.get = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.has(key) ? items[key] : <span class="literal">undefined</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.clear = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        items = &#123;&#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.size = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.keys(items).length;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.keys = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.keys(items);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.values = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> values = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> items) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.has(k)) &#123;</span><br><span class="line">                values.push(items[k]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.each = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> items) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.has(k)) &#123;</span><br><span class="line">                fn(k, items[k]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.getItems = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> items;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>6. æ•£åˆ—è¡¨</strong><br>æ•£åˆ—è¡¨æ˜¯æ•£åˆ—å€¼ï¼ˆHashCodeï¼‰å’ŒçœŸå®å€¼çš„å¯¹åº”å…³ç³»ï¼Œä¸ºäº†é¿å…å¤šä¸ªå€¼å¯¹åº”ç›¸åŒHashCodeçš„æƒ…å†µï¼Œåœ¨å­˜å‚¨çš„æ—¶å€™ä¼šå­˜åœ¨HashCodeæ‰€åœ¨ä½ç½®åŠä»¥åç¬¬ä¸€ä¸ªä¸ä¸ºç©ºçš„åœ°æ–¹ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™æ‰¾åˆ°hashCodeæ‰€å¤„çš„ä½ç½®ï¼Œç„¶åä»è¿™é‡Œå¼€å§‹å‘åæ‰¾ï¼ŒçŸ¥é“æ‰¾åˆ°é”®ç›¸åŒçš„å…ƒç´ ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä¹‹å‰å¼€å‘å¥½çš„LinkedListå’ŒHashCodeçš„å¯¹åº”å…³ç³»é¿å…ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HashTable</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> table = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> ValuePair = <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'['</span> + <span class="keyword">this</span>.key + <span class="string">' - '</span> + <span class="keyword">this</span>.value + <span class="string">']'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> loseloseHashCode = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> hash = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; key.length; i++) &#123;</span><br><span class="line">            hash += key.charCodeAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hash % <span class="number">37</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> djb2HashCode = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> hash = <span class="number">5381</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; key.length; i++) &#123;</span><br><span class="line">            hash = hash * <span class="number">33</span> + key.charCodeAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hash % <span class="number">1013</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> hashCode = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> loseloseHashCode(key); <span class="comment">// è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨djb2HashCodeæ¥ç”Ÿæˆhashå€¼</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.put = <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> position = hashCode(key);</span><br><span class="line">        <span class="built_in">console</span>.log(position + <span class="string">' - '</span> + key);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (table[position] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">            table[position] = <span class="keyword">new</span> ValuePair(key, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> index = ++position;</span><br><span class="line">            <span class="keyword">while</span> (table[index] != <span class="literal">undefined</span>)&#123;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">            table[index] = <span class="keyword">new</span> ValuePair(key, value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.get = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> position = hashCode(key);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (table[position] !== <span class="literal">undefined</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (table[position].key === key) &#123;</span><br><span class="line">                <span class="keyword">return</span> table[position].value;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> index = ++position;</span><br><span class="line">                <span class="keyword">while</span> (table[index] === <span class="literal">undefined</span> || table[index].key !== key)&#123;</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (table[index].key === key) &#123;</span><br><span class="line">                    <span class="keyword">return</span> table[index].value;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.remove = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> position = hashCode(key);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (table[position] !== <span class="literal">undefined</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (table[position].key === key) &#123;</span><br><span class="line">                table[position] = <span class="literal">undefined</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> index = ++position;</span><br><span class="line">                <span class="keyword">while</span> (table[index] === <span class="literal">undefined</span> || table[index].key !== key)&#123;</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (table[index].key === key) &#123;</span><br><span class="line">                    table[index] = <span class="literal">undefined</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; table.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (table[i] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(i + <span class="string">' -&gt; '</span> + table[i].toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>7. æ ‘</strong><br>ä¸€ä¸ªæ ‘ç»“æ„åŒ…å«ä¸€ç³»åˆ—å­˜åœ¨çˆ¶å­å…³ç³»çš„èŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼ˆé™¤äº†é¡¶éƒ¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ä»¥åŠé›¶ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ã€‚</p><p><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/tree.png" alt="æ ‘å½¢ç»“æ„"></p><p>ä½äºæ ‘é¡¶éƒ¨çš„èŠ‚ç‚¹å«ä½œæ ¹èŠ‚ç‚¹ï¼ˆ11ï¼‰ã€‚å®ƒæ²¡æœ‰çˆ¶èŠ‚ç‚¹ã€‚æ ‘ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å«ä½œèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹åˆ†ä¸ºå†…éƒ¨èŠ‚ç‚¹å’Œå¤–éƒ¨èŠ‚ç‚¹ã€‚è‡³å°‘æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸ºå†…éƒ¨èŠ‚ç‚¹ï¼ˆ7ã€5ã€9ã€15ã€13å’Œ20æ˜¯å†…éƒ¨èŠ‚ç‚¹ï¼‰ã€‚æ²¡æœ‰å­å…ƒç´ çš„èŠ‚ç‚¹ç§°ä¸ºå¤–éƒ¨èŠ‚ç‚¹æˆ–å¶èŠ‚ç‚¹ï¼ˆ3ã€6ã€8ã€10ã€12ã€14ã€18å’Œ25æ˜¯å¶èŠ‚ç‚¹ï¼‰ã€‚</p><p>ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰ç¥–å…ˆå’Œåä»£ã€‚ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆé™¤äº†æ ¹èŠ‚ç‚¹ï¼‰çš„ç¥–å…ˆåŒ…æ‹¬çˆ¶èŠ‚ç‚¹ã€ç¥–çˆ¶èŠ‚ç‚¹ã€æ›¾ç¥–çˆ¶èŠ‚ç‚¹ç­‰ã€‚ä¸€ä¸ªèŠ‚ç‚¹çš„åä»£åŒ…æ‹¬å­èŠ‚ç‚¹ã€å­™å­èŠ‚ç‚¹ã€æ›¾å­™èŠ‚ç‚¹ç­‰ã€‚</p><p>äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼šä¸€ä¸ªæ˜¯å·¦ä¾§å­èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªæ˜¯å³ä¾§å­èŠ‚ç‚¹ã€‚è¿™äº›å®šä¹‰æœ‰åŠ©äºæˆ‘ä»¬å†™å‡ºæ›´é«˜æ•ˆçš„å‘/ä»æ ‘ä¸­æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤èŠ‚ç‚¹çš„ç®—æ³•ã€‚äºŒå‰æ ‘åœ¨è®¡ç®—æœºç§‘å­¦ä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚</p><p>äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰æ˜¯äºŒå‰æ ‘çš„ä¸€ç§ï¼Œä½†æ˜¯å®ƒåªå…è®¸ä½ åœ¨å·¦ä¾§èŠ‚ç‚¹å­˜å‚¨ï¼ˆæ¯”çˆ¶èŠ‚ç‚¹ï¼‰å°çš„å€¼ï¼Œåœ¨å³ä¾§èŠ‚ç‚¹å­˜å‚¨ï¼ˆæ¯”çˆ¶èŠ‚ç‚¹ï¼‰å¤§ï¼ˆæˆ–è€…ç­‰äºï¼‰çš„å€¼ã€‚</p><p>äºŒå‰æœç´¢æ ‘çš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BinarySearchTree</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> Node = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> root = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.insert = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> newNode = <span class="keyword">new</span> Node(key);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//special case - first element</span></span><br><span class="line">        <span class="keyword">if</span> (root === <span class="literal">null</span>)&#123;</span><br><span class="line">            root = newNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            insertNode(root,newNode);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> insertNode = <span class="function"><span class="keyword">function</span>(<span class="params">node, newNode</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (newNode.key &lt; node.key)&#123;</span><br><span class="line">            <span class="keyword">if</span> (node.left === <span class="literal">null</span>)&#123;</span><br><span class="line">                node.left = newNode;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                insertNode(node.left, newNode);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.right === <span class="literal">null</span>)&#123;</span><br><span class="line">                node.right = newNode;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                insertNode(node.right, newNode);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.getRoot = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.search = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> searchNode(root, key);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> searchNode = <span class="function"><span class="keyword">function</span>(<span class="params">node, key</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (node === <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (key &lt; node.key)&#123;</span><br><span class="line">            <span class="keyword">return</span> searchNode(node.left, key);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; node.key)&#123;</span><br><span class="line">            <span class="keyword">return</span> searchNode(node.right, key);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//element is equal to node.item</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå† å‰-&gt;ä¸­-&gt;å</span></span><br><span class="line">    <span class="keyword">this</span>.inOrderTraverse = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">        inOrderTraverseNode(root, callback);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> inOrderTraverseNode = <span class="function"><span class="keyword">function</span> (<span class="params">node, callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">            inOrderTraverseNode(node.left, callback);</span><br><span class="line">            callback(node.key);</span><br><span class="line">            inOrderTraverseNode(node.right, callback);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‰åºéå† ä¸­-&gt;å‰-&gt;å</span></span><br><span class="line">    <span class="keyword">this</span>.preOrderTraverse = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">        preOrderTraverseNode(root, callback);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> preOrderTraverseNode = <span class="function"><span class="keyword">function</span> (<span class="params">node, callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">            callback(node.key);</span><br><span class="line">            preOrderTraverseNode(node.left, callback);</span><br><span class="line">            preOrderTraverseNode(node.right, callback);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ååºéå† å‰-&gt;å-&gt;ä¸­</span></span><br><span class="line">    <span class="keyword">this</span>.postOrderTraverse = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">        postOrderTraverseNode(root, callback);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> postOrderTraverseNode = <span class="function"><span class="keyword">function</span> (<span class="params">node, callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">            postOrderTraverseNode(node.left, callback);</span><br><span class="line">            postOrderTraverseNode(node.right, callback);</span><br><span class="line">            callback(node.key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€å°å€¼ æœ€å·¦è¾¹çš„ç‚¹</span></span><br><span class="line">    <span class="keyword">this</span>.min = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> minNode(root);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> minNode = <span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node)&#123;</span><br><span class="line">            <span class="keyword">while</span> (node &amp;&amp; node.left !== <span class="literal">null</span>) &#123;</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> node.key;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€å°å€¼ æœ€å³è¾¹çš„ç‚¹</span></span><br><span class="line">    <span class="keyword">this</span>.max = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> maxNode(root);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> maxNode = <span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node)&#123;</span><br><span class="line">            <span class="keyword">while</span> (node &amp;&amp; node.right !== <span class="literal">null</span>) &#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> node.key;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.remove = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        root = removeNode(root, element);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> findMinNode = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (node &amp;&amp; node.left !== <span class="literal">null</span>) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> removeNode = <span class="function"><span class="keyword">function</span>(<span class="params">node, element</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (node === <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (element &lt; node.key)&#123;</span><br><span class="line">            node.left = removeNode(node.left, element);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element &gt; node.key)&#123;</span><br><span class="line">            node.right = removeNode(node.right, element);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//element is equal to node.item</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//handle 3 special conditions</span></span><br><span class="line">            <span class="comment">//1 - a leaf node</span></span><br><span class="line">            <span class="comment">//2 - a node with only 1 child</span></span><br><span class="line">            <span class="comment">//3 - a node with 2 children</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//case 1</span></span><br><span class="line">            <span class="keyword">if</span> (node.left === <span class="literal">null</span> &amp;&amp; node.right === <span class="literal">null</span>)&#123;</span><br><span class="line">                node = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//case 2</span></span><br><span class="line">            <span class="keyword">if</span> (node.left === <span class="literal">null</span>)&#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.right === <span class="literal">null</span>)&#123;</span><br><span class="line">                node = node.left;</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//case 3</span></span><br><span class="line">            <span class="keyword">var</span> aux = findMinNode(node.right);</span><br><span class="line">            node.key = aux.key;</span><br><span class="line">            node.right = removeNode(node.right, aux.key);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AVLæ ‘<br>BSTï¼ˆäºŒå‰æœç´¢æ ‘ï¼‰å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå–å†³äºä½ æ·»åŠ çš„èŠ‚ç‚¹æ•°ï¼Œæ ‘çš„ä¸€æ¡è¾¹å¯èƒ½ä¼šéå¸¸æ·±ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ‘çš„ä¸€æ¡åˆ†æ”¯ä¼šæœ‰å¾ˆå¤šå±‚ï¼Œè€Œå…¶ä»–çš„åˆ†æ”¯å´åªæœ‰å‡ å±‚ã€‚å°±æ¯”å¦‚å¦‚æœç¬¬ä¸€æ¬¡æ·»åŠ çš„æ˜¯1ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œå…¶ä»–èŠ‚ç‚¹æ·»åŠ çš„éƒ½æ˜¯å¤§äº1çš„æ•°ï¼Œé‚£ä¹ˆå…¶ä»–çš„èŠ‚ç‚¹éƒ½ä¼šåœ¨æ ¹èŠ‚ç‚¹çš„å³è¾¹è€Œå·¦è¾¹å°±æ²¡æœ‰å·¦å­æ ‘äº†ã€‚è¿™ç§æƒ…å†µä¸‹æ·»åŠ ã€ç§»é™¤å’Œæœç´¢æŸä¸ªèŠ‚ç‚¹æ—¶å¼•èµ·ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸€ç§æ ‘å«ä½œAdelson-Velskii-Landiæ ‘ï¼ˆAVLæ ‘ï¼‰ã€‚AVLæ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œæ„æ€æ˜¯ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å·¦å³ä¸¤ä¾§å­æ ‘çš„é«˜åº¦ä¹‹å·®æœ€å¤šä¸º1ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ç§æ ‘ä¼šåœ¨æ·»åŠ æˆ–ç§»é™¤èŠ‚ç‚¹æ—¶å°½é‡è¯•ç€æˆä¸ºä¸€æ£µå®Œå…¨æ ‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AVLTree</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> Node = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> root = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.getRoot = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> heightNode = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Math</span>.max(heightNode(node.left), heightNode(node.right)) + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> rotationLL = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tmp = node.left;</span><br><span class="line">        node.left = tmp.right;</span><br><span class="line">        tmp.right = node;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> rotationRR = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tmp = node.right;</span><br><span class="line">        node.right = tmp.left;</span><br><span class="line">        tmp.left = node;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> rotationLR = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        node.left = rotationRR(node.left);</span><br><span class="line">        <span class="keyword">return</span> rotationLL(node);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> rotationRL = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        node.right = rotationLL(node.right);</span><br><span class="line">        <span class="keyword">return</span> rotationRR(node);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> insertNode = <span class="function"><span class="keyword">function</span>(<span class="params">node, element</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (node === <span class="literal">null</span>) &#123;</span><br><span class="line">            node = <span class="keyword">new</span> Node(element);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element &lt; node.key) &#123;</span><br><span class="line"></span><br><span class="line">            node.left = insertNode(node.left, element);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (node.left !== <span class="literal">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ((heightNode(node.left) - heightNode(node.right)) &gt; <span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (element &lt; node.left.key)&#123;</span><br><span class="line">                        node = rotationLL(node);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        node = rotationLR(node);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element &gt; node.key) &#123;</span><br><span class="line"></span><br><span class="line">            node.right = insertNode(node.right, element);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (node.right !== <span class="literal">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ((heightNode(node.right) - heightNode(node.left)) &gt; <span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (element &gt; node.right.key)&#123;</span><br><span class="line">                        node = rotationRR(node);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        node = rotationRL(node);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.insert = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">        root = insertNode(root, element);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> parentNode;</span><br><span class="line">    <span class="keyword">var</span> nodeToBeDeleted;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> removeNode = <span class="function"><span class="keyword">function</span>(<span class="params">node, element</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        parentNode = node;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (element &lt; node.key) &#123;</span><br><span class="line">            node.left = removeNode(node.left, element);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nodeToBeDeleted = node;</span><br><span class="line">            node.right = removeNode(node.right, element);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (node === parentNode) &#123; <span class="comment">//remove node</span></span><br><span class="line">            <span class="keyword">if</span> (nodeToBeDeleted !== <span class="literal">null</span> &amp;&amp; element === nodeToBeDeleted.key) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nodeToBeDeleted === parentNode) &#123;</span><br><span class="line">                    node = node.left;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">var</span> tmp = nodeToBeDeleted.key;</span><br><span class="line">                    nodeToBeDeleted.key = parentNode.key;</span><br><span class="line">                    parentNode.key = tmp;</span><br><span class="line">                    node = node.right;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//do balancing</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (node.left === <span class="literal">undefined</span>) node.left = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (node.right === <span class="literal">undefined</span>) node.right = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ((heightNode(node.left) - heightNode(node.right)) === <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (element &lt; node.left.key) &#123;</span><br><span class="line">                    node = rotationLR(node);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    node = rotationLL(node);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ((heightNode(node.right) - heightNode(node.left)) === <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (element &gt; node.right.key) &#123;</span><br><span class="line">                    node = rotationRL(node);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    node = rotationRR(node);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.remove = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">        parentNode = <span class="literal">null</span>;</span><br><span class="line">        nodeToBeDeleted = <span class="literal">null</span>;</span><br><span class="line">        root = removeNode(root, element);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çº¢é»‘æ ‘çš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RedBlackTree</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> Colors = &#123;</span><br><span class="line">        RED: <span class="number">0</span>,</span><br><span class="line">        BLACK: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> Node = <span class="function"><span class="keyword">function</span> (<span class="params">key, color</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.flipColor = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.color === Colors.RED) &#123;</span><br><span class="line">                <span class="keyword">this</span>.color = Colors.BLACK;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.color = Colors.RED;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> root = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.getRoot = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> isRed = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node.color === Colors.RED;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> flipColors = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">        node.left.flipColor();</span><br><span class="line">        node.right.flipColor();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> rotateLeft = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> temp = node.right;</span><br><span class="line">        <span class="keyword">if</span> (temp !== <span class="literal">null</span>) &#123;</span><br><span class="line">            node.right = temp.left;</span><br><span class="line">            temp.left = node;</span><br><span class="line">            temp.color = node.color;</span><br><span class="line">            node.color = Colors.RED;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> rotateRight = <span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> temp = node.left;</span><br><span class="line">        <span class="keyword">if</span> (temp !== <span class="literal">null</span>) &#123;</span><br><span class="line">            node.left = temp.right;</span><br><span class="line">            temp.right = node;</span><br><span class="line">            temp.color = node.color;</span><br><span class="line">            node.color = Colors.RED;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> insertNode = <span class="function"><span class="keyword">function</span>(<span class="params">node, element</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (node === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(element, Colors.RED);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> newRoot = node;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (element &lt; node.key) &#123;</span><br><span class="line"></span><br><span class="line">            node.left = insertNode(node.left, element);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element &gt; node.key) &#123;</span><br><span class="line"></span><br><span class="line">            node.right = insertNode(node.right, element);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            node.key = element;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isRed(node.right) &amp;&amp; !isRed(node.left)) &#123;</span><br><span class="line">            newRoot = rotateLeft(node);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isRed(node.left) &amp;&amp; isRed(node.left.left)) &#123;</span><br><span class="line">            newRoot = rotateRight(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isRed(node.left) &amp;&amp; isRed(node.right)) &#123;</span><br><span class="line">            flipColors(node);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> newRoot;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.insert = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">        root = insertNode(root, element);</span><br><span class="line">        root.color = Colors.BLACK;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>8. å›¾</strong><br>å›¾æ˜¯ç½‘ç»œç»“æ„çš„æŠ½è±¡æ¨¡å‹ã€‚å›¾æ˜¯ä¸€ç»„ç”±è¾¹è¿æ¥çš„èŠ‚ç‚¹ï¼ˆæˆ–é¡¶ç‚¹ï¼‰ã€‚å­¦ä¹ å›¾æ˜¯é‡è¦çš„ï¼Œå› ä¸ºä»»ä½•äºŒå…ƒå…³ç³»éƒ½å¯ä»¥ç”¨å›¾æ¥è¡¨ç¤ºã€‚<br>ä¸€ä¸ªå›¾G = (V, E)ç”±ä»¥ä¸‹å…ƒç´ ç»„æˆã€‚</p><blockquote><p>Vï¼šä¸€ç»„é¡¶ç‚¹<br>Eï¼šä¸€ç»„è¾¹ï¼Œè¿æ¥Vä¸­çš„é¡¶ç‚¹</p></blockquote><p>ç”±ä¸€æ¡è¾¹è¿æ¥åœ¨ä¸€èµ·çš„é¡¶ç‚¹ç§°ä¸ºç›¸é‚»é¡¶ç‚¹ã€‚<br>ä¸€ä¸ªé¡¶ç‚¹çš„åº¦æ˜¯å…¶ç›¸é‚»é¡¶ç‚¹çš„æ•°é‡ã€‚<br>å¦‚æœå›¾ä¸­ä¸å­˜åœ¨ç¯ï¼Œåˆ™ç§°è¯¥å›¾æ˜¯æ— ç¯çš„ã€‚å¦‚æœå›¾ä¸­æ¯ä¸¤ä¸ªé¡¶ç‚¹é—´éƒ½å­˜åœ¨è·¯å¾„ï¼Œåˆ™è¯¥å›¾æ˜¯è¿é€šçš„ã€‚<br>å›¾å¯ä»¥åˆ†ä¸ºæ˜¯æ— å‘å›¾ï¼ˆè¾¹æ²¡æœ‰æ–¹å‘ï¼‰å’Œæœ‰å‘å›¾ï¼ˆæœ‰å‘å›¾ï¼‰ã€‚<br>å›¾ä¹Ÿå¯ä»¥æ˜¯æœªåŠ æƒçš„ï¼ˆç›®å‰ä¸ºæ­¢æˆ‘ä»¬çœ‹åˆ°çš„å›¾éƒ½æ˜¯æœªåŠ æƒçš„ï¼‰æˆ–æ˜¯åŠ æƒçš„ã€‚</p><p>å›¾æœ‰çš„ä¸‰ç§è¡¨ç¤ºæ³•<br>8.1.1 é‚»æ¥çŸ©é˜µ</p><p><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/graph1.png" alt="é‚»æ¥çŸ©é˜µ"><br>8.1.2 é‚»æ¥è¡¨</p><p><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/graph2.png" alt="é‚»æ¥è¡¨"></p><p>8.1.3 å…³è”çŸ©é˜µ</p><p><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/graph3.png" alt="å…³è”çŸ©é˜µ"></p><p>å›¾çš„éå†æœ‰ä¸¤ç§ï¼š<br>8.2.1 å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼š</p><p><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/bfs.png" alt="å¹¿åº¦ä¼˜å…ˆæœç´¢"></p><p>8.2.2 æ·±åº¦ä¼˜å…ˆæœç´¢ï¼š</p><p><img src="/2019/03/10/ã€ŠJavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¹¦ç¬”è®°/dfs.png" alt="æ·±åº¦ä¼˜å…ˆæœç´¢"></p><p>å›¾çš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Graph</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> vertices = []; <span class="comment">//list</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> adjList = <span class="keyword">new</span> Dictionary();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.addVertex = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">        vertices.push(v);</span><br><span class="line">        adjList.set(v, []); <span class="comment">//initialize adjacency list with array as well;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.addEdge = <span class="function"><span class="keyword">function</span>(<span class="params">v, w</span>)</span>&#123;</span><br><span class="line">        adjList.get(v).push(w);</span><br><span class="line">        <span class="comment">//adjList.get(w).push(v); //commented to run the improved DFS with topological sorting</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> s = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;vertices.length; i++)&#123;</span><br><span class="line">            s += vertices[i] + <span class="string">' -&gt; '</span>;</span><br><span class="line">            <span class="keyword">var</span> neighbors = adjList.get(vertices[i]);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;neighbors.length; j++)&#123;</span><br><span class="line">                s += neighbors[j] + <span class="string">' '</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            s += <span class="string">'\n'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> initializeColor = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> color = &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;vertices.length; i++)&#123;</span><br><span class="line">            color[vertices[i]] = <span class="string">'white'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> color;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.bfs = <span class="function"><span class="keyword">function</span>(<span class="params">v, callback</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> color = initializeColor(),</span><br><span class="line">            queue = <span class="keyword">new</span> Queue();</span><br><span class="line">        queue.enqueue(v);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">var</span> u = queue.dequeue(),</span><br><span class="line">                neighbors = adjList.get(u);</span><br><span class="line">            color[u] = <span class="string">'grey'</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;neighbors.length; i++)&#123;</span><br><span class="line">                <span class="keyword">var</span> w = neighbors[i];</span><br><span class="line">                <span class="keyword">if</span> (color[w] === <span class="string">'white'</span>)&#123;</span><br><span class="line">                    color[w] = <span class="string">'grey'</span>;</span><br><span class="line">                    queue.enqueue(w);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            color[u] = <span class="string">'black'</span>;</span><br><span class="line">            <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                callback(u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.dfs = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> color = initializeColor();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;vertices.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (color[vertices[i]] === <span class="string">'white'</span>)&#123;</span><br><span class="line">                dfsVisit(vertices[i], color, callback);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> dfsVisit = <span class="function"><span class="keyword">function</span>(<span class="params">u, color, callback</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        color[u] = <span class="string">'grey'</span>;</span><br><span class="line">        <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">            callback(u);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Discovered '</span> + u);</span><br><span class="line">        <span class="keyword">var</span> neighbors = adjList.get(u);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;neighbors.length; i++)&#123;</span><br><span class="line">            <span class="keyword">var</span> w = neighbors[i];</span><br><span class="line">            <span class="keyword">if</span> (color[w] === <span class="string">'white'</span>)&#123;</span><br><span class="line">                dfsVisit(w, color, callback);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        color[u] = <span class="string">'black'</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'explored '</span> + u);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBreadth-First Searchï¼ŒBFSï¼‰</span></span><br><span class="line">    <span class="keyword">this</span>.BFS = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> color = initializeColor(),</span><br><span class="line">            queue = <span class="keyword">new</span> Queue(),</span><br><span class="line">            d = &#123;&#125;,</span><br><span class="line">            pred = &#123;&#125;;</span><br><span class="line">        queue.enqueue(v);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;vertices.length; i++)&#123;</span><br><span class="line">            d[vertices[i]] = <span class="number">0</span>;</span><br><span class="line">            pred[vertices[i]] = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">var</span> u = queue.dequeue(),</span><br><span class="line">                neighbors = adjList.get(u);</span><br><span class="line">            color[u] = <span class="string">'grey'</span>;</span><br><span class="line">            <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;neighbors.length; i++)&#123;</span><br><span class="line">                <span class="keyword">var</span> w = neighbors[i];</span><br><span class="line">                <span class="keyword">if</span> (color[w] === <span class="string">'white'</span>)&#123;</span><br><span class="line">                    color[w] = <span class="string">'grey'</span>;</span><br><span class="line">                    d[w] = d[u] + <span class="number">1</span>;</span><br><span class="line">                    pred[w] = u;</span><br><span class="line">                    queue.enqueue(w);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            color[u] = <span class="string">'black'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            distances: d,</span><br><span class="line">            predecessors: pred</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDepth-First Searchï¼ŒDFSï¼‰</span></span><br><span class="line">    <span class="keyword">var</span> time = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.DFS = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> color = initializeColor(),</span><br><span class="line">            d = &#123;&#125;,</span><br><span class="line">            f = &#123;&#125;,</span><br><span class="line">            p = &#123;&#125;;</span><br><span class="line">        time = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;vertices.length; i++)&#123;</span><br><span class="line">            f[vertices[i]] = <span class="number">0</span>;</span><br><span class="line">            d[vertices[i]] = <span class="number">0</span>;</span><br><span class="line">            p[vertices[i]] = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;vertices.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (color[vertices[i]] === <span class="string">'white'</span>)&#123;</span><br><span class="line">                DFSVisit(vertices[i], color, d, f, p);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            discovery: d,</span><br><span class="line">            finished: f,</span><br><span class="line">            predecessors: p</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> DFSVisit = <span class="function"><span class="keyword">function</span>(<span class="params">u, color, d, f, p</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'discovered '</span> + u);</span><br><span class="line">        color[u] = <span class="string">'grey'</span>;</span><br><span class="line">        d[u] = ++time;</span><br><span class="line">        <span class="keyword">var</span> neighbors = adjList.get(u);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;neighbors.length; i++)&#123;</span><br><span class="line">            <span class="keyword">var</span> w = neighbors[i];</span><br><span class="line">            <span class="keyword">if</span> (color[w] === <span class="string">'white'</span>)&#123;</span><br><span class="line">                p[w] = u;</span><br><span class="line">                DFSVisit(w,color, d, f, p);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        color[u] = <span class="string">'black'</span>;</span><br><span class="line">        f[u] = ++time;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'explored '</span> + u);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>9. æ’åºå’ŒæŸ¥æ‰¾</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArrayList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> array = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.insert = <span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">        array.push(item);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> swap = <span class="function"><span class="keyword">function</span>(<span class="params">array, index1, index2</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> aux = array[index1];</span><br><span class="line">        array[index1] = array[index2];</span><br><span class="line">        array[index2] = aux;</span><br><span class="line">        <span class="comment">//ES2015 swap - Firefox only, for other browser, uncomment code above and coment line below</span></span><br><span class="line">        <span class="comment">//[array[index1], array[index2]] = [array[index2], array[index1]];</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.toString= <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array.join();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.array= <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†’æ³¡æ’åº</span></span><br><span class="line">    <span class="keyword">this</span>.bubbleSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;length; i++)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'--- '</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;length<span class="number">-1</span>; j++ )&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'compare '</span> + array[j] + <span class="string">' with '</span> + array[j+<span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">if</span> (array[j] &gt; array[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'swap '</span> + array[j] + <span class="string">' with '</span> + array[j+<span class="number">1</span>]);</span><br><span class="line">                    swap(array, j, j+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¨å¾®æ”¹è¿›ä¸€ç‚¹çš„å†’æ³¡æ’åº ï¼ˆè¿˜å¯ä»¥åŠ æ ‡ç¤ºä½æ¥æ”¹è¿›ï¼‰</span></span><br><span class="line">    <span class="keyword">this</span>.modifiedBubbleSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;length; i++)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'--- '</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;length<span class="number">-1</span>-i; j++ )&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'compare '</span> + array[j] + <span class="string">' with '</span> + array[j+<span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">if</span> (array[j] &gt; array[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'swap '</span> + array[j] + <span class="string">' with '</span> + array[j+<span class="number">1</span>]);</span><br><span class="line">                    swap(j, j+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰æ‹©æ’åºï¼šæ¯æ¬¡å¯»æ‰¾æ•°æ®ç»“æ„ä¸­çš„æœ€å°å€¼æ”¾åœ¨æœªæ’åºç»“æ„çš„å‰é¢</span></span><br><span class="line">    <span class="keyword">this</span>.selectionSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.length,</span><br><span class="line">            indexMin;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;length<span class="number">-1</span>; i++)&#123;</span><br><span class="line">            indexMin = i;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'index '</span> + array[i]);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j=i; j&lt;length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(array[indexMin]&gt;array[j])&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'new index min '</span> + array[j]);</span><br><span class="line">                    indexMin = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i !== indexMin)&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'swap '</span> + array[i] + <span class="string">' with '</span> + array[indexMin]);</span><br><span class="line">                swap(i, indexMin);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥æ’åºï¼šå…ƒç´ æ’å…¥åˆ°å·²æ’åºçš„å…ƒç´ ä¸­</span></span><br><span class="line">    <span class="keyword">this</span>.insertionSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.length,</span><br><span class="line">            j, temp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;length; i++)&#123;</span><br><span class="line">            j = i;</span><br><span class="line">            temp = array[i];</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'to be inserted '</span> + temp);</span><br><span class="line">            <span class="keyword">while</span> (j&gt;<span class="number">0</span> &amp;&amp; array[j<span class="number">-1</span>] &gt; temp)&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'shift '</span> + array[j<span class="number">-1</span>]);</span><br><span class="line">                array[j] = array[j<span class="number">-1</span>];</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'insert '</span> + temp);</span><br><span class="line">            array[j] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> insertionSort_ = <span class="function"><span class="keyword">function</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.length,</span><br><span class="line">            j, temp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;length; i++)&#123;</span><br><span class="line">            j = i;</span><br><span class="line">            temp = array[i];</span><br><span class="line">            <span class="keyword">while</span> (j&gt;<span class="number">0</span> &amp;&amp; array[j<span class="number">-1</span>] &gt; temp)&#123;</span><br><span class="line">                array[j] = array[j<span class="number">-1</span>];</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            array[j] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å½’å¹¶æ’åº</span></span><br><span class="line">    <span class="keyword">this</span>.mergeSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        array = mergeSortRec(array);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> mergeSortRec = <span class="function"><span class="keyword">function</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> length = array.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(length === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(array);</span><br><span class="line">            <span class="keyword">return</span> array;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> mid = <span class="built_in">Math</span>.floor(length / <span class="number">2</span>),</span><br><span class="line">            left = array.slice(<span class="number">0</span>, mid),</span><br><span class="line">            right = array.slice(mid, length);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> merge(mergeSortRec(left), mergeSortRec(right));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span>(<span class="params">left, right</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> result = [],</span><br><span class="line">            il = <span class="number">0</span>,</span><br><span class="line">            ir = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(il &lt; left.length &amp;&amp; ir &lt; right.length) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(left[il] &lt; right[ir]) &#123;</span><br><span class="line">                result.push(left[il++]);</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                result.push(right[ir++]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (il &lt; left.length)&#123;</span><br><span class="line">            result.push(left[il++]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (ir &lt; right.length)&#123;</span><br><span class="line">            result.push(right[ir++]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(result);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¿«é€Ÿæ’åº</span></span><br><span class="line">    <span class="keyword">this</span>.quickSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        quick(array,  <span class="number">0</span>, array.length - <span class="number">1</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> partition = <span class="function"><span class="keyword">function</span>(<span class="params">array, left, right</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> pivot = array[<span class="built_in">Math</span>.floor((right + left) / <span class="number">2</span>)],</span><br><span class="line">            i = left,</span><br><span class="line">            j = right;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'pivot is '</span> + pivot + <span class="string">'; left is '</span> + left + <span class="string">'; right is '</span> + right);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">            <span class="keyword">while</span> (array[i] &lt; pivot) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'i = '</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (array[j] &gt; pivot) &#123;</span><br><span class="line">                j--;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'j = '</span> + j);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (i &lt;= j) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'swap '</span> + array[i] + <span class="string">' with '</span> + array[j]);</span><br><span class="line">                swap(array, i, j);</span><br><span class="line">                i++;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> quick = <span class="function"><span class="keyword">function</span>(<span class="params">array, left, right</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> index;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (array.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">            index = partition(array, left, right);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (left &lt; index - <span class="number">1</span>) &#123;</span><br><span class="line">                quick(array, left, index - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (index &lt; right) &#123;</span><br><span class="line">                quick(array, index, right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å †æ’åº</span></span><br><span class="line">    <span class="keyword">this</span>.heapSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> heapSize = array.length;</span><br><span class="line"></span><br><span class="line">        buildHeap(array);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (heapSize &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            heapSize--;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'swap ('</span> + + array[<span class="number">0</span>] + <span class="string">','</span> + array[heapSize] + <span class="string">')'</span>);</span><br><span class="line">            swap(array, <span class="number">0</span>, heapSize);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'heapify '</span> + array.join());</span><br><span class="line">            heapify(array, heapSize, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> buildHeap = <span class="function"><span class="keyword">function</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'building heap'</span>);</span><br><span class="line">        <span class="keyword">var</span> heapSize = array.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="built_in">Math</span>.floor(array.length / <span class="number">2</span>); i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            heapify(array, heapSize, i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'heap created: '</span> + array.join());</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> heapify = <span class="function"><span class="keyword">function</span>(<span class="params">array, heapSize, i</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> left = i * <span class="number">2</span> + <span class="number">1</span>,</span><br><span class="line">            right = i * <span class="number">2</span> + <span class="number">2</span>,</span><br><span class="line">            largest = i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (left &lt; heapSize &amp;&amp; array[left] &gt; array[largest]) &#123;</span><br><span class="line">            largest = left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (right &lt; heapSize &amp;&amp; array[right] &gt; array[largest]) &#123;</span><br><span class="line">            largest = right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Heapify Index = '</span>+ i + <span class="string">' and Heap Size = '</span> + heapSize);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (largest !== i) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'swap index '</span> + i + <span class="string">' with '</span> + largest + <span class="string">' ('</span> + + array[i] + <span class="string">','</span> + array[largest] + <span class="string">')'</span>);</span><br><span class="line">            swap(array, i, largest);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'heapify '</span> + array.join());</span><br><span class="line">            heapify(array, heapSize, largest);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.countingSort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> i,</span><br><span class="line">            maxValue = <span class="keyword">this</span>.findMaxValue(),</span><br><span class="line">            sortedIndex = <span class="number">0</span>,</span><br><span class="line">            counts = <span class="keyword">new</span> <span class="built_in">Array</span>(maxValue + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!counts[array[i]]) &#123;</span><br><span class="line">                counts[array[i]] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            counts[array[i]]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Frequencies: '</span> + counts.join());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; counts.length; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (counts[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                array[sortedIndex++] = i;</span><br><span class="line">                counts[i]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.bucketSort = <span class="function"><span class="keyword">function</span>(<span class="params">bucketSize</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> i,</span><br><span class="line">            minValue = <span class="keyword">this</span>.findMinValue(),</span><br><span class="line">            maxValue = <span class="keyword">this</span>.findMaxValue(),</span><br><span class="line">            BUCKET_SIZE = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'minValue '</span> + minValue);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'maxValue '</span> + maxValue);</span><br><span class="line"></span><br><span class="line">        bucketSize = bucketSize || BUCKET_SIZE;</span><br><span class="line">        <span class="keyword">var</span> bucketCount = <span class="built_in">Math</span>.floor((maxValue - minValue) / bucketSize) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">var</span> buckets = <span class="keyword">new</span> <span class="built_in">Array</span>(bucketCount);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'bucketSize = '</span> + bucketCount);</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            buckets[i] = [];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            buckets[<span class="built_in">Math</span>.floor((array[i] - minValue) / bucketSize)].push(array[i]);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'pushing item '</span> + array[i] + <span class="string">' to bucket index '</span> + <span class="built_in">Math</span>.floor((array[i] - minValue) / bucketSize));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        array = [];</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            insertionSort_(buckets[i]);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'bucket sorted '</span> + i + <span class="string">': '</span> + buckets[i].join());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; buckets[i].length; j++) &#123;</span><br><span class="line">                array.push(buckets[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.radixSort = <span class="function"><span class="keyword">function</span>(<span class="params">radixBase</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> i,</span><br><span class="line">            minValue = <span class="keyword">this</span>.findMinValue(),</span><br><span class="line">            maxValue = <span class="keyword">this</span>.findMaxValue(),</span><br><span class="line">            radixBase = radixBase || <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Perform counting sort for each significant digit), starting at 1</span></span><br><span class="line">        <span class="keyword">var</span> significantDigit = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (((maxValue - minValue) / significantDigit) &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'radix sort for digit '</span> + significantDigit);</span><br><span class="line">            array = countingSortForRadix(array, radixBase, significantDigit, minValue);</span><br><span class="line">            <span class="built_in">console</span>.log(array.join());</span><br><span class="line">            significantDigit *= radixBase;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> countingSortForRadix = <span class="function"><span class="keyword">function</span>(<span class="params">array, radixBase, significantDigit, minValue</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> i, countsIndex,</span><br><span class="line">            counts = <span class="keyword">new</span> <span class="built_in">Array</span>(radixBase),</span><br><span class="line">            aux = <span class="keyword">new</span> <span class="built_in">Array</span>(radixBase);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; radixBase; i++) &#123;</span><br><span class="line">            counts[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            countsIndex = <span class="built_in">Math</span>.floor(((array[i] - minValue) / significantDigit) % radixBase);</span><br><span class="line">            counts[countsIndex]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; radixBase; i++) &#123;</span><br><span class="line">            counts[i] += counts[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            countsIndex = <span class="built_in">Math</span>.floor(((array[i] - minValue) / significantDigit) % radixBase);</span><br><span class="line">            aux[--counts[countsIndex]] = array[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            array[i] = aux[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çº¿æ€§æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">this</span>.sequentialSearch = <span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;array.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (item === array[i])&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.findMaxValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> max = array[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;array.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (max &lt; array[i])&#123;</span><br><span class="line">                max = array[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.findMinValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> min = array[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;array.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (min &gt; array[i])&#123;</span><br><span class="line">                min = array[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">this</span>.binarySearch = <span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.quickSort();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> low = <span class="number">0</span>,</span><br><span class="line">            high = array.length - <span class="number">1</span>,</span><br><span class="line">            mid, element;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (low &lt;= high)&#123;</span><br><span class="line">            mid = <span class="built_in">Math</span>.floor((low + high) / <span class="number">2</span>);</span><br><span class="line">            element = array[mid];</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'mid element is '</span> + element);</span><br><span class="line">            <span class="keyword">if</span> (element &lt; item) &#123;</span><br><span class="line">                low = mid + <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'low is '</span> + low);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element &gt; item) &#123;</span><br><span class="line">                high = mid - <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'high is '</span> + high);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'found it'</span>);</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>9. ç®—æ³•æ¨¡å¼</strong></p><p>é€’å½’å®ç°æ–æ³¢é‚£å¥‘å‡½æ•°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num === <span class="number">1</span> || num === <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fibonacci(num - <span class="number">1</span>) + fibonacci(num - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ€å°‘ç¡¬å¸æ‰¾é›¶é—®é¢˜</p><p>åŠ¨æ€è§„åˆ’æ±‚è§£ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MinCoinChange</span>(<span class="params">coins</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> coins = coins; </span><br><span class="line">    <span class="keyword">var</span> cache = &#123;&#125;; </span><br><span class="line">    <span class="keyword">this</span>.makeChange = <span class="function"><span class="keyword">function</span>(<span class="params">amount</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span> (!amount) &#123; </span><br><span class="line">            <span class="keyword">return</span> [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cache[amount]) &#123; </span><br><span class="line">            <span class="keyword">return</span> cache[amount];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> min = [], newMin, newAmount;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;coins.length; i++)&#123; </span><br><span class="line">            <span class="keyword">var</span> coin = coins[i];</span><br><span class="line">            newAmount = amount - coin; </span><br><span class="line">            <span class="keyword">if</span> (newAmount &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                newMin = me.makeChange(newAmount); </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (newAmount &gt;= <span class="number">0</span> &amp;&amp; (newMin.length &lt; min.length<span class="number">-1</span> || !min.length)</span><br><span class="line">                &amp;&amp; (newMin.length || !newAmount) &#123;</span><br><span class="line">                min = [coin].concat(newMin); </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'new Min '</span> + min + <span class="string">' for '</span> + amount); </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (cache[amount] = min); </span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è´ªå¿ƒç®—æ³•æ±‚è§£ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MinCoinChange</span>(<span class="params">coins</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> coins = coins; </span><br><span class="line">    <span class="keyword">this</span>.makeChange = <span class="function"><span class="keyword">function</span>(<span class="params">amount</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> change = [],</span><br><span class="line">        total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=coins.length; i&gt;=<span class="number">0</span>; i--)&#123; </span><br><span class="line">            <span class="keyword">var</span> coin = coins[i];</span><br><span class="line">            <span class="keyword">while</span> (total + coin &lt;= amount) &#123; </span><br><span class="line">                change.push(coin);</span><br><span class="line">                total += coin; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> change;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minCoinChange = <span class="keyword">new</span> MinCoinChange([<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">25</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(minCoinChange.makeChange(<span class="number">36</span>));</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES5ä¸­çš„ç»§æ‰¿</title>
      <link href="/2019/03/04/ES5%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF/"/>
      <url>/2019/03/04/ES5%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<p>é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§æ˜¯ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚å…¶ä¸­ç»§æ‰¿æ˜¯æœ€éš¾ç†è§£çš„ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ã€‚<br>JSä¸­æœ¬èº«æ²¡æœ‰ä¸“é—¨ç»§æ‰¿çš„è¯­æ³•ï¼Œå®ƒæ˜¯ä½¿ç”¨å„ç§ä»£ç çš„æ¨¡æ‹Ÿæ¥å®ç°çš„ã€‚å³ä½¿ES6æœ‰äº†æ­£çœŸçš„ç»§æ‰¿è¯­æ³•ï¼Œå…¶æœ¬è´¨ä¹Ÿæ˜¯ES5ä¸­ç»§æ‰¿çš„è¯­æ³•ç³–ã€‚ç›®å‰ES5ç»§æ‰¿æœ€è¢«äººæ´¥æ´¥ä¹é“çš„å°±æ˜¯å°¼å¤æ‹‰æ–¯çš„è‘—åä¹¦ç±ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­è®°å½•çš„6ä¸­æ–¹æ³•ã€‚æœ¬æ–‡ä¹Ÿæ˜¯æ‘˜è‡ªè¿™æœ¬æœ¬ä¹¦çš„è¿™éƒ¨åˆ†çš„æ ¸å¿ƒå†…å®¹ï¼Œå¹¶æ•´ç†ç»™å¤§å®¶å‘ˆç°å‡ºæ¥ã€‚</p><ol><li><p>åŸå‹é“¾ç»§æ‰¿<br> åŸå‹é“¾ç»§æ‰¿æ˜¯æœ€ä¸ºç»å…¸çš„ä¸€ç§ç»§æ‰¿ï¼Œå…¶ç»§æ‰¿æ–¹å¼å°±æ˜¯<strong>å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»çš„å®ä¾‹</strong>ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè¿™ç§ç»§æ‰¿çš„ä¾‹å­ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.hobbies = [<span class="string">"coding"</span>,<span class="string">"running"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æˆ‘æ˜¯ï¼š"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Man.prototype = <span class="keyword">new</span> Person();<span class="comment">//åŸå‹ç»§æ‰¿</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lufei = <span class="keyword">new</span> Man(<span class="string">"æµ·è´¼ç‹çš„ç”·äºº"</span>);</span><br><span class="line">lufei.sayName();<span class="comment">// æˆ‘æ˜¯ï¼šæµ·è´¼ç‹çš„ç”·äºº</span></span><br></pre></td></tr></table></figure><p> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­ç±»çš„å¯¹è±¡<code>lufei</code>å·²ç»æ‹¥æœ‰çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¯´æ˜ç»§æ‰¿æˆåŠŸäº†ã€‚ä¸Šé¢æœ€é‡è¦çš„ä¸€è¡Œä»£ç æ˜¯ç¬¬14è¡Œï¼Œå°è¯äº†<strong>å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»çš„å®ä¾‹</strong>ã€‚åŸå‹ç»§æ‰¿å…¶å®å°±æ˜¯åˆ©ç”¨åŸå‹é“¾æ¥å®ç°çš„ï¼Œå¦‚æœåœ¨å­ç±»ä¸­æ²¡æœ‰æ‰¾åˆ°æŸä¸ªå±æ€§å’Œæ–¹æ³•å°±ä¼šå»å­ç±»çš„åŸå‹ä¸­å»æ‰¾ï¼Œå¦‚æœçˆ¶ç±»çš„å®ä¾‹æ²¡æœ‰åˆä¼šå»çˆ¶ç±»çš„åŸå‹å»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°Objectçš„åŸå‹ä¸ºæ­¢ã€‚<br> åŸå‹ç»§æ‰¿æ˜¯æœ€ç®€å•æœ€é•¿ç”¨çš„ä¸€ç§ç»§æ‰¿æ–¹å¼ï¼Œä½†æ˜¯å®ƒæœ‰è‡ªå·±çš„ç¼ºç‚¹ï¼š</p><blockquote><p><strong>ç¼ºç‚¹1ï¼šçˆ¶ç±»ä¸­å¼•ç”¨ç±»å‹çš„å±æ€§ï¼Œä¼šè¢«å­ç±»å…±äº«ã€‚</strong><br> å¦‚ä¸Šä¾‹ä¸­çš„hobbieså±æ€§ï¼Œæ¯ä¸ªå­ç±»çš„å®ä¾‹éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªhobbieså±æ€§ã€‚å¦‚æœæŸä¸ªå­ç±»ä¸é‡å†™hobbieså¹¶ä¸”ç»™ä»–æ·»åŠ äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ²¡æœ‰é‡å†™hobbiesçš„å­ç±»çš„è¿™ä¸ªå€¼éƒ½å°†ä¼šæ”¹å˜ï¼ˆåŒä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚<br><strong>ç¼ºç‚¹2ï¼šåˆ›å»ºå­ç±»çš„æ—¶å€™ï¼Œæ— æ³•è°ƒç”¨çˆ¶å…ƒç´ çš„æ„é€ å‡½æ•°ã€‚</strong><br> å¦‚ä¸Šä¾‹ä¸­çš„<code>this.name = name;</code>åœ¨çˆ¶ç±»ä¸­å·²æœ‰ç›¸åŒçš„ä»£ç æ— æ³•åšåˆ°å¤ç”¨ã€‚</p></blockquote></li><li><p>å€Ÿç”¨æ„é€ å‡½æ•°å®ç°ç»§æ‰¿<br> å€Ÿç”¨æ„é€ å‡½æ•°å®ç°çš„ç»§æ‰¿æ˜¯è§£å†³åŸå‹ç»§æ‰¿çš„ç¼ºç‚¹è€Œå‡ºç°çš„ï¼Œä»–çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯<strong>å­ç±»é€šè¿‡callï¼ˆæˆ–è€…applyï¼‰è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</strong>ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hobbies = [<span class="string">"coding"</span>,<span class="string">"running"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>); <span class="comment">// å€Ÿç”¨æ„é€ å‡½æ•°çš„ç»§æ‰¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lufei = <span class="keyword">new</span> Man();</span><br><span class="line"><span class="keyword">var</span> nami = <span class="keyword">new</span> Man();</span><br><span class="line">lufei.hobbies.push(<span class="string">"eat meat"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(lufei.hobbies); <span class="comment">// ["coding", "running", "eat meat"]</span></span><br><span class="line"><span class="built_in">console</span>.log(nami.hobbies);Â <span class="comment">// ["coding", "running"]</span></span><br></pre></td></tr></table></figure><p> å³ä¸Šå¯çŸ¥ï¼Œå­ç±»çš„ä¸¤ä¸ªå¯¹è±¡<code>lufei</code>å’Œ<code>nami</code>éƒ½æ‹¥æœ‰äº†çˆ¶ç±»çš„å±æ€§ï¼Œæ‰€ä»¥ç»§æ‰¿æˆåŠŸã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼ŒåŒæ—¶çˆ¶ç±»çš„å¼•ç”¨å±æ€§ä¹Ÿä¸å†å…±äº«ã€‚<br> è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹ï¼š</p><blockquote><p><strong>ç¼ºç‚¹1ï¼šçˆ¶ç±»åŸå‹ä¸­çš„å±æ€§å’Œæ–¹æ³•æ— æ³•ç»§æ‰¿ã€‚</strong><br><strong>ç¼ºç‚¹2ï¼šå¯¹æ¯ä¸ªå­ç±»å¯¹è±¡æ¥è¯´ï¼Œçˆ¶ç±»ä¸­çš„å‡½æ•°å±æ€§éƒ½æ˜¯ä¸åŒçš„å‡½æ•°ï¼Œä»£ç æ— æ³•å¤ç”¨ã€‚</strong></p></blockquote></li><li><p>ç»„åˆç»§æ‰¿<br> ç»„åˆç»§æ‰¿åˆç§°ä¸ºä¼ªç»å…¸ç»§æ‰¿ï¼Œä»–çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯<strong>åŸå‹ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„ç»§æ‰¿åˆäºŒä¸ºä¸€</strong>ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.hobbies = [<span class="string">"coding"</span>,<span class="string">"running"</span>];</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æˆ‘æ˜¯ï¼š"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>,name); <span class="comment">// å€Ÿç”¨æ„é€ å‡½æ•°çš„ç»§æ‰¿</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œå¯ä»¥å†™å…¶ä»–çš„å­ç±»ç‹¬æœ‰çš„å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Man.prototype = <span class="keyword">new</span> Person();<span class="comment">// åŸå‹ç»§æ‰¿éƒ¨åˆ†</span></span><br><span class="line">Man.prototype.constructor = Man;<span class="comment">// ä¿®å¤æ„é€ å™¨çš„æŒ‡å‘</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lufei = <span class="keyword">new</span> Man(<span class="string">"è·¯é£"</span>);</span><br><span class="line"><span class="keyword">var</span> nami = <span class="keyword">new</span> Man(<span class="string">"å¨œç¾"</span>);</span><br><span class="line">lufei.hobbies.push(<span class="string">"eat meat"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(lufei.hobbies); <span class="comment">// ["coding", "running", "eat meat"]</span></span><br><span class="line"><span class="built_in">console</span>.log(nami.hobbies);Â <span class="comment">// ["coding", "running"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å­ç±»æ‹¥æœ‰çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•</span></span><br><span class="line">lufei.sayName(); <span class="comment">// æˆ‘æ˜¯ï¼šè·¯é£</span></span><br><span class="line">nami.sayName(); <span class="comment">// æˆ‘æ˜¯ï¼šå¨œç¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç±»çš„å±æ€§æ–¹æ³•å¯ä»¥å¤ç”¨</span></span><br><span class="line"><span class="built_in">console</span>.log(lufei.sayName === nami.sayName);<span class="comment">// true</span></span><br></pre></td></tr></table></figure><p> å³ä¸Šå¯çŸ¥ï¼Œå­ç±»çš„ä¸¤ä¸ªå¯¹è±¡<code>lufei</code>å’Œ<code>nami</code>éƒ½æ‹¥æœ‰äº†çˆ¶ç±»çš„å±æ€§ï¼Œæ‰€ä»¥ç»§æ‰¿æˆåŠŸã€‚ç»„åˆç»§æ‰¿æ˜¯æœ€å¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼ä¹‹ä¸€ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼ŒåŒæ—¶çˆ¶ç±»çš„å¼•ç”¨å±æ€§ä¹Ÿä¸å†å…±äº«ã€‚</p><blockquote><p><strong>ç¼ºç‚¹ï¼šè°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œæ¯”è¾ƒæ¶ˆè€—å†…å­˜ã€‚</strong><br> ä¸€æ¬¡åœ¨ç¬¬10è¡Œï¼Œä¸€æ¬¡å†ç¬¬14è¡Œã€‚</p></blockquote></li><li><p>åŸå‹å¼ç»§æ‰¿<br> è¦è§£å†³ç»„åˆç»§æ‰¿çš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å…ˆè¯´ä¸€ä¸‹åŸå‹å¼ç»§æ‰¿ï¼Œå®ƒæ˜¯é“æ ¼æ‹‰æ–¯æå‡ºçš„ä¸€ç§ç»§æ‰¿æ–¹å¼ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯<strong>å€ŸåŠ©åŸå‹ï¼Œç”¨å·²æœ‰çš„å¯¹è±¡åˆ›å»ºå¯¹è±¡ã€‚</strong>ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>)</span>&#123;<span class="comment">// é€šè¿‡åŸå‹åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">    F.prototype = o;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">"äºº"</span>,</span><br><span class="line">    sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"æˆ‘æ˜¯ï¼š"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lufei = object(person);</span><br><span class="line">lufei.name = <span class="string">"è·¯é£"</span>;</span><br><span class="line">lufei.sayName();<span class="comment">// æˆ‘æ˜¯ï¼šè·¯é£</span></span><br></pre></td></tr></table></figure><p> å³ä¸Šå¯çŸ¥ï¼Œå­ç±»çš„å¯¹è±¡<code>lufei</code>æ‹¥æœ‰äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œç»§æ‰¿æˆåŠŸã€‚ä½†æ˜¯æˆ‘ä»¬æ¯æ¬¡å¾—è‡ªå·±å†™ä¸€ä¸ªç±»ä¼¼äºä¸Šé¢çš„<code>object</code>æ–¹æ³•ã€‚ES5è€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠè¿™ä¸ªæ–¹æ³•è§„èŒƒåŒ–äº†ï¼Œå°±æ˜¯å¤§åé¼é¼çš„<code>Object.create()</code>æ–¹æ³•ï¼Œå…¶æœ¬è´¨å°±æ˜¯ä¸Šé¢çš„<code>object</code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ¥å—2ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¦å¤åˆ¶çš„å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯<code>Object.defineProperties()</code>å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ç›¸åŒçš„ç»“æ„ã€‚æ‰€ä»¥ä¸Šé¢ç¬¬13è¡Œå’Œç¬¬14è¡Œå¯ä»¥æ”¹å†™ä¸ºï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lufei = <span class="built_in">Object</span>.create(person,&#123;</span><br><span class="line">    name : &#123;<span class="comment">//è¿™ä¸ªå¯¹è±¡æ˜¯å±æ€§æè¿°ç¬¦é‡Œé¢é‚£æ ·çš„å¯¹è±¡</span></span><br><span class="line">        value:<span class="string">"è·¯é£"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p> è¿™ç§æ–¹å¼æ¯”è¾ƒæ–¹ä¾¿ï¼Œå®ƒè·³è¿‡äº†åˆ›å»ºå­ç±»è¿™ä¸€æ­¥ï¼Œç›´æ¥åˆ›å»ºäº†å­ç±»å¯¹è±¡ã€‚</p><blockquote><p><strong>ç¼ºç‚¹1ï¼šå­ç±»è‡ªå·±ç‹¬ç‰¹çš„å±æ€§æˆ–æ–¹æ³•ï¼Œæ˜¯æ— æ³•å¤ç”¨çš„ã€‚</strong><br><strong>ç¼ºç‚¹2ï¼šæ²¡æœ‰å­ç±»çš„æ¦‚å¿µï¼Œç›´æ¥åˆ›å»ºäº†å­ç±»å¯¹è±¡ã€‚</strong></p></blockquote></li><li><p>å¯„ç”Ÿå¼ç»§æ‰¿<br> å¯„ç”Ÿå¼ç»§æ‰¿è§£å†³äº†å­ç±»å¯¹è±¡æ‹¥æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•çš„é—®é¢˜ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯<strong>åœ¨åŸå‹å¼ç»§æ‰¿çš„å¤–é¢å†åŒ…è£…ä¸€å±‚ï¼Œä½¿å¾—è¿”å›çš„å¯¹è±¡å¯ä»¥æ·»åŠ è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚</strong>ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ES5çš„<code>Object.create</code>äº†ï¼Œä½ å¯ä»¥ç†è§£æˆåŸå‹å¼ç»§æ‰¿é‡Œé¢çš„<code>object</code>å‡½æ•°ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">"äºº"</span>,</span><br><span class="line">    sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"æˆ‘æ˜¯ï¼š"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObject</span>(<span class="params">obj</span>)</span>&#123;<span class="comment">// åˆ›å»ºå­ç±»å¯¹è±¡ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">var</span> newObj = <span class="built_in">Object</span>.create(obj);<span class="comment">// åŸå‹å¼ç»§æ‰¿</span></span><br><span class="line">    newObj.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123; <span class="comment">// è¿™é‡Œç»™æ¯ä¸ªå­å¯¹è±¡æ·»åŠ æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"å¤§å®¶å¥½ï¼ï¼ï¼"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ... è¿™é‡Œå¯ä»¥æ·»åŠ å…¶ä»–çš„å±æ€§æˆ–æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lufei = createObject(person);</span><br><span class="line">lufei.name = <span class="string">"è·¯é£"</span>;</span><br><span class="line">lufei.sayName();<span class="comment">// æˆ‘æ˜¯ï¼šè·¯é£</span></span><br><span class="line">lufei.sayHello();<span class="comment">// å¤§å®¶å¥½ï¼ï¼ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nami = createObject(person);</span><br><span class="line">nami.name = <span class="string">"å¨œç¾"</span>;</span><br><span class="line">nami.sayName();<span class="comment">// æˆ‘æ˜¯ï¼šå¨œç¾</span></span><br><span class="line">nami.sayHello();<span class="comment">// å¤§å®¶å¥½ï¼ï¼ï¼</span></span><br></pre></td></tr></table></figure><p> ç”±ä¸Šå¯çŸ¥ï¼Œå­ç±»çš„å¯¹è±¡<code>lufei</code>å’Œ<code>nami</code>å³æ‹¥æœ‰äº†çˆ¶ç±»çš„æ–¹æ³•ä¹Ÿæ‹¥æœ‰äº†å­ç±»è‡ªå·±ç‹¬ç‰¹çš„æ–¹æ³•<code>sayHello</code>ï¼Œç»§æ‰¿æˆåŠŸã€‚ä½†æ˜¯å®ƒä¹Ÿæ˜¯ç›´æ¥åˆ›å»ºäº†å­å¯¹è±¡çš„ã€‚</p><blockquote><p><strong>ç¼ºç‚¹ï¼šæ²¡æœ‰å­ç±»çš„æ¦‚å¿µï¼Œç›´æ¥åˆ›å»ºäº†å­ç±»å¯¹è±¡ã€‚</strong></p></blockquote></li><li><p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿<br> å¯„ç”Ÿç»„åˆå¼è¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§ï¼Œé€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•ã€‚å…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯<strong>ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿çˆ¶ç±»çš„åŸå‹ï¼Œç„¶åå†å°†ç»“æœæŒ‡å®šç»™å­ç±»çš„åŸå‹ï¼›å­ç±»çš„æ„é€ å‡½æ•°å€ŸåŠ©æ„é€ å‡½æ•°æ¥ç»§æ‰¿çˆ¶ç±»ã€‚</strong>ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> prototype = <span class="built_in">Object</span>.create(superType.prototype); <span class="comment">// å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿çˆ¶ç±»çš„åŸå‹</span></span><br><span class="line">    prototype.constructor = subType; <span class="comment">// ä¿®å¤å­ç±»æ„é€ å‡½æ•°çš„æŒ‡å‘</span></span><br><span class="line">    subType.prototype = prototype; <span class="comment">// ä¿®å¤å­ç±»åŸå‹çš„æŒ‡å‘</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hobbies = [<span class="string">"coding"</span>,<span class="string">"running"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>); <span class="comment">// å€ŸåŠ©æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inheritPrototype(Man, Person);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lufei = <span class="keyword">new</span> Man();</span><br><span class="line"><span class="keyword">var</span> nami = <span class="keyword">new</span> Man();</span><br><span class="line">lufei.hobbies.push(<span class="string">"eat meat"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(lufei.hobbies); <span class="comment">// ["coding", "running", "eat meat"]</span></span><br><span class="line"><span class="built_in">console</span>.log(nami.hobbies);Â <span class="comment">// ["coding", "running"]</span></span><br></pre></td></tr></table></figure><p> å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿è¢«èª‰ä¸ºå¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿æ–¹å¼ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç§ç»§æ‰¿æ–¹å¼ã€‚</p><blockquote><p><strong>ç¼ºç‚¹ï¼šé™¤äº†ä»£ç æ¯”è¾ƒå¤šå¤–ï¼Œæ²¡æœ‰å…¶ä»–çš„ç¼ºç‚¹äº†ï¼</strong></p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸå‹ </tag>
            
            <tag> ç»§æ‰¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES5é¢å‘å¯¹è±¡åŸºç¡€</title>
      <link href="/2019/03/03/ES5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/"/>
      <url>/2019/03/03/ES5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>é¢å‘å¯¹è±¡çš„çŸ¥è¯†æ—¶JSä¸­çš„ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼Œæˆ‘ä»¬ä»Šå¤©å­¦ä¹ ä¸€ä¸‹ES5é¢å‘å¯¹è±¡çš„åŸºç¡€å†…å®¹ã€‚</p><h2 id="ä¸€ã€-åˆ›å»ºå¯¹è±¡"><a href="#ä¸€ã€-åˆ›å»ºå¯¹è±¡" class="headerlink" title="ä¸€ã€ åˆ›å»ºå¯¹è±¡"></a>ä¸€ã€ åˆ›å»ºå¯¹è±¡</h2><ol><li>å·¥å‚æ¨¡å¼<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.name = name;</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;    </span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = createPerson(<span class="string">"Orange"</span>);</span><br></pre></td></tr></table></figure></li></ol><p>ç¼ºç‚¹ï¼šæ— æ³•è¾¨åˆ«æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><ol start="2"><li>JSONå¯¹è±¡<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">    name:<span class="string">"Orange"</span>,</span><br><span class="line">    sayName:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol><p>ä¼˜ç‚¹ï¼šç®€å•ã€‚<br>ç¼ºç‚¹ï¼šæ¯æ¬¡åªèƒ½åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä»£ç æ— æ³•å¤ç”¨ã€‚</p><ol start="3"><li>æ„é€ å‡½æ•°<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"Orange"</span>);</span><br><span class="line"></span><br><span class="line">person1.sayName();   <span class="comment">//"Orange"</span></span><br></pre></td></tr></table></figure></li></ol><p>ä¼˜ç‚¹ï¼šå¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œå¯ä»¥è¾¨åˆ«æ˜¯å¯¹è±¡ã€‚<br>ä¸‹é¢æˆ‘ä»¬ä¸»è¦è®¨è®ºçš„ä¹Ÿæ­£æ˜¯ä½¿ç”¨æ„é€ æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡ã€‚</p><h2 id="äºŒã€-ä¸ä½¿ç”¨newå…³é”®å­—ä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#äºŒã€-ä¸ä½¿ç”¨newå…³é”®å­—ä¼šå‘ç”Ÿä»€ä¹ˆ" class="headerlink" title="äºŒã€ ä¸ä½¿ç”¨newå…³é”®å­—ä¼šå‘ç”Ÿä»€ä¹ˆ"></a>äºŒã€ ä¸ä½¿ç”¨newå…³é”®å­—ä¼šå‘ç”Ÿä»€ä¹ˆ</h2><p>ä¸ä½¿ç”¨newçš„æ—¶å€™ç›¸å½“äºæ—¶å…¨å±€å˜é‡windowè°ƒç”¨è¯¥æ–¹æ³•ï¼Œthisä¼šç»‘å®šåœ¨å…¨å±€å˜é‡ä¸Šã€‚ç”±äºæ²¡æœ‰è¿”å›å€¼ï¼Œç»“æœæ˜¯undefinedã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;<span class="comment">// ä¸ä½¿ç”¨newæ—¶ éä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šåœ¨å…¨å±€å˜é‡windowä¸Šäº†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = Person(<span class="string">"Orange"</span>);<span class="comment">// æ–¹æ³•çš„è°ƒç”¨</span></span><br><span class="line"><span class="built_in">console</span>.log(person1);<span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p><h2 id="ä¸‰ã€-newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æœ‰è¿”å›å€¼æ€ä¹ˆåŠ"><a href="#ä¸‰ã€-newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æœ‰è¿”å›å€¼æ€ä¹ˆåŠ" class="headerlink" title="ä¸‰ã€ newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æœ‰è¿”å›å€¼æ€ä¹ˆåŠ"></a>ä¸‰ã€ newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æœ‰è¿”å›å€¼æ€ä¹ˆåŠ</h2><p>å¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆnewå‡ºæ¥çš„ç»“æœå°±æ˜¯è¿™ä¸ªå¯¹è±¡ï¼›å¦‚æœè¿”å›çš„æ˜¯éå¯¹è±¡çš„ï¼Œé‚£ä¹ˆnewè¿”å›çš„ä¸æ²¡æœ‰returnè¯­å¥ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰newçš„æ—¶å€™ï¼Œå°±æ¯”å¦‚ä¸Šé¢è¿™ç§æƒ…å†µï¼Œé‚£å°±æ˜¯æ–¹æ³•è¿”å›ä»€ä¹ˆç»“æœå°±æ˜¯ä»€ä¹ˆäº†ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"Person1"</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">haha</span>:<span class="string">"æˆ‘æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡"</span>&#125;;<span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"Person2"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span>;<span class="comment">// è¿”å›ä¸€ä¸ªéå¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person1();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person2();</span><br><span class="line"><span class="built_in">console</span>.log(person1);<span class="comment">// &#123;haha: "æˆ‘æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person2);<span class="comment">// Person2Â &#123;name: "Person2"&#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="å››ã€-æˆå‘˜æ–¹æ³•"><a href="#å››ã€-æˆå‘˜æ–¹æ³•" class="headerlink" title="å››ã€ æˆå‘˜æ–¹æ³•"></a>å››ã€ æˆå‘˜æ–¹æ³•</h2><ol><li><p>ç»™å•ä¸ªå¯¹è±¡æ·»åŠ æˆå‘˜æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line">person1.name = <span class="string">"Orange"</span>;</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(person1.name);<span class="comment">// "Orange"</span></span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li><li><p>ç»™å¤šä¸ªå¯¹è±¡æ·»åŠ æˆå‘˜æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;<span class="comment">//æ‰€æœ‰çš„å¯¹è±¡å…¬ç”¨çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">20</span>;<span class="comment">//æ‰€æœ‰çš„å¯¹è±¡å…¬ç”¨çš„å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"Orange"</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"å°æ˜"</span>);</span><br><span class="line">person1.age = <span class="number">21</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person1.name);<span class="comment">// "Orange"</span></span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">// "å°æ˜"</span></span><br><span class="line"><span class="built_in">console</span>.log(person1.age);<span class="comment">// 21</span></span><br><span class="line"><span class="built_in">console</span>.log(person2.age);<span class="comment">// 20</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="äº”ã€-ç§æœ‰å˜é‡"><a href="#äº”ã€-ç§æœ‰å˜é‡" class="headerlink" title="äº”ã€ ç§æœ‰å˜é‡"></a>äº”ã€ ç§æœ‰å˜é‡</h2><p>æ„é€ å‡½æ•°ä¸­varå£°æ˜çš„å˜é‡æ˜¯ç§æœ‰å˜é‡ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">21</span>;<span class="comment">//è¿™é‡Œç›¸å½“äºç§æœ‰å˜é‡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(person1.age);<span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p><h2 id="å…­ã€-é™æ€æ–¹æ³•"><a href="#å…­ã€-é™æ€æ–¹æ³•" class="headerlink" title="å…­ã€ é™æ€æ–¹æ³•"></a>å…­ã€ é™æ€æ–¹æ³•</h2><p>æ·»åŠ åˆ°æ„é€ å‡½æ•°ä¸Šçš„æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œæ·»åŠ åˆ°æ„é€ å‡½æ•°ä¸Šçš„å˜é‡æ˜¯é™æ€å˜é‡ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.age = <span class="number">20</span>;<span class="comment">//é™æ€å˜é‡</span></span><br><span class="line">Person.name = <span class="string">"éª—ä½ çš„"</span>; <span class="comment">// è¿™æ¡è¯­å¥ä¼šå¿½ç•¥ å› ä¸ºnameæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ ä¸èƒ½ä¿®æ”¹</span></span><br><span class="line">Person.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;<span class="comment">//é™æ€æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"sayName:"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"Orange"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.name);<span class="comment">// "Orange"</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.name);<span class="comment">// "Person" è¿™é‡Œæ˜¯ç±»çš„åç§° å“ˆå“ˆ</span></span><br><span class="line"><span class="comment">// console.log(person.name);// è¿™ä¸ªä¼šæŠ¥é”™ é™æ€å±æ€§å±äºç±» è€Œä¸æ˜¯å±äºå¯¹è±¡ </span></span><br><span class="line"><span class="comment">// person.sayName(); // è¿™ä¸ªä¼šæŠ¥é”™ é™æ€æ–¹æ³•å±äºç±» è€Œä¸æ˜¯å±äºå¯¹è±¡</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.age); <span class="comment">// 20</span></span><br><span class="line">Person.sayName();<span class="comment">// sayName:Person</span></span><br></pre></td></tr></table></figure></p><h2 id="ä¸ƒã€-åŸå‹"><a href="#ä¸ƒã€-åŸå‹" class="headerlink" title="ä¸ƒã€ åŸå‹"></a>ä¸ƒã€ åŸå‹</h2><p>ä¸Šé¢è¯´è¿‡ç»™å¤šä¸ªå¯¹è±¡æ·»åŠ æˆå‘˜æ–¹æ³•ï¼Œåªè¦åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ <code>this.æ–¹æ³•å = æ–¹æ³•</code>å³å¯ï¼Œä½†æ˜¯è¿™æ ·ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¸åŒå¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±ä¼šå¢å¤§å†…å­˜çš„å¼€é”€ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯æŠŠæ–¹æ³•æ”¾åœ¨å‡½æ•°çš„å¤–é¢ï¼Œç„¶ååœ¨å‡½æ•°å†…éƒ¨å»å¼•ç”¨åŒä¸€ä¸ªå‡½æ•°ã€‚è¿™æ ·è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å´å¤±å»äº†å°è£…æ€§ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ€ç»ˆåŠæ³•å°±æ˜¯â€”â€”åŸå‹ã€‚</p><p>æ¯ä¸€æ„é€ å‡½æ•°å†™å®Œä»¥åï¼Œå¼•æ“ä¼šåŠ åŸå‹çš„å§”æ‰˜ï¼Œå°±æ¯”å¦‚ä¸Šé¢çš„Personç±»ï¼ˆå‡½æ•°ï¼‰<strong>å®šä¹‰</strong>å®Œäº†ä»¥åï¼Œå¼•æ“ä¼šåŠ ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure></p><p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºPersonåŠ äº†ä¸€ä¸ªåå«<code>prototype</code>çš„é™æ€å˜é‡ï¼Œè¿™ä¸ªå˜é‡å°±æ˜¯Personçš„åŸå‹ã€‚ç”±äºå¯¹è±¡æ˜¯æ— æ³•è®¿é—®é™æ€å˜é‡çš„ï¼Œæ‰€ä»¥æµè§ˆå™¨ç»™æ¯ä¸€ä¸ªå¯¹è±¡åˆåŠ äº†ä¸€ä¸ª<code>__proto__</code>çš„å±æ€§ä¹ŸæŒ‡å‘äº†è¿™ä¸ªåŸå‹ã€‚ç›¸å½“äºå¼•æ“åˆæ‰§è¡Œäº†ä¸‹é¢çš„ä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.__proto__ = Person.prototype;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼š<strong><code>å¯¹è±¡.__proto__å±æ€§</code> å’Œ <code>æ„é€ å‡½æ•°.prototypeå±æ€§</code> éƒ½æŒ‡å‘äº†è¯¥ç±»çš„åŸå‹</strong>ã€‚<br>ä¸‹é¢æˆ‘ä»¬æŠŠè¿™å‰ªä¸æ–­ç†è¿˜ä¹±çš„åŸå‹ç”»ä¸€å¼ å›¾å§ï¼š<br><img src="/2019/03/03/ES5é¢å‘å¯¹è±¡åŸºç¡€/1.png" alt="prototypeç¤ºæ„å›¾"></p><p>ç”±ä¸Šå›¾å¯çŸ¥ï¼ŒåŸå‹å¯¹è±¡æœ‰ä¸€ä¸ª<code>constructor</code>çš„å±æ€§æŒ‡å‘äº†æ„é€ æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.constructor === Person;<span class="comment">// true</span></span><br><span class="line">person.__proto__.constructor === Person;<span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p>ç”±ä¸Šé¢<code>Person.prototype = new Object();</code>å¯çŸ¥<code>Person.prototype</code>å…¶å®æ˜¯Objectçš„å¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯å¯¹è±¡é‚£ä¹ˆå°±æœ‰<code>__proto__</code>å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.__proto__ === <span class="built_in">Object</span>.prototype;<span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p>å…¶å®<code>Object.prototype</code>ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡é‚£ä¹ˆä»–çš„åŸå‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ‰“å°ä¸€ä¸‹å‘ç°ä»–çš„åŸå‹æ˜¯<code>null</code>ï¼Œä¸Šå›¾ä¹Ÿå¯ä»¥çœ‹å‡ºã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__);<span class="comment">// null</span></span><br></pre></td></tr></table></figure></p><p>è¯´äº†è¿™ä¹ˆä¸€å¤§å †ç»ˆäºçŸ¥é“äº†åŸå‹æ˜¯ä»€ä¹ˆäº†ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªæ›´é‡è¦çš„ä¸œè¥¿å°±æ˜¯åŸå‹é“¾ã€‚<br>å¦‚æœä¸€ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±æ²¡æœ‰å®šä¹‰çš„å±æ€§ï¼Œé‚£ä¹ˆä»–å°±ä¼šä»ä»–ä»¬åŸå‹ä¸­æŸ¥æ‰¾ï¼Œçœ‹æœ‰æ²¡æœ‰å®šä¹‰è¯¥å±æ€§ï¼Œå¦‚æœåŸå‹ä¸­æ²¡æœ‰å°±ä¼šå»åŸå‹çš„åŸå‹å»å¯»æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°é¡¶å±‚çš„Objectç±»çš„å¯¹è±¡ï¼ˆæœ€é¡¶å±‚çš„nullä¸ç”¨æ‰¾äº†ï¼Œè‚¯å®šæ²¡æœ‰ï¼‰ï¼Œè¿™æ¡ç”±åŸå‹è¿èµ·æ¥çš„é“¾æ¡å«åšåŸå‹é“¾ã€‚</p><p>é‚£æˆ‘ä»¬çœ‹ä¸€ä¸ªä¸œè¥¿ï¼Œä¸Šé¢<code>person.constructor</code>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯<code>Person</code>å‡½æ•°ã€‚å› ä¸º<code>person</code>å¯¹è±¡æ²¡æœ‰<code>constructor</code>å±æ€§ï¼Œæ‰€ä»¥å»<code>person</code>çš„åŸå‹ä¸­æ‰¾ä¹Ÿå°±æ˜¯<code>person.__proto__</code>è€Œå®ƒé‡Œé¢æ‰¾åˆ°äº†ï¼ŒæŒ‡å‘çš„å°±æ˜¯<code>Person</code>å‡½æ•°ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨åŸå‹æ¥å®šä¹‰å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">"Orange"</span>;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">person2.name = <span class="string">"å°æ˜"</span>;</span><br><span class="line">person1.sayName();<span class="comment">// "Orange"</span></span><br><span class="line">person2.sayName();<span class="comment">// "å°æ˜"</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ­¥éª¤ï¼Œ<code>person1</code>è°ƒç”¨<code>sayName</code>çš„æ—¶å€™ç”±äº<code>person1</code>è‡ªå·±æ²¡æœ‰<code>sayName</code>è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±æ˜¯å»å®ƒçš„åŸå‹å»æ‰¾ä¹Ÿå°±æ˜¯<code>Person.prototype</code>ï¼Œå‘ç°æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ï¼Œè€Œæ–¹æ³•ä¸­<code>this.name</code>ï¼Œç”±äºè‡ªå·±å¹¶æ²¡æœ‰<code>name</code>è¿™æ ·ä¸€ä¸ªå±æ€§ï¼Œä¹Ÿä¼šåœ¨åŸå‹ä¸­æ‰¾ï¼Œæœ€åæ‰¾åˆ°äº†æ˜¯â€Orangeâ€ã€‚<code>person2</code>æ‰¾<code>sayName</code>è·Ÿä¹‹å‰çš„æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯<code>person2</code>æœ‰<code>name</code>è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å»åŸå‹é“¾ä¸­æ‰¾äº†ï¼Œè¯¥å±æ€§çš„å€¼æ˜¯â€å°æ˜â€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES5å¯¹è±¡ </tag>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
            <tag> åŸå‹ </tag>
            
            <tag> OOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSä¸­å±æ€§æè¿°ç¬¦</title>
      <link href="/2019/03/03/JS%E4%B8%AD%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6/"/>
      <url>/2019/03/03/JS%E4%B8%AD%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>å±æ€§æè¿°ç¬¦æ˜¯ES5ä¸­çš„ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚å®ƒå¯ä»¥å¯¹å¯¹è±¡åšä¸€äº›ç‰¹å®šçš„é«˜çº§æ“ä½œï¼Œä»Šå¤©æˆ‘ä»¬å°±å­¦ä¹ ä¸€ä¸‹ES5ä¸­çš„å±æ€§æè¿°ç¬¦ã€‚<br>ES5ä¸­çš„å±æ€§æè¿°ç¬¦æ˜¯ç”±<code>Objectç±»</code>çš„ä¸€ä¸ªé™æ€æ–¹æ³•<code>defineProperty</code>æ¥è®¾ç½®çš„ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>å±æ€§æ“ä½œçš„å¯¹è±¡ã€å±æ€§åå’Œä¸€ä¸ªå±æ€§æè¿°ç¬¦çš„å¯¹è±¡</strong>ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    value:<span class="string">"123"</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">//123</span></span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å±æ€§æè¿°ç¬¦å°†å¯¹è±¡objçš„aå±æ€§çš„å€¼è®¾ç½®ä¸ºâ€123â€ã€‚<br>å±æ€§æè¿°ç¬¦æ˜¯ç”±ç¬¬ä¸‰ä¸ªå‚æ•°æ¥å†³å®šå±æ€§å¯ä»¥åšå“ªäº›æ“ä½œï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥è®¾ç½®ä»¥ä¸‹çš„å€¼ï¼š</p><table><thead><tr><th>æè¿°ç¬¦çš„å€¼</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>value</td><td>å€¼</td><td>undefined</td></tr><tr><td>writable</td><td>æ˜¯å¦å¯å†™</td><td>true</td></tr><tr><td>configurable</td><td>æ˜¯å¦å¯é…ç½®</td><td>true</td></tr><tr><td>enumerable</td><td>æ˜¯å¦å¯æšä¸¾</td><td>true</td></tr><tr><td>set</td><td>è®¾ç½®å±æ€§çš„å‡½æ•°</td><td>undefined</td></tr><tr><td>get</td><td>è·å–å±æ€§çš„å‡½æ•°</td><td>undefined</td></tr></tbody></table><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ä¸€ç®€ç»ä¸Šé¢çš„è¿™äº›å€¼ï¼Œç”±äº<code>value</code>å¾ˆç®€å•ï¼Œä¸Šé¢å·²ç»åšè¿‡è§£é‡Šï¼Œå°±ä¸å†é‡å¤äº†ã€‚</p><ol><li><p>writable<br> writableè¡¨ç¤ºæ˜¯å¦å¯å†™ï¼Œå¦‚æœå…¶å€¼è®¾ç½®ä¸º<code>false</code>ï¼Œé‚£ä¹ˆä¿®æ”¹æ—¶ä¼šé™é»˜å¤±è´¥ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šæŠ¥é”™TypeErrorã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    writable:<span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line">obj.a = <span class="string">"123"</span>;<span class="comment">//ç”±äºwritableæ˜¯falseï¼Œè¿™é‡Œä¼šé™é»˜å¤±è´¥</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">//a</span></span><br></pre></td></tr></table></figure></li><li><p>configurable<br> configurableè¡¨ç¤ºæ˜¯å¦å¯é…ç½®ï¼Œå¦‚æœå…¶å€¼è®¾ç½®ä¸º<code>false</code>ï¼Œé‚£ä¹ˆå°†å±æ€§æè¿°ç¬¦é‡æ–°è®¾ç½®çš„æ—¶å€™ä¼šæŠ¥é”™TypeErrorï¼ˆæ— è®ºæ˜¯å¦æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ï¼›åŒæ—¶<code>delete</code>è¯¥å±æ€§çš„æ—¶å€™ä¼šé™é»˜å¤±è´¥ï¼Œä¸¥æ ¼æ¨¡å¼ä¼šæŠ¥é”™TypeErrorã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    configurable:<span class="literal">false</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    configurable:<span class="literal">true</span>,<span class="comment">// å°†configurableä¸ºfalseçš„é‡æ–°å¼€å¯ä¼šç›´æ¥æŠ¥é”™</span></span><br><span class="line">    value:<span class="string">"111"</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj.a);</span><br></pre></td></tr></table></figure><p> ä¸‹é¢ç»™å‡ºä¸€ä¸ªdeleteçš„ä¾‹å­ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    configurable:<span class="literal">false</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">delete</span> obj.a;<span class="comment">// è¿™ä¸ªåœ°æ–¹ä¼šé™é»˜å¤±è´¥ ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">//"a"</span></span><br></pre></td></tr></table></figure><p> configurableæœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„çš„ï¼š</p><p> 2.1 æ‰€è°“çš„ä¸å¯é…ç½®æ˜¯ä¸èƒ½ä¿®æ”¹ï¼Œå¦‚æœé‡æ–°è®¾ç½®ç›¸åŒçš„å±æ€§æè¿°ç¬¦æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    configurable:<span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    configurable:<span class="literal">false</span><span class="comment">// è¿™ä¸ªåœ°æ–¹å¹¶ä¸ä¼šæŠ¥é”™ å› ä¸ºå±æ€§æè¿°ç¬¦å¹¶æ²¡æœ‰æ”¹å˜</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">//"a"</span></span><br></pre></td></tr></table></figure><p> 2.2 å¦‚æœconfigurableä¸ºfalseçš„æ—¶å€™ä»ç„¶å¯ä»¥æŠŠwritableä»trueæ”¹æˆfalseï¼Œä½†æ˜¯ä¸èƒ½æŠŠwritableä»falseä¿®æ”¹æˆtrueã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    configurable:<span class="literal">false</span>,</span><br><span class="line">    writable:<span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    writable:<span class="literal">false</span> <span class="comment">// writableä»trueè®¾ç½®ä¸ºfalseæ˜¯å¯ä»¥çš„</span></span><br><span class="line">&#125;);</span><br><span class="line">obj.a = <span class="string">"b"</span>;<span class="comment">// writableä¸ºfalse é™é»˜å¤±è´¥</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">//"a"</span></span><br></pre></td></tr></table></figure><p> 2.3 å¦‚æœconfigurableä¸ºfalseå¹¶ä¸”writableä»trueçš„æ—¶å€™ï¼Œé‚£ä¹ˆä¿®æ”¹valueæ˜¯å¯ä»¥çš„ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    configurable:<span class="literal">false</span>,</span><br><span class="line">    writable:<span class="literal">true</span>,</span><br><span class="line">    value:<span class="string">"111"</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    value:<span class="string">"222"</span> <span class="comment">// valueå…¶å®æ˜¯ç”±writableæ¥å†³å®šçš„</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">//"222"</span></span><br></pre></td></tr></table></figure></li><li><p>enumerable<br> enumerableè¡¨ç¤ºæ˜¯å¦å¯æšä¸¾ï¼Œå¦‚æœè®¾ç½®ä¸ºfalseï¼Œé‚£ä¹ˆfor-inä¸­è·å–ä¸åˆ°è¯¥å€¼ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"a"</span>,</span><br><span class="line">    b:<span class="string">"b"</span>,</span><br><span class="line">    c:<span class="string">"c"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"b"</span>,&#123;</span><br><span class="line">    enumerable:<span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj[key]);<span class="comment">// ä¾æ¬¡æ‰“å°"a" "c"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> é€šå¸¸åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦å±äºä¸€ä¸ªå¯¹è±¡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>inæ“ä½œç¬¦</code>å’Œ<code>hasOwnPropertyæ–¹æ³•</code>ï¼Œå¯¹äºä¸å¯æšä¸¾çš„å±æ€§ï¼Œä»–ä»¬è¿”å›çš„éƒ½æ˜¯trueï¼Œå¦‚ä¸Šé¢çš„ä¸å¯æšä¸¾çš„å±æ€§<code>b</code>ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"b"</span> <span class="keyword">in</span> obj);<span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.hasOwnProperty(<span class="string">"b"</span>));<span class="comment">// true</span></span><br></pre></td></tr></table></figure><p> é‚£ä¹ˆå¦‚ä½•åŒºåˆ†æŸä¸ªå±æ€§æ˜¯ä¸å¯æšä¸¾çš„å‘¢ï¼Ÿå¯ä»¥åˆ©ç”¨å¯¹è±¡çš„<code>propertyIsEnumerable</code>æ–¹æ³•ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(obj.propertyIsEnumerable(<span class="string">"b"</span>));<span class="comment">// false</span></span><br></pre></td></tr></table></figure><p> å¦‚æœè¦è·å–å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼ˆé”®ï¼‰ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj));<span class="comment">// è·å–æ‰€æœ‰å¯æšä¸¾çš„å±æ€§ ç»“æœæ˜¯ ["a", "c"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames(obj));<span class="comment">// è·å–æ‰€æœ‰çš„å±æ€§ï¼Œä¸ç®¡æ˜¯å¦å¯ä»¥æšä¸¾ ç»“æœæ˜¯ ["a", "b", "c"]</span></span><br></pre></td></tr></table></figure></li><li><p>setå’Œget<br> setå’Œgeté€šå¸¸æ˜¯æ–¹æ³•ï¼Œåˆ†åˆ«å®šä¹‰äº†è®¾ç½®å€¼å’Œè·å–å€¼æ˜¯çš„é€»è¾‘ï¼Œæˆ‘ä»¬è¿™é‡Œç»™å‡ºä¸€ä¸ªä¾‹å­ï¼Œå½“è®¾ç½®äº†ä¸€ä¸ªæ•°å€¼è¯»å–çš„æ—¶å€™è¿”å›è¿™ä¸ªæ•°å€¼çš„å¹³æ–¹ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    set : <span class="function"><span class="keyword">function</span> (<span class="params">_a</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._a = _a;<span class="comment">//è¿™ä¸ªåœ°æ–¹å¿…é¡»æ³¨æ„ è¿™é‡Œä½¿ç”¨çš„æ˜¯_aè€Œä¸æ˜¯a å› ä¸ºå¦‚æœæ˜¯açš„è¯ä¼šé™·å…¥æ­»å¾ªç¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">    get : <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._a * <span class="keyword">this</span>._a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">obj.a = <span class="number">4</span>;<span class="comment">//è¿™é‡Œä¼šè°ƒç”¨setæ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">// è¿™é‡Œä¼šè°ƒç”¨getæ–¹æ³• æ‰“å°16</span></span><br></pre></td></tr></table></figure><p> setå’Œgetä¹Ÿå¯ä»¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šï¼Œè€Œä¸ä½¿ç”¨å±æ€§æè¿°ç¬¦ï¼Œå¦‚ä¸‹ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    set a(_a)&#123;<span class="comment">//è¿™ä¸ªåœ°æ–¹å’Œå‡½æ•°å±æ€§çš„å†™æ³•æœ‰ä¸€ç‚¹ç‚¹çš„åŒºåˆ«</span></span><br><span class="line">        <span class="keyword">this</span>._a = _a;</span><br><span class="line">    &#125;,</span><br><span class="line">    get a()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._a * <span class="keyword">this</span>._a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.a = <span class="number">4</span>;<span class="comment">//è¿™é‡Œä¼šè°ƒç”¨setæ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">// è¿™é‡Œä¼šè°ƒç”¨getæ–¹æ³• æ‰“å°16</span></span><br></pre></td></tr></table></figure><p> é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœåŒä¸€æ¬¡è®¾ç½®å±æ€§æè¿°ç¬¦ä¸­æ—¢æœ‰getå’Œsetåˆæœ‰valueé‚£ä¹ˆä¼šä»¥å“ªä¸ªä¸ºå‡†å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹æµè§ˆå™¨å°±ä¼šæŠ¥é”™ï¼Œä¹Ÿå°±æ˜¯ä¸å…è®¸è¿™ä¹ˆåšã€‚<br> å¦‚æœå¤šæ¬¡è®¾ç½®åŒä¸€ä¸ªå±æ€§çš„å±æ€§æè¿°ç¬¦é‚£ä¹ˆåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="number">123</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    set :<span class="function"><span class="keyword">function</span> (<span class="params">_a</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._a = _a;</span><br><span class="line">    &#125;,</span><br><span class="line">    get :<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._a * <span class="keyword">this</span>._a;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">obj.a = <span class="number">4</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">// 16</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    writable:<span class="literal">true</span>,</span><br><span class="line">    value:<span class="number">321</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.a);<span class="comment">// 321</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>è¡¥å……</strong></p><ol><li><p>åœ¨è°ƒç”¨<code>Object.defineProperty</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ª<strong>æ–°çš„å±æ€§</strong>çš„æ—¶å€™ï¼Œå¦‚æœä¸æŒ‡å®š<code>writable</code>ï¼Œ<code>configurable</code>ï¼Œ<code>enumerable</code>çš„æ—¶å€™é»˜è®¤å€¼æ˜¯falseï¼Œå¦‚æœåªæ˜¯ä¿®æ”¹å·²å®šä¹‰çš„å±æ€§çš„æ—¶å€™é‚£ä¹ˆå°±æ˜¯é»˜è®¤å€¼trueã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="string">"111"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"a"</span>,&#123;</span><br><span class="line">    value:<span class="string">"a"</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"b"</span>,&#123;</span><br><span class="line">    value:<span class="string">"b"</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj));<span class="comment">//bæ˜¯æ–°çš„ æ‰€ä»¥æ˜¯ä¸å¯æšä¸¾çš„ æ‰€ä»¥æ‰“å°["a"]</span></span><br></pre></td></tr></table></figure></li><li><p>è·å–å±æ€§æè¿°ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨<code>Object.getOwnPropertyDescriptor</code>æ–¹æ³•ã€‚</p><pre><code class="JavaScript"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj,<span class="string">"a"</span>);</code></pre></li><li><p>æ‰¹é‡è®¾ç½®å¤šä¸ªå±æ€§æè¿°ç¬¦çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨<code>Object.defineProperties</code>æ–¹æ³•ã€‚</p><pre><code class="JavaScript"><span class="built_in">Object</span>.defineProperties(obj,{    a:{<span class="attr">value</span>:<span class="string">"aaa"</span>,<span class="attr">writable</span>:<span class="literal">false</span>},    b:{<span class="attr">value</span>:<span class="string">"bbb"</span>,<span class="attr">writable</span>:<span class="literal">false</span>},});</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å±æ€§æè¿°ç¬¦ </tag>
            
            <tag> defineProperty </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>thisåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/2019/02/27/this%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/"/>
      <url>/2019/02/27/this%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<p><code>this</code>æ˜¯JavaScriptä¸­çš„ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå®ƒçš„å€¼å¹¶ä¸æ˜¯ç”±å£°æ˜çš„ä½ç½®æ¥å†³å®šçš„ï¼Œè€Œæ˜¯ç”±è°ƒç”¨çš„ä½ç½®æ¥å†³å®šã€‚æ­£æ˜¯å› ä¸ºè¿™ä¸ªåŸå› åœ¨ä¸åŒçš„è¯­å¢ƒä¸‹å®ƒçš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥å®ƒæˆäº†é¢è¯•å®˜æœ€å–œæ¬¢è€ƒå¯Ÿçš„å†…å®¹ã€‚</p><p>é€šå¸¸<code>this</code>ç”±ä¸‹é¢è¿™å››æ¡æ³•åˆ™å°±å¯ä»¥ç¡®å®šï¼š</p><ol><li><p>newç»‘å®šï¼ŒæŒ‡å‘åˆ›å»ºçš„å¯¹è±¡ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Student(<span class="string">"å°æ˜"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s.name);<span class="comment">//å°æ˜</span></span><br></pre></td></tr></table></figure><p> é€šè¿‡<code>new</code>å…³é”®å­—åˆ›å»ºçš„å¯¹è±¡ï¼Œé‚£ä¹ˆæ„é€ æ–¹æ³•ä¸­çš„<code>this</code>æŒ‡å‘è¯¥å¯¹è±¡ã€‚</p></li><li><p>callã€applyã€bindç­‰æ˜¾å¼ç»‘å®šã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    name : <span class="string">"å°æ"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    name : <span class="string">"å°ç§‹"</span></span><br><span class="line">&#125;;</span><br><span class="line">sayName.call(obj1);<span class="comment">//å°æ</span></span><br><span class="line">sayName.call(obj2);<span class="comment">//å°ç§‹</span></span><br></pre></td></tr></table></figure></li><li><p>æ‹¥æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡çš„éšå¼ç»‘å®šã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name : <span class="string">"å°ç§‹"</span>,</span><br><span class="line">    sayName : <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.sayName();<span class="comment">//å°ç§‹</span></span><br></pre></td></tr></table></figure></li><li><p>é»˜è®¤ç»‘å®šï¼šä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®š<code>undefined</code>ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šå…¨å±€å˜é‡ï¼ˆæµè§ˆå™¨ç¯å¢ƒä¸‹æ˜¯<code>window</code>ï¼‰ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"å°æ"</span>;</span><br><span class="line">sayName();<span class="comment">//å°æ</span></span><br></pre></td></tr></table></figure></li></ol><p><code>this</code>çš„ç»‘å®šä¹Ÿæ˜¯æœ‰ä¼˜å…ˆçº§çš„ï¼Œå®ƒçš„ä¼˜å…ˆçº§ä¹Ÿæ˜¯æŒ‰ç…§ä¸Šé¢4æ¡ä»1åˆ°4çš„ã€‚æ²¡é”™ï¼Œä½ æ²¡æœ‰çœ‹é”™newç»‘å®šæ¯”æ˜¾å¼ç»‘å®šçš„ä¼˜å…ˆçº§è¿˜è¦é«˜ï¼Œè™½ç„¶è¿™ç§æƒ…å†µå¹¶ä¸å¤šè§ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¾›å¤§å®¶å‚è€ƒï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name:<span class="string">"å°æ"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> StudentWithBind = Student.bind(obj);<span class="comment">//bindç»‘å®š</span></span><br><span class="line"><span class="keyword">var</span> swb = <span class="keyword">new</span> StudentWithBind(<span class="string">"å°ç§‹"</span>);<span class="comment">//newç»‘å®š</span></span><br><span class="line"><span class="built_in">console</span>.log(swb.name);<span class="comment">//å°ç§‹</span></span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢è¿™4æ¡è§„åˆ™é€‚ç”¨äºå¤§é‡çš„æƒ…å†µï¼Œä½†æ˜¯ä¿—è¯è¯´çš„å¥½â€œå‡¡æ˜¯éƒ½æœ‰ä¾‹å¤–â€ï¼Œä¸‹é¢2æ¡ç‰¹æ®Šæƒ…å†µè¦æ ¼å¤–æ³¨æ„ã€‚</p><ol><li><p>æ˜¾ç¤ºç»‘å®šï¼ˆcallã€applyã€bindï¼‰å¦‚æœç»‘å®šçš„æ˜¯<code>null</code>æˆ–è€…<code>undefined</code>ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šç»‘å®šå¯¹åº”çš„å€¼ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šå…¨å±€å˜é‡ï¼ˆæµè§ˆå™¨ç¯å¢ƒä¸‹æ˜¯<code>window</code>ï¼‰ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name : <span class="string">"å°æ"</span>,</span><br><span class="line">    sayName :sayName</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"å°ç§‹"</span>;</span><br><span class="line">obj.sayName.call(<span class="literal">null</span>);<span class="comment">//å°ç§‹</span></span><br><span class="line">sayName.call();<span class="comment">//å°ç§‹</span></span><br></pre></td></tr></table></figure><p> ç”±äºç»‘å®š<code>null</code>æˆ–è€…<code>undefined</code>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šç»‘å®šå…¨å±€å˜é‡<code>window</code>è¿™æ ·ä¼šå¾ˆå±é™©ã€‚å¦‚æœè¿™é‡Œéè¦ç»‘å®šä¸€ä¸ªå¯¹è±¡ä½†æ˜¯åˆä¸ç»‘å®šå…¨å±€å˜é‡å¯ä»¥ç»‘å®šä¸€ä¸ªç©ºå¯¹è±¡å°±æ¯”å¦‚<code>{}</code>æˆ–è€…<code>Object.create(null)</code>ï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯åè€…ä¸ä¼šåˆ›å»º<code>Object.prototype</code>è¿™ä¸ªå§”æ‰˜ï¼Œä¹Ÿå°±æ˜¯åè€…æ¯”å‰è€…æ›´ç©ºã€‚</p></li><li><p>é—´æ¥å¼•ç”¨ï¼Œæœ¬è´¨ä¸Šæ˜¯é»˜è®¤ç»‘å®šã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    name : <span class="string">"å°æ"</span>,</span><br><span class="line">    sayName : sayName</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    name : <span class="string">"å°ç§‹"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"å°èŠ¹"</span>;</span><br><span class="line">(obj2.sayName = obj1.sayName)();<span class="comment">//"å°èŠ¹"</span></span><br></pre></td></tr></table></figure><p> JSä¸­æ¯ä¸€ä¸ªè¡¨è¾¾å¼éƒ½æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œä¸Šé¢<code>obj2.sayName = obj1.sayName</code>ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œè¿”å›å€¼æ˜¯å‡½æ•°<code>sayName</code>çš„å¼•ç”¨ã€‚è€ŒæŠŠå¼•ç”¨æ‹¬èµ·æ¥æ˜¯ä¸ºäº†ä¿è¯è¿™æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œåé¢çš„æ‹¬å·æ˜¯å‡½æ•°çš„è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™é‡Œç›¸å½“äºæ˜¯<code>(sayName)()</code>ï¼Œè¿›ä¸€æ­¥ç›¸å½“äº<code>sayName()</code>ï¼Œå¾ˆæ˜¾ç„¶ç›¸å½“äºæ˜¯<code>window</code>æ¥è°ƒç”¨çš„ã€‚</p></li><li>ç®­å¤´å‡½æ•°ï¼Œæ ¹æ®æ‰€å¤„çš„ç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰æ¥å†³å®šã€‚ <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sayName = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"å°æ˜"</span></span><br><span class="line">    <span class="comment">//ç«‹å³æ‰§è¡Œå‡½æ•° è¿™ä¸ªåœ°æ–¹çš„thisæ˜¯window</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;<span class="comment">//ç®­å¤´å‡½æ•°ä¸­çš„thisç”±æ‰€å¤„çš„ä½œç”¨åŸŸæ¥å†³å®š ä¹Ÿå°±æ˜¯window</span></span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"å°å"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name:<span class="string">"å°èŠ³"</span></span><br><span class="line">&#125;;</span><br><span class="line">sayName();<span class="comment">//å°å</span></span><br><span class="line">sayName.call(obj);<span class="comment">//sayNameå¯¹åº”çš„ç®­å¤´å‡½æ•°æ‰€å¤„çš„ä½œç”¨åŸŸå·²æŒ‡å‘window å³ä½¿callä¹Ÿä¸èƒ½æ”¹å˜æŒ‡å‘ æ•…æ‰“å°å°å</span></span><br></pre></td></tr></table></figure></li></ol><p>å…¶ä»–æƒ…å†µï¼š</p><ol><li><p>HTMLäº‹ä»¶ä¸­çš„thisæŒ‡å‘è¯¥DOMå…ƒç´ ã€‚</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"handleClick(this)"</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span><span class="params">(obj)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">        obj.innerHTML = <span class="string">"ç‚¹å‡»äº†"</span>;<span class="comment">//æŒ‰é’®çš„æ–‡æ¡ˆä¼šä¿®æ”¹ä¸º ç‚¹å‡»äº†</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>JQueryè·å–åˆ°çš„DOMå…ƒç´ ï¼Œ<code>this</code>æŒ‡å‘è¯¥DOMå…ƒç´ ï¼Œ<code>$(this)</code>æ˜¯è¯¥DOMå¯¹è±¡çš„JQueryå°è£…å¯¹è±¡ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#id"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);<span class="comment">//é€‰ä¸­çš„DOMå…ƒç´ </span></span><br><span class="line">    <span class="built_in">console</span>.log($(<span class="keyword">this</span>));<span class="comment">//é€‰ä¸­DOMå…ƒç´ çš„JQueryå°è£…å¯¹è±¡</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> this </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨console.logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡</title>
      <link href="/2019/02/21/%E4%BD%BF%E7%94%A8console-log%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%89%93%E5%8D%B0%E5%9B%BE%E7%89%87/"/>
      <url>/2019/02/21/%E4%BD%BF%E7%94%A8console-log%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%89%93%E5%8D%B0%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p>åœ¨é¡¹ç›®çš„å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä½¿ç”¨<code>console.log</code>æ–¹æ³•åœ¨æ§åˆ¶å°è¾“å‡ºæ•°æ®ï¼Œçœ‹æ•°æ®æ˜¯å¦æ­£ç¡®ã€‚<code>console</code>æ˜¯å…¨å±€å˜é‡<code>window</code>ï¼ˆæˆ–<code>global</code>ï¼‰ä¸‹çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°ä¸€ä¸‹è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/1.png" alt="consoleå¯¹è±¡çš„æ–¹æ³•"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é™¤äº†<code>log</code>æ–¹æ³•ä»¥å¤–è¿˜æœ‰<code>info</code>ã€<code>warn</code>ã€<code>error</code>ç­‰æ–¹æ³•ï¼Œç±»ä¼¼äºå¸¸ç”¨çš„æ—¥å¿—ç³»ç»Ÿä¸­çš„ä¸åŒçº§åˆ«ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"log"</span>);</span><br><span class="line"><span class="built_in">console</span>.info(<span class="string">"info"</span>);</span><br><span class="line"><span class="built_in">console</span>.warn(<span class="string">"warn"</span>);</span><br><span class="line"><span class="built_in">console</span>.error(<span class="string">"error"</span>);</span><br></pre></td></tr></table></figure></p><p>æ˜¾ç¤ºå‡ºæ¥çš„æ•ˆæœåœ¨<code>Chrome</code>é‡Œé¢çš„æ•ˆæœå¦‚ä¸‹:</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/2.png" alt="Chromeä¸‹ä¸åŒçº§åˆ«çš„æ‰“å°"></p><p>å…¶ä¸­<code>log</code>å’Œ<code>info</code>çš„åŒºåˆ«æœ‰ç‚¹ä¸å¤ªæ˜æ˜¾ï¼Œæˆ‘ä»¬åœ¨<code>Firefox</code>ä¸‹å†æ¬¡æ‰“å°å¯ä»¥çœ‹åˆ°<code>info</code>çº§åˆ«çš„å·¦è¾¹æœ‰ä¸ªå›¾æ ‡:</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/3.png" alt="Firefoxä¸‹ä¸åŒçº§åˆ«çš„æ‰“å°"></p><p>é™¤äº†è¿™å‡ ä¸ªä¸åŒçº§åˆ«çš„æ‰“å°å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªä½¿ç”¨çš„æ¯”è¾ƒå¤šæ–¹æ³•å°±æ˜¯<code>console.table</code>ï¼Œå®ƒå¯ä»¥ç”¨è¡¨æ ¼åˆ—å‡ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼š</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/4.png" alt="console.tableç”¨æ³•"></p><p>æœ€åå†ç®€ç»ä¸€ä¸ªå¯ä»¥æ¸…ç©ºæ§åˆ¶å°çš„ä¸€ä¸ªæ–¹æ³•å°±æ˜¯<code>console.clear()</code>ï¼Œå…¶ä»–çš„æ–¹æ³•å¤§å®¶å¯ä»¥è‡ªå·±è¯•è¯•ï¼Œè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ã€‚</p><p>è¯´äº†è¿™ä¹ˆå¤šæˆ‘ä»¬å›å½’åˆ°æœ€å¸¸ç”¨çš„<code>console.log()</code>å§ï¼Œä»–å¯ä»¥æ‰“å°ä¸€äº›æ•°æ®ï¼Œä½†æ˜¯å¾ˆå¤šäººä¸çŸ¥é“å…¶å®å®ƒè¿˜å¯ä»¥æ·»åŠ å ä½ç¬¦ï¼Œç±»ä¼¼äºCè¯­è¨€çš„<code>printfå‡½æ•°</code>ï¼Œå…·ä½“å¯ä»¥ä½¿ç”¨çš„å ä½ç¬¦å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center">å ä½ç¬¦</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">%s</td><td style="text-align:center">å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:center">%d æˆ–è€… %i</td><td style="text-align:center">æ•´æ•°</td></tr><tr><td style="text-align:center">%f</td><td style="text-align:center">æµ®ç‚¹æ•°</td></tr><tr><td style="text-align:center">%o</td><td style="text-align:center">å¯å±•å¼€çš„DOM</td></tr><tr><td style="text-align:center">%O</td><td style="text-align:center">åˆ—å‡ºDOMçš„å±æ€§</td></tr><tr><td style="text-align:center">%c</td><td style="text-align:center">æ ¹æ®æä¾›çš„cssæ ·å¼æ ¼å¼åŒ–å­—ç¬¦ä¸²</td></tr></tbody></table><p>æˆ‘ä»¬è¯•ä¸€ä¸‹å‰ä¸‰ä¸ªï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"æ‰“å°çš„å­—ç¬¦ä¸²æ˜¯ï¼š%s"</span>,<span class="string">"JavaScriptå¾ˆç®€å•"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"æ‰“å°çš„æ•´æ•°æ˜¯ï¼š%d"</span>,<span class="number">123.456</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"æ‰“å°çš„æµ®ç‚¹æ•°æ˜¯ï¼š%f"</span>,<span class="number">123.456</span>);</span><br></pre></td></tr></table></figure></p><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/5.png" alt="å¸¦å ä½ç¬¦çš„æ‰“å°"></p><p><code>console.log(&quot;%o&quot;,document.body);</code>çš„ç»“æœå¤§è‡´å¦‚ä¸‹ï¼š</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/6.png" alt="%oå ä½ç¬¦çš„ç»“æœ"></p><p><code>console.log(&quot;%O&quot;,document.body);</code>çš„ç»“æœå¤§è‡´å¦‚ä¸‹ï¼š</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/7.png" alt="%Oå ä½ç¬¦çš„ç»“æœ"></p><p>æ‰€æœ‰å ä½ç¬¦ä¸­æœ€ç‰›é€¼çš„å½“ç„¶æ˜¯<code>%c</code>äº†ï¼Œå› ä¸ºä»–å¯ä»¥æ·»åŠ æ ·å¼ï¼Œè¿™æ ·å°±å¯ä»¥ç¾åŒ–æˆ‘ä»¬çš„æ‰“å°æ•ˆæœäº†ã€‚å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"%cç¥å¥‡çš„console"</span>,<span class="string">"font-size: 24px;font-style: italic;color: brown;"</span>);</span><br></pre></td></tr></table></figure></p><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/8.png" alt="%cå ä½ç¬¦çš„ç»“æœ"></p><p>æœ€åæˆ‘ä»¬å›å½’ä¸»é¢˜ï¼Œæ‰“å°ä¸€å¼ å›¾ç‰‡ï¼Œæ€è·¯å°±æ˜¯ä½¿ç”¨<code>background-image</code>æ¥æ·»åŠ ä¸€å¼ èƒŒæ™¯å›¾ç‰‡ã€‚è¿™é‡Œéœ€è¦è¦æ³¨æ„çš„æ˜¯ï¼Œè®¾ç½®èƒŒæ™¯ä»¥åè¦æœ‰å†…å®¹ï¼Œä¸ç„¶è¿˜æ˜¯ä¸ä¼šæ˜¾ç¤ºï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ·»åŠ æ ·å¼è®©å†…å®¹æ’‘å¼€ï¼Œå¤§å®¶å¯ä»¥è¯•è¯•ï¼‰ã€‚æˆ‘ä»¬è¿™é‡Œéšä¾¿å†™ä¸ªå†…å®¹å°±æ¯”å¦‚ä¸€ä¸ªâ€œ+â€ï¼Œå½“ç„¶æˆ‘ä»¬è¿˜è¦è®¾ç½®èƒŒæ™¯å›¾ç‰‡æ˜¾ç¤ºå¤§å°ï¼Œå¹¶ä¸”è®©å†…å®¹é€æ˜ï¼ˆä¸æ˜¾ç¤ºå†…å®¹ï¼‰ã€‚ä¸ºäº†æ–¹ä¾¿ä»£ç çš„é˜…è¯»ï¼Œæ ·å¼éƒ¨åˆ†æˆ‘ä½¿ç”¨äº†ES6çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"%c+"</span>,</span><br><span class="line">  <span class="string">`font-size: 1px;</span></span><br><span class="line"><span class="string">  padding: 122px 217px;</span></span><br><span class="line"><span class="string">  background-image: url(http://imgsrc.baidu.com/forum/w=580/sign=780874ff6e380cd7e61ea2e59145ad14/fb20952bd40735fa2ebbc5f695510fb30e2408ea.jpg);</span></span><br><span class="line"><span class="string">  background-size: contain;</span></span><br><span class="line"><span class="string">  background-repeat: no-repeat;</span></span><br><span class="line"><span class="string">  color: transparent;`</span>);</span><br></pre></td></tr></table></figure></p><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/02/21/ä½¿ç”¨console-logåœ¨æ§åˆ¶å°æ‰“å°å›¾ç‰‡/9.gif" alt="console.logæ‰“å°å›¾ç‰‡"></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> æ§åˆ¶å°å›¾ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šç¨‹åºæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/02/21/%E3%80%8A%E7%A8%8B%E5%BA%8F%E6%98%AF%E6%80%8E%E4%B9%88%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/02/21/%E3%80%8A%E7%A8%8B%E5%BA%8F%E6%98%AF%E6%80%8E%E4%B9%88%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘çœ‹äº†çŸ¢æ³½ä¹…é›„[æ—¥]çš„å¦ä¸€æœ¬ä¹¦ã€Šç¨‹åºæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ã€‹ï¼ŒåŒæ ·æŠŠå¤§å­¦å­¦åˆ°çš„çŸ¥è¯†åˆå¤ä¹ äº†ä¸€éï¼Œä¸»è¦åŒ…æ‹¬è®¡ç®—æœºç»„æˆåŸç†ã€æ“ä½œç³»ç»Ÿã€æ•°å­—é€»è¾‘ã€æ•°æ®ç»“æ„ã€ç¼–ç¨‹è¯­è¨€ç­‰çŸ¥è¯†ã€‚ä¸‹é¢æ˜¯æˆ‘è®°å½•çš„ä¸€äº›ä¹¦ä¸­çš„é‡ç‚¹ï¼š</p><p><img src="/2019/02/21/ã€Šç¨‹åºæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€Šç¨‹åºæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ã€‹"></p><hr><p>CPU æ˜¯è‹±æ–‡ Central Processing Unitï¼ˆä¸­å¤®å¤„ç†å™¨ï¼‰çš„ç¼©å†™ï¼Œç›¸å½“äºè®¡ç®—æœºçš„å¤§è„‘ï¼Œå®ƒçš„å†…éƒ¨ç”±æ•°ç™¾ä¸‡è‡³æ•°äº¿ä¸ªæ™¶ä½“ç®¡æ„æˆã€‚</p><p>CPU å’Œå†…å­˜æ˜¯ç”±è®¸å¤šæ™¶ä½“ç®¡ç»„æˆçš„ç”µå­éƒ¨ä»¶ï¼Œé€šå¸¸ç§°ä¸º ICï¼ˆIntegrated Circuitï¼Œé›†æˆç”µè·¯ï¼‰ã€‚ä»åŠŸèƒ½æ–¹é¢æ¥çœ‹ï¼Œå¦‚å›¾ 1-2 æ‰€ç¤ºï¼ŒCPU çš„å†…éƒ¨ç”±å¯„å­˜å™¨ã€æ§åˆ¶å™¨ã€è¿ç®—å™¨å’Œæ—¶é’Ÿå››ä¸ªéƒ¨åˆ†æ„æˆï¼Œå„éƒ¨åˆ†ä¹‹é—´ç”±ç”µæµä¿¡å·ç›¸äº’è¿é€šã€‚å¯„å­˜å™¨ å¯ç”¨æ¥æš‚å­˜æŒ‡ä»¤ã€æ•°æ®ç­‰å¤„ç†å¯¹è±¡ï¼Œå¯ä»¥å°†å…¶çœ‹ä½œæ˜¯å†…å­˜çš„ä¸€ç§ã€‚</p><p>ä¸€ä¸ª CPU å†…éƒ¨ä¼šæœ‰ 20ï½100 ä¸ªå¯„å­˜å™¨ã€‚æ§åˆ¶å™¨ è´Ÿè´£æŠŠå†…å­˜ä¸Šçš„æŒ‡ä»¤ã€æ•°æ®ç­‰è¯»å…¥å¯„å­˜å™¨ï¼Œå¹¶æ ¹æ®æŒ‡ä»¤çš„æ‰§è¡Œç»“æœæ¥æ§åˆ¶æ•´ä¸ªè®¡ç®—æœºã€‚è¿ç®—å™¨ è´Ÿè´£è¿ç®—ä»å†…å­˜è¯»å…¥å¯„å­˜å™¨çš„æ•°æ®ã€‚æ—¶é’Ÿ è´Ÿè´£å‘å‡º CPU å¼€å§‹è®¡æ—¶çš„æ—¶é’Ÿä¿¡å·ã€‚ä¸è¿‡ï¼Œä¹Ÿæœ‰äº›è®¡ç®—æœºçš„æ—¶é’Ÿä½äº CPU çš„å¤–éƒ¨ã€‚</p><p>é€šå¸¸æ‰€è¯´çš„å†…å­˜æŒ‡çš„æ˜¯è®¡ç®—æœºçš„ä¸»å­˜å‚¨å™¨ï¼ˆmain memoryï¼‰ï¼Œç®€ç§°ä¸»å­˜ã€‚ä¸»å­˜é€šè¿‡æ§åˆ¶èŠ¯ç‰‡ç­‰ä¸ CPU ç›¸è¿ï¼Œä¸»è¦è´Ÿè´£å­˜å‚¨æŒ‡ä»¤å’Œæ•°æ®ã€‚ä¸»å­˜ç”±å¯è¯»å†™çš„å…ƒç´ æ„æˆï¼Œæ¯ä¸ªå­—èŠ‚ï¼ˆ1 å­—èŠ‚ = 8 ä½ ï¼‰éƒ½å¸¦æœ‰ä¸€ä¸ªåœ°å€ç¼–å·ã€‚CPU å¯ä»¥é€šè¿‡è¯¥åœ°å€è¯»å–ä¸»å­˜ä¸­çš„æŒ‡ä»¤å’Œæ•°æ®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™å…¥æ•°æ®ã€‚ä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä¸»å­˜ä¸­å­˜å‚¨çš„æŒ‡ä»¤å’Œæ•°æ®ä¼šéšç€è®¡ç®—æœºçš„å…³æœºè€Œè‡ªåŠ¨æ¸…é™¤ã€‚</p><p>é€šå¸¸æˆ‘ä»¬å°†æ±‡ç¼–è¯­è¨€ç¼–å†™çš„ç¨‹åºè½¬åŒ–æˆæœºå™¨è¯­è¨€çš„è¿‡ç¨‹ç§°ä¸ºæ±‡ç¼– ï¼›åä¹‹ï¼Œæœºå™¨è¯­è¨€ç¨‹åºè½¬åŒ–æˆæ±‡ç¼–è¯­è¨€ç¨‹åºçš„è¿‡ç¨‹åˆ™ç§°ä¸ºåæ±‡ç¼– ã€‚</p><p>æœºå™¨è¯­è¨€æ˜¯æŒ‡ CPU èƒ½ç›´æ¥è§£é‡Šå’Œæ‰§è¡Œçš„è¯­è¨€ã€‚</p><p>ç¼–è¯‘æ˜¯æŒ‡å°†ä½¿ç”¨é«˜çº§ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ç¨‹åºè½¬æ¢ä¸ºæœºå™¨è¯­è¨€çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ï¼Œç”¨äºè½¬æ¢çš„ç¨‹åºè¢«ç§°ä¸ºç¼–è¯‘å™¨ï¼ˆcompilerï¼‰ã€‚</p><table><thead><tr><th>å¯„å­˜å™¨</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>ç´¯åŠ å¯„å­˜å™¨ï¼ˆaccumulator registerï¼‰</td><td>å­˜å‚¨æ‰§è¡Œè¿ç®—çš„æ•°æ®å’Œè¿ç®—åçš„æ•°æ®</td></tr><tr><td>æ ‡å¿—å¯„å­˜å™¨ï¼ˆflag registerï¼‰</td><td>å­˜å‚¨è¿ç®—å¤„ç†åçš„CPUçš„çŠ¶æ€</td></tr><tr><td>ç¨‹åºè®¡æ•°å™¨ï¼ˆprogram counterï¼‰</td><td>å­˜å‚¨ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨å†…å­˜çš„åœ°å€</td></tr><tr><td>åŸºå€å¯„å­˜å™¨ï¼ˆbase registerï¼‰</td><td>å­˜å‚¨æ•°æ®å†…å­˜çš„èµ·å§‹åœ°å€</td></tr><tr><td>å˜å€å¯„å­˜å™¨ï¼ˆindex registerï¼‰</td><td>å­˜å‚¨åŸºå€å¯„å­˜å™¨çš„ç›¸å¯¹åœ°å€</td></tr><tr><td>é€šç”¨å¯„å­˜å™¨ï¼ˆgeneral purpose registerï¼‰</td><td>å­˜å‚¨ä»»æ„æ•°æ®</td></tr><tr><td>æŒ‡ä»¤å¯„å­˜å™¨ï¼ˆinstruction registerï¼‰</td><td>å­˜å‚¨æŒ‡ä»¤ã€‚CPUå†…éƒ¨ä½¿ç”¨ï¼Œç¨‹åºå‘˜æ— æ³•é€šè¿‡ç¨‹åºå¯¹è¯¥å¯„å­˜å™¨è¿›è¡Œè¯»å†™æ“ä½œ</td></tr><tr><td>æ ˆå¯„å­˜å™¨ï¼ˆstack registerï¼‰</td><td>å­˜å‚¨æ ˆåŒºåŸŸçš„èµ·å§‹åœ°å€</td></tr></tbody></table><p>å‚¨æ‰§è¡Œè¿ç®—çš„æ•°æ®å’Œè¿ç®—åçš„æ•°æ® </p><p>CPU æ˜¯å…·æœ‰å„ç§åŠŸèƒ½çš„å¯„å­˜å™¨çš„é›†åˆä½“ã€‚å…¶ä¸­ï¼Œç¨‹åºè®¡æ•°å™¨ã€ç´¯åŠ å¯„å­˜å™¨ã€æ ‡å¿—å¯„å­˜å™¨ã€æŒ‡ä»¤å¯„å­˜å™¨å’Œæ ˆå¯„å­˜å™¨éƒ½åªæœ‰ä¸€ä¸ªï¼Œå…¶ä»–çš„å¯„å­˜å™¨ä¸€èˆ¬æœ‰å¤šä¸ªã€‚ç¨‹åºè®¡æ•°å™¨å’Œæ ‡å¿—å¯„å­˜å™¨æ¯”è¾ƒç‰¹æ®Šã€‚å¦å¤–ï¼Œå­˜å‚¨æŒ‡ä»¤çš„æŒ‡ä»¤å¯„å­˜å™¨ç­‰å¯„å­˜å™¨ï¼Œç”±äºä¸éœ€è¦ç¨‹åºå‘˜åšå¤šå…³æ³¨ã€‚</p><p>æ“ä½œç³»ç»Ÿï¼ˆoperating systemï¼‰æ˜¯æŒ‡ç®¡ç†å’Œæ§åˆ¶è®¡ç®—æœºç¡¬ä»¶ä¸è½¯ä»¶èµ„æºçš„è®¡ç®—æœºç¨‹åºã€‚</p><p>ç¨‹åºçš„æµç¨‹åˆ†ä¸ºé¡ºåºæ‰§è¡Œã€æ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯ä¸‰ç§ã€‚é¡ºåºæ‰§è¡Œ æ˜¯æŒ‡æŒ‰ç…§åœ°å€å†…å®¹çš„é¡ºåºæ‰§è¡ŒæŒ‡ä»¤ã€‚æ¡ä»¶åˆ†æ”¯ æ˜¯æŒ‡æ ¹æ®æ¡ä»¶æ‰§è¡Œä»»æ„åœ°å€çš„æŒ‡ä»¤ã€‚å¾ªç¯ æ˜¯æŒ‡é‡å¤æ‰§è¡ŒåŒä¸€åœ°å€çš„æŒ‡ä»¤ã€‚</p><p>å˜å€å¯„å­˜å™¨çš„å€¼å°±ç›¸å½“äºé«˜çº§ç¼–ç¨‹è¯­è¨€ç¨‹åºä¸­æ•°ç»„çš„ç´¢å¼•åŠŸèƒ½ã€‚</p><p>CPU åˆ™ä¼šæŠŠåŸºå€å¯„å­˜å™¨ï¼‹å˜å€å¯„å­˜å™¨çš„å€¼è§£é‡Šä¸ºå®é™…æŸ¥çœ‹çš„å†…å­˜åœ°å€ã€‚å˜å€å¯„å­˜å™¨çš„å€¼å°±ç›¸å½“äºé«˜çº§ç¼–ç¨‹è¯­è¨€ç¨‹åºä¸­æ•°ç»„çš„ç´¢å¼•åŠŸèƒ½ã€‚</p><p>8 ä½ = 1 å­—èŠ‚</p><p>è®¡ç®—æœºå¤„ç†ä¿¡æ¯çš„æœ€å°å•ä½â€”â€”ä½ ï¼Œå°±ç›¸å½“äºäºŒè¿›åˆ¶ä¸­çš„ä¸€ä½ã€‚ä½çš„è‹±æ–‡ bit æ˜¯äºŒè¿›åˆ¶æ•°ä½ï¼ˆbinary digitï¼‰çš„ç¼©å†™ã€‚</p><p>å­—èŠ‚æ˜¯æœ€åŸºæœ¬çš„ä¿¡æ¯è®¡é‡å•ä½ã€‚ä½æ˜¯æœ€å°å•ä½ï¼Œå­—èŠ‚æ˜¯åŸºæœ¬å•ä½ã€‚å†…å­˜å’Œç£ç›˜éƒ½ä½¿ç”¨å­—èŠ‚å•ä½æ¥å­˜å‚¨å’Œè¯»å†™æ•°æ®ï¼Œä½¿ç”¨ä½å•ä½åˆ™æ— æ³•è¯»å†™æ•°æ®ã€‚å› æ­¤ï¼Œå­—èŠ‚æ˜¯ä¿¡æ¯çš„åŸºæœ¬å•ä½ã€‚</p><p>ç”¨å­—èŠ‚å•ä½å¤„ç†æ•°æ®æ—¶ï¼Œå¦‚æœæ•°å­—å°äºå­˜å‚¨æ•°æ®çš„å­—èŠ‚æ•°ï¼ˆ= äºŒè¿›åˆ¶æ•°çš„ä½æ•°ï¼‰ï¼Œé‚£ä¹ˆé«˜ä½ä¸Šå°±ç”¨ 0 å¡«è¡¥ã€‚ä¾‹å¦‚ï¼Œ100111 è¿™ä¸ª 6 ä½äºŒè¿›åˆ¶æ•°ï¼Œç”¨ 8 ä½ï¼ˆ= 1 å­—èŠ‚ï¼‰è¡¨ç¤ºæ—¶ä¸º 00100111ï¼Œç”¨ 16 ä½ï¼ˆ= 2 å­—èŠ‚ï¼‰è¡¨ç¤ºæ—¶ä¸º 0000000000100111ã€‚</p><p>ç§»ä½è¿ç®— æŒ‡çš„æ˜¯å°†äºŒè¿›åˆ¶æ•°å€¼çš„å„æ•°ä½è¿›è¡Œå·¦å³ç§»ä½ï¼ˆshift = ç§»ä½ï¼‰çš„è¿ç®—ã€‚ç§»ä½æœ‰å·¦ç§»ï¼ˆå‘é«˜ä½æ–¹å‘ï¼‰å’Œå³ç§»ï¼ˆå‘ä½ä½æ–¹å‘ï¼‰ä¸¤ç§ã€‚</p><p>äºŒè¿›åˆ¶æ•°å·¦ç§»åå°±ä¼šå˜æˆåŸæ¥çš„ 2 å€ã€4 å€ã€8 å€â€¦â€¦åä¹‹ï¼ŒäºŒè¿›åˆ¶æ•°å³ç§»ååˆ™ä¼šå˜æˆåŸæ¥çš„ 1/2ã€1/4ã€1/8â€¦â€¦</p><p>è¿›åˆ¶æ•°ä¸­è¡¨ç¤ºè´Ÿæ•°å€¼æ—¶ï¼Œä¸€èˆ¬ä¼šæŠŠæœ€é«˜ä½ä½œä¸ºç¬¦å·æ¥ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬æŠŠè¿™ä¸ªæœ€é«˜ä½ç§°ä¸ºç¬¦å·ä½ã€‚ç¬¦å·ä½æ˜¯ 0 æ—¶è¡¨ç¤ºæ­£æ•° ï¼Œç¬¦å·ä½ æ˜¯ 1 æ—¶è¡¨ç¤ºè´Ÿæ•°ã€‚</p><p>è¡¥ç ï¼Œæˆ‘ä»¬éœ€è¦å°†äºŒè¿›åˆ¶æ•°çš„å„æ•°ä½çš„æ•°å€¼å…¨éƒ¨å–å6 ï¼Œç„¶åå†å°†ç»“æœåŠ  1ã€‚</p><p>è´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤º</p><p>ç§»ä½åéœ€è¦åœ¨æœ€é«˜ä½è¡¥ 0ã€‚ç±»ä¼¼äºéœ“è™¹ç¯å¾€å³æ»šåŠ¨çš„æ•ˆæœã€‚è¿™å°±ç§°ä¸ºé€»è¾‘å³ç§»ã€‚</p><p>å°†äºŒè¿›åˆ¶æ•°ä½œä¸ºå¸¦ç¬¦å·çš„æ•°å€¼è¿›è¡Œè¿ç®—æ—¶ï¼Œç§»ä½åè¦åœ¨æœ€é«˜ä½å¡«å……ç§»ä½å‰ç¬¦å·ä½çš„å€¼ï¼ˆ0 æˆ– 1ï¼‰ã€‚è¿™å°±ç§°ä¸ºç®—æœ¯å³ç§»ã€‚</p><p>ç¬¦å·æ‰©å…… å°±æ˜¯æŒ‡åœ¨ä¿æŒå€¼ä¸å˜çš„å‰æä¸‹å°†å…¶è½¬æ¢æˆ 16 ä½å’Œ 32 ä½çš„äºŒè¿›åˆ¶æ•°ã€‚å°† 01111111 è¿™ä¸ªæ­£çš„ 8 ä½äºŒè¿›åˆ¶æ•°è½¬æ¢æˆ 16 ä½äºŒè¿›åˆ¶æ•°æ—¶ï¼Œå¾ˆå®¹æ˜“å°±èƒ½å¾—å‡º 0000000001111111 è¿™ä¸ªæ­£ç¡®ç»“æœï¼Œä½†æ˜¯åƒ 11111111 è¿™æ ·ç”¨è¡¥æ•°æ¥è¡¨ç¤ºçš„æ•°å€¼ï¼Œè¯¥å¦‚ä½•å¤„ç†æ¯”è¾ƒå¥½å‘¢ï¼Ÿå®é™…ä¸Šå¤„ç†æ–¹æ³•éå¸¸ç®€å•ï¼Œå°†å…¶è¡¨ç¤ºæˆ 1111111111111111 å°±å¯ä»¥äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡æ˜¯æ­£æ•°è¿˜æ˜¯ç”¨è¡¥æ•°è¡¨ç¤ºçš„è´Ÿæ•°ï¼Œéƒ½åªéœ€ç”¨ç¬¦å·ä½çš„å€¼ï¼ˆ0 æˆ–è€… 1ï¼‰å¡«å……é«˜ä½å³å¯ã€‚è¿™å°±æ˜¯ç¬¦å·æ‰©å……çš„æ–¹æ³•ã€‚</p><p>ç®—æœ¯è¿ç®— æ˜¯æŒ‡åŠ å‡ä¹˜é™¤å››åˆ™è¿ç®—ã€‚é€»è¾‘è¿ç®— æ˜¯æŒ‡å¯¹äºŒè¿›åˆ¶æ•°å„æ•°å­—ä½çš„ 0 å’Œ 1 åˆ†åˆ«è¿›è¡Œå¤„ç†çš„è¿ç®—ï¼ŒåŒ…æ‹¬é€»è¾‘éï¼ˆNOT è¿ç®—ï¼‰ã€é€»è¾‘ä¸ï¼ˆAND è¿ç®—ï¼‰ã€é€»è¾‘æˆ–ï¼ˆOR è¿ç®—ï¼‰å’Œé€»è¾‘å¼‚æˆ–ï¼ˆXOR è¿ç®—9 ï¼‰å››ç§ã€‚</p><p>é€»è¾‘é æŒ‡çš„æ˜¯ 0 å˜æˆ 1ã€1 å˜æˆ 0 çš„å–åæ“ä½œã€‚é€»è¾‘ä¸ æŒ‡çš„æ˜¯â€œä¸¤ä¸ªéƒ½æ˜¯ 1â€æ—¶ï¼Œè¿ç®—ç»“æœä¸º 1ï¼Œå…¶ä»–æƒ…å†µä¸‹è¿ç®—ç»“æœéƒ½ä¸º 0 çš„è¿ç®—ã€‚é€»è¾‘æˆ– æŒ‡çš„æ˜¯â€œè‡³å°‘æœ‰ä¸€æ–¹æ˜¯ 1â€æ—¶ï¼Œè¿ç®—ç»“æœä¸º 1ï¼Œå…¶ä»–æƒ…å†µä¸‹è¿ç®—ç»“æœéƒ½æ˜¯ 0 çš„è¿ç®—ã€‚é€»è¾‘å¼‚æˆ– æŒ‡çš„æ˜¯æ’æ–¥ç›¸åŒæ•°å€¼çš„è¿ç®—ã€‚â€œä¸¤ä¸ªæ•°å€¼ä¸åŒâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“â€œå…¶ä¸­ä¸€æ–¹æ˜¯ 1ï¼Œå¦ä¸€æ–¹æ˜¯ 0â€æ—¶è¿ç®—ç»“æœæ˜¯ 1ï¼Œå…¶ä»–æƒ…å†µä¸‹ç»“æœéƒ½æ˜¯ 0ã€‚</p><p>æœ‰ä¸€äº›åè¿›åˆ¶æ•°çš„å°æ•°æ— æ³•è½¬æ¢æˆäºŒè¿›åˆ¶æ•°â€ã€‚ä¾‹å¦‚ï¼Œåè¿›åˆ¶æ•° 0.1ï¼Œå°±æ— æ³•ç”¨äºŒè¿›åˆ¶æ•°æ­£ç¡®è¡¨ç¤ºï¼Œå°æ•°ç‚¹åé¢å³ä½¿æœ‰å‡ ç™¾ä½ä¹Ÿæ— æ³•è¡¨ç¤ºã€‚</p><p>å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­éƒ½æä¾›äº†ä¸¤ç§è¡¨ç¤ºå°æ•°çš„æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°å’Œå•ç²¾åº¦æµ®ç‚¹æ•°ã€‚åŒç²¾åº¦æµ®ç‚¹æ•°ç±»å‹ ç”¨ 64 ä½ã€å•ç²¾åº¦æµ®ç‚¹æ•°ç±»å‹ ç”¨ 32 ä½æ¥è¡¨ç¤ºå…¨ä½“å°æ•°ã€‚åœ¨ C è¯­è¨€ä¸­ï¼ŒåŒç²¾åº¦æµ®ç‚¹æ•°ç±»å‹å’Œå•ç²¾åº¦æµ®ç‚¹æ•°ç±»å‹åˆ†åˆ«ç”¨ double å’Œ float æ¥è¡¨ç¤ºã€‚</p><p>æµ®ç‚¹æ•° æ˜¯æŒ‡ç”¨ç¬¦å·ã€å°¾æ•°ã€åŸºæ•°å’ŒæŒ‡æ•°è¿™å››éƒ¨åˆ†æ¥è¡¨ç¤ºçš„å°æ•°ã€‚</p><p>ç¬¦å·éƒ¨åˆ† æ˜¯æŒ‡ä½¿ç”¨ä¸€ä¸ªæ•°æ®ä½æ¥è¡¨ç¤ºæ•°å€¼çš„ç¬¦å·ã€‚è¯¥æ•°æ®ä½æ˜¯ 1 æ—¶è¡¨ç¤ºè´Ÿï¼Œä¸º 0 æ—¶åˆ™è¡¨ç¤ºâ€œæ­£æˆ–è€… 0â€</p><p>åœ¨äºŒè¿›åˆ¶æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯â€œå°†å°æ•°ç‚¹å‰é¢çš„å€¼å›ºå®šä¸º 1 çš„æ­£åˆ™è¡¨è¾¾å¼ â€ã€‚</p><p>æŒ‡é’ˆ ä¹Ÿæ˜¯ä¸€ç§å˜é‡ï¼Œå®ƒæ‰€è¡¨ç¤ºçš„ä¸æ˜¯æ•°æ®çš„å€¼ï¼Œè€Œæ˜¯å­˜å‚¨ç€æ•°æ®çš„å†…å­˜çš„åœ°å€ã€‚é€šè¿‡ä½¿ç”¨æŒ‡é’ˆï¼Œå°±å¯ä»¥å¯¹ä»»æ„æŒ‡å®šåœ°å€çš„æ•°æ®è¿›è¡Œè¯»å†™ã€‚</p><p>æ•°ç»„ æ˜¯æŒ‡å¤šä¸ªåŒæ ·æ•°æ®ç±»å‹çš„æ•°æ®åœ¨å†…å­˜ä¸­è¿ç»­æ’åˆ—çš„å½¢å¼ã€‚ä½œä¸ºæ•°ç»„å…ƒç´ çš„å„ä¸ªæ•°æ®ä¼šé€šè¿‡è¿ç»­çš„ç¼–å·è¢«åŒºåˆ†å¼€æ¥ï¼Œè¿™ä¸ªç¼–å·ç§°ä¸ºç´¢å¼• ï¼ˆindexï¼‰ã€‚</p><p>æ ˆç”¨çš„æ˜¯ LIFOï¼ˆLast Input First Outï¼Œåå…¥å…ˆå‡ºï¼‰æ–¹å¼ï¼Œè€Œé˜Ÿåˆ—ç”¨çš„åˆ™æ˜¯ FIFOï¼ˆFirst Input First Outï¼Œå…ˆå…¥å…ˆå‡ºï¼‰æ–¹å¼ã€‚</p><p>åœ¨æ•°ç»„çš„å„ä¸ªå…ƒç´ ä¸­ï¼Œé™¤äº†æ•°æ®çš„å€¼ä¹‹å¤–ï¼Œé€šè¿‡ä¸ºå…¶é™„å¸¦ä¸Šä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œå³å¯å®ç°é“¾è¡¨ ã€‚</p><p>äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯æŒ‡åœ¨é“¾è¡¨çš„åŸºç¡€ä¸Šå¾€æ•°ç»„ä¸­è¿½åŠ å…ƒç´ æ—¶ï¼Œè€ƒè™‘åˆ°æ•°æ®çš„å¤§å°å…³ç³»ï¼Œå°†å…¶åˆ†æˆå·¦å³ä¸¤ä¸ªæ–¹å‘çš„è¡¨ç°å½¢å¼ã€‚</p><p>å†…å­˜å’Œç£ç›˜ä¹Ÿéƒ½è¢«å½’ç±»ä¸ºå­˜å‚¨éƒ¨ä»¶ã€‚ä¸è¿‡ï¼Œåˆ©ç”¨ç”µæµæ¥å®ç°å­˜å‚¨çš„å†…å­˜ï¼ŒåŒåˆ©ç”¨ç£æ•ˆåº”æ¥å®ç°å­˜å‚¨çš„ç£ç›˜ï¼Œè¿˜æ˜¯æœ‰å·®å¼‚çš„ã€‚è€Œä»å­˜å‚¨å®¹é‡æ¥çœ‹ï¼Œå†…å­˜æ˜¯é«˜é€Ÿé«˜ä»·ï¼Œè€Œç£ç›˜åˆ™æ˜¯ä½é€Ÿå»‰ä»·ã€‚</p><p>ä¸€èˆ¬æŠŠè¾“å…¥è£…ç½®ã€è¾“å‡ºè£…ç½®ã€å­˜å‚¨å™¨ã€è¿ç®—å™¨å’Œæ§åˆ¶å™¨è¿™ 5 ç§éƒ¨ä»¶è®¾å¤‡ç§° ä¸ºè®¡ç®—æœºçš„ 5 å¤§éƒ¨ä»¶ã€‚</p><p>å†…å­˜ä¸»è¦æ˜¯æŒ‡ä¸»å†…å­˜ï¼ˆè´Ÿè´£å­˜å‚¨ CPU ä¸­è¿è¡Œçš„ç¨‹åºæŒ‡ä»¤å’Œæ•°æ®çš„å†…å­˜ï¼‰ï¼Œç£ç›˜ä¸»è¦æ˜¯æŒ‡ç¡¬ç›˜ã€‚</p><p>å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„ç¨‹åºéœ€è¦è¯»å…¥åˆ°å†…å­˜åæ‰èƒ½è¿è¡Œã€‚</p><p>ç£ç›˜ç¼“å­˜ æŒ‡çš„æ˜¯æŠŠä»ç£ç›˜ä¸­è¯»å‡ºçš„æ•°æ®å­˜å‚¨åˆ°å†…å­˜ç©ºé—´ä¸­çš„æ–¹å¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“æ¥ä¸‹æ¥éœ€è¦è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œå°±ä¸ç”¨é€šè¿‡å®é™…çš„ç£ç›˜ï¼Œè€Œæ˜¯ä»ç£ç›˜ç¼“å­˜ä¸­æŠŠå†…å®¹è¯»å‡ºã€‚ä½¿ç”¨ç£ç›˜ç¼“å­˜å¯ä»¥å¤§å¤§æ”¹å–„ç£ç›˜æ•°æ®çš„è®¿é—®é€Ÿåº¦</p><p>è™šæ‹Ÿå†…å­˜ æ˜¯æŒ‡æŠŠç£ç›˜çš„ä¸€éƒ¨åˆ†ä½œä¸ºå‡æƒ³çš„å†…å­˜æ¥ä½¿ç”¨ã€‚è¿™ä¸ç£ç›˜ç¼“å­˜æ˜¯å‡æƒ³çš„ç£ç›˜ï¼ˆå®é™…ä¸Šæ˜¯å†…å­˜ï¼‰ç›¸å¯¹ï¼Œè™šæ‹Ÿå†…å­˜æ˜¯å‡æƒ³çš„å†…å­˜ï¼ˆå®é™…ä¸Šæ˜¯ç£ç›˜ï¼‰ã€‚</p><p>ä¸ºäº†å®ç°è™šæ‹Ÿå†…å­˜ï¼Œå°±å¿…é¡»æŠŠå®é™…å†…å­˜ ï¼ˆä¹Ÿå¯ç§°ä¸ºç‰©ç†å†…å­˜ ï¼‰çš„å†…å®¹ï¼Œå’Œç£ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜çš„å†…å®¹è¿›è¡Œéƒ¨åˆ†ç½®æ¢ï¼ˆswapï¼‰ï¼Œå¹¶åŒæ—¶è¿è¡Œç¨‹åºã€‚</p><p>è™šæ‹Ÿå†…å­˜çš„æ–¹æ³•æœ‰åˆ†é¡µå¼ å’Œåˆ†æ®µå¼ ä¸¤ç§ã€‚Windows é‡‡ç”¨çš„æ˜¯åˆ†é¡µå¼ã€‚è¯¥æ–¹å¼æ˜¯æŒ‡ï¼Œåœ¨ä¸è€ƒè™‘ç¨‹åºæ„é€ çš„æƒ…å†µä¸‹ï¼ŒæŠŠè¿è¡Œçš„ç¨‹åºæŒ‰ç…§ä¸€å®šå¤§å°çš„é¡µï¼ˆpageï¼‰è¿›è¡Œåˆ†å‰²ï¼Œå¹¶ä»¥é¡µä¸ºå•ä½åœ¨å†…å­˜å’Œç£ç›˜é—´è¿›è¡Œç½®æ¢ã€‚åœ¨åˆ†é¡µå¼ä¸­ï¼Œæˆ‘ä»¬æŠŠç£ç›˜çš„å†…å®¹è¯»å‡ºåˆ°å†…å­˜ç§°ä¸º Page Inï¼ŒæŠŠå†…å­˜çš„å†…å®¹å†™å…¥ç£ç›˜ç§°ä¸º Page Outã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒWindows è®¡ç®—æœºçš„é¡µçš„å¤§å°æ˜¯ 4KBã€‚</p><p>ä¸ºäº†å®ç°è™šæ‹Ÿå†…å­˜åŠŸèƒ½ï¼ŒWindows åœ¨ç£ç›˜ä¸Šæä¾›äº†è™šæ‹Ÿå†…å­˜ç”¨çš„æ–‡ä»¶ï¼ˆpage fileï¼Œé¡µæ–‡ä»¶ ï¼‰ã€‚è¯¥æ–‡ä»¶ç”± Windows è‡ªåŠ¨åšæˆå’Œç®¡ç†ã€‚æ–‡ä»¶çš„å¤§å°ä¹Ÿå°±æ˜¯è™šæ‹Ÿå†…å­˜çš„å¤§å°ï¼Œé€šå¸¸æ˜¯å®é™…å†…å­˜çš„ç›¸åŒç¨‹åº¦è‡³ä¸¤å€ç¨‹åº¦ã€‚</p><p>è™šæ‹Ÿå†…å­˜æ— æ³•å½»åº•è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚</p><p>DLL ï¼ˆDynamic Link Libraryï¼‰æ–‡ä»¶ ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶å¯ä»¥åŠ¨æ€åŠ è½½ Libraryï¼ˆå‡½æ•°å’Œæ•°æ®çš„é›†åˆï¼‰çš„æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦å¤§å®¶æ³¨æ„çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯å¤šä¸ªåº”ç”¨å¯ä»¥å…±æœ‰åŒä¸€ä¸ª DLL æ–‡ä»¶ã€‚è€Œé€šè¿‡å…±æœ‰åŒä¸€ä¸ª DLL æ–‡ä»¶åˆ™å¯ä»¥è¾¾åˆ°èŠ‚çº¦å†…å­˜çš„æ•ˆæœã€‚</p><p>æ ˆæ¸…ç†å¤„ç† æ˜¯æŒ‡ï¼ŒæŠŠä¸éœ€è¦çš„æ•°æ®ä»æ¥æ”¶å’Œä¼ é€’å‡½æ•°çš„å‚æ•°æ—¶ä½¿ç”¨çš„å†…å­˜ä¸Šçš„æ ˆåŒºåŸŸä¸­æ¸…ç†å‡ºå»ã€‚</p><p>ç£ç›˜æ˜¯é€šè¿‡æŠŠå…¶ç‰©ç†è¡¨é¢åˆ’åˆ†æˆå¤šä¸ªç©ºé—´æ¥ä½¿ç”¨çš„ã€‚åˆ’åˆ†çš„æ–¹å¼æœ‰æ‰‡åŒºæ–¹å¼ å’Œå¯å˜é•¿æ–¹å¼ ä¸¤ç§ï¼Œå‰è€…æ˜¯æŒ‡å°†ç£ç›˜åˆ’åˆ†ä¸ºå›ºå®šé•¿åº¦çš„ç©ºé—´ï¼Œåè€…åˆ™æ˜¯æŒ‡æŠŠç£ç›˜åˆ’åˆ†ä¸ºé•¿åº¦å¯å˜çš„ç©ºé—´ã€‚ä¸€èˆ¬çš„ Windows è®¡ç®—æœºæ‰€ä½¿ç”¨çš„ç¡¬ç›˜å’Œè½¯ç›˜ï¼Œé‡‡ç”¨çš„éƒ½æ˜¯æ‰‡åŒºæ–¹å¼ã€‚æ‰‡åŒºæ–¹å¼ä¸­ï¼ŒæŠŠç£ç›˜è¡¨é¢åˆ†æˆè‹¥å¹²ä¸ªåŒå¿ƒåœ†çš„ç©ºé—´å°±æ˜¯ç£é“ ï¼ŒæŠŠç£é“æŒ‰ç…§å›ºå®šå¤§å°ï¼ˆèƒ½å­˜å‚¨çš„æ•°æ®é•¿åº¦ç›¸åŒï¼‰åˆ’åˆ†è€Œæˆçš„ç©ºé—´å°±æ˜¯æ‰‡åŒºã€‚</p><p>æ‰‡åŒºæ˜¯å¯¹ç£ç›˜è¿›è¡Œç‰©ç†è¯»å†™çš„æœ€å°å•ä½ã€‚Windows ä¸­ä½¿ç”¨çš„ç£ç›˜ï¼Œä¸€èˆ¬ 1 ä¸ªæ‰‡åŒºæ˜¯ 512 å­—èŠ‚ã€‚</p><p>Windows åœ¨é€»è¾‘æ–¹é¢ï¼ˆè½¯ä»¶æ–¹é¢ï¼‰å¯¹ç£ç›˜è¿›è¡Œè¯»å†™çš„å•ä½æ˜¯æ‰‡åŒºæ•´æ•°å€ç°‡ ã€‚æ ¹æ®ç£ç›˜å®¹é‡çš„ä¸åŒï¼Œ1 ç°‡å¯ä»¥æ˜¯ 512 å­—èŠ‚ï¼ˆ1 ç°‡ = 1 æ‰‡åŒºï¼‰ã€1KBï¼ˆ1 ç°‡ = 2 æ‰‡åŒºï¼‰ã€‚</p><p>ä¸ç®¡æ˜¯ç¡¬ç›˜è¿˜æ˜¯è½¯ç›˜ï¼Œä¸åŒçš„æ–‡ä»¶æ˜¯ä¸èƒ½å­˜å‚¨åœ¨åŒä¸€ä¸ªç°‡ä¸­çš„ï¼Œå¦åˆ™å°±ä¼šå¯¼è‡´åªæœ‰ä¸€æ–¹çš„æ–‡ä»¶ä¸èƒ½è¢«åˆ é™¤ã€‚å› æ­¤ï¼Œä¸ç®¡æ˜¯å¤šä¹ˆå°çš„æ–‡ä»¶ï¼Œéƒ½ä¼šå ç”¨ 1 ç°‡çš„ç©ºé—´ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰çš„æ–‡ä»¶éƒ½ä¼šå ç”¨ 1 ç°‡çš„æ•´æ•°å€çš„ç£ç›˜ç©ºé—´ã€‚</p><p>æ–‡ä»¶æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ç­‰å­˜å‚¨åª’ä»‹ä¸­çš„ä¸€ç§å½¢å¼ã€‚ç¨‹åºæ–‡ä»¶ä¸­å­˜å‚¨æ•°æ®çš„å•ä½æ˜¯å­—èŠ‚ã€‚</p><p>æŠŠæ–‡ä»¶å†…å®¹ç”¨â€œæ•°æ® Ã— é‡å¤æ¬¡æ•°â€çš„å½¢å¼æ¥è¡¨ç¤ºçš„å‹ç¼©æ–¹æ³•ç§°ä¸º RLEï¼ˆRun Length Encodingï¼Œè¡Œç¨‹é•¿åº¦ç¼–ç ï¼‰ç®—æ³•ã€‚</p><p>è™½ç„¶é’ˆå¯¹ç›¸åŒæ•°æ®ç»å¸¸è¿ç»­å‡ºç°çš„å›¾åƒã€æ–‡ä»¶ç­‰ï¼ŒRLE ç®—æ³•å¯ä»¥å‘æŒ¥ä¸é”™çš„æ•ˆæœï¼Œä½†å®ƒå¹¶ä¸é€‚åˆæ–‡æœ¬æ–‡ä»¶çš„å‹ç¼©ã€‚</p><p>æˆ‘ä»¬æŠŠèƒ½è¿˜åŸåˆ°å‹ç¼©å‰çŠ¶æ€çš„å‹ç¼©ç§°ä¸ºå¯é€†å‹ç¼© ï¼Œæ— æ³•è¿˜åŸåˆ°å‹ç¼©å‰çŠ¶æ€çš„å‹ç¼©ç§°ä¸ºéå¯é€†å‹ç¼©ã€‚</p><p>è¿è¡Œç¯å¢ƒ = æ“ä½œç³»ç»Ÿ ï¼‹ ç¡¬ä»¶</p><p>CPU åªèƒ½è§£é‡Šå…¶è‡ªèº«å›ºæœ‰çš„æœºå™¨è¯­è¨€ã€‚ä¸åŒçš„ CPU èƒ½è§£é‡Šçš„æœºå™¨è¯­è¨€çš„ç§ç±»ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</p><p>æœºå™¨è¯­è¨€çš„ç¨‹åºç§°ä¸ºæœ¬åœ°ä»£ç  ï¼ˆnative codeï¼‰ã€‚ç¨‹åºå‘˜ç”¨ C è¯­è¨€ç­‰ç¼–å†™çš„ç¨‹åºï¼Œåœ¨ç¼–å†™é˜¶æ®µä»…ä»…æ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚æ–‡æœ¬æ–‡ä»¶ï¼ˆæ’é™¤æ–‡å­—ç¼–ç çš„é—®é¢˜ï¼‰åœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½æ˜¾ç¤ºå’Œç¼–è¾‘ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºæºä»£ç  ã€‚é€šè¿‡å¯¹æºä»£ç è¿›è¡Œç¼–è¯‘ï¼Œå°±å¯ä»¥å¾—åˆ°æœ¬åœ°ä»£ç ã€‚</p><p>åŒæ ·æœºå‹çš„è®¡ç®—æœºï¼Œå¯å®‰è£…çš„æ“ä½œç³»ç»Ÿç±»å‹ä¹Ÿä¼šæœ‰å¤šç§é€‰æ‹©ã€‚</p><p>BIOS å­˜å‚¨åœ¨ ROM ä¸­ï¼Œæ˜¯é¢„å…ˆå†…ç½®åœ¨è®¡ç®—æœºä¸»æœºå†…éƒ¨çš„ç¨‹åºã€‚BIOS é™¤äº†é”®ç›˜ã€ç£ç›˜ã€æ˜¾å¡ç­‰åŸºæœ¬æ§åˆ¶ç¨‹åºå¤–ï¼Œè¿˜æœ‰å¯åŠ¨â€œå¼•å¯¼ç¨‹åºâ€çš„åŠŸèƒ½ã€‚å¼•å¯¼ç¨‹åº æ˜¯å­˜å‚¨åœ¨å¯åŠ¨é©±åŠ¨å™¨èµ·å§‹åŒºåŸŸçš„å°ç¨‹åºã€‚æ“ä½œç³»ç»Ÿçš„å¯åŠ¨é©±åŠ¨å™¨ä¸€èˆ¬æ˜¯ç¡¬ç›˜ï¼Œä¸è¿‡æœ‰æ—¶ä¹Ÿå¯ä»¥æ˜¯ CD-ROM æˆ–è½¯ç›˜ã€‚ å¼€æœºåï¼ŒBIOS ä¼šç¡®è®¤ç¡¬ä»¶æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œæ²¡æœ‰é—®é¢˜çš„è¯å°±ä¼šå¯åŠ¨å¼•å¯¼ç¨‹åºã€‚å¼•å¯¼ç¨‹åºçš„åŠŸèƒ½æ˜¯æŠŠåœ¨ç¡¬ç›˜ç­‰è®°å½•çš„ OS åŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œã€‚è™½ç„¶å¯åŠ¨åº”ç”¨æ˜¯ OS çš„åŠŸèƒ½ï¼Œä½† OS å¹¶ä¸èƒ½è‡ªå·±å¯åŠ¨è‡ªå·±ï¼Œè€Œæ˜¯é€šè¿‡å¼•å¯¼ç¨‹åºæ¥å¯åŠ¨ã€‚</p><p>Dump æ˜¯æŒ‡æŠŠæ–‡ä»¶çš„å†…å®¹ï¼Œæ¯ä¸ªå­—èŠ‚ç”¨ 2 ä½åå…­è¿›åˆ¶æ•°æ¥è¡¨ç¤ºçš„æ–¹å¼ã€‚</p><p>èƒ½å¤ŸæŠŠ C è¯­è¨€ç­‰é«˜çº§ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„æºä»£ç è½¬æ¢æˆæœ¬åœ°ä»£ç çš„ç¨‹ åºç§°ä¸ºç¼–è¯‘å™¨ ã€‚æ¯ä¸ªç¼–å†™æºä»£ç çš„ç¼–ç¨‹è¯­è¨€éƒ½éœ€è¦å…¶ä¸“ç”¨çš„ç¼–è¯‘å™¨ã€‚å°† C è¯­è¨€ç¼–å†™çš„æºä»£ç è½¬æ¢æˆæœ¬åœ°ä»£ç çš„ç¼–è¯‘å™¨ç§°ä¸º C ç¼–è¯‘å™¨ã€‚</p><p>ç¼–è¯‘å™¨é¦–å…ˆè¯»å…¥ä»£ç çš„å†…å®¹ï¼Œç„¶åå†æŠŠæºä»£ç è½¬æ¢æˆæœ¬åœ°ä»£ç ã€‚</p><p>è¯»å…¥çš„æºä»£ç è¿˜è¦ç»è¿‡è¯­æ³•è§£æã€å¥æ³•è§£æã€è¯­ä¹‰è§£æç­‰ï¼Œæ‰èƒ½ç”Ÿæˆæœ¬åœ°ä»£ç </p><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§äº¤å‰ç¼–è¯‘å™¨ ï¼Œå®ƒç”Ÿæˆçš„æ˜¯å’Œè¿è¡Œç¯å¢ƒä¸­çš„ CPU ä¸åŒçš„ CPU æ‰€ä½¿ç”¨çš„æœ¬åœ°ä»£ç ã€‚</p><p>ç¼–è¯‘å™¨è½¬æ¢æºä»£ç åï¼Œå°±ä¼šç”Ÿæˆæœ¬åœ°æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œæœ¬åœ°æ–‡ä»¶æ˜¯æ— æ³•ç›´æ¥è¿è¡Œçš„ã€‚ä¸ºäº†å¾—åˆ°å¯ä»¥è¿è¡Œçš„ EXE æ–‡ä»¶ï¼Œç¼–è¯‘ä¹‹åè¿˜éœ€è¦è¿›è¡Œâ€œé“¾æ¥â€å¤„ç†ã€‚</p><p>ç¼–è¯‘åç”Ÿæˆçš„ä¸æ˜¯ EXE æ–‡ä»¶ï¼Œè€Œæ˜¯æ‰©å±•åä¸ºâ€œ.objâ€çš„ç›®æ ‡æ–‡ä»¶ã€‚</p><p>æŠŠå¤šä¸ªç›®æ ‡æ–‡ä»¶ç»“åˆï¼Œç”Ÿæˆ 1 ä¸ª EXE æ–‡ä»¶çš„å¤„ç†å°±æ˜¯é“¾æ¥ ï¼Œè¿è¡Œè¿æ¥çš„ç¨‹åºå°±ç§°ä¸ºé“¾æ¥å™¨ ï¼ˆlinkage editor æˆ–è¿ç»“å™¨ï¼‰ã€‚</p><p>Windows ä»¥å‡½æ•°çš„å½¢å¼ä¸ºåº”ç”¨æä¾›äº†å„ç§åŠŸèƒ½ã€‚è¿™äº›å½¢å¼çš„å‡½æ•°ç§°ä¸º API ï¼ˆApplication Programming Interfaceï¼Œåº”ç”¨ç¨‹åºæ¥å£ï¼‰ã€‚</p><p>Windows ä¸­ï¼ŒAPI çš„ç›®æ ‡æ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯å­˜å‚¨åœ¨é€šå¸¸çš„åº“æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨åä¸º DLL ï¼ˆDynamic Link Libraryï¼‰æ–‡ä»¶ çš„ç‰¹æ®Šåº“æ–‡ä»¶ä¸­ã€‚</p><p>æ— è®ºæ˜¯ C è¯­è¨€è¿˜æ˜¯ C++ï¼Œå¦‚æœæ²¡æœ‰åœ¨ç¨‹åºä¸­æ˜ç¡®é‡Šæ”¾å †çš„å†…å­˜ç©ºé—´ï¼Œé‚£ä¹ˆå³ä½¿åœ¨å¤„ç†å®Œæ¯•åï¼Œè¯¥å†…å­˜ç©ºé—´ä»ä¼šä¸€ç›´æ®‹ç•™ã€‚è¿™ä¸ªç°è±¡ç§°ä¸ºå†…å­˜æ³„éœ² ï¼ˆmemory leakï¼‰ï¼Œå®ƒæ˜¯ä»¤ C è¯­è¨€åŠ C++ çš„ç¨‹åºå‘˜ä»¬ååˆ†å¤´ç–¼çš„ä¸€ä¸ª bugï¼ˆç¨‹åºçš„é”™è¯¯ï¼‰ã€‚å¦‚æœå†…å­˜æ³„éœ²ä¸€ç›´å­˜åœ¨çš„è¯ï¼Œå°±æœ‰å¯èƒ½ä¼šé€ æˆå†…å­˜ä¸è¶³è€Œå¯¼è‡´å®•æœºã€‚è¿™å°±å¥½æ¯”ï¼Œå¦‚æœæ°´é¾™å¤´ä¸€ç›´å˜€å—’å˜€å—’åœ°æ¼æ°´ï¼Œé‚£ä¹ˆä¸€æ™šä¸Šçš„æ—¶é—´æ°´æ¡¶å°±å¯èƒ½ä¼šè£…æ»¡å¹¶æº¢å‡ºã€‚</p><p>æ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼‰ä¹Ÿç§°ä¸ºåŸºç¡€è½¯ä»¶ã€‚æ“ä½œç³»ç»Ÿæ˜¯è®¡ç®—æœºè¿è¡Œæ—¶ä¸å¯æˆ–ç¼ºçš„æ§åˆ¶ç¨‹åºï¼Œä»¥åŠåœ¨æ§åˆ¶ç¨‹åºä¸‹è¿è½¬çš„ä¸ºå…¶ä»–è½¯ä»¶è¿è¡Œæä¾›æ“ä½œç¯å¢ƒçš„è½¯ä»¶çš„ç»Ÿç§°ã€‚å¦å¤–ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œçš„åº”ç”¨ä¹Ÿç§°ä¸ºâ€œåº”ç”¨ç¨‹åºâ€ã€‚</p><p>æ±‡ç¼–è¯­è¨€æºæ–‡ä»¶çš„æ‰©å±•åï¼Œé€šå¸¸ç”¨â€œ.asmâ€æ¥è¡¨ç¤ºã€‚</p><p>æ ˆ æ˜¯å­˜å‚¨ä¸´æ—¶æ•°æ®çš„åŒºåŸŸï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯é€šè¿‡ push æŒ‡ä»¤å’Œ pop æŒ‡ä»¤è¿›è¡Œæ•°æ®çš„å­˜å‚¨å’Œè¯»å‡ºã€‚å¾€æ ˆä¸­å­˜å‚¨æ•°æ®ç§°ä¸ºâ€œå…¥æ ˆâ€ï¼Œä»æ ˆä¸­è¯»å‡ºæ•°æ®ç§°ä¸ºâ€œå‡ºæ ˆâ€ã€‚</p><p>IN æŒ‡ä»¤ é€šè¿‡æŒ‡å®šç«¯å£å·çš„ç«¯å£è¾“å…¥æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ CPU å†…éƒ¨çš„å¯„å­˜å™¨ä¸­ã€‚OUT æŒ‡ä»¤ åˆ™æ˜¯æŠŠ CPU å¯„å­˜å™¨ä¸­å­˜å‚¨çš„æ•°æ®ï¼Œè¾“å‡ºåˆ°æŒ‡å®šç«¯å£å·çš„ç«¯å£ã€‚</p><p>I/O æ˜¯ Input/Output çš„ç¼©å†™ã€‚æ˜¾ç¤ºå™¨ã€é”®ç›˜ç­‰å¤–å›´è®¾å¤‡éƒ½æœ‰å„è‡ªä¸“ç”¨çš„ I/O æ§åˆ¶å™¨ã€‚I/O æ§åˆ¶å™¨ä¸­æœ‰ç”¨äºä¸´æ—¶ä¿å­˜è¾“å…¥è¾“å‡ºæ•°æ®çš„å†…å­˜ã€‚è¿™ä¸ªå†…å­˜å°±æ˜¯ç«¯å£ ã€‚</p><p>å„ç«¯å£ä¹‹é—´é€šè¿‡ç«¯å£å· è¿›è¡ŒåŒºåˆ†ã€‚ç«¯å£å·ä¹Ÿç§°ä¸º I/O åœ°å€ ã€‚</p><p>IRQ æ˜¯ç”¨æ¥æš‚åœå½“å‰æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œå¹¶è·³è½¬åˆ°å…¶ä»–ç¨‹åºè¿è¡Œçš„å¿…è¦æœºåˆ¶ã€‚è¯¥æœºåˆ¶ç§°ä¸ºä¸­æ–­å¤„ç† ã€‚ä¸­æ–­å¤„ç†åœ¨ç¡¬ä»¶æ§åˆ¶ä¸­æ‹…å½“ç€é‡è¦è§’è‰²ã€‚å› ä¸ºå¦‚æœæ²¡æœ‰ä¸­æ–­å¤„ç†ï¼Œå°±æœ‰å¯èƒ½å‡ºç°å¤„ç†æ— æ³•é¡ºç•…è¿›è¡Œçš„æƒ…å†µ</p><p>è·å–ä¼ªéšæœºæ•°çš„å…¬å¼ã€‚è¯¥å…¬å¼ç§°ä¸ºçº¿æ€§åŒä½™æ³• ã€‚å¦‚æœæŠŠ Ri ä½œä¸ºå½“å‰éšæœºæ•°çš„è¯ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå‡ºç°çš„éšæœºæ•° Ri + 1 å°±å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼æ¥è·å–ã€‚<br>R i + 1 = (a Ã— Ri + b ) mod c</p><p>è¿™ç§å‘¨æœŸæ€§æ˜¯ä¼ªéšæœºæ•°çš„ç‰¹å¾ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸æ˜¯çœŸéšæœºæ•°çš„åŸå› ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºé€šç”¨çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè®¡ç®—æœºæ˜¯æ€æ ·è·‘èµ·æ¥çš„ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/02/20/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/02/20/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘çœ‹äº†çŸ¢æ³½ä¹…é›„[æ—¥]çš„ã€Šè®¡ç®—æœºæ˜¯æ€æ ·è·‘èµ·æ¥çš„ã€‹ï¼ŒæŠŠå¤§å­¦å­¦åˆ°çš„çŸ¥è¯†åˆå¤ä¹ äº†ä¸€éï¼Œä¸»è¦åŒ…æ‹¬è®¡ç®—æœºç»„æˆåŸç†ã€æ“ä½œç³»ç»Ÿã€ç¼–ç¨‹è¯­è¨€ã€æ•°æ®åº“ç­‰çŸ¥è¯†ã€‚ä¸‹é¢æ˜¯æˆ‘è®°å½•çš„ä¸€äº›ä¹¦ä¸­çš„é‡ç‚¹ï¼š</p><p><img src="/2019/02/20/ã€Šè®¡ç®—æœºæ˜¯æ€æ ·è·‘èµ·æ¥çš„ã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€Šè®¡ç®—æœºæ˜¯æ€æ ·è·‘èµ·æ¥çš„ã€‹"></p><hr><p>è®¡ç®—æœºçš„ä¸‰å¤§åŸåˆ™ï¼š</p><ol><li>è®¡ç®—æœºæ˜¯æ‰§è¡Œè¾“å…¥ã€è¿ç®—ã€è¾“å‡ºçš„æœºå™¨</li><li>ç¨‹åºæ˜¯æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆ</li><li>è®¡ç®—æœºçš„å¤„ç†æ–¹å¼æœ‰æ—¶ä¸äººä»¬çš„æ€ç»´ä¹ æƒ¯ä¸åŒ</li></ol><p>è®¡ç®—æœºæ˜¯æ‰§è¡Œè¾“å…¥ã€è¿ç®—ã€è¾“å‡ºçš„æœºå™¨ã€‚</p><p>ç¨‹åºæ˜¯æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆã€‚</p><p>æŒ‡ä»¤ï¼Œå°±æ˜¯æ§åˆ¶è®¡ç®—æœºè¿›è¡Œè¾“å…¥ã€è¿ç®—ã€è¾“å‡ºçš„å‘½ä»¤ã€‚</p><p>ä½¿ç”¨è®¡ç®—æœºçš„ç›®çš„å°±æ˜¯ä¸ºäº†æé«˜å·¥ä½œæ•ˆç‡ã€‚</p><p>è®¡ç®—æœºå†…éƒ¨ä¸»è¦ç”±è¢«ç§°ä¸ºICçš„å…ƒä»¶ç»„æˆï¼Œè™½ç„¶åœ¨ICå®¶æ—ä¸­æœ‰åŠŸèƒ½å„å¼‚çš„å„ç§ICï¼Œä½†åœ¨è¿™é‡Œå¸Œæœ›è®°ä½çš„åªæœ‰ä¸‰ç§ï¼šCPUï¼ˆå¤„ç†å™¨ï¼‰ã€å†…å­˜ä»¥åŠI/Oã€‚CPUæ˜¯è®¡ç®—æœºçš„å¤§è„‘ï¼Œåœ¨å…¶å†…éƒ¨å¯å¯¹æ•°æ®æ‰§è¡Œè¿ç®—å¹¶æ§åˆ¶å†…å­˜å’ŒI/Oã€‚å†…å­˜ç”¨äºå­˜å‚¨æŒ‡ä»¤å’Œæ•°æ®ã€‚I/Oè´Ÿè´£æŠŠé”®ç›˜ã€é¼ æ ‡ã€æ˜¾ç¤ºç­‰å‘¨è¾¹è®¾å¤‡å’Œä¸»æœºè¿æ¥åœ¨ä¸€èµ·ï¼Œå®ç°æ•°æ®çš„è¾“å…¥å’Œè¾“å‡ºã€‚</p><p>åœ¨æœºå™¨è¯­è¨€ç¨‹åºä¸­ï¼Œè™½ç„¶éƒ½æ˜¯0å’Œ1çš„ç»„åˆï¼Œä½†æ¯ä¸ªç»„åˆéƒ½æ˜¯æœ‰ç‰¹å®šå«ä¹‰çš„æŒ‡ä»¤æˆ–æ•°æ®ã€‚å¯æ˜¯å¯¹äººç±»æ¥è¯´ï¼Œå¦‚æœåªçœ‹0å’Œ1çš„è¯ï¼Œææ€•å¾ˆéš¾åˆ¤æ–­å„ä¸ªç»„åˆéƒ½è¡¨ç¤ºä»€ä¹ˆ äºæ˜¯å°±æœ‰äººå‘æ˜äº†ä¸€ç§ç¼–ç¨‹æ–¹æ³•ï¼Œæ ¹æ®è¡¨ç¤ºæŒ‡ä»¤åŠŸèƒ½çš„è‹±è¯­å•è¯èµ·ä¸€ä¸ªç›¸ä¼¼çš„æ˜µç§°ï¼Œå¹¶å°†è¿™ä¸ªæ˜µç§°èµ‹äºˆç»™0å’Œ1çš„ç»„åˆã€‚è¿™ç§ç±»ä¼¼è‹±è¯­å•è¯çš„æ˜µç§°å«åšâ€œåŠ©è®°ç¬¦â€ï¼Œä½¿ç”¨åŠ©è®°ç¬¦çš„ç¼–ç¨‹è¯­è¨€å«åšâ€œæ±‡ç¼–è¯­è¨€â€ã€‚</p><p>æ—¢ç„¶æ•°æ®çš„è¿ç®—æ˜¯åœ¨CPUä¸­è¿›è¡Œçš„ï¼Œé‚£ä¹ˆåœ¨CPUå†…éƒ¨å°±åº”è¯¥æœ‰å­˜å‚¨æ•°æ®çš„åœ°æ–¹ã€‚è¿™ç§å­˜å‚¨æ•°æ®çš„åœ°æ–¹å«åšâ€œå¯„å­˜å™¨â€ã€‚è™½ç„¶ä¹Ÿå«å¯„å­˜å™¨ï¼Œä½†æ˜¯ä¸I/Oçš„å¯„å­˜å™¨ä¸åŒï¼ŒCPUçš„å¯„å­˜å™¨ä¸ä»…èƒ½å­˜å‚¨æ•°æ®ï¼Œè¿˜å…·å¤‡å¯¹æ•°æ®è¿›è¡Œè¿ç®—çš„èƒ½åŠ›ã€‚CPUå¸¦æœ‰ä»€ä¹ˆæ ·çš„å¯„å­˜å™¨å–å†³äºCPUçš„ç§ç±»ã€‚</p><p>Aå¯„å­˜å™¨ä¹Ÿå«åšâ€œç´¯åŠ å™¨â€ï¼Œæ˜¯è¿ç®—çš„æ ¸å¿ƒã€‚æ‰€ä»¥è¿æ¥åˆ°å®ƒä¸Šé¢çš„å¯¼çº¿ä¹Ÿä¸€å®šä¼šæ¯”å…¶ä»–å¯„å­˜å™¨å¤šã€‚<br>Få¯„å­˜å™¨ä¹Ÿå«åšâ€œæ ‡å¿—å¯„å­˜å™¨â€ï¼Œç”¨äºå­˜å‚¨è¿ç®—ç»“æœçš„çŠ¶æ€ï¼Œæ¯”å¦‚æ˜¯å¦å‘ç”Ÿäº†è¿›ä½ã€æ•°å­—å¤§å°çš„æ¯”è¾ƒç»“æœç­‰ã€‚<br>PCå¯„å­˜å™¨ä¹Ÿå«åšâ€œç¨‹åºæŒ‡é’ˆâ€ï¼Œå­˜å‚¨ç€æŒ‡å‘CPUæ¥ä¸‹æ¥è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ã€‚<br>PCå¯„å­˜å™¨çš„å€¼ä¼šéšç€æ»´ç­”æ»´ç­”çš„æ—¶é’Ÿä¿¡å·è‡ªåŠ¨æ›´æ–°ï¼Œå¯ä»¥è¯´ç¨‹åºå°±æ˜¯ä¾é ä¸æ–­å˜åŒ–çš„PCå¯„å­˜å™¨çš„å€¼è¿è¡Œèµ·æ¥çš„ã€‚<br>SPå¯„å­˜å™¨ä¹Ÿå«åšâ€œæ ˆé¡¶æŒ‡é’ˆâ€ï¼Œç”¨äºåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€å—ç§°ä¸ºâ€œæ ˆâ€çš„ä¸´æ—¶æ•°æ®å­˜å‚¨åŒºåŸŸ</p><p>ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™çš„ç¨‹åºæ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œçš„ï¼Œå¿…é¡»å…ˆè½¬æ¢æˆæœºå™¨è¯­è¨€ã€‚æœºå™¨è¯­è¨€æ˜¯å”¯ä¸€ä¸€ç§CPUèƒ½ç›´æ¥ç†è§£çš„ç¼–ç¨‹è¯­è¨€ã€‚</p><p>ç¨‹åºçš„æµç¨‹æ€»å…±æœ‰ä¸‰ç§ï¼šé¡ºåºã€æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ã€‚</p><p>ç»“æ„åŒ–ç¨‹åºè®¾è®¡å°±æ˜¯â€œä¸ºäº†æŠŠç¨‹åºç¼–å†™çš„å…·å¤‡ç»“æ„æ€§ï¼Œä»…ä½¿ç”¨é¡ºåºç»“æ„ã€æ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯è¡¨ç¤ºç¨‹åºçš„æµç¨‹å³å¯ï¼Œè€Œä¸å†ä½¿ç”¨è·³è½¬æŒ‡ä»¤â€ã€‚</p><p>ä¸­æ–­å¤„ç†æ˜¯æŒ‡è®¡ç®—æœºä½¿ç¨‹åºçš„æµç¨‹çªç„¶è·³è½¬åˆ°ç¨‹åºä¸­çš„ç‰¹å®šåœ°æ–¹ï¼Œè¿™æ ·çš„åœ°æ–¹è¢«ç§°ä¸ºä¸­æ–­å¤„ç†ä¾‹ç¨‹ï¼ˆRountineï¼‰æˆ–æ˜¯ä¸­æ–­å¤„ç†ç¨‹åºï¼ˆHandlerï¼‰ï¼Œè€Œè¿™ç§è·³è½¬æ˜¯é€šè¿‡CPUæ‰€å…·å¤‡çš„ç¡¬ä»¶åŠŸèƒ½å®ç°çš„ã€‚</p><p>ç”¨ä¸¤ä¸ªæ•°ä¸­è¾ƒå¤§çš„æ•°å‡å»è¾ƒå°çš„æ•°ï¼ˆæ­¥éª¤ï¼‰ï¼Œåå¤è¿›è¡Œä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°ä¸¤ä¸ªæ•°çš„å€¼ç›¸ç­‰ï¼ˆæ­¥éª¤çš„ç»ˆæ­¢ï¼‰ã€‚å¦‚æœæœ€ç»ˆè¿™ä¸¤ä¸ªæ•°ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯æœ€å¤§å…¬çº¦æ•°ã€‚ä¹Ÿå°±æ˜¯è‘—åçš„â€œè¾—è½¬ç›¸é™¤æ³•â€ã€‚</p><p>æ€è€ƒç®—æ³•çš„æ—¶å€™ï¼Œè¦å…ˆåœ¨çº¸ä¸Šç”¨æ–‡å­—æˆ–å›¾è¡¨æè¿°å‡ºè§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œè€Œä¸æ˜¯ç«‹å³å¼€å§‹ç¼–å†™ä»£ç ã€‚</p><p>åœ¨ä¸€èˆ¬çš„ä¸ªäººè®¡ç®—æœºä¸­ï¼Œå†…å­˜å†…éƒ¨è¢«åˆ†å‰²æˆäº†è‹¥å¹²ä¸ªæ•°æ®å­˜å‚¨å•å…ƒï¼Œæ¯ä¸ªå•å…ƒå¯å­˜å‚¨8æ¯”ç‰¹çš„æ•°æ®ï¼ˆ8æ¯”ç‰¹=1å­—èŠ‚ï¼‰ã€‚ä¸ºäº†åŒºåˆ†å„ä¸ªå•å…ƒï¼Œæ¯ä¸ªå•å…ƒéƒ½è¢«åˆ†é…äº†ä¸€ä¸ªç¼–å·ï¼Œè¿™ä¸ªç¼–å·è¢«ç§°ä¸ºâ€œåœ°å€â€ï¼ˆé—¨ç‰Œå·ç ï¼‰ã€‚å¦‚æœä¸€å°ä¸ªäººè®¡ç®—æœºè£…é…æœ‰64Må­—èŠ‚å†…å­˜ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ä»0åˆ°64Mï¼ˆ1M=100ä¸‡ï¼‰è¿™ä¹ˆå¤šä¸ªåœ°å€ã€‚</p><p>æ•°ç»„æ˜¯æ•°æ®ç»“æ„çš„åŸºç¡€ï¼Œåªè¦ä½¿ç”¨æ•°ç»„å°±èƒ½é€šè¿‡ç¨‹åºå®ç°å„ç§å„æ ·çš„ç®—æ³•ä»¥å¤„ç†å¤§é‡çš„æ•°æ®</p><p>â€œç»§æ‰¿â€ï¼ˆInheritanceï¼‰ï¼Œâ€œå°è£…â€ï¼ˆEncapsulationï¼‰ï¼Œâ€œå¤šæ€â€ï¼ˆPolymorphismï¼Œä¹Ÿç§°ä¸ºå¤šæ ·æ€§å’Œå¤šä¹‰æ€§ï¼‰è¢«ç§°ä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰ä¸ªåŸºæœ¬ç‰¹æ€§ã€‚</p><p>ç»§æ‰¿æŒ‡çš„æ˜¯é€šè¿‡ç»§æ‰¿å·²å­˜åœ¨çš„ç±»æ‰€æ‹¥æœ‰çš„æˆå‘˜è€Œç”Ÿæˆæ–°çš„ç±»ã€‚<br>å°è£…æŒ‡çš„æ˜¯åœ¨ç±»æ‰€æ‹¥æœ‰çš„æˆå‘˜ä¸­ï¼Œéšè—æ‰é‚£äº›æ²¡æœ‰å¿…è¦å±•ç¤ºç»™è¯¥ç±»è°ƒç”¨è€…çš„æˆå‘˜ã€‚<br>å¤šæ€æŒ‡çš„æ˜¯é’ˆå¯¹åŒä¸€ç§æ¶ˆæ¯ï¼Œä¸åŒçš„å¯¹è±¡å¯ä»¥è¿›è¡Œä¸åŒçš„æ“ä½œ</p><p>æ•°æ®åº“è¿›è¡Œçš„æ“ä½œçš„ç§ç±»é€šå¸¸ç§°ä¸ºCRUDã€‚CRUDç”±ä»¥ä¸‹å››ç§æ“ä½œçš„è‹±æ–‡åç§°çš„é¦–å­—æ¯ç»„æˆï¼Œå³è®°å½•çš„æ’å…¥ï¼ˆCreateï¼‰ã€è·å–ï¼ˆReferï¼‰ã€æ›´æ–°ï¼ˆUpdateï¼‰ã€åˆ é™¤ï¼ˆDeleteï¼‰ã€‚</p><p>ä¸ºäº†å¯¹æ•°æ®åº“è¿›è¡ŒCRUDæ“ä½œï¼Œå°±å¿…é¡»ä»åº”ç”¨ç¨‹åºå‘DBMSå‘é€å‘½ä»¤ã€‚è¿™é‡Œæ‰€ä½¿ç”¨çš„å‘½ä»¤å°±æ˜¯SQLè¯­è¨€ï¼ˆStructural Query Languageï¼Œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰ã€‚</p><p>CRUDä¸­çš„C,R,U,Dåˆ†åˆ«å¯¹åº”ç€SQLè¯­è¨€ä¸­çš„INSERTï¼ˆæ’å…¥ï¼‰ã€SELECTï¼ˆæŸ¥è¯¢ï¼‰ã€UPDATEï¼ˆæ›´æ–°ï¼‰ã€DELETEï¼ˆåˆ é™¤ï¼‰è¯­å¥ã€‚</p><p>åœ¨æ¯å—ç½‘å¡çš„ROMï¼ˆRead Only Memoryï¼Œåªè¯»å­˜å‚¨å™¨ï¼‰ä¸­éƒ½é¢„å…ˆçƒ§å½•ä¸€ä¸ªå”¯ä¸€çš„MACåœ°å€ã€‚ç½‘å¡åˆ¶é€ å‚å•†è´Ÿè´£ç¡®å®šè¿™ä¸ªMACåœ°å€æ˜¯ä»€ä¹ˆã€‚å› ä¸ºMACåœ°å€æ˜¯ç”±åˆ¶é€ å‚å•†çš„ç¼–å·å’Œäº§å“ç¼–å·ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ‰€ä»¥ä¸–ç•Œä¸Šçš„æ¯ä¸ªMACåœ°å€éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚</p><p>åœ¨å› ç‰¹ç½‘çš„ä¸–ç•Œä¸­ï¼Œåˆ°å¤„ä¼ è¾“çš„éƒ½æ˜¯é™„å¸¦äº†IPåœ°å€çš„æ•°æ®ï¼Œä½†èƒ½å¤Ÿæ ‡è¯†ä½œä¸ºæ•°æ®æœ€ç»ˆæ¥æ”¶è€…çš„ç½‘å¡çš„ï¼Œè¿˜æ˜¯MACåœ°å€ã€‚äºæ˜¯åœ¨è®¡ç®—æœºä¸­å°±åŠ å…¥äº†ä¸€ç§ç¨‹åºï¼Œç”¨äºå®ç°ç”±IPåœ°å€åˆ°MACåœ°å€çš„è½¬æ¢ï¼Œè¿™ç§åŠŸèƒ½è¢«ç§°ä¸ºARPï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰ã€‚</p><p>åœ¨å…¬å¼€å¯†é’¥åŠ å¯†æŠ€æœ¯ä¸­ï¼Œç”¨äºåŠ å¯†çš„å¯†é’¥å¯ä»¥å…¬å¼€ç»™å…¨ä¸–ç•Œï¼Œå› æ­¤ç§°ä¸ºâ€œå…¬é’¥â€ï¼Œè€Œç”¨äºè§£å¯†çš„å¯†é’¥æ˜¯åªæœ‰è‡ªå·±æ‰çŸ¥é“çš„ç§˜å¯†ï¼Œå› æ­¤ç§°ä¸ºâ€œç§é’¥â€ã€‚</p><p>è‹¥ç«‹å¿—æˆä¸ºè®¡ç®—æœºè¡Œä¸šçš„ä¸“å®¶ï¼Œå°±ä¸èƒ½ä»…ä»…å…³æ³¨æŠ€æœ¯äº†ã€‚è™½ç„¶åˆæ‡‚æŠ€æœ¯åˆæ‡‚è®¡ç®—æœºç¡®å®ä»¤äººæ„Ÿåˆ°å…´å¥‹ï¼Œä½†å¦‚æœåªæ˜¯è¿™æ ·çš„è¯ï¼Œæ—©æ™šæœ‰ä¸€å¤©å·¥ä½œä¼šå˜å¾—æ²¡é‚£ä¹ˆæœ‰æ„æ€ã€‚æœ‰äº›äººåœ¨30å²å·¦å³å°±é€‰æ‹©ç¦»å¼€è®¡ç®—æœºè¡Œä¸šï¼Œä¸æ˜¯å› ä¸ºä»–ä»¬è¿½èµ¶ä¸ä¸ŠæŠ€æœ¯å‰è¿›çš„æ­¥ä¼ï¼Œè€Œæ˜¯å› ä¸ºè§‰å¾—å·¥ä½œå˜å¾—æ— èŠäº†ã€‚ä¸“å®¶ä¹Ÿå¥½ï¼Œæ™®é€šäººä¹Ÿç½¢ï¼Œåªæœ‰æˆç†Ÿæ„Ÿæ‰ä¼šè§‰å¾—å·¥ä½œæœ‰æ„ä¹‰ã€‚</p><p>SEï¼ˆSystem Engineerç³»ç»Ÿå·¥ç¨‹å¸ˆï¼‰ä¹Ÿå¥½ï¼Œç¨‹åºå‘˜ä¹Ÿç½¢ï¼Œæ‰€æœ‰å’Œè®¡ç®—æœºç›¸å…³çš„å·¥ç¨‹å¸ˆéƒ½è¦æœ‰è¿™æ ·ä¸€ç§æ„è¯†ï¼šæˆ‘ä»¬è¦è®©è®¡ç®—æœºæŠ€æœ¯æœåŠ¡äºç¤¾ä¼šã€‚å¦‚æœèƒ½æœ‰è¿™æ ·çš„å†³å¿ƒï¼Œå°±åº”è¯¥èƒ½å¤Ÿä½œä¸ºä¸€ç”Ÿçš„äº‹ä¸šå’Œè®¡ç®—æœºæ„‰å¿«åœ°ç›¸å¤„ä¸‹å»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºé€šç”¨çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬åœ°ç†å¯è’™ä¹¦ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/2019/02/17/%E3%80%8A%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E6%9C%AC%E5%9C%B0%E7%90%86%E5%90%AF%E8%92%99%E4%B9%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/02/17/%E3%80%8A%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E6%9C%AC%E5%9C%B0%E7%90%86%E5%90%AF%E8%92%99%E4%B9%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æ–°å¹´ç¬¬ä¸€ç¯‡ç¬”è®°ï¼Œç¥æ„¿å¤§å®¶æ–°å¹´å¿«ä¹ã€‚<br>ä½œä¸ºä¸€å¹´åªå›å»ä¸€æ¬¡å®¶çš„æˆ‘ï¼Œç»™äº²æˆšçš„ç¤¼ç‰©æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå…¶ä¸­è¿™æœ¬ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬åœ°ç†å¯è’™ä¹¦ã€‹å°±æ˜¯æˆ‘é€ç»™äº²æˆšå®¶å°æœ‹å‹çš„ä¸€æœ¬å°ä¹¦ã€‚å›å®¶åäº†å°†è¿‘30ä¸ªå°æ—¶çš„ç«è½¦çš„æˆ‘ä¹Ÿæ˜¯ç‹¬è‡ªæŠŠè¿™æœ¬ä¹¦çœ‹å®Œäº†ã€‚</p><p><img src="/2019/02/17/ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬åœ°ç†å¯è’™ä¹¦ã€‹è¯»ä¹¦ç¬”è®°/1.jpg" alt="ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬åœ°ç†å¯è’™ä¹¦ã€‹"></p><p>è¿™æœ¬ä¹¦é€‚åˆå°å­¦å’Œåˆä¸­çš„å°æœ‹å‹ï¼Œå†…å®¹ä¹Ÿæ˜¯æŒºæœ‰æ„æ€çš„ï¼Œä¸‹é¢æ˜¯æˆ‘è§‰å¾—ä¸€äº›æ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†ï¼š</p><p>ä¸€ã€æ–¹ä½æœ‰ä¸œå—è¥¿åŒ—ï¼Œè¿˜æœ‰ä¸œåŒ—ã€ä¸œå—ã€è¥¿åŒ—ã€è¥¿å—ï¼Œä¸ºä»€ä¹ˆä¸å«åŒ—ä¸œã€å—ä¸œã€åŒ—è¥¿ã€å—è¥¿ç­‰å‘¢ï¼Ÿ<br>æœ‰ç§è¯´æ³•æ˜¯ï¼Œäººä»¬åœ¨å‘½åè¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¼šéµå¾ªç”±æ˜“åˆ°éš¾ï¼Œç”±ç®€å•åˆ°å¤æ‚çš„åŸåˆ™ã€‚æ—¥å¸¸ç”Ÿæ´»ä¸­å¤ªé˜³ä»ä¸œè¾¹å‡èµ·ï¼Œè¥¿è¾¹è½ä¸‹ï¼Œè¢«äººç”¨æ¥ä½œä¸ºå®šä¹‰çš„åŸºç¡€ï¼Œåæ¥åˆåœ¨æ­¤åŸºç¡€ä¸Šè¡ç”Ÿå‡ºå—åŒ—ä¸¤ä¸ªæ–¹å‘ã€‚</p><p>äºŒã€ä¸ºä»€ä¹ˆæŒ‡å—é’ˆä¸å«æŒ‡åŒ—é’ˆï¼Ÿ<br>æœ‰ç§è¯´æ³•æ˜¯å› ä¸ºå—æ–¹æœé˜³ï¼Œä»£è¡¨ç”Ÿæœºå’Œå°Šè´µï¼Œæ‰€ä»¥å¤§å®¶éƒ½å«æŒ‡å—é’ˆã€‚</p><p>ä¸‰ã€è¾¨åˆ«æ–¹ä½çš„æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨æŒ‡å—é’ˆ</li><li>æœ¨æå¶ç¨ å¯†çš„ä¸€æ–¹æ˜¯å—æ–¹</li><li>è‹”è—“ç¨ å¯†çš„ä¸€æ–¹æ˜¯åŒ—æ–¹ï¼ˆè‹”è—“å–œé˜´ï¼‰</li><li>å¹´è½®ç¨€ç–çš„æ˜¯å—æ–¹ï¼ˆæœå—é•¿å¾—å¿«ï¼‰</li><li>é›ªèåŒ–å¿«çš„æ˜¯å—æ–¹</li><li>èš‚èšçªä¸€èˆ¬åœ¨æ ‘çš„å—è¾¹ï¼ˆå—è¾¹æ¸©æš–ï¼‰</li></ol><p>å››ã€åœ°åå¸¸ç”¨çš„å‘½åè§„åˆ™ï¼š</p><ol><li>æ²³å±±æ˜¯å¤§åœ°çš„ç¬¦å·ï¼Œä¸­å›½å¾ˆå¤šåœ°åéƒ½ä¸æ²³å±±æœ‰å…³ç³»ï¼Œé€šå¸¸ç”¨æ²³ä¸å±±ä¸ºç•Œã€‚<br> æ¯”å¦‚æ²³åŒ—ï¼Œæ²³å—ï¼Œä»¥é»„æ²³ä¸ºç•Œã€‚<br> æ¹–åŒ—ï¼Œæ¹–å—ï¼Œä»¥æ´åº­æ¹–ä¸ºç•Œã€‚<br> å—å²³è¡¡å±±é™„è¿‘æœ‰è¡¡å±±å¿ è¡¡ä¸œ è¡¡é˜³ç­‰ã€‚<br> æ·®æ²³æ²¿å²¸æœ‰æ·®å®‰ æ·®åŒ— æ·®å—ç­‰</li><li>å¤äººç§°ï¼šâ€œå±±å—æ°´åŒ—è°“ä¹‹é˜³ï¼Œå±±åŒ—æ°´å—è°“ä¹‹é˜´ã€‚â€ä¹Ÿå°±æ˜¯åŒ—è¾¹æ˜¯é˜³ï¼Œå—è¾¹æ˜¯é˜´ã€‚<br>å°±æ¯”å¦‚ï¼Œå’¸é˜³å°±æ˜¯æ¸­æ°´åŒ—è¾¹ï¼ˆå’¸æœ‰å…¨éƒ¨çš„æ„æ€ï¼‰ã€‚<br>é‚µé˜³ï¼Œå°±æ˜¯é‚µæ°´çš„åŒ—è¾¹ã€‚<br>æ·®é˜³ã€æ±¾é˜³ã€æ²ˆé˜³ã€æ´›é˜³ã€æ±‰é˜³åˆ†åˆ«æ˜¯æ·®æ²³ã€æ±¾æ°´ã€æ²ˆæ°´ã€æ´›æ²³ã€æ±‰æ°´çš„åŒ—è¾¹ã€‚<br>æ±Ÿé˜´ã€æ·®é˜´ã€æ±‰é˜´ã€æ¹˜é˜´åˆ†åˆ«æ˜¯é•¿æ±Ÿã€æ·®æ²³ã€æ±‰æ°´ã€æ¹˜æ±Ÿçš„å—è¾¹ã€‚</li><li>æ²³æµçš„å‘æºåœ°é€šå¸¸ç§°ä¸ºæºã€‚<br>æ¯”å¦‚æ¹Ÿæºï¼Œå°±æ˜¯é»„æ²³æ”¯æµæ¹Ÿæ°´çš„æºå¤´ã€‚</li><li>ä½äºæ±Ÿæ²³ä¸­æ¸¸çš„åœ°åé€šå¸¸å‰é¢åŠ ä¸´ï¼Œå¦‚ä¸´æ²‚ã€‚</li><li>æ¥è¿‘æ²³å£çš„åœ°æ–¹ï¼Œé€šå¸¸åé¢åŠ ä¸ªå£ã€‚å¦‚æ±‰å£ï¼ŒæŒ‡æ±‰æ±Ÿæµå…¥é•¿æ±Ÿçš„åœ°æ–¹ã€‚</li><li>æœ‰çš„åœ°æ–¹èƒ½æ”¿æ²»å®‰å®šï¼Œå®‰å±…ä¹ä¸šé€šå¸¸ä¼šåŠ å®‰ã€å®ã€å¹³ã€å®šï¼Œæ¯”å¦‚å»¶å®‰ã€‚</li><li>äººæ–‡å†å²å…¸æ•…ä¹Ÿæ˜¯å‘½åçš„ä¸€ä¸ªè§„åˆ™ã€‚</li></ol><p>äº”ã€ä¸ºä»€ä¹ˆæ°´æ€»æ˜¯ä»è¥¿å‘ä¸œï¼Ÿ<br>å› ä¸ºæ°´å¾€ä½å¤„æµï¼Œæˆ‘å›½åœ°åŠ¿æ˜¯è¥¿é¢é«˜ï¼Œä¸œé¢ä½ã€‚</p><p>å…­ã€åœ°çƒä»¥èµ¤é“ä¸ºå—åŒ—åŠçƒçš„åˆ†ç•Œçº¿ã€‚</p><p>ä¸ƒã€åœ°çƒä¸Šç«–ç€çš„æ˜¯ç»çº¿ï¼Œæ¨ªç€çš„æ˜¯çº¬çº¿ã€‚<br>èµ¤é“ä»¥åŒ—æ˜¯åŒ—çº¬ï¼Œå—è¾¹æ˜¯å—çº¬ï¼Œå„90åº¦ã€‚<br>åŒ—æç‚¹å’Œå—æç‚¹æ˜¯90åº¦ï¼Œèµ¤é“æ˜¯0åº¦ã€‚<br>ç»çº¿ä»¥è‹±å›½æ ¼æ—å°¼æ²»å¤©æ–‡å°ä¸º0åº¦ï¼ˆå³æœ¬åˆå­åˆçº¿ï¼‰ã€‚<br>æœ¬åˆå­åˆçº¿ä»¥ä¸œæ˜¯ä¸œç»ï¼Œä»¥è¥¿ä¸ºè¥¿ç»ï¼Œå„180åº¦ã€‚<br>ä¸œç»180åº¦å’Œè¥¿ç»180åº¦åœ¨å¤ªå¹³æ´‹ä¸Šé‡å ã€‚<br>ä¸œè¥¿åŠçƒä»¥è¥¿ç»20åº¦å’Œä¸œç»160åº¦æ¥åˆ’åˆ†ï¼ˆä¸æ˜¯0åº¦ï¼‰ã€‚</p><p>å…«ã€åœ°çƒæœç€å¤ªé˜³çš„ä¸€é¢ä¸ºç™½å¤©ï¼ŒèƒŒç€å¤ªé˜³çš„ä¸€é¢æ˜¯é»‘å¤œã€‚</p><p>ä¹ã€åœ°çƒä¼šè‡ªè½¬å’Œæ»šè½¬ï¼Œè‡ªè½¬æ˜¯ç»•ç€åœ°è½´è½¬çš„ï¼Œæ˜¯å—åŒ—æç‚¹çš„è¿çº¿ã€‚ä½†æ˜¯è¿™ä¸ªçº¿ä¸æ˜¯å‚ç›´äºæ»šè½¬çš„å¹³é¢ï¼Œä»è€Œæœ‰äº†ä¸€å¹´å››å­£ã€‚</p><p>åã€è¿‘æ—¥ç‚¹è¿œæ—¥ç‚¹<br>å„ä¸ªæ˜Ÿä½“ç»•å¤ªé˜³å…¬è½¬çš„è½¨é“å¤§è‡´æ˜¯ä¸€ä¸ªæ¤­åœ†ï¼Œå®ƒçš„é•¿ç›´å¾„å’ŒçŸ­ç›´å¾„ç›¸å·®ä¸å¤§ï¼Œå¯è¿‘ä¼¼ä¸ºæ­£åœ†ã€‚å¤ªé˜³å°±åœ¨è¿™ä¸ªæ¤­åœ†çš„ä¸€ä¸ªç„¦ç‚¹ä¸Šï¼Œè€Œç„¦ç‚¹æ˜¯ä¸åœ¨æ¤­åœ†ä¸­å¿ƒçš„ï¼Œå› æ­¤æ˜Ÿä½“ç¦»å¤ªé˜³çš„è·ç¦»ï¼Œå°±æœ‰æ—¶ä¼šè¿‘ä¸€ç‚¹ï¼Œæœ‰æ—¶ä¼šè¿œä¸€ç‚¹ã€‚ç¦»å¤ªé˜³æœ€è¿‘çš„æ—¶å€™ï¼Œè¿™ä¸€ç‚¹ä½ç½®å«åšè¿‘æ—¥ç‚¹ã€‚ç¦»å¤ªé˜³æœ€è¿œçš„æ—¶å€™ï¼Œè¿™ä¸€ç‚¹ä½ç½®å«åšè¿œæ—¥ç‚¹ã€‚<br>1æœˆåˆï¼Œåœ°çƒç¦»å¤ªé˜³è·ç¦»æœ€è¿‘ï¼Œä¸º1.471äº¿åƒç±³ï¼Œè¿™ä¸€ç‚¹å°±æ˜¯è¿‘æ—¥ç‚¹ã€‚<br>7æœˆåˆåœ°çƒç¦»å¤ªé˜³æœ€è¿œï¼Œä¸º1.52äº¿åƒç±³ï¼Œè¿™ä¸€ç‚¹å°±æ˜¯è¿œæ—¥ç‚¹ã€‚<br>è™½ç„¶è¿‘æ—¥ç‚¹åœ¨1æœˆå¹¶ä¸ä»£è¡¨1æœˆæ˜¯æœ€çƒ­çš„ï¼Œæ¸©åº¦è¿˜è·Ÿé˜³å…‰æ˜¯å¦ç›´å°„æœ‰å…³ã€‚</p><p>åä¸€ã€åœ°çƒäº”å¸¦ï¼šåŒ—å¯’å¸¦ã€åŒ—æ¸©å¸¦ã€çƒ­å¸¦ã€å—æ¸©å¸¦ã€å—å¯’å¸¦ã€‚</p><p>åäºŒã€æœ€åæ”¾ä¸€å¼ å›¾ç‰‡ï¼Œå¦‚æœé¡¿æ‚Ÿè¯¥å›¾ç‰‡å°±ä¼šæ˜ç™½å››å­£æ›´æ›¿ã€ææ˜¼ã€æå¤œç­‰åœ°ç†çŸ¥è¯†ï¼š<br><img src="/2019/02/17/ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬åœ°ç†å¯è’™ä¹¦ã€‹è¯»ä¹¦ç¬”è®°/2.jpg" alt="åœ°çƒæ»šè½¬ç¤ºæ„å›¾"></p>]]></content>
      
      
      <categories>
          
          <category> åœ°ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åœ°ç† </tag>
            
            <tag> è¯»ä¹¦ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€importæ¥æ‹†åˆ†ä»£ç åå‘å¸ƒé—®é¢˜</title>
      <link href="/2019/01/30/dynamic-import-deploy-issue/"/>
      <url>/2019/01/30/dynamic-import-deploy-issue/</url>
      
        <content type="html"><![CDATA[<p>å½“ä½¿ç”¨SPAï¼ˆå•é¡µåº”ç”¨ï¼‰çš„æ—¶å€™ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨<code>åŠ¨æ€import</code>æ¥æ‹†åˆ†ä»£ç ã€‚è¿™ç§æƒ…å†µå‘å¸ƒçš„æ—¶å€™å¯èƒ½ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼š</p><p>å‡å¦‚ç”¨æˆ·åœ¨å‘å¸ƒå‰å·²ç»è¿›å…¥è¯¥åº”ç”¨ï¼Œå½“ç”¨æˆ·åœ¨å‘å¸ƒåå†è¿›å…¥æŸä¸ªå¼•å…¥åˆ†ç‰‡ä»£ç çš„çš„ç•Œé¢ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½é¡µé¢é™æ€èµ„æºçš„è·¯å¾„æ˜¯æ—§çš„ï¼Œè€ŒæœåŠ¡å™¨æ–°å‘å¸ƒçš„èµ„æºè·¯å¾„æ˜¯æ–°çš„ï¼ˆå¤§å¤šæ•°è·¯å¾„ä¸ä¸€æ ·æ˜¯æ–‡ä»¶åçš„hashå€¼ä¸åŒå¯¼è‡´çš„ï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿå‡è®¾æ˜¯è¿™æ ·æƒ…å†µï¼‰ï¼Œé‚£ä¹ˆä¸¤ä¸ªè·¯å¾„ä¸ä¸€æ ·ï¼Œä»è€Œå¯¼è‡´<code>404</code>çš„å‘ç”Ÿã€‚</p><p>æˆ‘ä»¬è¿™é‡Œè®²ä¸€ç§ç®€å•çš„å¤„ç†æ–¹æ³•ï¼š</p><ol><li>è®¾ç½®HTMLä¸ç¼“å­˜</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Cache"</span> <span class="attr">content</span>=<span class="string">"no-cache"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache"</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ç»™åŠ¨æ€å¼•å…¥çš„JSåŠ ä¸Šhashå€¼ï¼Œè¿™ä¸€å—ä¸æ‡‚çš„å¯ä»¥çœ‹<a href="/blog/2019/01/30/dynamic-import-named/" title="webpackä¸­åŠ¨æ€import()æ‰“åŒ…åçš„æ–‡ä»¶åç§°å®šä¹‰">è¿™ç¯‡æ–‡ç« </a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ¨æ€importå¤„ä»£ç </span></span><br><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "[request]" */</span><span class="string">`../../containers/<span class="subst">$&#123;requestPath&#125;</span>`</span>)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="comment">//... å…¶ä»–ä»£ç </span></span><br><span class="line">output: &#123;</span><br><span class="line">    <span class="comment">//... å…¶ä»–ä»£ç </span></span><br><span class="line">    filename: <span class="string">'[name].[hash].js'</span>,</span><br><span class="line">    chunkFilename: <span class="string">'[name].[hash].js'</span>,<span class="comment">//è¿™é‡Œä½¿ç”¨hash,ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„hashå…·ä½“æŒ‰è‡ªå·±çš„é¡¹ç›®æ¥å®š</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//... å…¶ä»–ä»£ç </span></span><br></pre></td></tr></table></figure><ol start="3"><li>è®¾ç½®ç¼“å­˜å¤´ä¿¡æ¯</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯koa2åšä¸ºæœåŠ¡å™¨çš„ æ ¹æ®ä½¿ç”¨çš„æœåŠ¡å™¨æ¥è®¾ç½®å“åº”å¤´ä¿¡æ¯å°±å¯ä»¥äº†</span></span><br><span class="line">app.use(<span class="built_in">require</span>(<span class="string">'koa-static'</span>)(__dirname + <span class="string">'/public'</span>,&#123;</span><br><span class="line">    maxage:<span class="number">1209600000</span><span class="comment">//è¿™ä¸ªæ—¶é—´æ ¹æ®å…·ä½“çš„é¡¹ç›®æ¥è‡ªå·±å®š</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤å°±å¯ä»¥äº†ï¼Œå½“ç”¨æˆ·åœ¨å‘å¸ƒåå†è¿›å…¥æŸä¸ªå¼•å…¥åˆ†ç‰‡ä»£ç çš„çš„ç•Œé¢ï¼Œé‚£ä¹ˆé¡µé¢ä¸­çš„å¼•ç”¨æ˜¯æ—§çš„èµ„æºè·¯å¾„ï¼Œç”±äºé¡µé¢æœ‰ç¼“å­˜é‚£ä¹ˆä¸ä¼šæŠ¥é”™ã€‚å½“ç”¨æˆ·æ–°è¿›å…¥é¡µé¢çš„æ—¶å€™ï¼ˆæ¯”å¦‚åˆ·æ–°ä¸€ä¸‹ï¼‰é‚£ä¹ˆç”±äº<code>HTML</code>æ–‡ä»¶æ˜¯ä¸ç¼“å­˜çš„ï¼Œå®ƒå¼•å…¥çš„<code>js</code>ä¹Ÿæ˜¯æ–°çš„è·¯å¾„ï¼Œè€Œåˆ†ç‰‡è·¯å¾„ä¹Ÿæ˜¯æ–°çš„ï¼Œæ‰€ä»¥ç•Œé¢å°±ä¸ä¼šæŠ¥é”™äº†ã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯æœåŠ¡ç«¯æ–°å‘å¸ƒçš„ä»£ç æœ€å¥½å¯ä»¥å…¼å®¹ä¸€ä¸‹æ—§çš„ç•Œé¢ï¼Œæ¯”å¦‚æ—§çš„ç•Œé¢è¦æŠ¥ä¸ªé”™ä»€ä¹ˆçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dynamic import </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackä¸­åŠ¨æ€import()æ‰“åŒ…åçš„æ–‡ä»¶åç§°å®šä¹‰</title>
      <link href="/2019/01/30/dynamic-import-named/"/>
      <url>/2019/01/30/dynamic-import-named/</url>
      
        <content type="html"><![CDATA[<p>åŠ¨æ€<code>import()</code>æ‰“åŒ…å‡ºæ¥æ–‡ä»¶çš„nameæ˜¯æŒ‰ç…§<code>0,1,2...</code>ä¾æ¬¡æ’åˆ—ï¼Œå¦‚<code>0.js</code>ã€<code>1.js</code>ç­‰ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬å¸Œæœ›æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åæ˜¯æ‰“åŒ…å‰çš„æ–‡ä»¶åç§°ã€‚è¦å®ç°è¿™ï¼Œéœ€è¦ç»å†3ä¸ªæ­¥éª¤ï¼š<br>1.åœ¨<code>webpack</code>é…ç½®æ–‡ä»¶ä¸­çš„<code>output</code>ä¸­æ·»åŠ <code>chunkFilename</code>ã€‚å‘½åè§„åˆ™æ ¹æ®è‡ªå·±çš„é¡¹ç›®æ¥å®šï¼Œå…¶ä¸­<code>[name]</code>å°±æ˜¯æ–‡ä»¶åï¼Œè¿™ä¸€å—æ›´è¯¦ç»†çš„è¯´æ˜è¯·<a href="https://www.webpackjs.com/configuration/output/#output-chunkfilename" title="chunkfilename" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a>ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¶ä»–ä»£ç ...</span></span><br><span class="line">output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'public'</span>),</span><br><span class="line">    filename: <span class="string">'[name].[hash:8].js'</span>,</span><br><span class="line">    chunkFilename: <span class="string">'[name].[hash:8].js'</span>,<span class="comment">//åŠ¨æ€importæ–‡ä»¶å</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//å…¶ä»–ä»£ç ...</span></span><br></pre></td></tr></table></figure></p><p>2.åœ¨åŠ¨æ€<code>import()</code>ä»£ç å¤„æ·»åŠ æ³¨é‡Š<code>webpackChunkName</code>å‘Šè¯‰webpackæ‰“åŒ…åçš„chunkçš„åç§°ï¼ˆæ³¨é‡Šä¸­çš„å†…å®¹å¾ˆé‡è¦ï¼Œä¸èƒ½çœæ‰ï¼‰ï¼Œè¿™é‡Œæ‰“åŒ…ä»¥åçš„nameå°±æ˜¯MyFileã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "MyFile" */</span><span class="string">`../containers/MyFile`</span>)</span><br></pre></td></tr></table></figure></p><p>3.å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€<code>import()</code>æ˜¯é€šè¿‡å¾ªç¯æ¥åšçš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¾—ä¸å¼•å…¥å˜é‡äº†ï¼Œä½¿ç”¨<code>[request]</code>æ¥å‘Šè¯‰webpackï¼Œè¿™é‡Œçš„å€¼æ˜¯æ ¹æ®åé¢ä¼ å…¥çš„å­—ç¬¦ä¸²æ¥å†³å®šï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯å˜é‡<code>pathName</code>çš„å€¼ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "[request]" */</span><span class="string">`../containers/<span class="subst">$&#123;pathName&#125;</span>`</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dynamic import </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSSæ”¹å˜inputå…‰æ ‡é¢œè‰²</title>
      <link href="/2019/01/25/caret-color/"/>
      <url>/2019/01/25/caret-color/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬å¯èƒ½ä¼šæœ‰æ”¹å˜inputå…‰æ ‡é¢œè‰²çš„éœ€æ±‚ï¼Œè°·æ­Œæµè§ˆå™¨çš„é»˜è®¤å…‰æ ‡é¢œè‰²æ˜¯é»‘è‰²çš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°GitHubä¸Šçš„å…‰æ ‡å´æ˜¯ç™½è‰²ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨CSSæ€ä¹ˆæ”¹å˜å‘¢?<br><img src="/2019/01/25/caret-color/1.gif" alt="é»˜è®¤çš„é»‘è‰²å…‰æ ‡"><br><img src="/2019/01/25/caret-color/2.gif" alt="GitHubç™½è‰²çš„å…‰æ ‡"></p><hr><p>è¿™ç§æ•ˆæœæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><h4 id="1-ä½¿ç”¨coloræ¥å®ç°"><a href="#1-ä½¿ç”¨coloræ¥å®ç°" class="headerlink" title="1.ä½¿ç”¨coloræ¥å®ç°"></a>1.ä½¿ç”¨coloræ¥å®ç°</h4><p>å…‰æ ‡çš„é¢œè‰²æ˜¯ç»§æ‰¿è‡ªå½“å‰è¾“å…¥æ¡†å­—ä½“çš„é¢œè‰²ï¼Œæ‰€ä»¥ç”¨<code>color</code>å±æ€§å³å¯æ”¹å˜ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>&#123;</span><br><span class="line"><span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2019/01/25/caret-color/3.gif" alt="ä½¿ç”¨colorå±æ€§ä¿®æ”¹"></p><h4 id="2-ä½¿ç”¨caret-coloræ¥å®ç°"><a href="#2-ä½¿ç”¨caret-coloræ¥å®ç°" class="headerlink" title="2.ä½¿ç”¨caret-coloræ¥å®ç°"></a>2.ä½¿ç”¨caret-coloræ¥å®ç°</h4><p>ä¸Šä¸€ç§æ–¹å¼å·²ç»ä¿®æ”¹äº†å…‰æ ‡çš„é¢œè‰²ä½†æ˜¯å­—ä½“çš„é¢œè‰²ä¹Ÿæ”¹å˜äº†ï¼Œå¦‚æœåªæƒ³æ”¹å˜å…‰æ ‡çš„é¢œè‰²è€Œä¸æ”¹å˜å­—ä½“çš„é¢œè‰²é‚£å°±ä½¿ç”¨<code>caret-color</code>å±æ€§:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>&#123;</span><br><span class="line"><span class="attribute">caret-color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2019/01/25/caret-color/4.gif" alt="ä½¿ç”¨caret-colorå±æ€§ä¿®æ”¹"></p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSSè¯­æ³• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
